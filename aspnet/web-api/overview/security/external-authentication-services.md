---
uid: web-api/overview/security/external-authentication-services
title: Servicios de autenticación externo con ASP.NET Web API (C#) | Documentos de Microsoft
author: rmcmurray
description: Describe cómo utilizar los servicios de autenticación externos en ASP.NET Web API.
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/26/2013
ms.topic: article
ms.assetid: 3bb8eb15-b518-44f5-a67d-a27e051aedc6
ms.technology: dotnet-webapi
ms.prod: .net-framework
msc.legacyurl: /web-api/overview/security/external-authentication-services
msc.type: authoredcontent
ms.openlocfilehash: 406a85db7055910cb7a4e15fec8ef68dff5a19dc
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
---
<a name="external-authentication-services-with-aspnet-web-api-c"></a><span data-ttu-id="16a7b-103">Servicios de autenticación externo con ASP.NET Web API (C#)</span><span class="sxs-lookup"><span data-stu-id="16a7b-103">External Authentication Services with ASP.NET Web API (C#)</span></span>
====================
<span data-ttu-id="16a7b-104">por [Robert McMurray](https://github.com/rmcmurray)</span><span class="sxs-lookup"><span data-stu-id="16a7b-104">by [Robert McMurray](https://github.com/rmcmurray)</span></span>

<span data-ttu-id="16a7b-105">Visual Studio 2013 y ASP.NET 4.5.1 expanden las opciones de seguridad para [aplicaciones de una única página](../../../single-page-application/index.md) (contraseña segura SPA) y [API Web](../../index.md) services para integrarse con los servicios de autenticación externo, que incluyen varios Servicios de autenticación de redes sociales y OAuth/OpenID: Google, Facebook, Twitter y Accounts de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="16a7b-105">Visual Studio 2013 and ASP.NET 4.5.1 expand the security options for [Single Page Applications](../../../single-page-application/index.md) (SPA) and [Web API](../../index.md) services to integrate with external authentication services, which include several OAuth/OpenID and social media authentication services: Microsoft Accounts, Twitter, Facebook, and Google.</span></span>

### <a name="in-this-walkthrough"></a><span data-ttu-id="16a7b-106">En este tutorial</span><span class="sxs-lookup"><span data-stu-id="16a7b-106">In This Walkthrough</span></span>

- [<span data-ttu-id="16a7b-107">Uso de servicios de autenticación externos</span><span class="sxs-lookup"><span data-stu-id="16a7b-107">Using External Authentication Services</span></span>](#USING)
- [<span data-ttu-id="16a7b-108">Crear la aplicación Web</span><span class="sxs-lookup"><span data-stu-id="16a7b-108">Creating the Sample Web Application</span></span>](#SAMPLE)
- [<span data-ttu-id="16a7b-109">Habilitar la autenticación de Facebook</span><span class="sxs-lookup"><span data-stu-id="16a7b-109">Enabling Facebook Authentication</span></span>](#FACEBOOK)
- [<span data-ttu-id="16a7b-110">Habilitar la autenticación de Google</span><span class="sxs-lookup"><span data-stu-id="16a7b-110">Enabling Google Authentication</span></span>](#GOOGLE)
- [<span data-ttu-id="16a7b-111">Habilitar la autenticación de Microsoft</span><span class="sxs-lookup"><span data-stu-id="16a7b-111">Enabling Microsoft Authentication</span></span>](#MICROSOFT)
- [<span data-ttu-id="16a7b-112">Habilitar la autenticación de Twitter</span><span class="sxs-lookup"><span data-stu-id="16a7b-112">Enabling Twitter Authentication</span></span>](#TWITTER)
- [<span data-ttu-id="16a7b-113">Información adicional</span><span class="sxs-lookup"><span data-stu-id="16a7b-113">Additional Information</span></span>](#MOREINFO)

    - [<span data-ttu-id="16a7b-114">Combinación de los servicios de autenticación externo</span><span class="sxs-lookup"><span data-stu-id="16a7b-114">Combining External Authentication Services</span></span>](#COMBINE)
    - [<span data-ttu-id="16a7b-115">Configuración de IIS Express debe usar un nombre de dominio completo</span><span class="sxs-lookup"><span data-stu-id="16a7b-115">Configuring IIS Express to use a Fully Qualified Domain Name</span></span>](#FQDN)
    - [<span data-ttu-id="16a7b-116">Cómo obtener la configuración de la aplicación para la autenticación de Microsoft</span><span class="sxs-lookup"><span data-stu-id="16a7b-116">How to Obtain your Application Settings for Microsoft Authentication</span></span>](#OBTAIN)
    - [<span data-ttu-id="16a7b-117">Opcional: Deshabilitar el registro Local</span><span class="sxs-lookup"><span data-stu-id="16a7b-117">Optional: Disable Local Registration</span></span>](#DISABLE)

### <a name="prerequisites"></a><span data-ttu-id="16a7b-118">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="16a7b-118">Prerequisites</span></span>

<span data-ttu-id="16a7b-119">Para seguir los ejemplos de este tutorial, necesita lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="16a7b-119">To follow the examples in this walkthrough, you need to have the following:</span></span>

- <span data-ttu-id="16a7b-120">Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="16a7b-120">Visual Studio 2013</span></span>
- <span data-ttu-id="16a7b-121">Una cuenta para al menos uno de los siguientes servicios de autenticación externos:</span><span class="sxs-lookup"><span data-stu-id="16a7b-121">An account for at least one of the following external authentication services:</span></span>

    - <span data-ttu-id="16a7b-122">Una cuenta de usuario de Google</span><span class="sxs-lookup"><span data-stu-id="16a7b-122">A Google user account</span></span>
    - <span data-ttu-id="16a7b-123">Una cuenta de desarrollador con el identificador de la aplicación y la clave secreta para uno de los siguientes servicios de autenticación de redes sociales:</span><span class="sxs-lookup"><span data-stu-id="16a7b-123">A developer account with the application identifier and secret key for one of the following social media authentication services:</span></span>

        - <span data-ttu-id="16a7b-124">Cuentas de Microsoft ([https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070))</span><span class="sxs-lookup"><span data-stu-id="16a7b-124">Microsoft Accounts ([https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070))</span></span>
        - <span data-ttu-id="16a7b-125">Twitter ([https://dev.twitter.com/](https://dev.twitter.com/))</span><span class="sxs-lookup"><span data-stu-id="16a7b-125">Twitter ([https://dev.twitter.com/](https://dev.twitter.com/))</span></span>
        - <span data-ttu-id="16a7b-126">Facebook ([https://developers.facebook.com/](https://developers.facebook.com/))</span><span class="sxs-lookup"><span data-stu-id="16a7b-126">Facebook ([https://developers.facebook.com/](https://developers.facebook.com/))</span></span>

<a id="USING"></a>
## <a name="using-external-authentication-services"></a><span data-ttu-id="16a7b-127">Uso de servicios de autenticación externos</span><span class="sxs-lookup"><span data-stu-id="16a7b-127">Using External Authentication Services</span></span>

<span data-ttu-id="16a7b-128">La gran cantidad de servicios de autenticación externos que están actualmente disponibles a la Ayuda de los desarrolladores web para reducir el desarrollo de tiempo al crear nuevas aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="16a7b-128">The abundance of external authentication services that are currently available to web developers help to reduce development time when creating new web applications.</span></span> <span data-ttu-id="16a7b-129">Los usuarios de Web suelen tengan varias cuentas existentes para servicios web populares y sitios Web de redes sociales, por lo tanto, cuando se implementa de aplicación de web de servicios de la autenticación de un servicio web externo o un sitio Web de redes sociales, guarda el tiempo de desarrollo que habría ha empleado en la creación de una implementación de autenticación.</span><span class="sxs-lookup"><span data-stu-id="16a7b-129">Web users typically have several existing accounts for popular web services and social media websites, therefore when a web application implements the authentication services from an external web service or social media website, it saves the development time that would have been spent creating an authentication implementation.</span></span> <span data-ttu-id="16a7b-130">Uso de un servicio de autenticación externo guarda los usuarios finales de tener que crear otra cuenta para la aplicación web, además de tener que recordar otro nombre de usuario y contraseña.</span><span class="sxs-lookup"><span data-stu-id="16a7b-130">Using an external authentication service saves end users from having to create another account for your web application, and also from having to remember another username and password.</span></span>

<span data-ttu-id="16a7b-131">En el pasado, los programadores han tenido dos opciones: crear su propia implementación de la autenticación y obtener información sobre cómo integrar un servicio de autenticación externo en sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="16a7b-131">In the past, developers have had two choices: create their own authentication implementation, or learn how to integrate an external authentication service into their applications.</span></span> <span data-ttu-id="16a7b-132">En el nivel más básico, el siguiente diagrama muestra un flujo de solicitud simple para un agente de usuario (explorador web) que está solicitando información desde una aplicación web que está configurada para usar un servicio de autenticación externos:</span><span class="sxs-lookup"><span data-stu-id="16a7b-132">At the most basic level, the following diagram illustrates a simple request flow for a user agent (web browser) that is requesting information from a web application that is configured to use an external authentication service:</span></span>

<span data-ttu-id="16a7b-133">[![](external-authentication-services/_static/image2.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-133">[![](external-authentication-services/_static/image2.png "Click to Expand the Image")](external-authentication-services/_static/image1.png)</span></span>

<span data-ttu-id="16a7b-134">En el diagrama anterior, el agente de usuario (o el Explorador de web en este ejemplo) realiza una solicitud a una aplicación web, que redirige el explorador web a un servicio de autenticación externo.</span><span class="sxs-lookup"><span data-stu-id="16a7b-134">In the preceding diagram, the user agent (or web browser in this example) makes a request to a web application, which redirects the web browser to an external authentication service.</span></span> <span data-ttu-id="16a7b-135">El agente de usuario envía sus credenciales para el servicio de autenticación externo, y si el agente de usuario se autentica correctamente, el servicio de autenticación externo redirigirá el agente de usuario a la aplicación web original con algún tipo de símbolo (token) que el agente de usuario enviará a la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="16a7b-135">The user agent sends its credentials to the external authentication service, and if the user agent has successfully authenticated, the external authentication service will redirect the user agent to the original web application with some form of token which the user agent will send to the web application.</span></span> <span data-ttu-id="16a7b-136">La aplicación web usará el token para comprobar que el agente de usuario se ha autenticado correctamente por el servicio de autenticación externo y la aplicación web puede usar el token para obtener más información sobre el agente de usuario.</span><span class="sxs-lookup"><span data-stu-id="16a7b-136">The web application will use the token to verify that the user agent has been successfully authenticated by the external authentication service, and the web application may use the token to gather more information about the user agent.</span></span> <span data-ttu-id="16a7b-137">Una vez que se realiza la aplicación de procesamiento de información del agente de usuario, la aplicación web devolverá la respuesta adecuada para el agente de usuario en función de su configuración de autorización.</span><span class="sxs-lookup"><span data-stu-id="16a7b-137">Once the application is done processing the user agent's information, the web application will return the appropriate response to the user agent based on its authorization settings.</span></span>

<span data-ttu-id="16a7b-138">En este segundo ejemplo, el agente de usuario negocia con la aplicación web y el servidor de autorización externas y la aplicación web lleva a cabo la comunicación con el servidor de autorización externas para recuperar información adicional sobre el usuario adicionales agente:</span><span class="sxs-lookup"><span data-stu-id="16a7b-138">In this second example, the user agent negotiates with the web application and external authorization server, and the web application performs additional communication with the external authorization server to retrieve additional information about the user agent:</span></span>

<span data-ttu-id="16a7b-139">[![](external-authentication-services/_static/image4.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-139">[![](external-authentication-services/_static/image4.png "Click to Expand the Image")](external-authentication-services/_static/image3.png)</span></span>

<span data-ttu-id="16a7b-140">Visual Studio 2013 y ASP.NET 4.5.1 facilitan la integración con servicios de autenticación externos para desarrolladores proporcionando integración incorporada para los servicios de autenticación siguientes:</span><span class="sxs-lookup"><span data-stu-id="16a7b-140">Visual Studio 2013 and ASP.NET 4.5.1 make integration with external authentication services easier for developers by providing built-in integration for the following authentication services:</span></span>

- <span data-ttu-id="16a7b-141">Facebook</span><span class="sxs-lookup"><span data-stu-id="16a7b-141">Facebook</span></span>
- <span data-ttu-id="16a7b-142">Google</span><span class="sxs-lookup"><span data-stu-id="16a7b-142">Google</span></span>
- <span data-ttu-id="16a7b-143">Microsoft Accounts (Windows Live ID)</span><span class="sxs-lookup"><span data-stu-id="16a7b-143">Microsoft Accounts (Windows Live ID accounts)</span></span>
- <span data-ttu-id="16a7b-144">Twitter</span><span class="sxs-lookup"><span data-stu-id="16a7b-144">Twitter</span></span>

<span data-ttu-id="16a7b-145">Los ejemplos de este tutorial se muestran cómo configurar cada uno de los servicios de autenticación externo compatible con la nueva plantilla de aplicación Web ASP.NET que se distribuye con Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="16a7b-145">The examples in this walkthrough will demonstrate how to configure each of the supported external authentication services by using the new ASP.NET Web Application template that ships with Visual Studio 2013.</span></span>

> [!NOTE]
> <span data-ttu-id="16a7b-146">Si es necesario, debe agregar el FQDN a la configuración para el servicio de autenticación externo.</span><span class="sxs-lookup"><span data-stu-id="16a7b-146">If necessary, you may need to add your FQDN to the settings for your external authentication service.</span></span> <span data-ttu-id="16a7b-147">Este requisito se basa en las restricciones de seguridad para algunos servicios de autenticación externos que requieren el FQDN en la configuración de la aplicación para que coincida con el FQDN que es utilizado por los clientes.</span><span class="sxs-lookup"><span data-stu-id="16a7b-147">This requirement is based on security constraints for some external authentication services which require the FQDN in your application settings to match the FQDN that is used by your clients.</span></span> <span data-ttu-id="16a7b-148">(Los pasos de este varían en gran medida para cada servicio de autenticación externo; lo necesitará consultar la documentación para cada servicio de autenticación externo para ver si esto es necesario y cómo configurar estas opciones.) Si necesita configurar IIS Express se utiliza un FQDN para este entorno de pruebas, consulte el [configurar IIS Express debe usar un nombre de dominio completo](#FQDN) sección más adelante en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="16a7b-148">(The steps for this will vary greatly for each external authentication service; you will need to consult the documentation for each external authentication service to see if this is required and how to configure these settings.) If you need to configure IIS Express to use an FQDN for testing this environment, see the [Configuring IIS Express to use a Fully Qualified Domain Name](#FQDN) section later in this walkthrough.</span></span>


<a id="SAMPLE"></a>
## <a name="creating-a-sample-web-application"></a><span data-ttu-id="16a7b-149">Crear una aplicación Web de ejemplo</span><span class="sxs-lookup"><span data-stu-id="16a7b-149">Creating a Sample Web Application</span></span>

<span data-ttu-id="16a7b-150">Los siguientes pasos le llevará por la creación de una aplicación de ejemplo mediante la plantilla de aplicación Web ASP.NET y va a usar esta aplicación de ejemplo para cada uno de los servicios de autenticación externo más adelante en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="16a7b-150">The following steps will lead you through creating a sample application by using the ASP.NET Web Application template, and you will use this sample application for each of the external authentication services later in this walkthrough.</span></span>

<span data-ttu-id="16a7b-151">Inicie Visual Studio 2013 seleccione **nuevo proyecto** desde la página de inicio.</span><span class="sxs-lookup"><span data-stu-id="16a7b-151">Start Visual Studio 2013 select **New Project** from the Start page.</span></span> <span data-ttu-id="16a7b-152">O bien, en la **archivo** menú, seleccione **New** y, a continuación, **proyecto**.</span><span class="sxs-lookup"><span data-stu-id="16a7b-152">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="16a7b-153">[![](external-authentication-services/_static/image6.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-153">[![](external-authentication-services/_static/image6.png "Click to Expand the Image")](external-authentication-services/_static/image5.png)</span></span>

<span data-ttu-id="16a7b-154">Cuando el **nuevo proyecto** aparece el cuadro de diálogo, seleccione **instalado** **plantillas** y expanda **Visual C#**.</span><span class="sxs-lookup"><span data-stu-id="16a7b-154">When the **New Project** dialog box is displayed, select **Installed** **Templates** and expand **Visual C#**.</span></span> <span data-ttu-id="16a7b-155">En **Visual C#**, seleccione **Web**.</span><span class="sxs-lookup"><span data-stu-id="16a7b-155">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="16a7b-156">En la lista de plantillas de proyecto, seleccione **aplicación Web ASP.NET**.</span><span class="sxs-lookup"><span data-stu-id="16a7b-156">In the list of project templates, select **ASP.NET Web Application**.</span></span> <span data-ttu-id="16a7b-157">Escriba un nombre para el proyecto y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="16a7b-157">Enter a name for your project and click **OK**.</span></span>

<span data-ttu-id="16a7b-158">[![](external-authentication-services/_static/image8.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-158">[![](external-authentication-services/_static/image8.png "Click to Expand the Image")](external-authentication-services/_static/image7.png)</span></span>

<span data-ttu-id="16a7b-159">Cuando el **nuevo proyecto ASP.NET** aparece, seleccione la **SPA** plantilla y haga clic en **crear proyecto**.</span><span class="sxs-lookup"><span data-stu-id="16a7b-159">When the **New ASP.NET Project** is displayed, select the **SPA** template and click **Create Project**.</span></span>

<span data-ttu-id="16a7b-160">[![](external-authentication-services/_static/image10.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-160">[![](external-authentication-services/_static/image10.png "Click to Expand the Image")](external-authentication-services/_static/image9.png)</span></span>

<span data-ttu-id="16a7b-161">Espere a que Visual Studio 2013 crea el proyecto.</span><span class="sxs-lookup"><span data-stu-id="16a7b-161">Wait as Visual Studio 2013 creates your project.</span></span>

<span data-ttu-id="16a7b-162">[![](external-authentication-services/_static/image12.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-162">[![](external-authentication-services/_static/image12.png "Click to Expand the Image")](external-authentication-services/_static/image11.png)</span></span>

<span data-ttu-id="16a7b-163">Cuando Visual Studio 2013 ha terminado de crear el proyecto, abra el *Startup.Auth.cs* archivo que se encuentra en la **aplicación\_iniciar** carpeta.</span><span class="sxs-lookup"><span data-stu-id="16a7b-163">When Visual Studio 2013 has finished creating your project, open the *Startup.Auth.cs* file that is located in the **App\_Start** folder.</span></span>

<span data-ttu-id="16a7b-164">[![](external-authentication-services/_static/image14.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-164">[![](external-authentication-services/_static/image14.png "Click to Expand the Image")](external-authentication-services/_static/image13.png)</span></span>

<span data-ttu-id="16a7b-165">Cuando se crea el proyecto por primera vez, ninguno de los servicios de autenticación externos están habilitado en *Startup.Auth.cs* archivo; muestra lo que el código puede ser similar a lo siguiente, con las secciones resaltadas de dónde permitiría un servicio de autenticación externo y los valores de configuración relevantes para utilizar la autenticación de Microsoft Accounts, Twitter, Facebook o Google con la aplicación de ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="16a7b-165">When you first create the project, none of the external authentication services are enabled in *Startup.Auth.cs* file; the following illustrates what your code might resemble, with the sections highlighted for where you would enable an external authentication service and any relevant settings in order to use Microsoft Accounts, Twitter, Facebook, or Google authentication with your ASP.NET application:</span></span>

[!code-csharp[Main](external-authentication-services/samples/sample1.cs)]

<span data-ttu-id="16a7b-166">Cuando se presiona F5 para compilar y depurar la aplicación web, mostrará una pantalla de inicio de sesión donde podrá ver que no se han definido ningún servicio de autenticación externo.</span><span class="sxs-lookup"><span data-stu-id="16a7b-166">When you press F5 to build and debug your web application, it will display a login screen where you will see that no external authentication services have been defined.</span></span>

<span data-ttu-id="16a7b-167">[![](external-authentication-services/_static/image16.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-167">[![](external-authentication-services/_static/image16.png "Click to Expand the Image")](external-authentication-services/_static/image15.png)</span></span>

<span data-ttu-id="16a7b-168">En las siguientes secciones, obtendrá información sobre cómo habilitar cada uno de los servicios de autenticación externo que se proporcionan con ASP.NET en Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="16a7b-168">In the following sections, you will learn how to enable each of the external authentication services that are provided with ASP.NET in Visual Studio 2013.</span></span>

<a id="FACEBOOK"></a>
## <a name="enabling-facebook-authentication"></a><span data-ttu-id="16a7b-169">Habilitar la autenticación de Facebook</span><span class="sxs-lookup"><span data-stu-id="16a7b-169">Enabling Facebook Authentication</span></span>

<span data-ttu-id="16a7b-170">Con Facebook autenticación requiere crear una cuenta de desarrollador de Facebook y el proyecto requerirá un Id. de aplicación y la clave secreta de Facebook para poder funcionar.</span><span class="sxs-lookup"><span data-stu-id="16a7b-170">Using Facebook authentication requires you to create a Facebook developer account, and your project will require an application ID and secret key from Facebook in order to function.</span></span> <span data-ttu-id="16a7b-171">Para obtener información sobre cómo crear una cuenta de desarrollador de Facebook y obtener el identificador de la aplicación y la clave secreta, vea [ https://go.microsoft.com/fwlink/?LinkID=252166 ](https://go.microsoft.com/fwlink/?LinkID=252166).</span><span class="sxs-lookup"><span data-stu-id="16a7b-171">For information about creating a Facebook developer account and obtaining your application ID and secret key, see [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span></span>

<span data-ttu-id="16a7b-172">Una vez ha obtenido el identificador de la aplicación y la clave secreta, siga estos pasos para habilitar la autenticación de Facebook para la aplicación web:</span><span class="sxs-lookup"><span data-stu-id="16a7b-172">Once you have obtained your application ID and secret key, use the following steps to enable Facebook authentication for your web application:</span></span>

1. <span data-ttu-id="16a7b-173">Cuando el proyecto está abierto en Visual Studio 2013, abra el *Startup.Auth.cs* archivo:</span><span class="sxs-lookup"><span data-stu-id="16a7b-173">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="16a7b-174">[![](external-authentication-services/_static/image18.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-174">[![](external-authentication-services/_static/image18.png "Click to Expand the Image")](external-authentication-services/_static/image17.png)</span></span>
2. <span data-ttu-id="16a7b-175">Busque la sección resaltada de código:</span><span class="sxs-lookup"><span data-stu-id="16a7b-175">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample2.cs)]
3. <span data-ttu-id="16a7b-176">Quitar el &quot; // &quot; caracteres que se quite el comentario de las líneas de código resaltadas y, a continuación, agregue el identificador de la aplicación y la clave secreta.</span><span class="sxs-lookup"><span data-stu-id="16a7b-176">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your application ID and secret key.</span></span> <span data-ttu-id="16a7b-177">Cuando haya agregado esos parámetros, puede volver a compilar el proyecto:</span><span class="sxs-lookup"><span data-stu-id="16a7b-177">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample3.cs)]
4. <span data-ttu-id="16a7b-178">Cuando se presiona F5 para abrir la aplicación web en el explorador web, verá que Facebook se ha definido como un servicio de autenticación externo:</span><span class="sxs-lookup"><span data-stu-id="16a7b-178">When you press F5 to open your web application in your web browser, you will see that Facebook has been defined as an external authentication service:</span></span>

    <span data-ttu-id="16a7b-179">[![](external-authentication-services/_static/image20.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-179">[![](external-authentication-services/_static/image20.png "Click to Expand the Image")](external-authentication-services/_static/image19.png)</span></span>
5. <span data-ttu-id="16a7b-180">Al hacer clic en el **Facebook** botón, el explorador se redirigirá a la página de inicio de sesión de Facebook:</span><span class="sxs-lookup"><span data-stu-id="16a7b-180">When you click the **Facebook** button, your browser will be redirected to the Facebook login page:</span></span>

    <span data-ttu-id="16a7b-181">[![](external-authentication-services/_static/image22.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-181">[![](external-authentication-services/_static/image22.png "Click to Expand the Image")](external-authentication-services/_static/image21.png)</span></span>
6. <span data-ttu-id="16a7b-182">Después de escribir sus credenciales de Facebook y haga clic en **sesión**, el explorador web se redirigirán a la aplicación web, que le solicitará la **nombre de usuario** que desea asociar a su Cuenta de Facebook:</span><span class="sxs-lookup"><span data-stu-id="16a7b-182">After you enter your Facebook credentials and click **Log in**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Facebook account:</span></span>

    <span data-ttu-id="16a7b-183">[![](external-authentication-services/_static/image24.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-183">[![](external-authentication-services/_static/image24.png "Click to Expand the Image")](external-authentication-services/_static/image23.png)</span></span>
7. <span data-ttu-id="16a7b-184">Después de haber escrito el nombre de usuario y hace clic en el **registrarse** botón, la aplicación web mostrará el valor predeterminado **página principal** para su cuenta de Facebook:</span><span class="sxs-lookup"><span data-stu-id="16a7b-184">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Facebook account:</span></span>

    <span data-ttu-id="16a7b-185">[![](external-authentication-services/_static/image26.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-185">[![](external-authentication-services/_static/image26.png "Click to Expand the Image")](external-authentication-services/_static/image25.png)</span></span>

<a id="GOOGLE"></a>
## <a name="enabling-google-authentication"></a><span data-ttu-id="16a7b-186">Habilitar la autenticación de Google</span><span class="sxs-lookup"><span data-stu-id="16a7b-186">Enabling Google Authentication</span></span>

<span data-ttu-id="16a7b-187">Google es con diferencia el más fácil de los servicios de autenticación externo habilitación, ya que no requiere una cuenta de desarrollador, ni requiere información adicional como el identificador de la aplicación o la clave secreta, como los demás servicios de autenticación externo precisan.</span><span class="sxs-lookup"><span data-stu-id="16a7b-187">Google is by far the easiest of the external authentication services to enable because it doesn't require a developer account, nor does it require additional information like your application ID or secret key as the other external authentication services necessitate.</span></span>

<span data-ttu-id="16a7b-188">Para habilitar la autenticación de Google para la aplicación web, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="16a7b-188">To enable Google authentication for your web application, use the following steps:</span></span>

1. <span data-ttu-id="16a7b-189">Cuando el proyecto está abierto en Visual Studio 2013, abra el *Startup.Auth.cs* archivo:</span><span class="sxs-lookup"><span data-stu-id="16a7b-189">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="16a7b-190">[![](external-authentication-services/_static/image28.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-190">[![](external-authentication-services/_static/image28.png "Click to Expand the Image")](external-authentication-services/_static/image27.png)</span></span>
2. <span data-ttu-id="16a7b-191">Busque la sección resaltada de código:</span><span class="sxs-lookup"><span data-stu-id="16a7b-191">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample4.cs)]
3. <span data-ttu-id="16a7b-192">Quitar el &quot; // &quot; caracteres que se quite el comentario de la línea de código resaltada y, a continuación, vuelva a compilar el proyecto:</span><span class="sxs-lookup"><span data-stu-id="16a7b-192">Remove the &quot;//&quot; characters to uncomment the highlighted line of code, and then recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample5.cs)]
4. <span data-ttu-id="16a7b-193">Cuando se presiona F5 para abrir la aplicación web en el explorador web, verá que Google se ha definido como un servicio de autenticación externo:</span><span class="sxs-lookup"><span data-stu-id="16a7b-193">When you press F5 to open your web application in your web browser, you will see that Google has been defined as an external authentication service:</span></span>

    <span data-ttu-id="16a7b-194">[![](external-authentication-services/_static/image30.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-194">[![](external-authentication-services/_static/image30.png "Click to Expand the Image")](external-authentication-services/_static/image29.png)</span></span>
5. <span data-ttu-id="16a7b-195">Al hacer clic en el **Google** botón, el explorador se redirigirá a la página de inicio de sesión de Google:</span><span class="sxs-lookup"><span data-stu-id="16a7b-195">When you click the **Google** button, your browser will be redirected to the Google login page:</span></span>

    <span data-ttu-id="16a7b-196">[![](external-authentication-services/_static/image32.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-196">[![](external-authentication-services/_static/image32.png "Click to Expand the Image")](external-authentication-services/_static/image31.png)</span></span>
6. <span data-ttu-id="16a7b-197">Después de escribir sus credenciales de Google y haga clic en **iniciar sesión en**, Google le pedirá que compruebe que la aplicación web tiene permisos para acceder a su cuenta de Google:</span><span class="sxs-lookup"><span data-stu-id="16a7b-197">After you enter your Google credentials and click **Sign in**, Google will prompt you to verify that your web application has permissions to access your Google account:</span></span>

    <span data-ttu-id="16a7b-198">[![](external-authentication-services/_static/image34.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-198">[![](external-authentication-services/_static/image34.png "Click to Expand the Image")](external-authentication-services/_static/image33.png)</span></span>
7. <span data-ttu-id="16a7b-199">Al hacer clic en **Accept**, el explorador web se redirigirán a la aplicación web, que le solicitará la **nombre de usuario** que desea asociar a su cuenta de Google:</span><span class="sxs-lookup"><span data-stu-id="16a7b-199">When you click **Accept**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Google account:</span></span>

    <span data-ttu-id="16a7b-200">[![](external-authentication-services/_static/image36.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-200">[![](external-authentication-services/_static/image36.png "Click to Expand the Image")](external-authentication-services/_static/image35.png)</span></span>
8. <span data-ttu-id="16a7b-201">Después de haber escrito el nombre de usuario y hace clic en el **registrarse** botón, la aplicación web mostrará el valor predeterminado **página principal** para su cuenta de Google:</span><span class="sxs-lookup"><span data-stu-id="16a7b-201">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Google account:</span></span>

    <span data-ttu-id="16a7b-202">[![](external-authentication-services/_static/image38.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-202">[![](external-authentication-services/_static/image38.png "Click to Expand the Image")](external-authentication-services/_static/image37.png)</span></span>

<a id="MICROSOFT"></a>
## <a name="enabling-microsoft-authentication"></a><span data-ttu-id="16a7b-203">Habilitar la autenticación de Microsoft</span><span class="sxs-lookup"><span data-stu-id="16a7b-203">Enabling Microsoft Authentication</span></span>

<span data-ttu-id="16a7b-204">Autenticación de Microsoft, tendrá que crear una cuenta de desarrollador y requiere un Id. de cliente y el secreto del cliente para poder funcionar.</span><span class="sxs-lookup"><span data-stu-id="16a7b-204">Microsoft authentication requires you to create a developer account, and it requires a client ID and client secret in order to function.</span></span> <span data-ttu-id="16a7b-205">Para obtener información sobre cómo crear una cuenta de desarrollador de Microsoft y obtener el Id. de cliente y el secreto de cliente, consulte [ https://go.microsoft.com/fwlink/?LinkID=144070 ](https://go.microsoft.com/fwlink/?LinkID=144070).</span><span class="sxs-lookup"><span data-stu-id="16a7b-205">For information about creating a Microsoft developer account and obtaining your client ID and client secret, see [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070).</span></span>

<span data-ttu-id="16a7b-206">Una vez obtenida la clave de consumidor y el secreto del consumidor, siga estos pasos para habilitar la autenticación de Microsoft para la aplicación web:</span><span class="sxs-lookup"><span data-stu-id="16a7b-206">Once you have obtained your consumer key and consumer secret, use the following steps to enable Microsoft authentication for your web application:</span></span>

1. <span data-ttu-id="16a7b-207">Cuando el proyecto está abierto en Visual Studio 2013, abra el *Startup.Auth.cs* archivo:</span><span class="sxs-lookup"><span data-stu-id="16a7b-207">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="16a7b-208">[![](external-authentication-services/_static/image40.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-208">[![](external-authentication-services/_static/image40.png "Click to Expand the Image")](external-authentication-services/_static/image39.png)</span></span>
2. <span data-ttu-id="16a7b-209">Busque la sección resaltada de código:</span><span class="sxs-lookup"><span data-stu-id="16a7b-209">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample6.cs)]
3. <span data-ttu-id="16a7b-210">Quitar el &quot; // &quot; caracteres que se quite el comentario de las líneas de código resaltadas y, a continuación, agregue el identificador de cliente y el secreto de cliente.</span><span class="sxs-lookup"><span data-stu-id="16a7b-210">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your client ID and client secret.</span></span> <span data-ttu-id="16a7b-211">Cuando haya agregado esos parámetros, puede volver a compilar el proyecto:</span><span class="sxs-lookup"><span data-stu-id="16a7b-211">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample7.cs)]
4. <span data-ttu-id="16a7b-212">Cuando se presiona F5 para abrir la aplicación web en el explorador web, verá que Microsoft se ha definido como un servicio de autenticación externo:</span><span class="sxs-lookup"><span data-stu-id="16a7b-212">When you press F5 to open your web application in your web browser, you will see that Microsoft has been defined as an external authentication service:</span></span>

    <span data-ttu-id="16a7b-213">[![](external-authentication-services/_static/image42.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-213">[![](external-authentication-services/_static/image42.png "Click to Expand the Image")](external-authentication-services/_static/image41.png)</span></span>
5. <span data-ttu-id="16a7b-214">Al hacer clic en el **Microsoft** botón, el explorador se redirigirá a la página de inicio de sesión de Microsoft:</span><span class="sxs-lookup"><span data-stu-id="16a7b-214">When you click the **Microsoft** button, your browser will be redirected to the Microsoft login page:</span></span>

    <span data-ttu-id="16a7b-215">[![](external-authentication-services/_static/image44.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-215">[![](external-authentication-services/_static/image44.png "Click to Expand the Image")](external-authentication-services/_static/image43.png)</span></span>
6. <span data-ttu-id="16a7b-216">Después de escribir sus credenciales de Microsoft y haga clic en **iniciar sesión en**, se le pedirá para comprobar que la aplicación web tiene permisos para acceder a su cuenta de Microsoft:</span><span class="sxs-lookup"><span data-stu-id="16a7b-216">After you enter your Microsoft credentials and click **Sign in**, you will be prompted to verify that your web application has permissions to access your Microsoft account:</span></span>

    <span data-ttu-id="16a7b-217">[![](external-authentication-services/_static/image46.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-217">[![](external-authentication-services/_static/image46.png "Click to Expand the Image")](external-authentication-services/_static/image45.png)</span></span>
7. <span data-ttu-id="16a7b-218">Al hacer clic en **Sí**, el explorador web se redirigirán a la aplicación web, que le solicitará la **nombre de usuario** que desea asociar a su cuenta de Microsoft:</span><span class="sxs-lookup"><span data-stu-id="16a7b-218">When you click **Yes**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Microsoft account:</span></span>

    <span data-ttu-id="16a7b-219">[![](external-authentication-services/_static/image48.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-219">[![](external-authentication-services/_static/image48.png "Click to Expand the Image")](external-authentication-services/_static/image47.png)</span></span>
8. <span data-ttu-id="16a7b-220">Después de haber escrito el nombre de usuario y hace clic en el **registrarse** botón, la aplicación web mostrará el valor predeterminado **página principal** para su cuenta de Microsoft:</span><span class="sxs-lookup"><span data-stu-id="16a7b-220">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Microsoft account:</span></span>

    <span data-ttu-id="16a7b-221">[![](external-authentication-services/_static/image50.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-221">[![](external-authentication-services/_static/image50.png "Click to Expand the Image")](external-authentication-services/_static/image49.png)</span></span>

<a id="TWITTER"></a>
## <a name="enabling-twitter-authentication"></a><span data-ttu-id="16a7b-222">Habilitar la autenticación de Twitter</span><span class="sxs-lookup"><span data-stu-id="16a7b-222">Enabling Twitter Authentication</span></span>

<span data-ttu-id="16a7b-223">Twitter autenticación requiere crear una cuenta de desarrollador, y una clave de consumidor y el secreto de consumidor para poder funcionar.</span><span class="sxs-lookup"><span data-stu-id="16a7b-223">Twitter authentication requires you to create a developer account, and it requires a consumer key and consumer secret in order to function.</span></span> <span data-ttu-id="16a7b-224">Para obtener información sobre cómo crear una cuenta de desarrollador de Twitter y obtener su clave de consumidor y el secreto del consumidor, consulte [ https://go.microsoft.com/fwlink/?LinkID=252166 ](https://go.microsoft.com/fwlink/?LinkID=252166).</span><span class="sxs-lookup"><span data-stu-id="16a7b-224">For information about creating a Twitter developer account and obtaining your consumer key and consumer secret, see [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span></span>

<span data-ttu-id="16a7b-225">Una vez obtenida la clave de consumidor y el secreto del consumidor, siga estos pasos para habilitar la autenticación de Twitter para la aplicación web:</span><span class="sxs-lookup"><span data-stu-id="16a7b-225">Once you have obtained your consumer key and consumer secret, use the following steps to enable Twitter authentication for your web application:</span></span>

1. <span data-ttu-id="16a7b-226">Cuando el proyecto está abierto en Visual Studio 2013, abra el *Startup.Auth.cs* archivo:</span><span class="sxs-lookup"><span data-stu-id="16a7b-226">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="16a7b-227">[![](external-authentication-services/_static/image52.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-227">[![](external-authentication-services/_static/image52.png "Click to Expand the Image")](external-authentication-services/_static/image51.png)</span></span>
2. <span data-ttu-id="16a7b-228">Busque la sección resaltada de código:</span><span class="sxs-lookup"><span data-stu-id="16a7b-228">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample8.cs)]
3. <span data-ttu-id="16a7b-229">Quitar el &quot; // &quot; caracteres que se quite el comentario de las líneas de código resaltadas y, a continuación, agregue su clave de consumidor y el secreto del consumidor.</span><span class="sxs-lookup"><span data-stu-id="16a7b-229">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your consumer key and consumer secret.</span></span> <span data-ttu-id="16a7b-230">Cuando haya agregado esos parámetros, puede volver a compilar el proyecto:</span><span class="sxs-lookup"><span data-stu-id="16a7b-230">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample9.cs)]
4. <span data-ttu-id="16a7b-231">Cuando se presiona F5 para abrir la aplicación web en el explorador web, verá que se ha definido Twitter como un servicio de autenticación externo:</span><span class="sxs-lookup"><span data-stu-id="16a7b-231">When you press F5 to open your web application in your web browser, you will see that Twitter has been defined as an external authentication service:</span></span>

    <span data-ttu-id="16a7b-232">[![](external-authentication-services/_static/image54.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-232">[![](external-authentication-services/_static/image54.png "Click to Expand the Image")](external-authentication-services/_static/image53.png)</span></span>
5. <span data-ttu-id="16a7b-233">Al hacer clic en el **Twitter** botón, el explorador se redirigirá a la página de inicio de sesión de Twitter:</span><span class="sxs-lookup"><span data-stu-id="16a7b-233">When you click the **Twitter** button, your browser will be redirected to the Twitter login page:</span></span>

    <span data-ttu-id="16a7b-234">[![](external-authentication-services/_static/image56.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-234">[![](external-authentication-services/_static/image56.png "Click to Expand the Image")](external-authentication-services/_static/image55.png)</span></span>
6. <span data-ttu-id="16a7b-235">Después de escribir sus credenciales de Twitter y haga clic en **autorizar aplicaciones**, el explorador web se redirigirán a la aplicación web, que le solicitará la **nombre de usuario** que desea asociar con su cuenta de Twitter:</span><span class="sxs-lookup"><span data-stu-id="16a7b-235">After you enter your Twitter credentials and click **Authorize app**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Twitter account:</span></span>

    <span data-ttu-id="16a7b-236">[![](external-authentication-services/_static/image58.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image57.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-236">[![](external-authentication-services/_static/image58.png "Click to Expand the Image")](external-authentication-services/_static/image57.png)</span></span>
7. <span data-ttu-id="16a7b-237">Después de haber escrito el nombre de usuario y hace clic en el **registrarse** botón, la aplicación web mostrará el valor predeterminado **página principal** para su cuenta de Twitter:</span><span class="sxs-lookup"><span data-stu-id="16a7b-237">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Twitter account:</span></span>

    <span data-ttu-id="16a7b-238">[![](external-authentication-services/_static/image60.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image59.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-238">[![](external-authentication-services/_static/image60.png "Click to Expand the Image")](external-authentication-services/_static/image59.png)</span></span>

<a id="MOREINFO"></a>
## <a name="additional-information"></a><span data-ttu-id="16a7b-239">Información adicional</span><span class="sxs-lookup"><span data-stu-id="16a7b-239">Additional Information</span></span>

<span data-ttu-id="16a7b-240">Para obtener información adicional acerca de cómo crear aplicaciones que usan OAuth y OpenID, consulte las siguientes direcciones URL:</span><span class="sxs-lookup"><span data-stu-id="16a7b-240">For additional information about creating applications that use OAuth and OpenID, see the following URLs:</span></span>

- [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166)
- [https://go.microsoft.com/fwlink/?LinkID=243995](https://go.microsoft.com/fwlink/?LinkID=243995)

<a id="COMBINE"></a>
### <a name="combining-external-authentication-services"></a><span data-ttu-id="16a7b-241">Combinación de los servicios de autenticación externo</span><span class="sxs-lookup"><span data-stu-id="16a7b-241">Combining External Authentication Services</span></span>

<span data-ttu-id="16a7b-242">Para una mayor flexibilidad, puede definir varios servicios de autenticación externos al mismo tiempo: Esto permite que su sitio web a los usuarios de la aplicación usar una cuenta de cualquiera de los servicios de autenticación externo habilitado:</span><span class="sxs-lookup"><span data-stu-id="16a7b-242">For greater flexibility, you can define multiple external authentication services at the same time - this allows your web application's users to use an account from any of the enabled external authentication services:</span></span>

<span data-ttu-id="16a7b-243">[![](external-authentication-services/_static/image62.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-243">[![](external-authentication-services/_static/image62.png "Click to Expand the Image")](external-authentication-services/_static/image61.png)</span></span>

<a id="FQDN"></a>
### <a name="configuring-iis-express-to-use-a-fully-qualified-domain-name"></a><span data-ttu-id="16a7b-244">Configuración de IIS Express debe usar un nombre de dominio completo</span><span class="sxs-lookup"><span data-stu-id="16a7b-244">Configuring IIS Express to use a Fully Qualified Domain Name</span></span>

<span data-ttu-id="16a7b-245">Algunos proveedores de autenticación externa no admiten probar la aplicación con una dirección HTTP como `http://localhost:port/`.</span><span class="sxs-lookup"><span data-stu-id="16a7b-245">Some external authentication providers do not support testing your application by using an HTTP address like `http://localhost:port/`.</span></span> <span data-ttu-id="16a7b-246">Para solucionar este problema, puede agregar una asignación de nombre de dominio completo (FQDN) estática para el archivo de HOSTS y configurar las opciones de proyecto en Visual Studio 2013 para usar el FQDN para probar y depurar.</span><span class="sxs-lookup"><span data-stu-id="16a7b-246">To work around this issue, you can add a static Fully Qualified Domain Name (FQDN) mapping to your HOSTS file and configure your project options in Visual Studio 2013 to use the FQDN for testing/debugging.</span></span> <span data-ttu-id="16a7b-247">Para ello, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="16a7b-247">To do so, use the following steps:</span></span>

- <span data-ttu-id="16a7b-248">Agregue un FQDN estático asignar el archivo de HOSTS:</span><span class="sxs-lookup"><span data-stu-id="16a7b-248">Add a static FQDN mapping your HOSTS file:</span></span>

  1. <span data-ttu-id="16a7b-249">Abra un símbolo del sistema con privilegios elevados en Windows.</span><span class="sxs-lookup"><span data-stu-id="16a7b-249">Open an elevated command prompt in Windows.</span></span>
  2. <span data-ttu-id="16a7b-250">Escriba el comando siguiente:</span><span class="sxs-lookup"><span data-stu-id="16a7b-250">Type the following command:</span></span>

      <span data-ttu-id="16a7b-251"><kbd>notepad %WinDir%\system32\drivers\etc\hosts</kbd></span><span class="sxs-lookup"><span data-stu-id="16a7b-251"><kbd>notepad %WinDir%\system32\drivers\etc\hosts</kbd></span></span>
  3. <span data-ttu-id="16a7b-252">Agregue una entrada similar al siguiente al archivo de HOSTS:</span><span class="sxs-lookup"><span data-stu-id="16a7b-252">Add an entry like the following to the HOSTS file:</span></span>

      <span data-ttu-id="16a7b-253"><kbd>127.0.0.1 www.wingtiptoys.com</kbd></span><span class="sxs-lookup"><span data-stu-id="16a7b-253"><kbd>127.0.0.1 www.wingtiptoys.com</kbd></span></span>
  4. <span data-ttu-id="16a7b-254">Guarde y cierre el archivo de HOSTS.</span><span class="sxs-lookup"><span data-stu-id="16a7b-254">Save and close your HOSTS file.</span></span>

- <span data-ttu-id="16a7b-255">Configurar el proyecto de Visual Studio para que usen el FQDN:</span><span class="sxs-lookup"><span data-stu-id="16a7b-255">Configure your Visual Studio project to use the FQDN:</span></span>

  1. <span data-ttu-id="16a7b-256">Cuando el proyecto está abierto en Visual Studio 2013, haga clic en el **proyecto** menú y, a continuación, seleccione las propiedades del proyecto.</span><span class="sxs-lookup"><span data-stu-id="16a7b-256">When your project is open in Visual Studio 2013, click the **Project** menu, and then select your project's properties.</span></span> <span data-ttu-id="16a7b-257">Por ejemplo, puede seleccionar **WebApplication1 propiedades**.</span><span class="sxs-lookup"><span data-stu-id="16a7b-257">For example, you might select **WebApplication1 Properties**.</span></span>
  2. <span data-ttu-id="16a7b-258">Seleccione el **Web** ficha.</span><span class="sxs-lookup"><span data-stu-id="16a7b-258">Select the **Web** tab.</span></span>
  3. <span data-ttu-id="16a7b-259">Escriba el FQDN para el <strong>dirección Url del proyecto</strong>.</span><span class="sxs-lookup"><span data-stu-id="16a7b-259">Enter your FQDN for the <strong>Project Url</strong>.</span></span> <span data-ttu-id="16a7b-260">Por ejemplo, escribiría <kbd> <http://www.wingtiptoys.com> </kbd> si ese era la asignación de FQDN que ha agregado al archivo de HOSTS.</span><span class="sxs-lookup"><span data-stu-id="16a7b-260">For example, you would enter <kbd><http://www.wingtiptoys.com></kbd> if that was the FQDN mapping that you added to your HOSTS file.</span></span>

- <span data-ttu-id="16a7b-261">Configurar IIS Express para que usen el FQDN de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="16a7b-261">Configure IIS Express to use the FQDN for your application:</span></span>

    1. <span data-ttu-id="16a7b-262">Abra un símbolo del sistema con privilegios elevados en Windows.</span><span class="sxs-lookup"><span data-stu-id="16a7b-262">Open an elevated command prompt in Windows.</span></span>
    2. <span data-ttu-id="16a7b-263">Escriba el siguiente comando para cambiar a la carpeta de IIS Express:</span><span class="sxs-lookup"><span data-stu-id="16a7b-263">Type the following command to change to your IIS Express folder:</span></span>

        <span data-ttu-id="16a7b-264"><kbd>CD /d &quot;%ProgramFiles%\IIS Express&quot;</kbd></span><span class="sxs-lookup"><span data-stu-id="16a7b-264"><kbd>cd /d &quot;%ProgramFiles%\IIS Express&quot;</kbd></span></span>
    3. <span data-ttu-id="16a7b-265">Escriba el siguiente comando para agregar el FQDN a la aplicación:</span><span class="sxs-lookup"><span data-stu-id="16a7b-265">Type the following command to add the FQDN to your application:</span></span>

        <span data-ttu-id="16a7b-266"><kbd>establecer la configuración de appcmd.exe-section:system.applicationHost/sites /+&quot;[nombre='WebApplication1'].bindings.[protocolo='http',bindingInformation='\*:80:www.wingtiptoys.com']&quot; /commit:apphost</kbd></span><span class="sxs-lookup"><span data-stu-id="16a7b-266"><kbd>appcmd.exe set config -section:system.applicationHost/sites /+&quot;[name='WebApplication1'].bindings.[protocol='http',bindingInformation='\*:80:www.wingtiptoys.com']&quot; /commit:apphost</kbd></span></span>

  <span data-ttu-id="16a7b-267">Donde **WebApplication1** es el nombre del proyecto y **bindingInformation** contiene el número de puerto y FQDN que desea usar para las pruebas.</span><span class="sxs-lookup"><span data-stu-id="16a7b-267">Where **WebApplication1** is the name of your project and **bindingInformation** contains the port number and FQDN that you want to use for your testing.</span></span>

<a id="OBTAIN"></a>
### <a name="how-to-obtain-your-application-settings-for-microsoft-authentication"></a><span data-ttu-id="16a7b-268">Cómo obtener la configuración de la aplicación para la autenticación de Microsoft</span><span class="sxs-lookup"><span data-stu-id="16a7b-268">How to Obtain your Application Settings for Microsoft Authentication</span></span>

<span data-ttu-id="16a7b-269">La vinculación de una aplicación para Windows Live de Microsoft Authentication es un proceso sencillo.</span><span class="sxs-lookup"><span data-stu-id="16a7b-269">Linking an application to Windows Live for Microsoft Authentication is a simple process.</span></span> <span data-ttu-id="16a7b-270">Si no se ha vinculado ya una aplicación para Windows Live, puede usar los siguientes pasos:</span><span class="sxs-lookup"><span data-stu-id="16a7b-270">If you have not already linked an application to Windows Live, you can use the following steps:</span></span>

1. <span data-ttu-id="16a7b-271">Vaya a [ https://go.microsoft.com/fwlink/?LinkID=144070 ](https://go.microsoft.com/fwlink/?LinkID=144070) y escriba el nombre de la cuenta de Microsoft y la contraseña cuando se le solicite, a continuación, haga clic en **iniciar sesión en**:</span><span class="sxs-lookup"><span data-stu-id="16a7b-271">Browse to [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070) and enter your Microsoft account name and password when prompted, then click **Sign in**:</span></span>

    <span data-ttu-id="16a7b-272">[![](external-authentication-services/_static/image64.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image63.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-272">[![](external-authentication-services/_static/image64.png "Click to Expand the Image")](external-authentication-services/_static/image63.png)</span></span>
2. <span data-ttu-id="16a7b-273">Escriba el nombre y el idioma de la aplicación cuando se le pida y, a continuación, haga clic en **acepto**:</span><span class="sxs-lookup"><span data-stu-id="16a7b-273">Enter the name and language of your application when prompted, and then click **I accept**:</span></span>

    <span data-ttu-id="16a7b-274">[![](external-authentication-services/_static/image66.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image65.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-274">[![](external-authentication-services/_static/image66.png "Click to Expand the Image")](external-authentication-services/_static/image65.png)</span></span>
3. <span data-ttu-id="16a7b-275">En el **configuración de la API** página de la aplicación, escriba el dominio de redirección para la aplicación y copia el **Id. de cliente** y **secreto de cliente** para el proyecto y, a continuación, Haga clic en **guardar**:</span><span class="sxs-lookup"><span data-stu-id="16a7b-275">On the **API Settings** page for your application, enter the redirect domain for your application and copy the **Client ID** and **Client secret** for your project, and then click **Save**:</span></span>

    <span data-ttu-id="16a7b-276">[![](external-authentication-services/_static/image68.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image67.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-276">[![](external-authentication-services/_static/image68.png "Click to Expand the Image")](external-authentication-services/_static/image67.png)</span></span>

<a id="DISABLE"></a>
### <a name="optional-disable-local-registration"></a><span data-ttu-id="16a7b-277">Opcional: Deshabilitar el registro Local</span><span class="sxs-lookup"><span data-stu-id="16a7b-277">Optional: Disable Local Registration</span></span>

<span data-ttu-id="16a7b-278">La funcionalidad de registro local de ASP.NET actual impedir que programas automatizados (bots) crear miembro cuentas; Por ejemplo, mediante una tecnología de validación y la prevención de bot como [CAPTCHA](../../../web-pages/overview/security/16-adding-security-and-membership.md).</span><span class="sxs-lookup"><span data-stu-id="16a7b-278">The current ASP.NET local registration functionality does not prevent automated programs (bots) from creating member accounts; for example, by using a bot-prevention and validation technology like [CAPTCHA](../../../web-pages/overview/security/16-adding-security-and-membership.md).</span></span> <span data-ttu-id="16a7b-279">Por este motivo, debe quitar el vínculo de formulario y el registro de inicio de sesión local en la página de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="16a7b-279">Because of this, you should remove the local login form and registration link on the login page.</span></span> <span data-ttu-id="16a7b-280">Para ello, abra el  *\_Login.cshtml* página en el proyecto y, a continuación, comente las líneas para el panel de inicio de sesión local y el vínculo de registro.</span><span class="sxs-lookup"><span data-stu-id="16a7b-280">To do so, open the *\_Login.cshtml* page in your project, and then comment out the lines for the local login panel and the registration link.</span></span> <span data-ttu-id="16a7b-281">La página resultante debería ser similar en el siguiente ejemplo de código:</span><span class="sxs-lookup"><span data-stu-id="16a7b-281">The resulting page should look like the following code sample:</span></span>

[!code-html[Main](external-authentication-services/samples/sample10.html)]

<span data-ttu-id="16a7b-282">Una vez que se ha deshabilitado el panel de inicio de sesión local y el vínculo de registro, la página de inicio de sesión mostrará solo los proveedores de autenticación externo que se han habilitado:</span><span class="sxs-lookup"><span data-stu-id="16a7b-282">Once the local login panel and the registration link have been disabled, your login page will only display the external authentication providers that you have enabled:</span></span>

<span data-ttu-id="16a7b-283">[![](external-authentication-services/_static/image70.png "Haga clic para expandir la imagen")](external-authentication-services/_static/image69.png)</span><span class="sxs-lookup"><span data-stu-id="16a7b-283">[![](external-authentication-services/_static/image70.png "Click to Expand the Image")](external-authentication-services/_static/image69.png)</span></span>
