---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
title: Crear el esquema de pertenencia en SQL Server (VB) | Documentos de Microsoft
author: rick-anderson
description: "Este tutorial se inicia mediante el examen de técnicas para agregar el esquema necesario para la base de datos para poder usar SqlMembershipProvider. A continuación, se wi..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/18/2008
ms.topic: article
ms.assetid: 112a674d-716f-41a6-99b8-4074d65a54c0
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 2dadf091c6ae77fdfaf76f4e1bda92fd3e949678
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/24/2018
---
<a name="creating-the-membership-schema-in-sql-server-vb"></a><span data-ttu-id="8d4d8-104">Crear el esquema de pertenencia en SQL Server (VB)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-104">Creating the Membership Schema in SQL Server (VB)</span></span>
====================
<span data-ttu-id="8d4d8-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8d4d8-106">[Descargar código](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) o [descarga de PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-106">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span></span>

> <span data-ttu-id="8d4d8-107">Este tutorial se inicia mediante el examen de técnicas para agregar el esquema necesario para la base de datos para poder usar SqlMembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="8d4d8-108">A continuación, agregaremos examine las tablas de clave en el esquema y describe su finalidad ni su importancia.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="8d4d8-109">Este tutorial finaliza con un vistazo a cómo saber qué proveedor debe usar el marco de trabajo de la pertenencia de una aplicación ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>


## <a name="introduction"></a><span data-ttu-id="8d4d8-110">Introducción</span><span class="sxs-lookup"><span data-stu-id="8d4d8-110">Introduction</span></span>

<span data-ttu-id="8d4d8-111">Los dos tutoriales anteriores examinados utilizando la autenticación de formularios para identificar los visitantes del sitio Web.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="8d4d8-112">El marco de trabajo de autenticación de formularios facilita a los desarrolladores a un usuario inicie sesión en un sitio Web y recordar a ellos a través de visitas de página mediante el uso de vales de autenticación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="8d4d8-113">La `FormsAuthentication` clase incluye métodos para generar el vale y éste se agrega a las cookies del visitante.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="8d4d8-114">El `FormsAuthenticationModule` examina todas las solicitudes entrantes y, para aquellos con un vale de autenticación válido, crea y asocia un `GenericPrincipal` y un `FormsIdentity` objeto con la solicitud actual.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="8d4d8-115">Autenticación mediante formularios es simplemente un mecanismo para conceder un vale de autenticación para un visitante al iniciar sesión en y, en las solicitudes subsiguientes, analizar ese vale para determinar la identidad del usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="8d4d8-116">Para que una aplicación web admitir las cuentas de usuario, todavía es necesario implementar un almacén de usuario y agregar funcionalidad para validar las credenciales, registre los nuevos usuarios y los cientos de otras tareas relacionadas con la cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="8d4d8-117">Antes de ASP.NET 2.0, los desarrolladores se encontraban en el enlace para la implementación de todas estas tareas relacionadas con la cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="8d4d8-118">Afortunadamente, el equipo ASP.NET reconoce este inconveniente e incorporó el marco de trabajo de pertenencia con ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="8d4d8-119">El marco de trabajo de pertenencia es un conjunto de clases de .NET Framework que proporcionan una interfaz de programación para realizar tareas relacionadas con la cuenta de usuario principales.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="8d4d8-120">Este marco de trabajo se crea a partir del [modelo de proveedor](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), que permite a los desarrolladores conecte una implementación personalizada a una API estándar.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="8d4d8-121">Como se describe en el <a id="Tutorial1"> </a> [ *principios básicos de seguridad y compatibilidad con ASP.NET* ](../introduction/security-basics-and-asp-net-support-vb.md) tutorial, .NET Framework incluye dos proveedores de pertenencia integrados: [ `ActiveDirectoryMembershipProvider` ](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) y [ `SqlMembershipProvider` ](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-vb.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="8d4d8-122">Como su nombre implica, el `SqlMembershipProvider` utiliza una base de datos de Microsoft SQL Server como almacén de usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="8d4d8-123">Para utilizar este proveedor en una aplicación, es necesario indicar al proveedor de la base de datos que se usará como el almacén.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="8d4d8-124">Como puede imaginar, la `SqlMembershipProvider` espera que la base de datos del almacén de usuario tienen ciertas tablas de base de datos, vistas y procedimientos almacenados.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="8d4d8-125">Tenemos que agregar este esquema esperado para la base de datos seleccionada.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="8d4d8-126">Este tutorial se inicia mediante el examen de técnicas para agregar el esquema necesario para la base de datos para poder usar el `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="8d4d8-127">A continuación, agregaremos examine las tablas de clave en el esquema y describe su finalidad ni su importancia.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="8d4d8-128">Este tutorial finaliza con un vistazo a cómo saber qué proveedor debe usar el marco de trabajo de la pertenencia de una aplicación ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="8d4d8-129">Comencemos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="8d4d8-130">Paso 1: Decidir dónde ubicar el almacén de usuario</span><span class="sxs-lookup"><span data-stu-id="8d4d8-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="8d4d8-131">Datos de una aplicación ASP.NET se almacenan normalmente en un número de tablas en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="8d4d8-132">Al implementar el `SqlMembershipProvider` debemos decidir si se debe colocar el esquema de pertenencia en la misma base de datos como los datos de aplicación o en una base de datos alternativa de esquema de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="8d4d8-133">Recomienda buscar el esquema de la pertenencia a la misma base de datos como los datos de aplicación por las razones siguientes:</span><span class="sxs-lookup"><span data-stu-id="8d4d8-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="8d4d8-134">**Mantenimiento** una aplicación cuyos datos se encapsulan en una base de datos es más fácil de entender, mantener e implementar que una aplicación que tiene dos bases de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-134">**Maintainability** � an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="8d4d8-135">**Integridad relacional** al ubicar las tablas basadas en la pertenencia a la misma base de datos como tablas de la aplicación es posible establecer [restricciones foreign key](http://en.wikipedia.org/wiki/Foreign_key) entre las claves principales en el Tablas relacionadas con la pertenencia y tablas de aplicación relacionada.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-135">**Relational Integrity** � by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="8d4d8-136">Separar los datos de almacén y aplicación de usuario en las bases de datos independientes solo tiene sentido, si tiene varias aplicaciones que cada uno de ellos utilizar bases de datos independientes, pero tienen que compartir un almacén de usuario común.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="8d4d8-137">Crear una base de datos</span><span class="sxs-lookup"><span data-stu-id="8d4d8-137">Creating a Database</span></span>

<span data-ttu-id="8d4d8-138">La aplicación que compilamos dado que el segundo tutorial no necesita aún una base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="8d4d8-139">Necesitamos uno ahora, sin embargo, para el almacén del usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="8d4d8-140">Vamos a crear uno y, a continuación, agregarle el esquema que necesita la `SqlMembershipProvider` proveedor (vea el paso 2).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="8d4d8-141">A lo largo de esta serie de tutoriales se va a utilizar un [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) base de datos para almacenar las tablas de la aplicación y la `SqlMembershipProvider` esquema.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="8d4d8-142">Esta decisión se toma por dos motivos: en primer lugar, debido a su costo - libre - Express Edition es la versión más readably accesible de SQL Server 2005; en segundo lugar, se pueden colocar las bases de datos de SQL Server 2005 Express Edition directamente en la aplicación web `App_Data` carpeta, lo que rápida y fácilmente a la base de datos del paquete y aplicación web juntos en un archivo ZIP y volver a implementar sin las instrucciones de instalación especiales u opciones de configuración.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="8d4d8-143">Si prefiere seguir el tutorial utiliza una versión no - Express Edition de SQL Server, no dude.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="8d4d8-144">Los pasos son prácticamente idénticos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-144">The steps are virtually identical.</span></span> <span data-ttu-id="8d4d8-145">El `SqlMembershipProvider` esquema trabajará con cualquier versión de Microsoft SQL Server 2000 y una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="8d4d8-146">En el Explorador de soluciones, haga doble clic en el `App_Data` carpeta y elija Agregar nuevo elemento.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="8d4d8-147">(Si no ve una `App_Data` carpeta en el proyecto, haga doble clic en el proyecto en el Explorador de soluciones, seleccione Agregar carpeta ASP.NET y elegir `App_Data`.) En el cuadro de diálogo Agregar nuevo elemento, optar por agregar una nueva base de datos de SQL denominado `SecurityTutorials.mdf`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="8d4d8-148">En este tutorial agregaremos la `SqlMembershipProvider` esquema para esta base de datos; en los tutoriales posteriores crearemos más tablas para capturar los datos de aplicación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>


<span data-ttu-id="8d4d8-149">[![Agregar una nueva base de datos SQL con el nombre de base de datos de SecurityTutorials.mdf a la carpeta App_Data](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span></span>

<span data-ttu-id="8d4d8-150">**Figura 1**: agregar una nueva base de datos de SQL denominada `SecurityTutorials.mdf` base de datos a la `App_Data` carpeta ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span></span>


<span data-ttu-id="8d4d8-151">Agregar una base de datos a la `App_Data` carpeta incluye automáticamente en la vista del explorador de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="8d4d8-152">(En la versión no - Express Edition de Visual Studio, el Explorador de base de datos se denomina el Explorador de servidores). Vaya al explorador de base de datos y expanda el recién agregados `SecurityTutorials` base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="8d4d8-153">Si no ve el Explorador de base de datos en pantalla, vaya al menú Ver y elija Explorador de base de datos o Ctrl + Alt + S de llamadas.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="8d4d8-154">Como se muestra en la figura 2, el `SecurityTutorials` base de datos está vacía: contiene ninguna tabla, no hay ninguna vista y ningún procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>


<span data-ttu-id="8d4d8-155">[![La base de datos de SecurityTutorials está vacío](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span></span>

<span data-ttu-id="8d4d8-156">**Figura 2**: el `SecurityTutorials` base de datos está vacía actualmente ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span></span>


## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="8d4d8-157">Paso 2: Agregar el`SqlMembershipProvider`esquema para la base de datos</span><span class="sxs-lookup"><span data-stu-id="8d4d8-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="8d4d8-158">El `SqlMembershipProvider` requiere un conjunto determinado de tablas, vistas y procedimientos almacenados que se instalen en la base de datos de almacén de usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="8d4d8-159">Estos objetos de base de datos necesarios se pueden agregar utilizando la [ `aspnet_regsql.exe` herramienta](https://msdn.microsoft.com/library/ms229862.aspx).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="8d4d8-160">Este archivo se encuentra en la `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` carpeta.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="8d4d8-161">El `aspnet_regsql.exe` herramienta ofrece funcionalidad de línea de comandos y una interfaz gráfica de usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="8d4d8-162">La interfaz gráfica es más descriptivo y es lo que se examinará en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="8d4d8-163">La interfaz de línea de comandos es útil cuando la adición de la `SqlMembershipProvider` esquema debe ser automatizada, como se muestra en la compilación de scripts o automatizar escenarios de prueba.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="8d4d8-164">El `aspnet_regsql.exe` herramienta se usa para agregar o quitar *los servicios de aplicación de ASP.NET* a una base de datos de SQL Server especificada.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="8d4d8-165">Los servicios de aplicación de ASP.NET abarcan los esquemas para la `SqlMembershipProvider` y `SqlRoleProvider`, junto con los esquemas para los proveedores de basado en SQL para otros marcos de trabajo de ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="8d4d8-166">Debemos proporcionar dos bits de información para el `aspnet_regsql.exe` herramienta:</span><span class="sxs-lookup"><span data-stu-id="8d4d8-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="8d4d8-167">Si desea agregar o quitar servicios de aplicaciones, y</span><span class="sxs-lookup"><span data-stu-id="8d4d8-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="8d4d8-168">La base de datos que se va a agregar o quitar el esquema de servicios de aplicación</span><span class="sxs-lookup"><span data-stu-id="8d4d8-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="8d4d8-169">En pedir la base de datos que se utiliza el `aspnet_regsql.exe` herramienta le pide que proporcione el nombre del servidor en que reside la base de datos, las credenciales de seguridad para conectarse a la base de datos y el nombre de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="8d4d8-170">Si usas la no - Express Edition de SQL Server, ya debe conocer esta información, ya que es la misma información que se debe proporcionar a través de una cadena de conexión cuando se trabaja con la base de datos a través de una página web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="8d4d8-171">Determinar el nombre del servidor y base de datos cuando se usa una base de datos de SQL Server 2005 Express Edition en el `App_Data` carpeta, sin embargo, es un poco más complicada.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="8d4d8-172">En la siguiente sección examina una manera sencilla para especificar el nombre de servidor y base de datos para una base de datos de SQL Server 2005 Express Edition en el `App_Data` carpeta.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="8d4d8-173">Si no está usando SQL Server 2005 Express Edition Llamarme ir directamente a la instalación la sección de servicios de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theappdatafolder"></a><span data-ttu-id="8d4d8-174">Determinar el servidor y el nombre de la base de datos para una base de datos SQL Server 2005 Express Edition en el`App_Data`carpeta</span><span class="sxs-lookup"><span data-stu-id="8d4d8-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="8d4d8-175">Para poder usar el `aspnet_regsql.exe` herramienta es necesario conocer los nombres de servidor y base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="8d4d8-176">El nombre del servidor es `localhost\InstanceName`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="8d4d8-177">Probablemente, el *nombreDeInstancia* es `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="8d4d8-178">Sin embargo, si ha instalado SQL Server 2005 Express Edition manualmente (es decir, no instala automáticamente durante la instalación de Visual Studio), es posible que haya seleccionado un nombre de instancia diferente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="8d4d8-179">El nombre de la base de datos es un poco más complicado determinar.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="8d4d8-180">Las bases de datos en el `App_Data` carpeta suelen tener un nombre de base de datos que incluya un [identificador único global](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) junto con la ruta de acceso al archivo de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="8d4d8-181">Es necesario determinar este nombre de base de datos con el fin de agregar el esquema de servicios de aplicación a través de `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="8d4d8-182">La manera más fácil de determinar el nombre de la base de datos es examinar mediante SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="8d4d8-183">SQL Server Management Studio proporciona una interfaz gráfica para administrar las bases de datos de SQL Server 2005, pero no se distribuye con Express Edition de SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="8d4d8-184">Las buenas noticias son que [puede descargar](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) la libre Express Edition de SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="8d4d8-185">Si también tiene una versión no - Express Edition de SQL Server 2005 instalado en el escritorio, es probable que se instala la versión completa de Management Studio.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="8d4d8-186">Puede usar la versión completa para determinar el nombre de la base de datos, siguiendo los mismos pasos tal como se describe a continuación para la edición Express.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="8d4d8-187">Empiece por cerrar Visual Studio para asegurarse de que se cierran los bloqueos impuestos por Visual Studio en el archivo de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="8d4d8-188">A continuación, inicie SQL Server Management Studio y conéctese a la `localhost\InstanceName` base de datos de SQL Server 2005 Express Edition.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="8d4d8-189">Como se indicó anteriormente, lo más probable es que el nombre de instancia es `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="8d4d8-190">Para la opción de autenticación, seleccione autenticación de Windows.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-190">For the Authentication option, select Windows Authentication.</span></span>


<span data-ttu-id="8d4d8-191">[![Conectarse a la instancia SQL Server 2005 Express Edition](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span></span>

<span data-ttu-id="8d4d8-192">**Figura 3**: conectarse a la instancia de SQL Server 2005 Express Edition ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span></span>


<span data-ttu-id="8d4d8-193">Después de conectarse a la instancia de SQL Server 2005 Express Edition, Management Studio muestra las carpetas para las bases de datos, la configuración de seguridad, los objetos de servidor y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="8d4d8-194">Si expande la pestaña bases de datos, verá que el `SecurityTutorials.mdf` base de datos es *no* registrada en la instancia de base de datos - necesitamos adjuntar la base de datos en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="8d4d8-195">Haga doble clic en la carpeta de bases de datos y elija adjuntar en el menú contextual.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="8d4d8-196">Se mostrará el cuadro de diálogo Adjuntar bases de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="8d4d8-197">Desde aquí, haga clic en el botón Agregar, vaya a la `SecurityTutorials.mdf` la base de datos y haga clic en Aceptar.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="8d4d8-198">La figura 4 muestra el cuadro de diálogo Adjuntar bases de datos después de la `SecurityTutorials.mdf` se ha seleccionado la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="8d4d8-199">Figura 5 se muestra el Explorador de objetos de Management Studio después de que se haya adjuntado correctamente la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>


<span data-ttu-id="8d4d8-200">[![Adjunte la base de datos SecurityTutorials.mdf](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span></span>

<span data-ttu-id="8d4d8-201">**Figura 4**: adjuntar el `SecurityTutorials.mdf` base de datos ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span></span>


<span data-ttu-id="8d4d8-202">[![La base de datos de SecurityTutorials.mdf aparece en la carpeta de bases de datos](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span></span>

<span data-ttu-id="8d4d8-203">**Figura 5**: el `SecurityTutorials.mdf` base de datos aparece en la carpeta de bases de datos ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span></span>


<span data-ttu-id="8d4d8-204">Como se muestra en la figura 5, el `SecurityTutorials.mdf` base de datos tiene un nombre en su lugar ocultas.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="8d4d8-205">Vamos a cambiarlo a una más fácil de recordar (y más fácil de escribir) nombre.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="8d4d8-206">Haga doble clic en la base de datos, elija el cambio de nombre en el menú contextual y cámbiele el nombre `SecurityTutorialsDatabase`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="8d4d8-207">Esto no cambia el nombre de archivo, solo el nombre de la base de datos se usa para identificarse a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>


<span data-ttu-id="8d4d8-208">[![Cambiar el nombre de la base de datos SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span></span>

<span data-ttu-id="8d4d8-209">**Figura 6**: cambiar el nombre de la base de datos `SecurityTutorialsDatabase`([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span></span>


<span data-ttu-id="8d4d8-210">En este momento se conocen los nombres de servidor y base de datos para la `SecurityTutorials.mdf` archivo de base de datos: `localhost\InstanceName` y `SecurityTutorialsDatabase`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="8d4d8-211">Ahora estamos listos instalar los servicios de aplicación a través de la `aspnet_regsql.exe` herramienta.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="8d4d8-212">Instalar los servicios de aplicación</span><span class="sxs-lookup"><span data-stu-id="8d4d8-212">Installing the Application Services</span></span>

<span data-ttu-id="8d4d8-213">Para iniciar el `aspnet_regsql.exe` herramienta, vaya al menú Inicio y elija ejecutar.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="8d4d8-214">Escriba `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` en el cuadro de texto y haga clic en Aceptar.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="8d4d8-215">Como alternativa, puede usar el Explorador de Windows para profundizar en la carpeta correspondiente y haga doble clic en el `aspnet_regsql.exe` archivo.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="8d4d8-216">Cualquier enfoque cumplirá los mismos resultados.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-216">Either approach will net the same results.</span></span>

<span data-ttu-id="8d4d8-217">Ejecuta el `aspnet_regsql.exe` herramienta sin ningún argumento de línea de comandos inicia la interfaz gráfica de usuario de Asistente para la instalación de ASP.NET SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="8d4d8-218">El asistente facilita agregar o quitar los servicios de aplicación de ASP.NET en una base de datos especificada.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="8d4d8-219">La primera pantalla del asistente, que se muestra en la figura 7, describe el propósito de la herramienta.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>


<span data-ttu-id="8d4d8-220">[![Use el hace de Asistente para el programa de instalación de ASP.NET SQL Server para agregar el esquema de pertenencia](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span></span>

<span data-ttu-id="8d4d8-221">**Figura 7**: usar ASP.NET SQL Server el programa de instalación asistente facilita para agregar el esquema de pertenencia ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span></span>


<span data-ttu-id="8d4d8-222">El segundo paso en el Asistente para nosotros le pregunta si desea quitar o agregar los servicios de aplicación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="8d4d8-223">Puesto que deseamos agregar tablas, vistas y procedimientos almacenados necesarios para el `SqlMembershipProvider`, elija Configurar SQL Server para la opción de servicios de aplicación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="8d4d8-224">Más adelante, si desea quitar este esquema de la base de datos, vuelva a ejecutar a este asistente, pero en su lugar, elija la información de servicios de aplicación de quitar de una opción de base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>


<span data-ttu-id="8d4d8-225">[![Elija la configurar SQL Server para la opción de servicios de aplicación](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span></span>

<span data-ttu-id="8d4d8-226">**Figura 8**: elija Configurar SQL Server para la opción de servicios de aplicación ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span></span>


<span data-ttu-id="8d4d8-227">El tercer paso solicita la información de la base de datos: el nombre del servidor, información de autenticación y el nombre de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="8d4d8-228">Si después de este tutorial y ha agregado el `SecurityTutorials.mdf` a la base de datos `App_Data`, adjunta a `localhost\InstanceName`y cambia su nombre a `SecurityTutorialsDatabase`, a continuación, utilice los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="8d4d8-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="8d4d8-229">Servidor:`localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="8d4d8-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="8d4d8-230">Autenticación de Windows</span><span class="sxs-lookup"><span data-stu-id="8d4d8-230">Windows authentication</span></span>
- <span data-ttu-id="8d4d8-231">Base de datos:`SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="8d4d8-231">Database: `SecurityTutorialsDatabase`</span></span>


<span data-ttu-id="8d4d8-232">[![Escriba la información de la base de datos](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span></span>

<span data-ttu-id="8d4d8-233">**Figura 9**: escriba la información de la base de datos ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span></span>


<span data-ttu-id="8d4d8-234">Después de escribir la información de la base de datos, haga clic en siguiente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-234">After entering the database information, click Next.</span></span> <span data-ttu-id="8d4d8-235">El último paso resume los pasos que se van a realizar.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="8d4d8-236">Haga clic en siguiente para instalar los servicios de aplicación y, a continuación, Finalizar para completar al asistente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="8d4d8-237">Si utiliza Management Studio para adjuntar la base de datos y el nombre del archivo de base de datos, asegúrese de separar la base de datos y cierre Management Studio antes de volver a abrir Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="8d4d8-238">Para separar el `SecurityTutorialsDatabase` de base de datos, haga doble clic en el nombre de la base de datos y, en el menú de tareas, elija Desasociar.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="8d4d8-239">Cuando se complete el asistente, vuelva a Visual Studio y navegue hasta el Explorador de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="8d4d8-240">Expanda la carpeta tablas.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-240">Expand the Tables folder.</span></span> <span data-ttu-id="8d4d8-241">Debería ver una serie de tablas cuyos nombres empiezan por el prefijo `aspnet_`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="8d4d8-242">Del mismo modo, una variedad de vistas y procedimientos almacenados puede encontrarse en las carpetas de vistas y procedimientos almacenados.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="8d4d8-243">Estos objetos de base de datos forman el esquema de servicios de aplicación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="8d4d8-244">Examinaremos los objetos de base de datos de pertenencia y rol específico en el paso 3.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>


<span data-ttu-id="8d4d8-245">[![Una variedad de tablas, vistas y procedimientos almacenados se han agregado a la base de datos](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span></span>

<span data-ttu-id="8d4d8-246">**Figura 10**: una variedad de tablas, vistas y almacenan los procedimientos se han agregado a la base de datos ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="8d4d8-247">El `aspnet_regsql.exe` interfaz gráfica de usuario de la herramienta instala el esquema de servicios de toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="8d4d8-248">Pero cuando se ejecuta `aspnet_regsql.exe` desde la línea de comandos puede especificar qué aplicación determinada de servicios de componentes para instalar (o quitar).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="8d4d8-249">Por lo tanto, si desea agregar solo las tablas, vistas y se almacenan los procedimientos necesarios para la `SqlMembershipProvider` y `SqlRoleProvider` proveedores, ejecutar `aspnet_regsql.exe` desde la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="8d4d8-250">Como alternativa, puede ejecutar manualmente el subconjunto de T-SQL, crear scripts usados por `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="8d4d8-251">Estos scripts se encuentran en el `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` carpeta con nombres como `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`, y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="8d4d8-252">En este punto hemos creado los objetos de base de datos que necesitan la `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="8d4d8-253">Sin embargo, todavía necesitamos indicar que el marco de trabajo de pertenencia que debe usar el `SqlMembershipProvider` (frente a, diga, el `ActiveDirectoryMembershipProvider`) y que la `SqlMembershipProvider` debe utilizar el `SecurityTutorials` base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="8d4d8-254">Analizaremos cómo especificar qué proveedor se debe usar y cómo personalizar la configuración del proveedor seleccionado en el paso 4.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="8d4d8-255">Pero primero, echemos un vistazo más profundo de los objetos de base de datos que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="8d4d8-256">Paso 3: Un vistazo a las tablas del esquema principal</span><span class="sxs-lookup"><span data-stu-id="8d4d8-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="8d4d8-257">Cuando se trabaja con los marcos de pertenencia y los Roles en una aplicación ASP.NET, los detalles de implementación están encapsulados por el proveedor.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="8d4d8-258">En el futuro los tutoriales que se va a interactuar con estos marcos de trabajo a través de .NET Framework `Membership` y `Roles` clases.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="8d4d8-259">Al usar estas API de alto nivel no necesitamos concernientes a nosotros mismos con los detalles de bajo nivel, como las consultas que se ejecutan o se modifican las tablas mediante la `SqlMembershipProvider` y `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="8d4d8-260">Por tanto, podríamos usar los marcos de pertenencia y los Roles con confianza sin necesidad de explorar el esquema de base de datos creado en el paso 2.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="8d4d8-261">Sin embargo, al crear las tablas para almacenar datos de aplicación, podemos necesitamos crear entidades relacionadas con usuarios o roles.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="8d4d8-262">Resulta útil para tener algunos conocimientos sobre la `SqlMembershipProvider` y `SqlRoleProvider` esquemas al establecer externa clave restricciones entre las tablas de datos de aplicación y las tablas que creó en el paso 2.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="8d4d8-263">Además, en determinadas circunstancias poco habituales podemos necesitar interactuar con el usuario y rol almacena directamente en el nivel de base de datos (en lugar de mediante la `Membership` o `Roles` clases).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="8d4d8-264">Creación de particiones el almacén del usuario en aplicaciones</span><span class="sxs-lookup"><span data-stu-id="8d4d8-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="8d4d8-265">Los marcos de pertenencia y los Roles se diseñan de forma que un único almacén de usuario y el rol se puede compartir entre muchas aplicaciones diferentes.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="8d4d8-266">Una aplicación de ASP.NET que usa los marcos de pertenencia o Roles debe especificar qué partición de aplicación que se utilizará.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="8d4d8-267">En resumen, varias aplicaciones web pueden usar los mismos almacenes de usuario y el rol.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="8d4d8-268">Figura 11 muestra los almacenes de usuario y el rol que se dividen en tres aplicaciones: HRSite, CustomerSite y SalesSite.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="8d4d8-269">Estas aplicaciones tres web tienen sus propios usuarios únicos y roles, pero todas ellas almacenan físicamente su información de cuenta y el rol de usuario de las mismas tablas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>


<span data-ttu-id="8d4d8-270">[![Las cuentas de usuario pueden dividirse en varias aplicaciones](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span></span>

<span data-ttu-id="8d4d8-271">**Figura 11**: cuentas pueden ser particiones a través de varias aplicaciones de usuario ([haga clic aquí para ver la imagen a tamaño completo](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="8d4d8-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span></span>


<span data-ttu-id="8d4d8-272">El `aspnet_Applications` tabla es lo que define estas particiones.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="8d4d8-273">Cada aplicación que utiliza la base de datos para almacenar información de la cuenta de usuario está representado por una fila en esta tabla.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="8d4d8-274">El `aspnet_Applications` tabla tiene cuatro columnas: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, y `Description`.`ApplicationId`</span><span class="sxs-lookup"><span data-stu-id="8d4d8-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.`ApplicationId`</span></span> <span data-ttu-id="8d4d8-275">es de tipo [ `uniqueidentifier` ](https://msdn.microsoft.com/library/ms187942.aspx) y es la clave principal de la tabla; `ApplicationName` proporciona un nombre fácil de usar único para cada aplicación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-275">is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="8d4d8-276">Vinculan las tablas relacionadas con el rol y la pertenencia a la `ApplicationId` campo `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="8d4d8-277">Por ejemplo, el `aspnet_Users` tabla, que contiene un registro para cada cuenta de usuario, tiene un `ApplicationId` campo de clave externa; ditto para el `aspnet_Roles` tabla.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="8d4d8-278">El `ApplicationId` campo en estas tablas especifica la partición de aplicación de la cuenta de usuario o rol al que pertenece.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="8d4d8-279">Almacenar información de la cuenta de usuario</span><span class="sxs-lookup"><span data-stu-id="8d4d8-279">Storing User Account Information</span></span>

<span data-ttu-id="8d4d8-280">Información de la cuenta de usuario se aloja en dos tablas: `aspnet_Users` y `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="8d4d8-281">El `aspnet_Users` tabla contiene campos que contienen la información de la cuenta de usuario esenciales.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="8d4d8-282">Las tres columnas más importantes son:</span><span class="sxs-lookup"><span data-stu-id="8d4d8-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="8d4d8-283">`UserId`es la clave principal (y del tipo `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="8d4d8-284">`UserName`es de tipo `nvarchar(256)` y, junto con la contraseña constituye las credenciales del usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="8d4d8-285">(Contraseña de un usuario se almacena en la `aspnet_Membership` tabla.) `ApplicationId` la cuenta de usuario se vincula a una aplicación determinada en `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="8d4d8-286">Hay un compuesto [ `UNIQUE` restricción](https://msdn.microsoft.com/library/ms191166.aspx) en el `UserName` y `ApplicationId` columnas.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="8d4d8-287">Esto garantiza que en una aplicación determinada, cada nombre de usuario es único, aunque permite para el mismo `UserName` para su uso en aplicaciones diferentes.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="8d4d8-288">El `aspnet_Membership` tabla incluye información de la cuenta de usuario adicionales, como la contraseña del usuario, dirección de correo electrónico, la última fecha de inicio de sesión y tiempo y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="8d4d8-289">Hay una correspondencia exacta entre los registros de la `aspnet_Users` y `aspnet_Membership` tablas.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="8d4d8-290">Esta relación se garantiza mediante la `UserId` campo `aspnet_Membership`, que actúa como clave principal de la tabla.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="8d4d8-291">Al igual que el `aspnet_Users` tabla, `aspnet_Membership` incluye un `ApplicationId` campo que une esta información a una partición de aplicación en particular.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="8d4d8-292">Proteger las contraseñas</span><span class="sxs-lookup"><span data-stu-id="8d4d8-292">Securing Passwords</span></span>

<span data-ttu-id="8d4d8-293">Información de contraseña se almacena en la `aspnet_Membership` tabla.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="8d4d8-294">El `SqlMembershipProvider` permite que las contraseñas que se almacenará en la base de datos mediante uno de las tres técnicas siguientes:</span><span class="sxs-lookup"><span data-stu-id="8d4d8-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="8d4d8-295">**Desactive** -la contraseña se almacena en la base de datos como texto sin formato.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="8d4d8-296">Desaconseja con esta opción.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-296">I strongly discourage using this option.</span></span> <span data-ttu-id="8d4d8-297">Si la base de datos se ve comprometido - ya sea por un usuario malintencionado que busca una puerta trasera o un empleado descontento que tiene acceso de la base de datos - las credenciales de cada usuario solo existen para la toma.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="8d4d8-298">**Aplica un algoritmo hash** -las contraseñas se envían con hash utilizando un algoritmo hash unidireccional y un valor salt generado aleatoriamente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="8d4d8-299">Este valor de hash (junto con el valor "salt") se almacena en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="8d4d8-300">**Cifrado** -una versión cifrada de la contraseña se almacena en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="8d4d8-301">En función de la técnica de almacenamiento de la contraseña utilizada en el `SqlMembershipProvider` configuración especificada en `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="8d4d8-302">Examinaremos personalizar el `SqlMembershipProvider` configuración en el paso 4.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="8d4d8-303">El comportamiento predeterminado consiste en almacenar el hash de la contraseña.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="8d4d8-304">Las columnas responsables de almacenar la contraseña son `Password`, `PasswordFormat`, y `PasswordSalt`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="8d4d8-305">`PasswordFormat`es un campo de tipo `int` cuyo valor indica la técnica que se utiliza para almacenar la contraseña: 0 para borrar; 1 para Hashed; 2 para el cifrado.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="8d4d8-306">`PasswordSalt`se asigna una cadena generada de forma aleatoria, independientemente de la técnica de almacenamiento de la contraseña utilizada; el valor de `PasswordSalt` solo se usa al calcular el hash de la contraseña.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="8d4d8-307">Por último, la `Password` columna contiene los datos de la contraseña real, ya sea la contraseña de texto sin formato, el hash de la contraseña o la contraseña cifrada.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="8d4d8-308">Tabla 1 se muestran estas tres columnas quedará para las distintas técnicas de almacenamiento al almacenar la contraseña MiSecreto!</span><span class="sxs-lookup"><span data-stu-id="8d4d8-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="8d4d8-309">.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-309">.</span></span>

| <span data-ttu-id="8d4d8-310">**Técnica de almacenamiento&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="8d4d8-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="8d4d8-311">**Password&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="8d4d8-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="8d4d8-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="8d4d8-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="8d4d8-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="8d4d8-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="8d4d8-314">Clear</span><span class="sxs-lookup"><span data-stu-id="8d4d8-314">Clear</span></span> | <span data-ttu-id="8d4d8-315">¡MiSecreto!</span><span class="sxs-lookup"><span data-stu-id="8d4d8-315">MySecret!</span></span> | <span data-ttu-id="8d4d8-316">0</span><span class="sxs-lookup"><span data-stu-id="8d4d8-316">0</span></span> | <span data-ttu-id="8d4d8-317">tTnkPlesqissc2y2SMEygA==</span><span class="sxs-lookup"><span data-stu-id="8d4d8-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="8d4d8-318">Aplica un algoritmo hash</span><span class="sxs-lookup"><span data-stu-id="8d4d8-318">Hashed</span></span> | <span data-ttu-id="8d4d8-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span><span class="sxs-lookup"><span data-stu-id="8d4d8-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="8d4d8-320">1</span><span class="sxs-lookup"><span data-stu-id="8d4d8-320">1</span></span> | <span data-ttu-id="8d4d8-321">wFgjUfhdUFOCKQiI61vtiQ==</span><span class="sxs-lookup"><span data-stu-id="8d4d8-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="8d4d8-322">Cifrado</span><span class="sxs-lookup"><span data-stu-id="8d4d8-322">Encrypted</span></span> | <span data-ttu-id="8d4d8-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="8d4d8-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="8d4d8-324">2</span><span class="sxs-lookup"><span data-stu-id="8d4d8-324">2</span></span> | <span data-ttu-id="8d4d8-325">LSRzhGS/aa/oqAXGLHJNBw==</span><span class="sxs-lookup"><span data-stu-id="8d4d8-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="8d4d8-326">**Tabla 1**: valores de ejemplo para los campos relacionados con la contraseña al almacenar la contraseña MiSecreto!</span><span class="sxs-lookup"><span data-stu-id="8d4d8-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="8d4d8-327">El cifrado determinado o el algoritmo hash utilizado por el `SqlMembershipProvider` viene determinado por la configuración en el `<machineKey>` elemento.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="8d4d8-328">Analizamos este elemento de configuración en el paso 3 de la <a id="Tutorial3"> </a> [ *configuración de autenticación de formularios y temas avanzados* ](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="8d4d8-329">Almacenar los Roles y las asociaciones de rol</span><span class="sxs-lookup"><span data-stu-id="8d4d8-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="8d4d8-330">El marco de trabajo de Roles permite a los desarrolladores definir un conjunto de roles y especificar qué usuarios pertenecen a qué funciones.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="8d4d8-331">Esta información se captura en la base de datos a través de dos tablas: `aspnet_Roles` y `aspnet_UsersInRoles`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="8d4d8-332">Cada registro de la `aspnet_Roles` tabla representa un rol para una aplicación concreta.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="8d4d8-333">Muy parecida a la `aspnet_Users` tabla, el `aspnet_Roles` tabla tiene tres columnas pertinentes para nuestro análisis:</span><span class="sxs-lookup"><span data-stu-id="8d4d8-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="8d4d8-334">`RoleId`es la clave principal (y del tipo `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="8d4d8-335">`RoleName` es de tipo `nvarchar(256)`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="8d4d8-336">Y `ApplicationId` la cuenta de usuario se vincula a una aplicación determinada en `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="8d4d8-337">Hay un compuesto `UNIQUE` restricción en la `RoleName` y `ApplicationId` columnas, asegurándose de que en una aplicación determinada cada nombre de rol es único.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="8d4d8-338">El `aspnet_UsersInRoles` tabla actúa como una asignación entre usuarios y roles.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="8d4d8-339">Hay solo dos columnas - `UserId` y `RoleId` - y juntas constituyen una clave principal compuesta.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="8d4d8-340">Paso 4: Especificar el proveedor y personalizar su configuración</span><span class="sxs-lookup"><span data-stu-id="8d4d8-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="8d4d8-341">Todos los marcos que admiten el modelo de proveedor, como los marcos de pertenencia y los Roles - carecen de detalles de implementación por sí mismos y en su lugar delegar esa responsabilidad a una clase de proveedor.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="8d4d8-342">En el caso del marco de pertenencia, el `Membership` clase define la API para administrar cuentas de usuario, pero no interactúa directamente con ningún almacén de usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="8d4d8-343">En su lugar, el `Membership` métodos entregar la clase la solicitud al proveedor configurado - utilizaremos el `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="8d4d8-344">Cuando se invoca uno de los métodos en el `Membership` (clase), ¿cómo el marco de trabajo de pertenencia sabe para delegar la llamada a la `SqlMembershipProvider`?</span><span class="sxs-lookup"><span data-stu-id="8d4d8-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="8d4d8-345">El `Membership` clase tiene un [ `Providers` propiedad](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) que contiene una referencia a todas las clases de proveedor registrado disponibles para su uso por el marco de trabajo de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="8d4d8-346">Cada proveedor registrado tiene un nombre de asociado y el tipo.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="8d4d8-347">El nombre proporciona una manera fácil de usar para hacer referencia a un proveedor determinado en el `Providers` colección, mientras que el tipo identifica la clase de proveedor.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="8d4d8-348">Además, cada proveedor registrado puede incluir valores de configuración.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="8d4d8-349">Valores de configuración para el marco de trabajo de pertenencia incluyen `PasswordFormat` y `requiresUniqueEmail`, entre otros muchos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-349">Configuration settings for the Membership framework include `PasswordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="8d4d8-350">Consulte la tabla 2 para obtener una lista completa de valores de configuración usados por la `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="8d4d8-351">La `Providers` contenido de la propiedad se especifica mediante los valores de configuración de la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="8d4d8-352">De forma predeterminada, todas las aplicaciones web tienen un proveedor denominado `AspNetSqlMembershipProvider` de tipo `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="8d4d8-353">Este proveedor de pertenencia predeterminado está registrado en `machine.config` (ubicado en `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span><span class="sxs-lookup"><span data-stu-id="8d4d8-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample1.xml)]

<span data-ttu-id="8d4d8-354">Como el marcado anterior muestra, la [ `<membership>` elemento](https://msdn.microsoft.com/library/1b9hw62f.aspx) define los valores de configuración para el marco de trabajo de la pertenencia a la [ `<providers>` elemento secundario](https://msdn.microsoft.com/library/6d4936ht.aspx) especifica registrado proveedores.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="8d4d8-355">Los proveedores pueden agregar o quitar mediante el [ `<add>` ](https://msdn.microsoft.com/library/whae3t94.aspx) o [ `<remove>` ](https://msdn.microsoft.com/library/aykw9a6d.aspx) elementos; utilice la [ `<clear>` ](https://msdn.microsoft.com/library/t062y6yc.aspx) elemento que se va a todos los quitar actualmente proveedores registrados.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="8d4d8-356">Como el marcado anterior muestra, `machine.config` agrega un proveedor denominado `AspNetSqlMembershipProvider` de tipo `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="8d4d8-357">Además el `name` y `type` atributos, los `<add>` elemento contiene atributos que definen los valores de configuración distintos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="8d4d8-358">Tabla 2 se enumeran los contadores `SqlMembershipProvider`-opciones de configuración específicas, junto con una descripción de cada uno.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="8d4d8-359">Los valores predeterminados que se indican en la tabla 2 hacen referencia a los valores predeterminados definidos en la `SqlMembershipProvider` clase.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="8d4d8-360">Tenga en cuenta que no todos los valores de configuración de `AspNetSqlMembershipProvider` corresponden a los valores predeterminados de la `SqlMembershipProvider` clase.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="8d4d8-361">Por ejemplo, si no se especifica en un proveedor de pertenencia, el `requiresUniqueEmail` establecer los valores predeterminados en true.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="8d4d8-362">Sin embargo, el `AspNetSqlMembershipProvider` reemplaza este valor predeterminado mediante la especificación explícita de un valor de `false`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="8d4d8-363">**Establecer&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="8d4d8-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="8d4d8-364">**Descripción&lt;\_o3a\_p /&gt;**</span><span class="sxs-lookup"><span data-stu-id="8d4d8-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="8d4d8-365">Recuerde que el marco de pertenencia permite que un almacén de usuario único tener particiones en varias aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="8d4d8-366">Este valor indica el nombre de la partición de aplicaciones utilizada por el proveedor de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="8d4d8-367">Si este valor no se especifica explícitamente, se establece en tiempo de ejecución, en el valor de ruta de acceso de la raíz virtual de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="8d4d8-368">Especifica el valor de tiempo de espera de comando SQL (en segundos).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="8d4d8-369">El valor predeterminado es 30.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="8d4d8-370">El nombre de la cadena de conexión en el `<connectionStrings>` elemento que se va a usar para conectarse a la base de datos de almacén de usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="8d4d8-371">Este valor es obligatorio.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="8d4d8-372">Proporciona una descripción fácil de usar del proveedor registrado.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="8d4d8-373">Especifica si los usuarios pueden recuperar su contraseña olvidada.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="8d4d8-374">El valor predeterminado es `false`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="8d4d8-375">Indica si los usuarios pueden restablecer su contraseña.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="8d4d8-376">Tiene como valor predeterminado `true`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="8d4d8-377">El número máximo de intentos de inicio de sesión incorrecto que puede producirse por un usuario determinado durante especificado `passwordAttemptWindow` antes de que el usuario está bloqueado. El valor predeterminado es 5.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="8d4d8-378">El número mínimo de caracteres no alfanuméricos que deben aparecer en una contraseña de usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="8d4d8-379">Este valor debe estar entre 0 y 128; el valor predeterminado es 1.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="8d4d8-380">El número mínimo de caracteres necesarios en una contraseña.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="8d4d8-381">Este valor debe estar entre 0 y 128; el valor predeterminado es 7.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="8d4d8-382">El nombre del proveedor registrado.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-382">The name of the registered provider.</span></span> <span data-ttu-id="8d4d8-383">Este valor es obligatorio.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="8d4d8-384">El número de minutos durante los que no pudo se realiza el seguimiento de los intentos de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="8d4d8-385">Si un usuario proporciona credenciales de inicio de sesión no válido `maxInvalidPasswordAttempts` especifican de veces dentro de esta ventana, se les bloquea. El valor predeterminado es 10.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="8d4d8-386">El formato de almacenamiento de contraseña: `Clear`, `Hashed`, o `Encrypted`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="8d4d8-387">De manera predeterminada, es `Hashed`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="8d4d8-388">Si se proporciona, esta expresión regular se utiliza para evaluar la seguridad de la contraseña del usuario seleccionado al crear una nueva cuenta o al cambiar su contraseña.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="8d4d8-389">El valor predeterminado es una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="8d4d8-390">Especifica si un usuario debe responder su pregunta de seguridad al recuperar o restablecer su contraseña.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="8d4d8-391">El valor predeterminado es `true`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="8d4d8-392">Indica si todas las cuentas de usuario en una partición determinada aplicación deben tener una dirección de correo electrónico única.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="8d4d8-393">El valor predeterminado es `true`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="8d4d8-394">Especifica el tipo del proveedor.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-394">Specifies the type of the provider.</span></span> <span data-ttu-id="8d4d8-395">Este valor es obligatorio.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-395">This value is required.</span></span> |

<span data-ttu-id="8d4d8-396">**Tabla 2**: pertenencia y `SqlMembershipProvider` valores de configuración</span><span class="sxs-lookup"><span data-stu-id="8d4d8-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="8d4d8-397">Además `AspNetSqlMembershipProvider`, otros proveedores de pertenencia pueden que esté registrados en una base de aplicación por aplicación mediante la adición de marcado similar a la `Web.config` archivo.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="8d4d8-398">El marco de trabajo de Roles funciona en gran parte del mismo modo: no hay un proveedor de funciones registrado de forma predeterminada en `machine.config` y los proveedores registrados pueden personalizarse en una función de aplicación por aplicación en `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="8d4d8-399">Examinaremos el marco de trabajo de Roles y sus marcas de configuración en detalle en un tutorial posterior.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="8d4d8-400">Personalizar el`SqlMembershipProvider`configuración</span><span class="sxs-lookup"><span data-stu-id="8d4d8-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="8d4d8-401">El valor predeterminado `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) tiene su `connectionStringName` atributo establecido en `LocalSqlServer`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="8d4d8-402">Al igual que el `AspNetSqlMembershipProvider` proveedor, el nombre de la cadena de conexión `LocalSqlServer` se define en `machine.config`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample2.xml)]

<span data-ttu-id="8d4d8-403">Como puede ver, esta cadena de conexión define una base de datos se encuentra en SQL 2005 Express Edition | DataDirectory|aspnetdb. mdf.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf.</span></span> <span data-ttu-id="8d4d8-404">La cadena | DataDirectory | se traduce en tiempo de ejecución para que apunte a la `~/App_Data/` directorio, por lo que la ruta de acceso de base de datos | DataDirectory|aspnetdb. mdf se traduce en `~/App_Data` / `aspnet.mdf`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="8d4d8-405">Si no ha especificado ninguna información de proveedor de pertenencia en nuestra aplicación `Web.config` archivo, la aplicación utiliza el proveedor de pertenencia predeterminado registrado, `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="8d4d8-406">Si el `~/App_Data/aspnet.mdf` base de datos no existe, el tiempo de ejecución ASP.NET creará automáticamente y agregue el esquema de servicios de aplicación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="8d4d8-407">Sin embargo, no queremos usar el `aspnet.mdf` base de datos; en su lugar, desea usar el `SecurityTutorials.mdf` base de datos se creó en el paso 2.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="8d4d8-408">Esta modificación puede realizarse de dos maneras:</span><span class="sxs-lookup"><span data-stu-id="8d4d8-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="8d4d8-409">**Especifique un valor para el****`LocalSqlServer`****nombre de cadena de conexión en****`Web.config`****.**</span><span class="sxs-lookup"><span data-stu-id="8d4d8-409">**Specify a value for the****`LocalSqlServer`****connection string name in****`Web.config`****.**</span></span> <span data-ttu-id="8d4d8-410">Sobrescribiendo el `LocalSqlServer` valor de nombre de la cadena de conexión en `Web.config`, podemos utilizar el proveedor de pertenencia predeterminado registrado (`AspNetSqlMembershipProvider`) y hacer que funcione correctamente con el `SecurityTutorials.mdf` base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="8d4d8-411">Este enfoque es adecuado si el contenido con los valores de configuración especificados por `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="8d4d8-412">Para obtener más información sobre esta técnica, consulte [Scott Guthrie](https://weblogs.asp.net/scottgu/)de entrada de blog, [configurar servicios de aplicación de ASP.NET 2.0 para utilizar SQL Server 2000 o SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="8d4d8-413">**Agregar un nuevo proveedor registrado del tipo****`SqlMembershipProvider`****y configurar su****`connectionStringName`****configuración para que apunte a la****`SecurityTutorials.mdf`****base de datos.**</span><span class="sxs-lookup"><span data-stu-id="8d4d8-413">**Add a new registered provider of type****`SqlMembershipProvider`****and configure its****`connectionStringName`****setting to point to the****`SecurityTutorials.mdf`****database.**</span></span> <span data-ttu-id="8d4d8-414">Este enfoque es útil en escenarios donde desea personalizar otras propiedades de configuración además de la cadena de conexión de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="8d4d8-415">En Mis propio proyectos siempre use este enfoque debido a su flexibilidad y mejorar la legibilidad.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="8d4d8-416">Antes de que podemos agregar un nuevo proveedor registrado que hace referencia a la `SecurityTutorials.mdf` base de datos, primero tenemos que agregar un valor de cadena de conexión adecuada en la `<connectionStrings>` sección `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="8d4d8-417">El marcado siguiente agrega una nueva cadena de conexión denominada `SecurityTutorialsConnectionString` que hace referencia a SQL Server 2005 Express Edition `SecurityTutorials.mdf` en la base de datos la `App_Data` carpeta.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="8d4d8-418">Si se usa un archivo de base de datos alternativa, actualice la cadena de conexión según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="8d4d8-419">Para obtener más información sobre la formación de la cadena de conexión correcta, consulte [ConnectionStrings.com](http://www.connectionstrings.com/).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="8d4d8-420">A continuación, agregue el siguiente marcado de configuración de pertenencia a la `Web.config` archivo.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="8d4d8-421">Este marcado registra un proveedor nuevo denominado `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample4.xml)]

<span data-ttu-id="8d4d8-422">Además de registrar el `SecurityTutorialsSqlMembershipProvider` proveedor, el marcado anterior define la `SecurityTutorialsSqlMembershipProvider` como proveedor predeterminado (a través de la `defaultProvider` atributo el `<membership>` elemento).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="8d4d8-423">Recuerde que el marco de trabajo de suscripción puede tener varios de los proveedores registrados.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="8d4d8-424">Puesto que `AspNetSqlMembershipProvider` está registrado como el primer proveedor de `machine.config`, que actúa como el proveedor predeterminado a menos que se indique lo contrario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="8d4d8-425">En la actualidad, nuestra aplicación tiene dos proveedores registrados: `AspNetSqlMembershipProvider` y `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="8d4d8-426">Sin embargo, antes de registrar el `SecurityTutorialsSqlMembershipProvider` proveedor se podríamos borraran todas previamente los proveedores registrados mediante la adición de un [ `<clear />` elemento](https://msdn.microsoft.com/library/t062y6yc.aspx) inmediatamente antes de nuestro `<add>` elemento.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="8d4d8-427">Esto podría borrar la `AspNetSqlMembershipProvider` en la lista de los proveedores registrados, lo que significa que el `SecurityTutorialsSqlMembershipProvider` sería el único proveedor de pertenencia registrado.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="8d4d8-428">Si se usa este enfoque, no se necesita marcar el `SecurityTutorialsSqlMembershipProvider` como el proveedor predeterminado, ya que es el único proveedor de pertenencia registrado.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="8d4d8-429">Para obtener más información sobre el uso de `<clear />`, consulte [mediante `<clear />` al agregar proveedores](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-429">For more information on using `<clear />`, see [Using `<clear />` When Adding providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="8d4d8-430">Tenga en cuenta que la `SecurityTutorialsSqlMembershipProvider`del `connectionStringName` establecer referencias a los recién agregados `SecurityTutorialsConnectionString` nombre de la cadena de conexión y que su `applicationName` configuración se ha establecido en un valor de SecurityTutorials.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="8d4d8-431">Además, el `requiresUniqueEmail` configuración se ha establecido en `true`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="8d4d8-432">Todas las demás opciones de configuración son idénticos a los valores de `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="8d4d8-433">No dude en realice las modificaciones de configuración en este caso, si lo desea.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="8d4d8-434">Por ejemplo, puede reforzar la seguridad de la contraseña al requerir dos caracteres no alfanuméricos en lugar de uno, o mediante el aumento de la longitud de la contraseña a ocho caracteres en lugar de siete.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="8d4d8-435">Recuerde que el marco de pertenencia permite que un almacén de usuario único tener particiones en varias aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="8d4d8-436">El proveedor de pertenencia `applicationName` valor indica que la aplicación utiliza el proveedor cuando se trabaja con el almacén del usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="8d4d8-437">Es importante que establezca explícitamente un valor para el `applicationName` configuración porque si el `applicationName` no se establece explícitamente, se asigna a la ruta de acceso de la raíz virtual de la aplicación web en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="8d4d8-438">Esto funciona bien siempre y cuando no cambie la ruta de acceso de la raíz virtual de la aplicación, pero si mueve la aplicación a otra ruta de acceso, el `applicationName` configuración cambiará demasiado.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="8d4d8-439">Cuando esto ocurre, el proveedor de pertenencia comenzará a funcionar con una partición de aplicación diferente que se usó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="8d4d8-440">Cuentas de usuario creadas antes del traslado residen en una partición de aplicación diferente y los usuarios ya no podrá iniciar sesión en el sitio.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="8d4d8-441">Para obtener una explicación más detallada sobre este asunto, consulte [siempre establece la `applicationName` propiedad al configurar ASP.NET 2.0 pertenencia y otros proveedores](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="8d4d8-442">Resumen</span><span class="sxs-lookup"><span data-stu-id="8d4d8-442">Summary</span></span>

<span data-ttu-id="8d4d8-443">En este momento tenemos una base de datos con los servicios de aplicación configurada (`SecurityTutorials.mdf`) y ha configurado la aplicación web para que use el marco de trabajo de la pertenencia a la `SecurityTutorialsSqlMembershipProvider` acaba de registrar el proveedor.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="8d4d8-444">Este proveedor registrado es de tipo `SqlMembershipProvider` y tiene su `connectionStringName` establecido en la cadena de conexión adecuada (`SecurityTutorialsConnectionString`) y su `applicationName` valor explícitamente establecido.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="8d4d8-445">Ahora estamos listos usar el marco de pertenencia de nuestra aplicación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="8d4d8-446">En el siguiente tutorial examinaremos cómo crear nuevas cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="8d4d8-447">Después de que se explorará autenticar a los usuarios, realizar la autorización basada en usuario y almacenar información adicional relacionada con el usuario en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="8d4d8-448">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="8d4d8-449">Información adicional</span><span class="sxs-lookup"><span data-stu-id="8d4d8-449">Further Reading</span></span>

<span data-ttu-id="8d4d8-450">Para obtener más información sobre los temas tratados en este tutorial, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="8d4d8-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="8d4d8-451">Establezca siempre la `applicationName` propiedad al configurar ASP.NET 2.0 pertenencia y otros proveedores</span><span class="sxs-lookup"><span data-stu-id="8d4d8-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="8d4d8-452">Servicios de aplicaciones configurar ASP.NET 2.0 para usar SQL Server 2000 o SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="8d4d8-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="8d4d8-453">Descargar SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="8d4d8-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="8d4d8-454">Examen de ASP.NET 2.0 s pertenencia, funciones y perfil</span><span class="sxs-lookup"><span data-stu-id="8d4d8-454">Examining ASP.NET 2.0�s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="8d4d8-455">El `<add>` elemento a los proveedores de pertenencia</span><span class="sxs-lookup"><span data-stu-id="8d4d8-455">The `<add>` Element for providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="8d4d8-456">El `<membership>` elemento</span><span class="sxs-lookup"><span data-stu-id="8d4d8-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="8d4d8-457">El `<providers>` , elemento de pertenencia</span><span class="sxs-lookup"><span data-stu-id="8d4d8-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="8d4d8-458">Con `<clear />` al agregar proveedores</span><span class="sxs-lookup"><span data-stu-id="8d4d8-458">Using `<clear />` When Adding providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="8d4d8-459">Trabajar directamente con el`SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="8d4d8-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="8d4d8-460">Aprendizaje mediante vídeo sobre los temas incluidos en este Tutorial</span><span class="sxs-lookup"><span data-stu-id="8d4d8-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="8d4d8-461">Descripción de las pertenencias a ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8d4d8-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="8d4d8-462">Configurar SQL para trabajar con esquemas de pertenencia</span><span class="sxs-lookup"><span data-stu-id="8d4d8-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="8d4d8-463">Cambiar la configuración de la pertenencia en el esquema de pertenencia predeterminado</span><span class="sxs-lookup"><span data-stu-id="8d4d8-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="8d4d8-464">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="8d4d8-464">About the Author</span></span>

<span data-ttu-id="8d4d8-465">Scott Mitchell, autor de varios libros sobre ASP/ASP.NET y fundador de 4GuysFromRolla.com, ha trabajado con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8d4d8-466">Scott funciona como un consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8d4d8-467">Su último libro es *[SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="8d4d8-468">Puede ponerse en contacto Scott [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) o a través de su blog en [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="8d4d8-469">Agradecimientos especiales a</span><span class="sxs-lookup"><span data-stu-id="8d4d8-469">Special Thanks To</span></span>

<span data-ttu-id="8d4d8-470">Esta serie de tutoriales se revisó por varios revisores útiles.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8d4d8-471">Revisor inicial para este tutorial era Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="8d4d8-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="8d4d8-472">¿Está interesado en revisar mi próximos artículos MSDN?</span><span class="sxs-lookup"><span data-stu-id="8d4d8-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8d4d8-473">Si es así, me quitar una línea en [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="8d4d8-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="8d4d8-474">[Anterior](storing-additional-user-information-cs.md)
[Siguiente](creating-user-accounts-vb.md)</span><span class="sxs-lookup"><span data-stu-id="8d4d8-474">[Previous](storing-additional-user-information-cs.md)
[Next](creating-user-accounts-vb.md)</span></span>
