---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
title: Adición de confirmación del cliente cuando se elimina (C#) | Documentos de Microsoft
author: rick-anderson
description: En las interfaces que hemos creado hasta ahora, un usuario puede eliminar accidentalmente datos haciendo clic en el botón Eliminar cuando realmente deseaba hacer clic en el botón Editar. En este t...
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/17/2006
ms.topic: article
ms.assetid: f6e2a12a-2b5e-48fd-8db3-1e94a500c19a
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: 72b15d498e45cc519a14ecfe39111b224db88c30
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
---
<a name="adding-client-side-confirmation-when-deleting-c"></a><span data-ttu-id="e7ac9-104">Adición de confirmación del cliente cuando se elimina (C#)</span><span class="sxs-lookup"><span data-stu-id="e7ac9-104">Adding Client-Side Confirmation When Deleting (C#)</span></span>
====================
<span data-ttu-id="e7ac9-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="e7ac9-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="e7ac9-106">[Descargar la aplicación de ejemplo](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) o [descarga de PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="e7ac9-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) or [Download PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span></span>

> <span data-ttu-id="e7ac9-107">En las interfaces que hemos creado hasta ahora, un usuario puede eliminar accidentalmente datos haciendo clic en el botón Eliminar cuando realmente deseaba hacer clic en el botón Editar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-107">In the interfaces we've created so far, a user can accidentally delete data by clicking the Delete button when they meant to click the Edit button.</span></span> <span data-ttu-id="e7ac9-108">En este tutorial vamos a agregar un cuadro de diálogo de confirmación del cliente que aparece cuando se hace clic en el botón Eliminar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-108">In this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>


## <a name="introduction"></a><span data-ttu-id="e7ac9-109">Introducción</span><span class="sxs-lookup"><span data-stu-id="e7ac9-109">Introduction</span></span>

<span data-ttu-id="e7ac9-110">En los últimos varios tutoriales se ha visto cómo usar la arquitectura de la aplicación, ObjectDataSource y los controles Web de datos conjuntamente para proporcionar Insertar, modificar y eliminar las capacidades.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-110">Over the past several tutorials we ve seen how to use our application architecture, ObjectDataSource, and the data Web controls in concert to provide inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="e7ac9-111">La eliminación de las interfaces se ha examinado hasta ahora se han formada por una eliminación botón que, cuando hace clic en, provoca una devolución de datos e invoca las operaciones de asignación ObjectDataSource `Delete()` método.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-111">The deleting interfaces we ve examined thus far have been composed of a Delete button that, when clicked, causes a postback and invokes the ObjectDataSource s `Delete()` method.</span></span> <span data-ttu-id="e7ac9-112">El `Delete()` método, a continuación, invoca el método configurado de la capa de lógica empresarial, lo que propaga la llamada bajando a la capa de acceso a datos, emisión real `DELETE` instrucción a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-112">The `Delete()` method then invokes the configured method from the Business Logic Layer, which propagates the call down to the Data Access Layer, issuing the actual `DELETE` statement to the database.</span></span>

<span data-ttu-id="e7ac9-113">Aunque esta interfaz de usuario permite a los visitantes eliminar registros a través de los controles GridView, DetailsView o FormView, no tiene a ningún tipo de confirmación cuando el usuario hace clic en el botón Eliminar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-113">While this user interface enables visitors to delete records through the GridView, DetailsView, or FormView controls, it lacks any sort of confirmation when the user clicks the Delete button.</span></span> <span data-ttu-id="e7ac9-114">Si un usuario accidentalmente hace clic en el botón Eliminar cuando realmente deseaba hacer clic en Editar, en su lugar, se eliminará el registro que pretenden actualizar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-114">If a user accidentally clicks the Delete button when they meant to click Edit, the record they meant to update will instead be deleted.</span></span> <span data-ttu-id="e7ac9-115">Para ayudar a evitar este problema, en este tutorial vamos a agregar un cuadro de diálogo de confirmación del cliente que aparece cuando se hace clic en el botón Eliminar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-115">To help prevent this, in this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>

<span data-ttu-id="e7ac9-116">El código JavaScript `confirm(string)` función muestra su parámetro de entrada de cadena como el texto dentro de un cuadro de diálogo modal que está equipado con dos botones: Aceptar y cancela (consulte la figura 1).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-116">The JavaScript `confirm(string)` function displays its string input parameter as the text inside a modal dialog box that comes equipped with two buttons - OK and Cancel (see Figure 1).</span></span> <span data-ttu-id="e7ac9-117">El `confirm(string)` función devuelve un valor booleano dependiendo de qué botón se hizo clic (`true`, si el usuario hace clic en Aceptar, y `false` si hacen clic en Cancelar).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-117">The `confirm(string)` function returns a Boolean value depending on what button is clicked (`true`, if the user clicks OK, and `false` if they click Cancel).</span></span>


![El método de JavaScript confirm(string) muestra un estado Modal, cuadro de mensajes de cliente](adding-client-side-confirmation-when-deleting-cs/_static/image1.png)

<span data-ttu-id="e7ac9-119">**Figura 1**: el código JavaScript `confirm(string)` método muestra un cuadro de mensaje Modal, de cliente</span><span class="sxs-lookup"><span data-stu-id="e7ac9-119">**Figure 1**: The JavaScript `confirm(string)` Method Displays a Modal, Client-Side Messagebox</span></span>


<span data-ttu-id="e7ac9-120">Durante el envío de un formulario, si un valor de `false` se devuelve desde un controlador de eventos de cliente, a continuación, se cancela el envío del formulario.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-120">During a form submission, if a value of `false` is returned from a client-side event handler then the form submission is cancelled.</span></span> <span data-ttu-id="e7ac9-121">Con esta característica, podemos hacer que el lado de cliente de botón s Delete `onclick` controlador de eventos devuelve el valor de una llamada a `confirm("Are you sure you want to delete this product?")`.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-121">Using this feature, we can have the Delete button s client-side `onclick` event handler return the value of a call to `confirm("Are you sure you want to delete this product?")`.</span></span> <span data-ttu-id="e7ac9-122">Si el usuario hace clic en Cancelar, `confirm(string)` devolverá false, lo que produce el envío del formulario Cancelar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-122">If the user clicks Cancel, `confirm(string)` will return false, thereby causing the form submission to cancel.</span></span> <span data-ttu-id="e7ac9-123">Con ninguna devolución de datos, puede eliminar el producto se ha hecho clic cuyo botón Eliminar won t.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-123">With no postback, the product whose Delete button was clicked won t be deleted.</span></span> <span data-ttu-id="e7ac9-124">Si, sin embargo, el usuario hace clic en Aceptar en el cuadro de diálogo de confirmación, la devolución de datos seguirá sin cesar y se eliminará el producto.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-124">If, however, the user clicks OK in the confirmation dialog box, the postback will continue unabated and the product will be deleted.</span></span> <span data-ttu-id="e7ac9-125">Consulte [de usar JavaScript s `confirm()` método de envío del formulario Control](http://www.webreference.com/programming/javascript/confirm/) para obtener más información sobre esta técnica.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-125">Consult [Using JavaScript s `confirm()` Method to Control Form Submission](http://www.webreference.com/programming/javascript/confirm/) for more information on this technique.</span></span>

<span data-ttu-id="e7ac9-126">Agregar el script de cliente necesario varía ligeramente si utilizan plantillas que cuando se usan un CommandField.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-126">Adding the necessary client-side script differs slightly if using templates than when using a CommandField.</span></span> <span data-ttu-id="e7ac9-127">Por lo tanto, en este tutorial, veremos un FormView y GridView ejemplo.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-127">Therefore, in this tutorial we will look at both a FormView and GridView example.</span></span>

> [!NOTE]
> <span data-ttu-id="e7ac9-128">Uso de técnicas de confirmación del cliente, como las que se tratan en este tutorial, se da por supuesto que están visitando los usuarios con exploradores que admiten JavaScript y que tengan JavaScript habilitado.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-128">Using client-side confirmation techniques, like the ones discussed in this tutorial, assumes that your users are visiting with browsers that support JavaScript and that they have JavaScript enabled.</span></span> <span data-ttu-id="e7ac9-129">Si alguno de estos supuestos no son VERDADERO para un usuario determinado, haga clic en el botón Eliminar inmediatamente provocará una devolución de datos (no se muestra un cuadro de mensajes de confirmación).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-129">If either of these assumptions are not true for a particular user, clicking the Delete button will immediately cause a postback (not displaying a confirm messagebox).</span></span>


## <a name="step-1-creating-a-formview-that-supports-deletion"></a><span data-ttu-id="e7ac9-130">Paso 1: Crear un FormView que admite la eliminación</span><span class="sxs-lookup"><span data-stu-id="e7ac9-130">Step 1: Creating a FormView That Supports Deletion</span></span>

<span data-ttu-id="e7ac9-131">Empiece agregando un FormView para la `ConfirmationOnDelete.aspx` página en el `EditInsertDelete` carpeta, enlazarlo a un nuevo ObjectDataSource que extrae la información de producto a través de nuevo el `ProductsBLL` clase s. `GetProducts()` método.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-131">Start by adding a FormView to the `ConfirmationOnDelete.aspx` page in the `EditInsertDelete` folder, binding it to a new ObjectDataSource that pulls back the product information via the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="e7ac9-132">Configurar el ObjectDataSource para que la `ProductsBLL` clase s `DeleteProduct(productID)` método se asigna a las operaciones de asignación ObjectDataSource `Delete()` método; Asegúrese de que las pestañas INSERT y UPDATE listas desplegables se establecen en (ninguno).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-132">Also configure the ObjectDataSource so that the `ProductsBLL` class s `DeleteProduct(productID)` method is mapped to the ObjectDataSource s `Delete()` method; ensure that the INSERT and UPDATE tabs drop-down lists are set to (None).</span></span> <span data-ttu-id="e7ac9-133">Por último, active la casilla Habilitar paginación en la etiqueta inteligente de s de FormView.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-133">Finally, check the Enable Paging checkbox in the FormView s smart tag.</span></span>

<span data-ttu-id="e7ac9-134">Después de realizar estos pasos, el marcado declarativo de nuevo ObjectDataSource s tendrá un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="e7ac9-134">After these steps, the new ObjectDataSource s declarative markup will look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample1.aspx)]

<span data-ttu-id="e7ac9-135">Como en nuestros ejemplos anteriores que no utilizan la simultaneidad optimista, tómese un momento para borrar la s ObjectDataSource `OldValuesParameterFormatString` propiedad.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-135">As in our past examples that did not use optimistic concurrency, take a moment to clear out the ObjectDataSource s `OldValuesParameterFormatString` property.</span></span>

<span data-ttu-id="e7ac9-136">Puesto que se ha enlazado a un control ObjectDataSource que solo admite la eliminación, la s FormView `ItemTemplate` ofrece sólo el botón de eliminación, que carecen de los botones de New y Update.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-136">Since it has been bound to an ObjectDataSource control that only supports deleting, the FormView s `ItemTemplate` offers only the Delete button, lacking the New and Update buttons.</span></span> <span data-ttu-id="e7ac9-137">El marcado declarativo de FormView s, sin embargo, incluye un superfluas `EditItemTemplate` y `InsertItemTemplate`, que se pueden quitar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-137">The FormView s declarative markup, however, includes a superfluous `EditItemTemplate` and `InsertItemTemplate`, which can be removed.</span></span> <span data-ttu-id="e7ac9-138">Tómese un momento para personalizar el `ItemTemplate` por lo que es solo un subconjunto del producto se muestran los campos de datos.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-138">Take a moment to customize the `ItemTemplate` so that is shows only a subset of the product data fields.</span></span> <span data-ttu-id="e7ac9-139">Se ha configurado extraiga para mostrar el nombre del producto s en un `<h3>` encabezado por encima de sus nombres de proveedor y categoría (junto con el botón Eliminar).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-139">I ve configured mine to show the product s name in an `<h3>` heading above its supplier and category names (along with the Delete button).</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample2.aspx)]

<span data-ttu-id="e7ac9-140">Con estos cambios, tenemos una página web totalmente funcional que permite a un usuario alternar a través de los productos de uno en uno, con la posibilidad de eliminar un producto, simplemente haga clic en el botón Eliminar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-140">With these changes, we have a fully functional web page that allows a user to toggle through the products one at a time, with the ability to delete a product by simply clicking the Delete button.</span></span> <span data-ttu-id="e7ac9-141">La figura 2 muestra una captura de pantalla de nuestro progreso hasta el momento cuando se ven a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-141">Figure 2 shows a screen shot of our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="e7ac9-142">[![FormView muestra información acerca de un único producto](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="e7ac9-142">[![The FormView Shows Information About a Single Product](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span></span>

<span data-ttu-id="e7ac9-143">**Figura 2**: The FormView muestra información acerca de un único producto ([haga clic aquí para ver la imagen a tamaño completo](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="e7ac9-143">**Figure 2**: The FormView Shows Information About a Single Product ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span></span>


## <a name="step-2-calling-the-confirmstring-function-from-the-delete-buttons-client-side-onclick-event"></a><span data-ttu-id="e7ac9-144">Paso 2: Llamar a la función confirm(string) desde el lado de cliente botones Eliminar OnClick (evento)</span><span class="sxs-lookup"><span data-stu-id="e7ac9-144">Step 2: Calling the confirm(string) Function from the Delete Buttons Client-Side onclick Event</span></span>

<span data-ttu-id="e7ac9-145">Con FormView creado, el último paso es configurar el botón Eliminar este tipo que, cuando se hizo clic s el visitante, el código JavaScript `confirm(string)` función se invoca.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-145">With the FormView created, the final step is to configure the Delete button such that when it s clicked by the visitor, the JavaScript `confirm(string)` function is invoked.</span></span> <span data-ttu-id="e7ac9-146">Agregar script del lado cliente a un botón, LinkButton o ImageButton s de cliente `onclick` evento puede realizarse mediante el uso de la `OnClientClick property`, que es una novedad de ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-146">Adding client-side script to a Button, LinkButton, or ImageButton s client-side `onclick` event can be accomplished through the use of the `OnClientClick property`, which is new to ASP.NET 2.0.</span></span> <span data-ttu-id="e7ac9-147">Puesto que deseamos que tengan el valor de la `confirm(string)` simplemente devuelve la función, establezca esta propiedad en: `return confirm('Are you certain that you want to delete this product?');`</span><span class="sxs-lookup"><span data-stu-id="e7ac9-147">Since we want to have the value of the `confirm(string)` function returned, simply set this property to: `return confirm('Are you certain that you want to delete this product?');`</span></span>

<span data-ttu-id="e7ac9-148">Después de este cambio debe ser la sintaxis declarativa de eliminar LinkButton s similar:</span><span class="sxs-lookup"><span data-stu-id="e7ac9-148">After this change the Delete LinkButton s declarative syntax should look something like:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample3.aspx)]

<span data-ttu-id="e7ac9-149">S todo es a él.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-149">That s all there is to it!</span></span> <span data-ttu-id="e7ac9-150">La figura 3 muestra una captura de pantalla de esta confirmación en acción.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-150">Figure 3 shows a screen shot of this confirmation in action.</span></span> <span data-ttu-id="e7ac9-151">Haga clic en el botón Eliminar, se abrirá el cuadro de diálogo de confirmación.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-151">Clicking the Delete button brings up the confirm dialog box.</span></span> <span data-ttu-id="e7ac9-152">Si el usuario hace clic en Cancelar, se cancela la devolución de datos y no se elimina el producto.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-152">If the user clicks Cancel, the postback is cancelled and the product is not deleted.</span></span> <span data-ttu-id="e7ac9-153">Si, sin embargo, el usuario hace clic en Aceptar, continúa la devolución de datos y las operaciones de asignación ObjectDataSource `Delete()` se invoca el método, hasta la preinstalación en el registro de base de datos que se va a eliminar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-153">If, however, the user clicks OK, the postback continues and the ObjectDataSource s `Delete()` method is invoked, culminating in the database record being deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="e7ac9-154">La cadena que se pasa en el `confirm(string)` función de JavaScript se delimita con apóstrofos (en lugar de las comillas).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-154">The string passed into the `confirm(string)` JavaScript function is delimited with apostrophes (rather than quotation marks).</span></span> <span data-ttu-id="e7ac9-155">En JavaScript, las cadenas se pueden delimitar con cualquier carácter.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-155">In JavaScript, strings can be delimited using either character.</span></span> <span data-ttu-id="e7ac9-156">Apóstrofos aquí utilizamos para que los delimitadores de la cadena pasan `confirm(string)` no se introducen ambigüedad con los delimitadores que se utilizan para la `OnClientClick` valor de propiedad.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-156">We use apostrophes here so that the delimiters for the string passed into `confirm(string)` do not introduce an ambiguity with the delimiters used for the `OnClientClick` property value.</span></span>


<span data-ttu-id="e7ac9-157">[![Una confirmación es ahora aparece cuando hace clic en el botón Eliminar.](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="e7ac9-157">[![A Confirmation is Now Displayed When Clicking the Delete Button](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="e7ac9-158">**Figura 3**: una confirmación es ahora aparece cuando hace clic en el botón Eliminar ([haga clic aquí para ver la imagen a tamaño completo](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="e7ac9-158">**Figure 3**: A Confirmation is Now Displayed When Clicking the Delete Button ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span></span>


## <a name="step-3-configuring-the-onclientclick-property-for-the-delete-button-in-a-commandfield"></a><span data-ttu-id="e7ac9-159">Paso 3: Configurar la propiedad OnClientClick para el botón Eliminar en un CommandField</span><span class="sxs-lookup"><span data-stu-id="e7ac9-159">Step 3: Configuring the OnClientClick Property for the Delete Button in a CommandField</span></span>

<span data-ttu-id="e7ac9-160">Cuando se trabaja con un botón, LinkButton o ImageButton directamente en una plantilla, un cuadro de diálogo de confirmación puede asociarse con él mediante la configuración de simplemente su `OnClientClick` propiedad para devolver los resultados de JavaScript `confirm(string)` función.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-160">When working with a Button, LinkButton, or ImageButton directly in a template, a confirmation dialog box can be associated with it by simply configuring its `OnClientClick` property to return the results of the JavaScript `confirm(string)` function.</span></span> <span data-ttu-id="e7ac9-161">Sin embargo, no tiene el CommandField - que agrega un campo de botones de eliminación a un GridView o DetailsView - un `OnClientClick` propiedad que se pueden establecer mediante declaración.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-161">However, the CommandField - which adds a field of Delete buttons to a GridView or DetailsView - does not have an `OnClientClick` property that can be set declaratively.</span></span> <span data-ttu-id="e7ac9-162">En su lugar, se debemos hacer referencia mediante programación el botón Eliminar en la s DetailsView o GridView adecuado `DataBound` controlador de eventos y, después, establezca su `OnClientClick` propiedad no existe.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-162">Instead, we must programmatically reference the Delete button in the GridView or DetailsView s appropriate `DataBound` event handler, and then set its `OnClientClick` property there.</span></span>

> [!NOTE]
> <span data-ttu-id="e7ac9-163">Al establecer el botón Eliminar s `OnClientClick` propiedad en los correspondientes `DataBound` controlador de eventos, se tiene acceso a los datos se enlazarán al registro actual.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-163">When setting the Delete button s `OnClientClick` property in the appropriate `DataBound` event handler, we have access to the data was bound to the current record.</span></span> <span data-ttu-id="e7ac9-164">Esto significa que podemos extender el mensaje de confirmación para incluir detalles sobre el registro concreto, como por ejemplo, "¿está seguro de que desea eliminar el producto Chai?"</span><span class="sxs-lookup"><span data-stu-id="e7ac9-164">This means we can extend the confirmation message to include details about the particular record, such as, "Are you sure you want to delete the Chai product?"</span></span> <span data-ttu-id="e7ac9-165">Dicha personalización también es posible en las plantillas mediante la sintaxis de enlace de datos.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-165">Such customization is also possible in templates using databinding syntax.</span></span>


<span data-ttu-id="e7ac9-166">Para practicar la configuración de la `OnClientClick` propiedad del botón de eliminación en un CommandField, s permiten agregar un control GridView a la página.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-166">To practice setting the `OnClientClick` property for the Delete button(s) in a CommandField, let s add a GridView to the page.</span></span> <span data-ttu-id="e7ac9-167">Configure este GridView para utilizar el mismo control ObjectDataSource que usa el FormView.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-167">Configure this GridView to use the same ObjectDataSource control that the FormView uses.</span></span> <span data-ttu-id="e7ac9-168">Limitar las operaciones de asignación GridView BoundFields para incluir sólo el nombre del producto s, la categoría y el proveedor.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-168">Also limit the GridView s BoundFields to only include the product s name, category, and supplier.</span></span> <span data-ttu-id="e7ac9-169">Por último, active la casilla Habilitar eliminación de la etiqueta inteligente de s de GridView.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-169">Lastly, check the Enable Deleting checkbox from the GridView s smart tag.</span></span> <span data-ttu-id="e7ac9-170">Esto agregará una CommandField a las operaciones de asignación GridView `Columns` colección con su `ShowDeleteButton` propiedad establecida en `true`.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-170">This will add a CommandField to the GridView s `Columns` collection with its `ShowDeleteButton` property set to `true`.</span></span>

<span data-ttu-id="e7ac9-171">Después de realizar estos cambios, el código de marcado declarativo de GridView s debería ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="e7ac9-171">After making these changes, your GridView s declarative markup should look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample4.aspx)]

<span data-ttu-id="e7ac9-172">El CommandField contiene una sola instancia de eliminar LinkButton que puede tener acceso mediante programación desde la s GridView `RowDataBound` controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-172">The CommandField contains a single Delete LinkButton instance that can be accessed programmatically from the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="e7ac9-173">Una vez que se hace referencia a, podemos establecer su `OnClientClick` propiedad según corresponda.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-173">Once referenced, we can set its `OnClientClick` property accordingly.</span></span> <span data-ttu-id="e7ac9-174">Crear un controlador de eventos para el `RowDataBound` eventos utilizando el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="e7ac9-174">Create an event handler for the `RowDataBound` event using the following code:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample5.cs)]

<span data-ttu-id="e7ac9-175">Este controlador de eventos funciona con filas de datos (los que tendrá el botón Eliminar) y comienza por referencia mediante programación el botón Eliminar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-175">This event handler works with data rows (those that will have the Delete button) and begins by programmatically referencing the Delete button.</span></span> <span data-ttu-id="e7ac9-176">En general, utilice el modelo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e7ac9-176">In general use the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample6.cs)]

<span data-ttu-id="e7ac9-177">*ButtonType* es el tipo de botón que se usa el CommandField - Button, LinkButton o ImageButton.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-177">*ButtonType* is the type of button being used by the CommandField - Button, LinkButton, or ImageButton.</span></span> <span data-ttu-id="e7ac9-178">De forma predeterminada, el CommandField usa LinkButton, pero esto se puede personalizar a través de las operaciones de asignación CommandField `ButtonType property`.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-178">By default, the CommandField uses LinkButtons, but this can be customized via the CommandField s `ButtonType property`.</span></span> <span data-ttu-id="e7ac9-179">El *commandFieldIndex* es el índice ordinal de la CommandField dentro de las operaciones de asignación GridView `Columns` colección, mientras que la *controlIndex* es el índice del botón Delete dentro de las operaciones de asignación CommandField `Controls` colección.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-179">The *commandFieldIndex* is the ordinal index of the CommandField within the GridView s `Columns` collection, whereas the *controlIndex* is the index of the Delete button within the CommandField s `Controls` collection.</span></span> <span data-ttu-id="e7ac9-180">El *controlIndex* valor depende de la posición del botón s en relación con otros botones en la CommandField.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-180">The *controlIndex* value depends on the button s position relative to other buttons in the CommandField.</span></span> <span data-ttu-id="e7ac9-181">Por ejemplo, si el botón solo aparece en el CommandField es el botón Eliminar, utilice un índice de 0.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-181">For example, if the only button displayed in the CommandField is the Delete button, use an index of 0.</span></span> <span data-ttu-id="e7ac9-182">Si, sin embargo, s hay un botón Editar que precede el botón Eliminar, utilice un índice de 2.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-182">If, however, there s an Edit button that precedes the Delete button, use an index of 2.</span></span> <span data-ttu-id="e7ac9-183">La razón es utilizar un índice de 2 es que se agregan dos controles mediante el CommandField antes el botón Eliminar: el botón Editar y LiteralControl s utilizado para agregar espacio entre los botones Editar y eliminar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-183">The reason an index of 2 is used is because two controls are added by the CommandField before the Delete button: the Edit button and a LiteralControl that s used to add some space between the Edit and Delete buttons.</span></span>

<span data-ttu-id="e7ac9-184">En nuestro ejemplo concreto, la CommandField utiliza LinkButton y, el campo del extremo izquierdo, ofrece un *commandFieldIndex* de 0.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-184">For our particular example, the CommandField uses LinkButtons and, being the left-most field, has a *commandFieldIndex* of 0.</span></span> <span data-ttu-id="e7ac9-185">Dado que hay ningún otro botón pero el botón Eliminar en el CommandField, usamos un *controlIndex* de 0.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-185">Since there are no other buttons but the Delete button in the CommandField, we use a *controlIndex* of 0.</span></span>

<span data-ttu-id="e7ac9-186">Después de hacer referencia al botón Eliminar en el CommandField, a continuación se obtenga información sobre el producto enlazado a la fila actual de GridView.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-186">After referencing the Delete button in the CommandField, we next grab information about the product bound to the current GridView row.</span></span> <span data-ttu-id="e7ac9-187">Por último, configuramos el botón Eliminar s `OnClientClick` propiedad en el código de JavaScript adecuado, que incluye el nombre de producto s.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-187">Finally, we set the Delete button s `OnClientClick` property to the appropriate JavaScript, which includes the product s name.</span></span> <span data-ttu-id="e7ac9-188">Puesto que la cadena de JavaScript que se pasa en el `confirm(string)` función está delimitada con apóstrofos se deben escape apóstrofos que aparecen en el nombre del producto s.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-188">Since the JavaScript string passed into the `confirm(string)` function is delimited using apostrophes we must escape any apostrophes that appear within the product s name.</span></span> <span data-ttu-id="e7ac9-189">En concreto, cualquier apóstrofos en el nombre del producto s se escapan con "`\'`".</span><span class="sxs-lookup"><span data-stu-id="e7ac9-189">In particular, any apostrophes in the product s name are escaped with "`\'`".</span></span>

<span data-ttu-id="e7ac9-190">Con estos cambios completado, haga clic en un botón Eliminar en la muestra de GridView un cuadro de diálogo de confirmación personalizado cuadro (Véase la figura 4).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-190">With these changes complete, clicking on a Delete button in the GridView displays a customized confirmation dialog box (see Figure 4).</span></span> <span data-ttu-id="e7ac9-191">Como con el cuadro de mensajes de confirmación de FormView, si el usuario hace clic en Cancelar la devolución de datos se cancela, lo que evita que la eliminación se produzcan.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-191">As with the confirmation messagebox from the FormView, if the user clicks Cancel the postback is cancelled, thereby preventing the deletion from occurring.</span></span>

> [!NOTE]
> <span data-ttu-id="e7ac9-192">Esta técnica también puede usarse para acceder mediante programación el botón Eliminar en el CommandField en DetailsView.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-192">This technique can also be used to programmatically access the Delete button in the CommandField in a DetailsView.</span></span> <span data-ttu-id="e7ac9-193">Para DetailsView, sin embargo, d creas un controlador de eventos para el `DataBound` eventos, como el DetailsView no tiene un `RowDataBound` eventos.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-193">For the DetailsView, however, you d create an event handler for the `DataBound` event, since the DetailsView does not have a `RowDataBound` event.</span></span>


<span data-ttu-id="e7ac9-194">[![Haga clic en el botón de eliminación de GridView s muestra un cuadro de diálogo de confirmación personalizado](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="e7ac9-194">[![Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span></span>

<span data-ttu-id="e7ac9-195">**Figura 4**: haga clic en el botón Eliminar de GridView s muestra un cuadro de diálogo de confirmación personalizado ([haga clic aquí para ver la imagen a tamaño completo](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="e7ac9-195">**Figure 4**: Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span></span>


## <a name="using-templatefields"></a><span data-ttu-id="e7ac9-196">Uso de TemplateFields</span><span class="sxs-lookup"><span data-stu-id="e7ac9-196">Using TemplateFields</span></span>

<span data-ttu-id="e7ac9-197">Uno de los inconvenientes de la CommandField es que se deben tener acceso a sus botones mediante el índice y que el objeto resultante debe convertirse al tipo adecuado de botón (Button, LinkButton o ImageButton).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-197">One of the disadvantages of the CommandField is that its buttons must be accessed through indexing and that the resulting object must be cast to the appropriate button type (Button, LinkButton, or ImageButton).</span></span> <span data-ttu-id="e7ac9-198">Usar "números de magia" y tipos codificados de forma rígida invita a problemas que no se puede detectar hasta el tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-198">Using "magic numbers" and hard-coded types invites problems that cannot be discovered until runtime.</span></span> <span data-ttu-id="e7ac9-199">Por ejemplo, si usted, u otro programador, agrega nuevos botones a la CommandField en algún momento en el futuro (por ejemplo, un botón Editar) o cambios el `ButtonType` propiedad, el código existente sigue se compilará sin errores, pero visitar la página puede provocar una excepción o un comportamiento inesperado, dependiendo de cómo se escribe el código y los cambios realizados.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-199">For example, if you, or another developer, adds new buttons to the CommandField at some point in the future (such as an Edit button) or changes the `ButtonType` property, the existing code will still compile without error, but visiting the page may cause an exception or unexpected behavior, depending on how your code was written and what changes were made.</span></span>

<span data-ttu-id="e7ac9-200">Un método alternativo consiste en convertir la s GridView y DetailsView CommandFields al TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-200">An alternative approach is to convert the GridView and DetailsView s CommandFields into TemplateFields.</span></span> <span data-ttu-id="e7ac9-201">Esto generará un TemplateField con un `ItemTemplate` que tiene un LinkButton (o botón o ImageButton) para cada botón de la CommandField.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-201">This will generate a TemplateField with an `ItemTemplate` that has a LinkButton (or Button or ImageButton) for each button in the CommandField.</span></span> <span data-ttu-id="e7ac9-202">Estos botones `OnClientClick` propiedades se pueden asignar mediante declaración, tal y como se vio con FormView o puede accederse mediante programación en los correspondientes `DataBound` controlador de eventos utilizando el modelo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e7ac9-202">These buttons `OnClientClick` properties can be assigned declaratively, as we saw with the FormView, or can be programmatically accessed in the appropriate `DataBound` event handler using the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample7.cs)]

<span data-ttu-id="e7ac9-203">Donde *controlID* es el valor del botón s `ID` propiedad.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-203">Where *controlID* is the value of the button s `ID` property.</span></span> <span data-ttu-id="e7ac9-204">Aunque este patrón todavía requiere un tipo codificado de forma rígida para la conversión, elimina la necesidad de indización, que permite que el diseño cambiar sin que produce un error en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-204">While this pattern still requires a hard-coded type for the cast, it removes the need for indexing, allowing for the layout to change without resulting in a runtime error.</span></span>

## <a name="summary"></a><span data-ttu-id="e7ac9-205">Resumen</span><span class="sxs-lookup"><span data-stu-id="e7ac9-205">Summary</span></span>

<span data-ttu-id="e7ac9-206">El código JavaScript `confirm(string)` función es una técnica ampliamente usada para controlar flujo de trabajo de envío de formulario.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-206">The JavaScript `confirm(string)` function is a commonly used technique for controlling form submission workflow.</span></span> <span data-ttu-id="e7ac9-207">Cuando se ejecuta, la función muestra un cuadro de diálogo modal, de cliente que incluye dos botones, Aceptar y Cancelar.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-207">When executed, the function displays a modal, client-side dialog box that includes two buttons, OK and Cancel.</span></span> <span data-ttu-id="e7ac9-208">Si el usuario hace clic en Aceptar, el `confirm(string)` función devuelve `true`; al hacer clic en Cancelar devuelve `false`.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-208">If the user clicks OK, the `confirm(string)` function returns `true`; clicking Cancel returns `false`.</span></span> <span data-ttu-id="e7ac9-209">Esta funcionalidad, junto con un comportamiento del explorador s para cancelar el envío de un formulario si devuelve un controlador de eventos durante el proceso de envío `false`, puede utilizarse para mostrar un cuadro de mensajes de confirmación al eliminar un registro.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-209">This functionality, coupled with a browser s behavior to cancel a form submission if an event handler during the submission process returns `false`, can be used to display a confirmation messagebox when deleting a record.</span></span>

<span data-ttu-id="e7ac9-210">El `confirm(string)` función puede asociarse a un lado del cliente Web Button control s `onclick` controlador de eventos a través del control s `OnClientClick` propiedad.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-210">The `confirm(string)` function can be associated with a Button Web control s client-side `onclick` event handler through the control s `OnClientClick` property.</span></span> <span data-ttu-id="e7ac9-211">Cuando se trabaja con un botón Eliminar en una plantilla - en una de las plantillas de FormView s o en TemplateField en el DetailsView o GridView - esta propiedad puede establecerse mediante declaración o mediante programación, en tal y como hemos visto en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-211">When working with a Delete button in a template - either in one of the FormView s templates or in a TemplateField in the DetailsView or GridView - this property can be set either declaratively or programmatically, as we saw in this tutorial.</span></span>

<span data-ttu-id="e7ac9-212">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-212">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="e7ac9-213">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="e7ac9-213">About the Author</span></span>

<span data-ttu-id="e7ac9-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros sobre ASP/ASP.NET y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha trabajado con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="e7ac9-215">Scott funciona como un consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="e7ac9-215">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="e7ac9-216">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-216">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="e7ac9-217">Puede ponerse en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) o a través de su blog, que se pueden encontrar en [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="e7ac9-217">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e7ac9-218">[Anterior](implementing-optimistic-concurrency-cs.md)
> [Siguiente](limiting-data-modification-functionality-based-on-the-user-cs.md)</span><span class="sxs-lookup"><span data-stu-id="e7ac9-218">[Previous](implementing-optimistic-concurrency-cs.md)
[Next](limiting-data-modification-functionality-based-on-the-user-cs.md)</span></span>
