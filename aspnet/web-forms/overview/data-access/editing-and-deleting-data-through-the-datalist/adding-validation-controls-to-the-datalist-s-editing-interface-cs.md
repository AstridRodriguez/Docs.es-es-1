---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
title: Agregar controles de validación al control DataList de edición (interfaz) (C#) | Documentos de Microsoft
author: rick-anderson
description: En este tutorial veremos lo fácil que es agregar controles de validación al EditItemTemplate del control DataList con el fin de proporcionar un int de usuario de edición más infalible...
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/30/2006
ms.topic: article
ms.assetid: 3ecc21c5-da0e-40ab-abb4-fac1e47398ad
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
msc.type: authoredcontent
ms.openlocfilehash: 13582989aed60ec7949afcd683472546a91d171c
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
---
<a name="adding-validation-controls-to-the-datalists-editing-interface-c"></a><span data-ttu-id="8dcf7-103">Agregar controles de validación a la interfaz de edición del control DataList (C#)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-103">Adding Validation Controls to the DataList's Editing Interface (C#)</span></span>
====================
<span data-ttu-id="8dcf7-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8dcf7-105">[Descargar la aplicación de ejemplo](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) o [descarga de PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) or [Download PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span></span>

> <span data-ttu-id="8dcf7-106">En este tutorial veremos lo fácil que es agregar controles de validación al EditItemTemplate del control DataList con el fin de proporcionar una interfaz de usuario de edición más infalible.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-106">In this tutorial we'll see how easy it is to add validation controls to the DataList's EditItemTemplate in order to provide a more foolproof editing user interface.</span></span>


## <a name="introduction"></a><span data-ttu-id="8dcf7-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="8dcf7-107">Introduction</span></span>

<span data-ttu-id="8dcf7-108">En el control DataList edición tutoriales hasta ahora, la edición de interfaces de DataList no incluyó ninguna validación de entrada de usuario automático incluso si un usuario no válido de entrada como un nombre de producto que faltan o los resultados de precio negativo en una excepción.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-108">In the DataList editing tutorials thus far, the DataLists editing interfaces have not included any proactive user input validation even though invalid user input such as a missing product name or negative price results in an exception.</span></span> <span data-ttu-id="8dcf7-109">En el [tutorial anterior](handling-bll-and-dal-level-exceptions-cs.md) se examina cómo agregar código al control DataList s de control de excepciones `UpdateCommand` controlador de eventos con el fin de detectar y mostrar correctamente información sobre las excepciones que se produjeron.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-109">In the [preceding tutorial](handling-bll-and-dal-level-exceptions-cs.md) we examined how to add exception handling code to the DataList s `UpdateCommand` event handler in order to catch and gracefully display information about any exceptions that were raised.</span></span> <span data-ttu-id="8dcf7-110">Lo ideal es que, sin embargo, la interfaz de edición incluye controles de validación para evitar que un usuario especifique estos datos no válidos en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-110">Ideally, however, the editing interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="8dcf7-111">En este tutorial veremos lo fácil que es agregar controles de validación al control DataList s `EditItemTemplate` con el fin de proporcionar una interfaz de usuario de edición más infalible.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-111">In this tutorial we'll see how easy it is to add validation controls to the DataList s `EditItemTemplate` in order to provide a more foolproof editing user interface.</span></span> <span data-ttu-id="8dcf7-112">En concreto, este tutorial toma el ejemplo creado en el tutorial anterior y aumenta la interfaz de edición para incluir la validación adecuada.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-112">Specifically, this tutorial takes the example created in the preceding tutorial and augments the editing interface to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromhandling-bll--and-dal-level-exceptionshandling-bll-and-dal-level-exceptions-csmd"></a><span data-ttu-id="8dcf7-113">Paso 1: Replicar en el ejemplo de[control de excepciones de nivel de DAL y BLL](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-113">Step 1: Replicating the Example from[Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md)</span></span>

<span data-ttu-id="8dcf7-114">En el [BLL - control y excepciones de nivel de la capa DAL](handling-bll-and-dal-level-exceptions-cs.md) tutorial se crea una página que muestra los nombres y los precios de los productos en un control DataList de dos columnas, puede editar.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-114">In the [Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md) tutorial we created a page that listed the names and prices of the products in a two-column, editable DataList.</span></span> <span data-ttu-id="8dcf7-115">El objetivo de este tutorial consiste en aumentar la interfaz de edición de DataList s para incluir controles de validación.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-115">Our goal for this tutorial is to augment the DataList s editing interface to include validation controls.</span></span> <span data-ttu-id="8dcf7-116">En concreto, nuestra lógica de validación hará lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="8dcf7-116">In particular, our validation logic will:</span></span>

- <span data-ttu-id="8dcf7-117">Requieren que se proporcione el nombre del producto s</span><span class="sxs-lookup"><span data-stu-id="8dcf7-117">Require that the product s name be provided</span></span>
- <span data-ttu-id="8dcf7-118">Asegúrese de que el valor especificado para el precio es un formato de moneda válidos</span><span class="sxs-lookup"><span data-stu-id="8dcf7-118">Ensure that the value entered for the price is a valid currency format</span></span>
- <span data-ttu-id="8dcf7-119">Asegúrese de que el valor especificado para el precio es mayor o igual a cero, desde un negativo `UnitPrice` valor no es válido</span><span class="sxs-lookup"><span data-stu-id="8dcf7-119">Ensure that the value entered for the price is greater than or equal to zero, since a negative `UnitPrice` value is illegal</span></span>

<span data-ttu-id="8dcf7-120">Antes de que podemos observar aumentar el ejemplo anterior para incluir la validación, primero es necesario replicar en el ejemplo de la `ErrorHandling.aspx` página en el `EditDeleteDataList` carpeta a la página de este tutorial, `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-120">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `ErrorHandling.aspx` page in the `EditDeleteDataList` folder to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="8dcf7-121">Para lograr esto es necesario copiar a través de ambos la `ErrorHandling.aspx` página marcado declarativo s y su código fuente.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-121">To achieve this we need to copy over both the `ErrorHandling.aspx` page s declarative markup and its source code.</span></span> <span data-ttu-id="8dcf7-122">En primer lugar copie en el marcado declarativo realizando los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="8dcf7-122">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="8dcf7-123">Abra la `ErrorHandling.aspx` página en Visual Studio</span><span class="sxs-lookup"><span data-stu-id="8dcf7-123">Open the `ErrorHandling.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="8dcf7-124">Vaya al marcado declarativo de la página s (haga clic en el botón de origen en la parte inferior de la página)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-124">Go to the page s declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="8dcf7-125">Copie el texto dentro de la `<asp:Content>` y `</asp:Content>` etiquetas (líneas de 3 a 32), como se muestra en la figura 1.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-125">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 32), as shown in Figure 1.</span></span>


<span data-ttu-id="8dcf7-126">[![Copie el texto dentro de la &lt;asp: Content&gt; Control](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-126">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span></span>

<span data-ttu-id="8dcf7-127">**Figura 1**: copiar el texto dentro de la `<asp:Content>` Control ([haga clic aquí para ver la imagen a tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8dcf7-127">**Figure 1**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span></span>


1. <span data-ttu-id="8dcf7-128">Abra la `UIValidation.aspx` página</span><span class="sxs-lookup"><span data-stu-id="8dcf7-128">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="8dcf7-129">Vaya al marcado declarativo de s de página</span><span class="sxs-lookup"><span data-stu-id="8dcf7-129">Go to the page s declarative markup</span></span>
3. <span data-ttu-id="8dcf7-130">Pegue el texto dentro de la `<asp:Content>` control.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-130">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="8dcf7-131">Para copiar sobre el código fuente, abra el `ErrorHandling.aspx.vb` página y copie solamente el texto *en* la `EditDeleteDataList_ErrorHandling` clase.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-131">To copy over the source code, open the `ErrorHandling.aspx.vb` page and copy just the text *within* the `EditDeleteDataList_ErrorHandling` class.</span></span> <span data-ttu-id="8dcf7-132">Copie los tres controladores de eventos (`Products_EditCommand`, `Products_CancelCommand`, y `Products_UpdateCommand`) junto con el `DisplayExceptionDetails` método, pero no **no** copiar la declaración de clase o `using` las instrucciones.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-132">Copy the three event handlers (`Products_EditCommand`, `Products_CancelCommand`, and `Products_UpdateCommand`) along with the `DisplayExceptionDetails` method, but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="8dcf7-133">Pegar el texto copiado *en* el `EditDeleteDataList_UIValidation` clase `UIValidation.aspx.vb`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-133">Paste the copied text *within* the `EditDeleteDataList_UIValidation` class in `UIValidation.aspx.vb`.</span></span>

<span data-ttu-id="8dcf7-134">Después de mover sobre el contenido y el código de `ErrorHandling.aspx` a `UIValidation.aspx`, tómese un momento para probar las páginas en un explorador.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-134">After moving over the content and code from `ErrorHandling.aspx` to `UIValidation.aspx`, take a moment to test out the pages in a browser.</span></span> <span data-ttu-id="8dcf7-135">Debe ver el mismo resultado y experiencia de la misma funcionalidad en cada una de estas dos páginas (consulte la figura 2).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-135">You should see the same output and experience the same functionality in each of these two pages (see Figure 2).</span></span>


<span data-ttu-id="8dcf7-136">[![La página UIValidation.aspx imita la funcionalidad de ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-136">[![The UIValidation.aspx Page Mimics the Functionality in ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span></span>

<span data-ttu-id="8dcf7-137">**Figura 2**: el `UIValidation.aspx` página imita la funcionalidad de `ErrorHandling.aspx` ([haga clic aquí para ver la imagen a tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8dcf7-137">**Figure 2**: The `UIValidation.aspx` Page Mimics the Functionality in `ErrorHandling.aspx` ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span></span>


## <a name="step-2-adding-the-validation-controls-to-the-datalist-s-edititemtemplate"></a><span data-ttu-id="8dcf7-138">Paso 2: Agregar los controles de validación a la plantilla EditItemTemplate s de DataList</span><span class="sxs-lookup"><span data-stu-id="8dcf7-138">Step 2: Adding the Validation Controls to the DataList s EditItemTemplate</span></span>

<span data-ttu-id="8dcf7-139">Al construir los formularios de entrada de datos, es importante que los usuarios especifiquen los campos obligatorios y que todas sus entradas proporcionadas son valores válidos, con un formato correcto.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-139">When constructing data entry forms, it is important that users enter any required fields and that all their provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="8dcf7-140">Para ayudar a garantizar que un entradas de s de usuario son válidas, ASP.NET proporciona cinco controles de validación integradas que están diseñados para validar el valor de un control Web de entrada único:</span><span class="sxs-lookup"><span data-stu-id="8dcf7-140">To help ensure that a user s inputs are valid, ASP.NET provides five built-in validation controls that are designed to validate the value of a single input Web control:</span></span>

- <span data-ttu-id="8dcf7-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) garantiza que se ha proporcionado un valor</span><span class="sxs-lookup"><span data-stu-id="8dcf7-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="8dcf7-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) valida un valor con otro valor de control de Web o un valor constante, o se asegura de que el formato de valor s es válido para un tipo de datos especificado</span><span class="sxs-lookup"><span data-stu-id="8dcf7-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value s format is legal for a specified data type</span></span>
- <span data-ttu-id="8dcf7-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) garantiza que un valor está dentro del intervalo de valores</span><span class="sxs-lookup"><span data-stu-id="8dcf7-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="8dcf7-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) valida un valor con un [expresión regular](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="8dcf7-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) valida un valor con un método personalizado definido por el usuario</span><span class="sxs-lookup"><span data-stu-id="8dcf7-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="8dcf7-146">Para obtener más información sobre estos cinco controles hacen referencia a la [agregar controles de validación a las Interfaces de insertar y modificar](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial o desproteger el [sección de controles de validación](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) de la [Tutoriales rápidos de ASP.NET](https://quickstarts.asp.net).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-146">For more information on these five controls refer back to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial or check out the [Validation Controls section](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://quickstarts.asp.net).</span></span>

<span data-ttu-id="8dcf7-147">En nuestro tutorial necesitamos usar un control RequiredFieldValidator para asegurarse de que se ha proporcionado un valor para el nombre del producto y un control CompareValidator para asegurarse de que el precio indicado tiene un valor mayor o igual que 0 y se presenta en un formato de moneda válidos.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-147">For our tutorial we'll need to use a RequiredFieldValidator to ensure that a value for the product name has been supplied and a CompareValidator to ensure that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="8dcf7-148">Mientras que ASP.NET 1.x tenía estos mismos controles de validación de cinco, ASP.NET 2.0 se agregado una serie de mejoras, los principales dos que se va a script de cliente compatibilidad con exploradores además de Internet Explorer y la capacidad de los controles de validación de partición en una página en grupos de validación.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-148">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers in addition to Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="8dcf7-149">Para obtener más información sobre las nuevas características de control de validación de 2.0, consulte [Diseccionando los controles de validación en ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-149">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>


<span data-ttu-id="8dcf7-150">Permiten s empiece agregando los controles de validación necesarios para el control DataList s `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-150">Let s start by adding the necessary validation controls to the DataList s `EditItemTemplate`.</span></span> <span data-ttu-id="8dcf7-151">Esta tarea puede realizarse a través del diseñador haciendo clic en el vínculo Editar plantillas de la etiqueta inteligente de DataList s, o a través de la sintaxis declarativa.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-151">This task can be performed through the Designer by clicking on the Edit Templates link from the DataList s smart tag, or through the declarative syntax.</span></span> <span data-ttu-id="8dcf7-152">Permiten paso s a través del proceso mediante la opción de editar plantillas de la vista de diseño.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-152">Let s step through the process using the Edit Templates option from the Design view.</span></span> <span data-ttu-id="8dcf7-153">Después de elegir Editar el control DataList s `EditItemTemplate`, agregue un control RequiredFieldValidator arrastrándolo desde el cuadro de herramientas en la interfaz de edición de plantilla, colóquela después de la `ProductName` cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-153">After choosing to edit the DataList s `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing it after the `ProductName` TextBox.</span></span>


<span data-ttu-id="8dcf7-154">[![Agregue un control RequiredFieldValidator al EditItemTemplate después el cuadro de texto ProductName](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-154">[![Add a RequiredFieldValidator to the EditItemTemplate After the ProductName TextBox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span></span>

<span data-ttu-id="8dcf7-155">**Figura 3**: agregar un control RequiredFieldValidator a la `EditItemTemplate After` el `ProductName` cuadro de texto ([haga clic aquí para ver la imagen a tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8dcf7-155">**Figure 3**: Add a RequiredFieldValidator to the `EditItemTemplate After` the `ProductName` TextBox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span></span>


<span data-ttu-id="8dcf7-156">Todos los controles de validación de trabajo mediante la validación de la entrada de un único control Web de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-156">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="8dcf7-157">Por lo tanto, es necesario indicar que el control RequiredFieldValidator que acabamos de agregar debe validar contra la `ProductName` cuadro de texto; Esto se hace estableciendo el control de validación s [ `ControlToValidate` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) a la `ID` de el control Web adecuado (`ProductName`, en este caso).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-157">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the `ProductName` TextBox; this is done by setting the validation control s [`ControlToValidate` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control (`ProductName`, in this instance).</span></span> <span data-ttu-id="8dcf7-158">A continuación, establezca el [ `ErrorMessage` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) que debe proporcionar el nombre del producto s y [ `Text` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) a \*.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-158">Next, set the [`ErrorMessage` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to You must provide the product s name and the [`Text` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to \*.</span></span> <span data-ttu-id="8dcf7-159">La `Text` valor de propiedad, si se proporciona, es el texto que se muestra el control de validación si se produce un error en la validación.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-159">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="8dcf7-160">El `ErrorMessage` se utiliza el valor de propiedad, que es necesario, mediante el control del sistema; si la `Text` se omite el valor de propiedad, el `ErrorMessage` valor de propiedad se muestra el control de validación de entrada no válida.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-160">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="8dcf7-161">Después de establecer estas tres propiedades de RequiredFieldValidator, la pantalla debe ser similar a la figura 4.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-161">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 4.</span></span>


<span data-ttu-id="8dcf7-162">[![Establecer las propiedades de texto, RequiredFieldValidator s ControlToValidate y ErrorMessage](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-162">[![Set the RequiredFieldValidator s ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span></span>

<span data-ttu-id="8dcf7-163">**Figura 4**: establecer la s RequiredFieldValidator `ControlToValidate`, `ErrorMessage`, y `Text` propiedades ([haga clic aquí para ver la imagen a tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8dcf7-163">**Figure 4**: Set the RequiredFieldValidator s `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span></span>


<span data-ttu-id="8dcf7-164">Con el control RequiredFieldValidator agregado a la `EditItemTemplate`, todos los que queda es agregar la validación necesaria para el precio del producto s cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-164">With the RequiredFieldValidator added to the `EditItemTemplate`, all that remains is to add the necessary validation for the product s price TextBox.</span></span> <span data-ttu-id="8dcf7-165">Puesto que la `UnitPrice` es opcional cuando se edita un registro, no queremos t se necesita agregar un control RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-165">Since the `UnitPrice` is optional when editing a record, we don t need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="8dcf7-166">, Sin embargo, necesitamos agregar un control CompareValidator para asegurarse de que el `UnitPrice`, si se proporciona, con un formato correcto como moneda y es mayor o igual que 0.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-166">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="8dcf7-167">Agregar el control CompareValidator en el `EditItemTemplate` y establecer su `ControlToValidate` propiedad `UnitPrice`, sus `ErrorMessage` propiedad al precio debe ser mayor o igual que cero y no puede incluir el símbolo de moneda y su `Text` propiedad \*.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-167">Add the CompareValidator into the `EditItemTemplate` and set its `ControlToValidate` property to `UnitPrice`, its `ErrorMessage` property to The price must be greater than or equal to zero and cannot include the currency symbol, and its `Text` property to \*.</span></span> <span data-ttu-id="8dcf7-168">Para indicar que la `UnitPrice` valor debe ser mayor o igual que 0, establezca la s CompareValidator [ `Operator` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) a `GreaterThanEqual`, sus [ `ValueToCompare` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) en 0, y su [ `Type` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) a `Currency`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-168">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator s [`Operator` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [`ValueToCompare` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to 0, and its [`Type` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span>

<span data-ttu-id="8dcf7-169">Después de agregar estos controles de validación de dos, el control DataList s `EditItemTemplate` la sintaxis declarativa s debería ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="8dcf7-169">After adding these two validation controls, the DataList s `EditItemTemplate` s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample1.aspx)]

<span data-ttu-id="8dcf7-170">Después de realizar estos cambios, abra la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-170">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="8dcf7-171">Si intenta omitir el nombre o escriba un valor de precios no válido durante la edición de un producto, aparece un asterisco junto al cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-171">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="8dcf7-172">Como se muestra en la figura 5, un valor de precio que incluye el símbolo de moneda, como $19.95 se considera no válido.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-172">As Figure 5 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="8dcf7-173">Las operaciones de asignación CompareValidator `Currency` `Type` permite separadores de dígitos (por ejemplo, comas o puntos, dependiendo de la configuración de la referencia cultural) y un signo más iniciales o signo, pero *no* permitir un símbolo de moneda.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-173">The CompareValidator s `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="8dcf7-174">Este comportamiento puede perplex a los usuarios como la interfaz de edición representa actualmente la `UnitPrice` con el formato de moneda.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-174">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>


<span data-ttu-id="8dcf7-175">[![Aparece un asterisco junto a los cuadros de texto con entradas no válidas](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-175">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span></span>

<span data-ttu-id="8dcf7-176">**Figura 5**: un asterisco aparece junto a los cuadros de texto con entradas no válidas ([haga clic aquí para ver la imagen a tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="8dcf7-176">**Figure 5**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span></span>


<span data-ttu-id="8dcf7-177">Mientras que las obras de validación como-es, el usuario debe quitar manualmente el símbolo de moneda al editar un registro, que no es aceptable.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-177">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="8dcf7-178">Además, si hay no válido de entradas en la edición interfaz ni la actualización ni cancelar botones, al hacer clic en, va a invocar una devolución de datos.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-178">Moreover, if there are invalid inputs in the editing interface neither the Update nor Cancel buttons, when clicked, will invoke a postback.</span></span> <span data-ttu-id="8dcf7-179">Idealmente, el botón Cancelar devolvería a DataList a su estado anterior edición independientemente de la validez de las entradas de s de usuario.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-179">Ideally, the Cancel button would return the DataList to its pre-editing state regardless of the validity of the user s inputs.</span></span> <span data-ttu-id="8dcf7-180">Además, necesitamos asegurarnos de que los datos de página s son válidos antes de actualizar la información del producto en el control DataList s `UpdateCommand` controlador de eventos, como los controles de validación lógica del lado del cliente puede omitirse si los usuarios cuyos exploradores don soporte t JavaScript o bien tienen su compatibilidad deshabilitado.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-180">Also, we need to ensure that the page s data is valid before updating the product information in the DataList s `UpdateCommand` event handler, as the validation controls client-side logic can be bypassed by users whose browsers either don t support JavaScript or have its support disabled.</span></span>

## <a name="removing-the-currency-symbol-from-the-edititemtemplate-s-unitprice-textbox"></a><span data-ttu-id="8dcf7-181">Quitar el símbolo de moneda en el cuadro de texto de EditItemTemplate s UnitPrice</span><span class="sxs-lookup"><span data-stu-id="8dcf7-181">Removing the Currency Symbol from the EditItemTemplate s UnitPrice TextBox</span></span>

<span data-ttu-id="8dcf7-182">Cuando se usa la s CompareValidator `Currency``Type`, la entrada que se está validada no debe incluir cualquier símbolo de divisa.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-182">When using the CompareValidator s `Currency``Type`, the input being validated must not include any currency symbols.</span></span> <span data-ttu-id="8dcf7-183">La presencia de estos símbolos hace que el control CompareValidator marcar la entrada como no válida.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-183">The presence of such symbols causes the CompareValidator to mark the input as invalid.</span></span> <span data-ttu-id="8dcf7-184">Sin embargo, la interfaz de edición actualmente incluye un símbolo de moneda en la `UnitPrice` cuadro de texto, lo que significa que el usuario debe quitar explícitamente el símbolo de moneda antes de guardar sus cambios.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-184">However, our editing interface currently includes a currency symbol in the `UnitPrice` TextBox, meaning the user must explicitly remove the currency symbol before saving their changes.</span></span> <span data-ttu-id="8dcf7-185">Para solucionar esto tenemos tres opciones:</span><span class="sxs-lookup"><span data-stu-id="8dcf7-185">To remedy this we have three options:</span></span>

1. <span data-ttu-id="8dcf7-186">Configurar la `EditItemTemplate` para que la `UnitPrice` valor de cuadro de texto no tiene el formato como una moneda.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-186">Configure the `EditItemTemplate` so that the `UnitPrice` TextBox value is not formatted as a currency.</span></span>
2. <span data-ttu-id="8dcf7-187">Permitir que el usuario escriba un símbolo de moneda quitando el control CompareValidator y reemplazarlo con un control RegularExpressionValidator que busca un valor de divisa con el formato correcto.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-187">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that checks for a properly formatted currency value.</span></span> <span data-ttu-id="8dcf7-188">El desafío es que la expresión regular para validar un valor de moneda no es tan sencilla como el control CompareValidator y requeriría escribir código si quería volver a incorporar la configuración de referencia cultural.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-188">The challenge here is that the regular expression to validate a currency value is not as straightforward as the CompareValidator and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="8dcf7-189">Quite por completo el control de validación y se basan en la lógica de validación de servidor personalizada en las operaciones de asignación GridView `RowUpdating` controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-189">Remove the validation control altogether and rely on custom server-side validation logic in the GridView s `RowUpdating` event handler.</span></span>

<span data-ttu-id="8dcf7-190">Permiten s vaya con la opción 1 para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-190">Let s go with option 1 for this tutorial.</span></span> <span data-ttu-id="8dcf7-191">Actualmente el `UnitPrice` se da formato como un valor de moneda a causa de la expresión de enlace de datos para el cuadro de texto en el `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-191">Currently the `UnitPrice` is formatted as a currency value due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="8dcf7-192">Cambiar el `Eval` instrucción `Eval("UnitPrice", "{0:n2}")`, que da formato al resultado como un número con dos dígitos de precisión.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-192">Change the `Eval` statement to `Eval("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="8dcf7-193">Esto puede hacerse directamente a través de la sintaxis declarativa o haciendo clic en el vínculo Editar DataBindings de la `UnitPrice` cuadro de texto en el control DataList s `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-193">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `UnitPrice` TextBox in the DataList s `EditItemTemplate`.</span></span>

<span data-ttu-id="8dcf7-194">Con este cambio, el precio con formato en la interfaz de edición incluye comas como separador de grupo y un punto como separador decimal, pero deja fuera el símbolo de moneda.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-194">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="8dcf7-195">Al quitar el formato de moneda de la interfaz editable, resultarle útil para colocar el símbolo de moneda como texto fuera del cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-195">When removing the currency format from the editable interface, I find it helpful to put the currency symbol as text outside the TextBox.</span></span> <span data-ttu-id="8dcf7-196">Esto actúa como una sugerencia para el usuario que no necesitan proporcionar el símbolo de moneda.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-196">This serves as a hint to the user that they do not need to provide the currency symbol.</span></span>


## <a name="fixing-the-cancel-button"></a><span data-ttu-id="8dcf7-197">Corregir el botón Cancelar</span><span class="sxs-lookup"><span data-stu-id="8dcf7-197">Fixing the Cancel Button</span></span>

<span data-ttu-id="8dcf7-198">De forma predeterminada, los controles de validación Web emiten código JavaScript para realizar la validación en el lado del cliente.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-198">By default, the validation Web controls emit JavaScript to perform validation on the client-side.</span></span> <span data-ttu-id="8dcf7-199">Cuando se hace clic en un botón, LinkButton o ImageButton, los controles de validación en la página se comprueban en el cliente antes de que se produzca la devolución.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-199">When a Button, LinkButton, or ImageButton is clicked, the validation controls on the page are checked on the client-side before the postback occurs.</span></span> <span data-ttu-id="8dcf7-200">Si no hay ningún dato no válido, se cancela la devolución de datos.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-200">If there is any invalid data, the postback is cancelled.</span></span> <span data-ttu-id="8dcf7-201">Para ciertos botones, sin embargo, la validez de los datos podría ser irrelevante; En tal caso, tener el postback cancelado por datos no válidos es una molestia.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-201">For certain Buttons, though, the validity of the data might be immaterial; in such a case, having the postback cancelled due to invalid data is a nuisance.</span></span>

<span data-ttu-id="8dcf7-202">El botón de cancelación es un ejemplo.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-202">The Cancel button is such an example.</span></span> <span data-ttu-id="8dcf7-203">Imagine que un usuario escribe datos no válidos, por ejemplo, si se omite el nombre del producto s y, a continuación, decide quieres guardar después de que todos los productos y presiona el botón Cancelar.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-203">Imagine that a user enters invalid data, such as omitting the product s name, and then decides she doesn t want to save the product after all and hits the Cancel button.</span></span> <span data-ttu-id="8dcf7-204">Actualmente, el botón Cancelar desencadena los controles de validación en la página, que informan de que el nombre del producto falta y evitar que la devolución de datos.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-204">Currently, the Cancel button triggers the validation controls on the page, which report that the product name is missing and prevent the postback.</span></span> <span data-ttu-id="8dcf7-205">El usuario tiene que escriba algún texto en el `ProductName` cuadro de texto para cancelar para salir del proceso de edición.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-205">Our user has to type some text into the `ProductName` TextBox just to cancel out of the editing process.</span></span>

<span data-ttu-id="8dcf7-206">Afortunadamente, el botón, LinkButton y ImageButton tienen un [ `CausesValidation` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) que puede indicar si o no al hacer clic en el botón debe iniciar la lógica de validación (valor predeterminado es `True`).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-206">Fortunately, the Button, LinkButton, and ImageButton have a [`CausesValidation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) that can indicate whether or not clicking the Button should initiate the validation logic (defaults to `True`).</span></span> <span data-ttu-id="8dcf7-207">Establecer el botón Cancelar s `CausesValidation` propiedad `False`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-207">Set the Cancel Button s `CausesValidation` property to `False`.</span></span>

## <a name="ensuring-the-inputs-are-valid-in-the-updatecommand-event-handler"></a><span data-ttu-id="8dcf7-208">Garantizar las entradas son válidos en el controlador de eventos UpdateCommand</span><span class="sxs-lookup"><span data-stu-id="8dcf7-208">Ensuring the Inputs are Valid in the UpdateCommand Event Handler</span></span>

<span data-ttu-id="8dcf7-209">Debido a la secuencia de comandos de cliente emitido por los controles de validación, los controles de validación cancelar las devoluciones de datos iniciadas por Button, LinkButton, si un usuario escribe una entrada no válida o ImageButton controla cuya `CausesValidation` propiedades son `True` (el valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-209">Due to the client-side script emitted by the validation controls, if a user enters invalid input the validation controls cancel any postbacks initiated by Button, LinkButton, or ImageButton controls whose `CausesValidation` properties are `True` (the default).</span></span> <span data-ttu-id="8dcf7-210">Sin embargo, si está visitando a un usuario con un explorador anticuado o uno cuya compatibilidad de JavaScript se ha deshabilitado, no se ejecutan las comprobaciones de validación del lado cliente.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-210">However, if a user is visiting with an antiquated browser or one whose JavaScript support has been disabled, the client-side validation checks will not execute.</span></span>

<span data-ttu-id="8dcf7-211">Todos los controles de validación de ASP.NET se repiten su lógica de validación inmediatamente después de la devolución de datos y la validez general de las entradas de página s a través de informes la [ `Page.IsValid` propiedad](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-211">All of the ASP.NET validation controls repeat their validation logic immediately upon postback and report the overall validity of the page s inputs via the [`Page.IsValid` property](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span></span> <span data-ttu-id="8dcf7-212">Sin embargo, el flujo de la página no se interrumpe o detenido en cualquier forma según el valor de `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-212">However, the page flow is not interrupted or stopped in any way based on the value of `Page.IsValid`.</span></span> <span data-ttu-id="8dcf7-213">Como los desarrolladores, es la responsabilidad de garantizar que el `Page.IsValid` propiedad tiene un valor de `True` antes de continuar con el código que supone válido los datos de entrada.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-213">As developers, it is our responsibility to ensure that the `Page.IsValid` property has a value of `True` before proceeding with code that assumes valid input data.</span></span>

<span data-ttu-id="8dcf7-214">Si un usuario tiene deshabilitado JavaScript, visite nuestra página, edita un producto, entra en un valor del precio de demasiado caro y hace clic en el botón de actualización, se omitirá la validación del lado cliente y se produzca una devolución de datos.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-214">If a user has JavaScript disabled, visits our page, edits a product, enters a price value of Too expensive, and clicks the Update button, the client-side validation will be bypassed and a postback will ensue.</span></span> <span data-ttu-id="8dcf7-215">En la devolución de datos, las páginas de ASP.NET `UpdateCommand` ejecuta el controlador de eventos y se produce una excepción al intentar analizar demasiado caro un `Decimal`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-215">On postback, the ASP.NET page s `UpdateCommand` event handler executes and an exception is raised when attempting to parse Too expensive to a `Decimal`.</span></span> <span data-ttu-id="8dcf7-216">Puesto que disponemos de control de excepciones, una de estas excepciones se controlarán correctamente, pero podemos impedir que los datos no válidos de elementos secundarios a través en primer lugar por solo continuando con el `UpdateCommand` controlador de eventos si `Page.IsValid` tiene un valor de `True`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-216">Since we have exception handling, such an exception will be handled gracefully, but we could prevent the invalid data from slipping through in the first place by only proceeding with the `UpdateCommand` event handler if `Page.IsValid` has a value of `True`.</span></span>

<span data-ttu-id="8dcf7-217">Agregue el código siguiente al principio de la `UpdateCommand` controlador de eventos, inmediatamente antes de la `Try` bloque:</span><span class="sxs-lookup"><span data-stu-id="8dcf7-217">Add the following code to the start of the `UpdateCommand` event handler, immediately before the `Try` block:</span></span>


[!code-csharp[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample2.cs)]

<span data-ttu-id="8dcf7-218">Con esta adición, el producto intentará actualizar solo si los datos enviados están válidos.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-218">With this addition, the product will attempt to be updated only if the submitted data is valid.</span></span> <span data-ttu-id="8dcf7-219">Poder won t mayoría de los usuarios a una devolución de datos no válido debido a las secuencias de comandos del lado cliente de controles de validación, pero los usuarios cuyos exploradores don soporte t JavaScript o que tienen JavaScript admite deshabilitado, pueden omitir las comprobaciones de cliente y enviar datos no válidos.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-219">Most users won t be able to postback invalid data due to the validation controls client-side scripts, but users whose browsers don t support JavaScript or that have JavaScript support disabled, can bypass the client-side checks and submit invalid data.</span></span>

> [!NOTE]
> <span data-ttu-id="8dcf7-220">El lector astuto Recuerde que al actualizar datos con el control GridView, se Professionals t tendrá que comprobar explícitamente la `Page.IsValid` propiedad en nuestra clase de código subyacente de la página s.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-220">The astute reader will recall that when updating data with the GridView, we didn t need to explicitly check the `Page.IsValid` property in our page s code-behind class.</span></span> <span data-ttu-id="8dcf7-221">Esto es porque la consulta de GridView el `Page.IsValid` propiedad para nosotros y lleva a cabo sólo con la actualización solo si devuelve un valor de `True`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-221">This is because the GridView consults the `Page.IsValid` property for us and only proceeds with the update only if it returns a value of `True`.</span></span>


## <a name="step-3-summarizing-data-entry-problems"></a><span data-ttu-id="8dcf7-222">Paso 3: Resumir los problemas de entrada de datos</span><span class="sxs-lookup"><span data-stu-id="8dcf7-222">Step 3: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="8dcf7-223">Además de los controles de validación de cinco, ASP.NET incluye la [control ValidationSummary](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), que muestra la `ErrorMessage` s de los controles de validación que ha detectado datos no válidos.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-223">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="8dcf7-224">Estos datos de resumen se pueden mostrar como texto en la página web o a través de un cuadro de mensaje modal, de cliente.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-224">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="8dcf7-225">Permiten s mejorar este tutorial para incluir un cuadro de mensajes del lado cliente resumir los problemas de validación.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-225">Let s enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="8dcf7-226">Para ello, arrastre un control del cuadro de herramientas hasta el diseñador.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-226">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="8dcf7-227">La ubicación del control ValidationSummary t realmente importan, desde que se re va a configurar para mostrar solo el resumen como un cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-227">The location of the ValidationSummary control doesn t really matter, since we re going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="8dcf7-228">Después de agregar el control, establezca su [ `ShowSummary` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) a `False` y su [ `ShowMessageBox` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) a `True`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-228">After adding the control, set its [`ShowSummary` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `False` and its [`ShowMessageBox` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `True`.</span></span> <span data-ttu-id="8dcf7-229">Con esta adición, se resumen los errores de validación en un cuadro de mensajes de cliente (consulte la figura 6).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-229">With this addition, any validation errors are summarized in a client-side messagebox (see Figure 6).</span></span>


<span data-ttu-id="8dcf7-230">[![Los errores de validación se resumen en un cuadro de mensajes de cliente](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-230">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span></span>

<span data-ttu-id="8dcf7-231">**Figura 6**: los errores de validación se resumen en un cuadro de mensajes de cliente ([haga clic aquí para ver la imagen a tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8dcf7-231">**Figure 6**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span></span>


## <a name="summary"></a><span data-ttu-id="8dcf7-232">Resumen</span><span class="sxs-lookup"><span data-stu-id="8dcf7-232">Summary</span></span>

<span data-ttu-id="8dcf7-233">En este tutorial, hemos visto cómo reducir la probabilidad de excepciones mediante el uso de controles de validación para asegurarse de forma proactiva que nuestro entradas de los usuarios sean válidas antes de intentar utilizarlos en el flujo de trabajo de actualización.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-233">In this tutorial we saw how to reduce the likelihood of exceptions by using validation controls to proactively ensure that our users inputs are valid before attempting to use them in the updating workflow.</span></span> <span data-ttu-id="8dcf7-234">ASP.NET proporciona cinco controles Web de validación que están diseñados para inspeccionar un Web determinado controlan entrada s e informan sobre la validez de s de entrada.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-234">ASP.NET provides five validation Web controls that are designed to inspect a particular Web control s input and report back on the input s validity.</span></span> <span data-ttu-id="8dcf7-235">En este tutorial se utilizaron dos de los cinco controles RequiredFieldValidator y el control CompareValidator para asegurarse de que se proporcionó el nombre del producto s y que el precio tenía un formato de moneda con un valor mayor o igual que cero.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-235">In this tutorial we used two of those five controls the RequiredFieldValidator and the CompareValidator to ensure that the product s name was supplied and that the price had a currency format with a value greater than or equal to zero.</span></span>

<span data-ttu-id="8dcf7-236">Agregar controles de validación a las operaciones de asignación DataList edición interfaz es tan sencillo como arrastrarlos hasta la `EditItemTemplate` desde el cuadro de herramientas y la configuración de un conjunto de propiedades.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-236">Adding validation controls to the DataList s editing interface is as simple as dragging them onto the `EditItemTemplate` from the Toolbox and setting a handful of properties.</span></span> <span data-ttu-id="8dcf7-237">De forma predeterminada, los controles de validación emiten automáticamente el script de validación del lado cliente; También proporcionan validación del lado servidor en la devolución de datos, almacenar el resultado acumulado en el `Page.IsValid` propiedad.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-237">By default, the validation controls automatically emit client-side validation script; they also provide server-side validation on postback, storing the cumulative result in the `Page.IsValid` property.</span></span> <span data-ttu-id="8dcf7-238">Para omitir la validación del lado cliente cuando se hace clic en un botón, LinkButton o ImageButton, establezca el botón s `CausesValidation` propiedad `False`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-238">To bypass the client-side validation when a Button, LinkButton, or ImageButton is clicked, set the button s `CausesValidation` property to `False`.</span></span> <span data-ttu-id="8dcf7-239">Además, antes de realizar las tareas con los datos presentados en devolución de datos, asegúrese de que el `Page.IsValid` propiedad devuelve `True`.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-239">Also, before performing any tasks with the data submitted on postback, ensure that the `Page.IsValid` property returns `True`.</span></span>

<span data-ttu-id="8dcf7-240">Todos del control DataList tutoriales de edición se ha examinado hasta el momento han tenido muy sencillas interfaces de edición de un cuadro de texto para el nombre del producto s y otro para el precio.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-240">All of the DataList editing tutorials we ve examined so far have had very simple editing interfaces a TextBox for the product s name and another for the price.</span></span> <span data-ttu-id="8dcf7-241">Sin embargo, la interfaz de edición, puede contener una combinación de controles Web diferentes, como listas desplegables, calendarios, botones de opción, casillas y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-241">The editing interface, however, can contain a mix of different Web controls, such as DropDownLists, Calendars, RadioButtons, CheckBoxes, and so on.</span></span> <span data-ttu-id="8dcf7-242">En nuestro tutorial siguiente trataremos crear una interfaz que se usa una serie de controles Web.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-242">In our next tutorial we'll look at building an interface that uses a variety of Web controls.</span></span>

<span data-ttu-id="8dcf7-243">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-243">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="8dcf7-244">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="8dcf7-244">About the Author</span></span>

<span data-ttu-id="8dcf7-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros sobre ASP/ASP.NET y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha trabajado con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8dcf7-246">Scott funciona como un consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-246">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8dcf7-247">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-247">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="8dcf7-248">Puede ponerse en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) o a través de su blog, que se pueden encontrar en [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="8dcf7-248">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="8dcf7-249">Agradecimientos especiales a</span><span class="sxs-lookup"><span data-stu-id="8dcf7-249">Special Thanks To</span></span>

<span data-ttu-id="8dcf7-250">Esta serie de tutoriales se revisó por varios revisores útiles.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-250">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8dcf7-251">Revisores para este tutorial fueron Liz Shulok, Dennis Patterson y Ken Pespisa.</span><span class="sxs-lookup"><span data-stu-id="8dcf7-251">Lead reviewers for this tutorial were Dennis Patterson, Ken Pespisa, and Liz Shulok.</span></span> <span data-ttu-id="8dcf7-252">¿Está interesado en revisar mi próximos artículos MSDN?</span><span class="sxs-lookup"><span data-stu-id="8dcf7-252">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8dcf7-253">Si es así, me quitar una línea en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-253">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8dcf7-254">[Anterior](handling-bll-and-dal-level-exceptions-cs.md)
> [Siguiente](customizing-the-datalist-s-editing-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="8dcf7-254">[Previous](handling-bll-and-dal-level-exceptions-cs.md)
[Next](customizing-the-datalist-s-editing-interface-cs.md)</span></span>
