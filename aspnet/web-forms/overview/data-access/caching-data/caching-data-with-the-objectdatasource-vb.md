---
uid: web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-vb
title: Almacenar en caché datos con ObjectDataSource (VB) | Documentos de Microsoft
author: rick-anderson
description: Almacenamiento en caché puede significar la diferencia entre una lenta y un rápido de las aplicaciones Web. Este tutorial es el primero de cuatro que toman una visión detallada de almacenamiento en caché de ASP.NET...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/30/2007
ms.topic: article
ms.assetid: 2e56a733-5512-48a6-9276-70a65bbe4d5d
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-vb
msc.type: authoredcontent
ms.openlocfilehash: a79ed980e28e2c20a73fa4193f8c0970c9dbdef8
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
ms.locfileid: "30879028"
---
<a name="caching-data-with-the-objectdatasource-vb"></a><span data-ttu-id="d232b-104">Datos en caché con el ObjectDataSource (VB)</span><span class="sxs-lookup"><span data-stu-id="d232b-104">Caching Data with the ObjectDataSource (VB)</span></span>
====================
<span data-ttu-id="d232b-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="d232b-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="d232b-106">[Descargar la aplicación de ejemplo](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_VB.exe) o [descarga de PDF](caching-data-with-the-objectdatasource-vb/_static/datatutorial58vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="d232b-106">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_VB.exe) or [Download PDF](caching-data-with-the-objectdatasource-vb/_static/datatutorial58vb1.pdf)</span></span>

> <span data-ttu-id="d232b-107">Almacenamiento en caché puede significar la diferencia entre una lenta y un rápido de las aplicaciones Web.</span><span class="sxs-lookup"><span data-stu-id="d232b-107">Caching can mean the difference between a slow and a fast Web application.</span></span> <span data-ttu-id="d232b-108">Este tutorial es el primero de cuatro que toman una visión detallada de almacenamiento en caché de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d232b-108">This tutorial is the first of four that take a detailed look at caching in ASP.NET.</span></span> <span data-ttu-id="d232b-109">Obtenga información acerca de los conceptos clave de almacenamiento en caché y cómo aplicar el almacenamiento en caché a la capa de presentación mediante el control ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="d232b-109">Learn the key concepts of caching and how to apply caching to the Presentation Layer through the ObjectDataSource control.</span></span>


## <a name="introduction"></a><span data-ttu-id="d232b-110">Introducción</span><span class="sxs-lookup"><span data-stu-id="d232b-110">Introduction</span></span>

<span data-ttu-id="d232b-111">En informática, *almacenamiento en caché* es el proceso de tomar datos o información que resulta caro obtener y almacenar una copia del mismo en una ubicación que es más rápida para el acceso.</span><span class="sxs-lookup"><span data-stu-id="d232b-111">In computer science, *caching* is the process of taking data or information that is expensive to obtain and storing a copy of it in a location that is quicker to access.</span></span> <span data-ttu-id="d232b-112">Para las aplicaciones orientadas a datos, las consultas grandes y complejas normalmente consumen la mayor parte del tiempo de ejecución de la aplicación s.</span><span class="sxs-lookup"><span data-stu-id="d232b-112">For data-driven applications, large and complex queries commonly consume the majority of the application s execution time.</span></span> <span data-ttu-id="d232b-113">A menudo se puede mejorar este tipo un s rendimiento de la aplicación, a continuación, almacenando los resultados de consultas costosas de la base de datos en la memoria de s de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d232b-113">Such an application s performance, then, can often be improved by storing the results of expensive database queries in the application s memory.</span></span>

<span data-ttu-id="d232b-114">ASP.NET 2.0 proporciona una variedad de opciones de caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-114">ASP.NET 2.0 offers a variety of caching options.</span></span> <span data-ttu-id="d232b-115">Una página web completa o marcado de s representa el Control de usuario puede almacenarse en caché a través de *caché de resultados*.</span><span class="sxs-lookup"><span data-stu-id="d232b-115">An entire web page or User Control s rendered markup can be cached through *output caching*.</span></span> <span data-ttu-id="d232b-116">Los controles de ObjectDataSource y SqlDataSource proporcionan capacidades de almacenamiento en caché también, lo que permite a datos en la memoria caché en el nivel de control.</span><span class="sxs-lookup"><span data-stu-id="d232b-116">The ObjectDataSource and SqlDataSource controls provide caching capabilities as well, thereby allowing data to be cached at the control level.</span></span> <span data-ttu-id="d232b-117">Y ASP.NET s *memoria caché de datos* proporciona una API de almacenamiento en caché enriquecida que permite a los desarrolladores de página a los objetos de caché mediante programación.</span><span class="sxs-lookup"><span data-stu-id="d232b-117">And ASP.NET s *data cache* provides a rich caching API that enables page developers to programmatically cache objects.</span></span> <span data-ttu-id="d232b-118">En este tutorial y los tres siguientes que examinaremos mediante las operaciones de asignación ObjectDataSource almacenamiento en caché de características, así como la caché de datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-118">In this tutorial and the next three we'll examine using the ObjectDataSource s caching features as well as the data cache.</span></span> <span data-ttu-id="d232b-119">También veremos cómo almacenar en caché datos de toda la aplicación en el inicio y cómo mantener los datos almacenados en caché actualizado mediante el uso de las dependencias de caché SQL.</span><span class="sxs-lookup"><span data-stu-id="d232b-119">We'll also explore how to cache application-wide data at startup and how to keep cached data fresh through the use of SQL cache dependencies.</span></span> <span data-ttu-id="d232b-120">Estos tutoriales no explore la caché de resultados.</span><span class="sxs-lookup"><span data-stu-id="d232b-120">These tutorials do not explore output caching.</span></span> <span data-ttu-id="d232b-121">Para obtener una visión detallada de caché de resultados, vea [caché de resultados en ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="d232b-121">For a detailed look at output caching, see [Output Caching in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span></span>

<span data-ttu-id="d232b-122">Almacenamiento en caché puede aplicarse en cualquier lugar en la arquitectura, desde la capa de acceso a datos de seguridad a través de la capa de presentación.</span><span class="sxs-lookup"><span data-stu-id="d232b-122">Caching can be applied at any place in the architecture, from the Data Access Layer up through the Presentation Layer.</span></span> <span data-ttu-id="d232b-123">En este tutorial se examinará aplicar el almacenamiento en caché a la capa de presentación mediante el control ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="d232b-123">In this tutorial we'll look at applying caching to the Presentation Layer through the ObjectDataSource control.</span></span> <span data-ttu-id="d232b-124">En el siguiente tutorial que examinaremos el almacenamiento en caché los datos en la capa de lógica de negocios.</span><span class="sxs-lookup"><span data-stu-id="d232b-124">In the next tutorial we'll examine caching data at the Business Logic Layer.</span></span>

## <a name="key-caching-concepts"></a><span data-ttu-id="d232b-125">Clave de almacenamiento en caché de conceptos</span><span class="sxs-lookup"><span data-stu-id="d232b-125">Key Caching Concepts</span></span>

<span data-ttu-id="d232b-126">Almacenamiento en caché puede mejorar considerablemente una s de aplicación general rendimiento y escalabilidad mediante la obtención de datos que resulta caros generar y almacenar una copia del mismo en una ubicación que se puede acceder de forma más eficaz.</span><span class="sxs-lookup"><span data-stu-id="d232b-126">Caching can greatly improve an application s overall performance and scalability by taking data that is expensive to generate and storing a copy of it in a location that can be more efficiently accessed.</span></span> <span data-ttu-id="d232b-127">Puesto que la memoria caché contiene solo una copia de los datos reales, subyacentes, puede quedar obsoleto, o *obsoletos*, si cambian los datos subyacentes.</span><span class="sxs-lookup"><span data-stu-id="d232b-127">Since the cache holds just a copy of the actual, underlying data, it can become outdated, or *stale*, if the underlying data changes.</span></span> <span data-ttu-id="d232b-128">Para hacer frente a esto, un desarrollador de páginas puede indicar los criterios de forma que será el elemento en caché *expulsan* desde la memoria caché, utilizando:</span><span class="sxs-lookup"><span data-stu-id="d232b-128">To combat this, a page developer can indicate criteria by which the cache item will be *evicted* from the cache, using either:</span></span>

- <span data-ttu-id="d232b-129">**Criterios de tiempo** puede agregarse un elemento a la memoria caché para una absoluta o variable duración.</span><span class="sxs-lookup"><span data-stu-id="d232b-129">**Time-based criteria** an item may be added to the cache for an absolute or sliding duration.</span></span> <span data-ttu-id="d232b-130">Por ejemplo, un desarrollador de páginas puede indicar una duración de, digamos, 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="d232b-130">For example, a page developer may indicate a duration of, say, 60 seconds.</span></span> <span data-ttu-id="d232b-131">Con una duración absoluta, el elemento almacenado en caché se expulsa 60 segundos después de que se agregó a la memoria caché, sin tener en cuenta la frecuencia con se obtuvo acceso.</span><span class="sxs-lookup"><span data-stu-id="d232b-131">With an absolute duration, the cached item is evicted 60 seconds after it was added to cache, regardless of how frequently it was accessed.</span></span> <span data-ttu-id="d232b-132">Con una duración de una variable, el elemento almacenado en caché se expulsa 60 segundos después del último acceso.</span><span class="sxs-lookup"><span data-stu-id="d232b-132">With a sliding duration, the cached item is evicted 60 seconds after the last access.</span></span>
- <span data-ttu-id="d232b-133">**Criterios de dependencia** una dependencia puede estar asociada a un elemento cuando se agrega a la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-133">**Dependency-based criteria** a dependency can be associated with an item when added to the cache.</span></span> <span data-ttu-id="d232b-134">Cuando cambia la dependencia de elemento s se expulsa de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-134">When the item s dependency changes it is evicted from the cache.</span></span> <span data-ttu-id="d232b-135">La dependencia puede ser un archivo, otro elemento en caché o una combinación de ambos.</span><span class="sxs-lookup"><span data-stu-id="d232b-135">The dependency may be a file, another cache item, or a combination of the two.</span></span> <span data-ttu-id="d232b-136">ASP.NET 2.0 también permite que las dependencias de caché SQL, que permiten a los desarrolladores agregar un elemento a la memoria caché y hacer que se desalojan cuando cambian los datos de la base de datos subyacente.</span><span class="sxs-lookup"><span data-stu-id="d232b-136">ASP.NET 2.0 also allows SQL cache dependencies, which enable developers to add an item to the cache and have it evicted when the underlying database data changes.</span></span> <span data-ttu-id="d232b-137">Examinaremos las dependencias de caché SQL en el próximo seminario Web [utilizando las dependencias de caché de SQL](using-sql-cache-dependencies-vb.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="d232b-137">We will examine SQL cache dependencies in the upcoming [Using SQL Cache Dependencies](using-sql-cache-dependencies-vb.md) tutorial.</span></span>

<span data-ttu-id="d232b-138">Sin tener en cuenta los criterios de expulsión especificados, puede ser un elemento en la memoria caché *compactarse* antes de que se ha cumplido los criterios basados en el tiempo o dependencia.</span><span class="sxs-lookup"><span data-stu-id="d232b-138">Regardless of the eviction criteria specified, an item in the cache may be *scavenged* before the time-based or dependency-based criteria has been met.</span></span> <span data-ttu-id="d232b-139">Si la memoria caché ha alcanzado su capacidad, los elementos existentes deben quitarse antes de que se pueden agregar otros nuevos.</span><span class="sxs-lookup"><span data-stu-id="d232b-139">If the cache has reached its capacity, existing items must be removed before new ones can be added.</span></span> <span data-ttu-id="d232b-140">Por lo tanto, cuando mediante programación al trabajar con datos almacenados en caché, s vitales suponer siempre los datos almacenados en caché no pueden estar presentes.</span><span class="sxs-lookup"><span data-stu-id="d232b-140">Consequently, when programmatically working with cached data it s vital that you always assume that the cached data may not be present.</span></span> <span data-ttu-id="d232b-141">Echemos un vistazo el patrón que se utiliza cuando se obtiene acceso a datos desde la memoria caché mediante programación en nuestro tutorial siguiente, *almacenar datos en caché en la arquitectura*.</span><span class="sxs-lookup"><span data-stu-id="d232b-141">We'll look at the pattern to use when accessing data from the cache programmatically in our next tutorial, *Caching Data in the Architecture*.</span></span>

<span data-ttu-id="d232b-142">Almacenamiento en caché, proporciona una forma económica para obtiene mayor rendimiento de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="d232b-142">Caching provides an economical means for squeezing more performance from an application.</span></span> <span data-ttu-id="d232b-143">Como [Steven Smith](http://aspadvice.com/blogs/ssmith/) articula en su artículo [almacenamiento en caché de ASP.NET: técnicas y prácticas recomendadas](https://msdn.microsoft.com/library/aa478965.aspx):</span><span class="sxs-lookup"><span data-stu-id="d232b-143">As [Steven Smith](http://aspadvice.com/blogs/ssmith/) articulates in his article [ASP.NET Caching: Techniques and Best Practices](https://msdn.microsoft.com/library/aa478965.aspx):</span></span>

<span data-ttu-id="d232b-144">Almacenamiento en caché puede ser una buena forma de obtener una buena suficiente rendimiento sin necesidad de una gran cantidad de tiempo y los análisis.</span><span class="sxs-lookup"><span data-stu-id="d232b-144">Caching can be a good way to get good enough performance without requiring a lot of time and analysis.</span></span> <span data-ttu-id="d232b-145">Memoria es barata, por lo que si se puede obtener el rendimiento que necesitan almacenando en caché el resultado de 30 segundos en lugar de dedicar un día o una semana intenta optimizar el código o la base de datos, realice la acción de la solución de almacenamiento en caché (suponiendo que los datos 30 - antiguos de segundos es correcto) y avanzar.</span><span class="sxs-lookup"><span data-stu-id="d232b-145">Memory is cheap, so if you can get the performance you need by caching the output for 30 seconds instead of spending a day or a week trying to optimize your code or database, do the caching solution (assuming 30-second old data is ok) and move on.</span></span> <span data-ttu-id="d232b-146">Finalmente, un diseño deficiente se probablemente ponerse al día, por lo que por supuesto debe intentar diseñar aplicaciones correctamente.</span><span class="sxs-lookup"><span data-stu-id="d232b-146">Eventually, poor design will probably catch up to you, so of course you should try to design your applications correctly.</span></span> <span data-ttu-id="d232b-147">Pero si desea obtener una buena suficiente rendimiento hoy en día, el almacenamiento en caché puede ser un excelente [método], compra de tiempo para refactorizar la aplicación en una fecha posterior cuando tenga el tiempo para hacerlo.</span><span class="sxs-lookup"><span data-stu-id="d232b-147">But if you just need to get good enough performance today, caching can be an excellent [approach], buying you time to refactor your application at a later date when you have the time to do so.</span></span>

<span data-ttu-id="d232b-148">Aunque el almacenamiento en caché puede proporcionar mejoras de rendimiento apreciables, no es aplicable en todas las situaciones, como con aplicaciones que utilizan datos en tiempo real, actualizar con frecuencia o que no están aceptable incluso en breve duración datos obsoletos.</span><span class="sxs-lookup"><span data-stu-id="d232b-148">While caching can provide appreciable performance enhancements, it is not applicable in all situations, such as with applications that use real-time, frequently-updating data, or where even shortly-lived stale data is unacceptable.</span></span> <span data-ttu-id="d232b-149">Pero para la mayoría de las aplicaciones, se debe utilizar el almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-149">But for the majority of applications, caching should be used.</span></span> <span data-ttu-id="d232b-150">Para obtener más información sobre el almacenamiento en caché de ASP.NET 2.0, consulte el [almacenamiento en caché para obtener un rendimiento](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) sección de la [tutoriales de inicio rápido de ASP.NET 2.0](https://quickstarts.asp.net/QuickStartv20/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="d232b-150">For more background on caching in ASP.NET 2.0, refer to the [Caching for Performance](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) section of the [ASP.NET 2.0 QuickStart Tutorials](https://quickstarts.asp.net/QuickStartv20/aspnet/).</span></span>

## <a name="step-1-creating-the-caching-web-pages"></a><span data-ttu-id="d232b-151">Paso 1: Crear las páginas Web de almacenamiento en caché</span><span class="sxs-lookup"><span data-stu-id="d232b-151">Step 1: Creating the Caching Web Pages</span></span>

<span data-ttu-id="d232b-152">Antes de empezar la exploración de las características de almacenamiento en caché de ObjectDataSource s, permiten s primero Tómese un momento para crear las páginas ASP.NET en el proyecto de sitio Web que se necesitará para este tutorial y los tres siguientes.</span><span class="sxs-lookup"><span data-stu-id="d232b-152">Before we start our exploration of the ObjectDataSource s caching features, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next three.</span></span> <span data-ttu-id="d232b-153">Empiece por agregar una nueva carpeta denominada `Caching`.</span><span class="sxs-lookup"><span data-stu-id="d232b-153">Start by adding a new folder named `Caching`.</span></span> <span data-ttu-id="d232b-154">A continuación, agregue las siguientes páginas ASP.NET a la carpeta y asegúrese de que asociar cada página con el `Site.master` página maestra:</span><span class="sxs-lookup"><span data-stu-id="d232b-154">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `ObjectDataSource.aspx`
- `FromTheArchitecture.aspx`
- `AtApplicationStartup.aspx`
- `SqlCacheDependencies.aspx`


![Agregar las páginas ASP.NET para los tutoriales relacionados con el almacenamiento en caché](caching-data-with-the-objectdatasource-vb/_static/image1.png)

<span data-ttu-id="d232b-156">**Figura 1**: agregar las páginas ASP.NET para los tutoriales relacionados con el almacenamiento en caché</span><span class="sxs-lookup"><span data-stu-id="d232b-156">**Figure 1**: Add the ASP.NET Pages for the Caching-Related Tutorials</span></span>


<span data-ttu-id="d232b-157">Al igual que en las otras carpetas, `Default.aspx` en el `Caching` carpeta enumerará los tutoriales en su sección.</span><span class="sxs-lookup"><span data-stu-id="d232b-157">Like in the other folders, `Default.aspx` in the `Caching` folder will list the tutorials in its section.</span></span> <span data-ttu-id="d232b-158">Recuerde que el `SectionLevelTutorialListing.ascx` Control de usuario proporciona esta funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="d232b-158">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="d232b-159">Por lo tanto, agregue este Control de usuario para `Default.aspx` arrastrándolo desde el Explorador de soluciones en la página s la vista Diseño.</span><span class="sxs-lookup"><span data-stu-id="d232b-159">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="d232b-160">[![Figura 2: Agregar el Control de usuario SectionLevelTutorialListing.ascx a Default.aspx](caching-data-with-the-objectdatasource-vb/_static/image3.png)](caching-data-with-the-objectdatasource-vb/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="d232b-160">[![Figure 2: Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](caching-data-with-the-objectdatasource-vb/_static/image3.png)](caching-data-with-the-objectdatasource-vb/_static/image2.png)</span></span>

<span data-ttu-id="d232b-161">**Figura 2**: figura 2: agregar el `SectionLevelTutorialListing.ascx` Control de usuario a `Default.aspx` ([haga clic aquí para ver la imagen a tamaño completo](caching-data-with-the-objectdatasource-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="d232b-161">**Figure 2**: Figure 2: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image4.png))</span></span>


<span data-ttu-id="d232b-162">Por último, agregue estas páginas como entradas para el `Web.sitemap` archivo.</span><span class="sxs-lookup"><span data-stu-id="d232b-162">Lastly, add these pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="d232b-163">En concreto, agregue el siguiente marcado después el trabajo con datos binarios `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="d232b-163">Specifically, add the following markup after the Working with Binary Data `<siteMapNode>`:</span></span>


[!code-xml[Main](caching-data-with-the-objectdatasource-vb/samples/sample1.xml)]

<span data-ttu-id="d232b-164">Después de actualizar `Web.sitemap`, tómese un momento para ver el sitio Web de tutoriales a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="d232b-164">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="d232b-165">Ahora, el menú de la izquierda incluye elementos para los tutoriales de almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-165">The menu on the left now includes items for the caching tutorials.</span></span>


![El mapa del sitio ahora incluye las entradas para los tutoriales de almacenamiento en caché](caching-data-with-the-objectdatasource-vb/_static/image5.png)

<span data-ttu-id="d232b-167">**Figura 3**: la asignación de sitio ahora incluye las entradas para los tutoriales de almacenamiento en caché</span><span class="sxs-lookup"><span data-stu-id="d232b-167">**Figure 3**: The Site Map Now Includes Entries for the Caching Tutorials</span></span>


## <a name="step-2-displaying-a-list-of-products-in-a-web-page"></a><span data-ttu-id="d232b-168">Paso 2: Mostrar una lista de productos en una página Web</span><span class="sxs-lookup"><span data-stu-id="d232b-168">Step 2: Displaying a List of Products in a Web Page</span></span>

<span data-ttu-id="d232b-169">Este tutorial trata sobre cómo utilizar las ObjectDataSource control s características integradas de almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-169">This tutorial explores how to use the ObjectDataSource control s built-in caching features.</span></span> <span data-ttu-id="d232b-170">Antes de que podemos observar estas características, sin embargo, primero es necesario trabajar desde una página.</span><span class="sxs-lookup"><span data-stu-id="d232b-170">Before we can look at these features, though, we first need a page to work from.</span></span> <span data-ttu-id="d232b-171">S permiten crear una página web que usa un control GridView para mostrar información de producto recuperado por un ObjectDataSource desde la `ProductsBLL` clase.</span><span class="sxs-lookup"><span data-stu-id="d232b-171">Let s create a web page that uses a GridView to list product information retrieved by an ObjectDataSource from the `ProductsBLL` class.</span></span>

<span data-ttu-id="d232b-172">Comience abriendo la `ObjectDataSource.aspx` página en el `Caching` carpeta.</span><span class="sxs-lookup"><span data-stu-id="d232b-172">Start by opening the `ObjectDataSource.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="d232b-173">Arrastre un control GridView en el cuadro de herramientas hasta el diseñador, establezca su `ID` propiedad `Products`y, en su etiqueta inteligente, elija para enlazar a un nuevo control ObjectDataSource denominado `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="d232b-173">Drag a GridView from the Toolbox onto the Designer, set its `ID` property to `Products`, and, from its smart tag, choose to bind it to a new ObjectDataSource control named `ProductsDataSource`.</span></span> <span data-ttu-id="d232b-174">Configurar el ObjectDataSource para trabajar con la `ProductsBLL` clase.</span><span class="sxs-lookup"><span data-stu-id="d232b-174">Configure the ObjectDataSource to work with the `ProductsBLL` class.</span></span>


<span data-ttu-id="d232b-175">[![Configurar el ObjectDataSource para utilizar la clase ProductsBLL](caching-data-with-the-objectdatasource-vb/_static/image7.png)](caching-data-with-the-objectdatasource-vb/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="d232b-175">[![Configure the ObjectDataSource to Use the ProductsBLL Class](caching-data-with-the-objectdatasource-vb/_static/image7.png)](caching-data-with-the-objectdatasource-vb/_static/image6.png)</span></span>

<span data-ttu-id="d232b-176">**Figura 4**: configurar el ObjectDataSource que se utilizan los `ProductsBLL` clase ([haga clic aquí para ver la imagen a tamaño completo](caching-data-with-the-objectdatasource-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="d232b-176">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image8.png))</span></span>


<span data-ttu-id="d232b-177">Para esta página, permiten s crear un control GridView editable para que podemos examinar lo que ocurre cuando se modifican los datos almacenados en memoria caché en ObjectDataSource a través de la interfaz de s GridView.</span><span class="sxs-lookup"><span data-stu-id="d232b-177">For this page, let s create an editable GridView so that we can examine what happens when data cached in the ObjectDataSource is modified through the GridView s interface.</span></span> <span data-ttu-id="d232b-178">Dejar la lista desplegable en la ficha Seleccionar con su valor predeterminado, `GetProducts()`, pero cambie el elemento seleccionado en la ficha de actualización para la `UpdateProduct` sobrecarga que acepta `productName`, `unitPrice`, y `productID` como sus parámetros de entrada.</span><span class="sxs-lookup"><span data-stu-id="d232b-178">Leave the drop-down list in the SELECT tab set to its default, `GetProducts()`, but change the selected item in the UPDATE tab to the `UpdateProduct` overload that accepts `productName`, `unitPrice`, and `productID` as its input parameters.</span></span>


<span data-ttu-id="d232b-179">[![Establecer la lista desplegable de actualización pestaña s a la sobrecarga adecuada UpdateProduct](caching-data-with-the-objectdatasource-vb/_static/image10.png)](caching-data-with-the-objectdatasource-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="d232b-179">[![Set the UPDATE Tab s Drop-Down List to the Appropriate UpdateProduct Overload](caching-data-with-the-objectdatasource-vb/_static/image10.png)](caching-data-with-the-objectdatasource-vb/_static/image9.png)</span></span>

<span data-ttu-id="d232b-180">**Figura 5**: establece la lista desplegable de ficha actualización s en el adecuado `UpdateProduct` de sobrecarga ([haga clic aquí para ver la imagen a tamaño completo](caching-data-with-the-objectdatasource-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="d232b-180">**Figure 5**: Set the UPDATE Tab s Drop-Down List to the Appropriate `UpdateProduct` Overload ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image11.png))</span></span>


<span data-ttu-id="d232b-181">Por último, establezca las listas desplegables en las pestañas INSERT y DELETE para (ninguno) y haga clic en Finalizar.</span><span class="sxs-lookup"><span data-stu-id="d232b-181">Finally, set the drop-down lists in the INSERT and DELETE tabs to (None) and click Finish.</span></span> <span data-ttu-id="d232b-182">Tras completar el Asistente para configurar orígenes de datos, Visual Studio establece la s ObjectDataSource `OldValuesParameterFormatString` propiedad `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="d232b-182">Upon completing the Configure Data Source wizard, Visual Studio sets the ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="d232b-183">Como se describe en el [una visión general de insertar, actualizar y eliminar datos](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-vb.md) tutorial, esta propiedad debe quitarse de la sintaxis declarativa o vuelve a establecer en su valor predeterminado, `{0}`, en orden para que nuestro flujo de trabajo de actualización continuar sin errores.</span><span class="sxs-lookup"><span data-stu-id="d232b-183">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-vb.md) tutorial, this property needs to be removed from the declarative syntax or set back to its default value, `{0}`, in order for our update workflow to proceed without error.</span></span>

<span data-ttu-id="d232b-184">Además, al finalizar el Asistente para Visual Studio agrega un campo a la GridView para cada uno de los campos de datos de producto.</span><span class="sxs-lookup"><span data-stu-id="d232b-184">Furthermore, at the completion of the wizard Visual Studio adds a field to the GridView for each of the product data fields.</span></span> <span data-ttu-id="d232b-185">Quitar todos menos el `ProductName`, `CategoryName`, y `UnitPrice` BoundFields.</span><span class="sxs-lookup"><span data-stu-id="d232b-185">Remove all but the `ProductName`, `CategoryName`, and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="d232b-186">A continuación, actualice el `HeaderText` propiedades de cada uno de estos BoundFields al producto, la categoría y el precio, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="d232b-186">Next, update the `HeaderText` properties of each of these BoundFields to Product, Category, and Price, respectively.</span></span> <span data-ttu-id="d232b-187">Puesto que la `ProductName` campo es obligatorio, convertir el BoundField TemplateField y agregar un control RequiredFieldValidator a la `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="d232b-187">Since the `ProductName` field is required, convert the BoundField into a TemplateField and add a RequiredFieldValidator to the `EditItemTemplate`.</span></span> <span data-ttu-id="d232b-188">Asimismo, convertir el `UnitPrice` BoundField en TemplateField y agregue un control CompareValidator para asegurarse de que el valor especificado por el usuario es una moneda válida valor s mayor que o igual a cero.</span><span class="sxs-lookup"><span data-stu-id="d232b-188">Similarly, convert the `UnitPrice` BoundField into a TemplateField and add a CompareValidator to ensure that the value entered by the user is a valid currency value that s greater than or equal to zero.</span></span> <span data-ttu-id="d232b-189">Además de estas modificaciones, no dude en realizar los cambios estéticos, como Alinear a la derecha el `UnitPrice` valor o especificar el formato de la `UnitPrice` texto en sus interfaces de solo lectura y edición.</span><span class="sxs-lookup"><span data-stu-id="d232b-189">In addition to these modifications, feel free to perform any aesthetic changes, such as right-aligning the `UnitPrice` value, or specifying the formatting for the `UnitPrice` text in its read-only and editing interfaces.</span></span>

<span data-ttu-id="d232b-190">Asegúrese de GridView editable activando la casilla de verificación Habilitar edición en la etiqueta inteligente de s de GridView.</span><span class="sxs-lookup"><span data-stu-id="d232b-190">Make the GridView editable by checking the Enable Editing checkbox in the GridView s smart tag.</span></span> <span data-ttu-id="d232b-191">Compruebe también las casillas de verificación Habilitar paginación y habilitar la ordenación.</span><span class="sxs-lookup"><span data-stu-id="d232b-191">Also check the Enable Paging and Enable Sorting checkboxes.</span></span>

> [!NOTE]
> <span data-ttu-id="d232b-192">¿Necesita una revisión de cómo personalizar la interfaz de edición de GridView s?</span><span class="sxs-lookup"><span data-stu-id="d232b-192">Need a review of how to customize the GridView s editing interface?</span></span> <span data-ttu-id="d232b-193">Si es así, hacen referencia a la [personalizar la interfaz de modificación de datos](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-vb.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="d232b-193">If so, refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-vb.md) tutorial.</span></span>


<span data-ttu-id="d232b-194">[![Habilitar la compatibilidad de GridView para editar, ordenar y paginar](caching-data-with-the-objectdatasource-vb/_static/image13.png)](caching-data-with-the-objectdatasource-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="d232b-194">[![Enable GridView Support for Editing, Sorting, and Paging](caching-data-with-the-objectdatasource-vb/_static/image13.png)](caching-data-with-the-objectdatasource-vb/_static/image12.png)</span></span>

<span data-ttu-id="d232b-195">**Figura 6**: habilitar la compatibilidad con GridView para editar, ordenar y paginar ([haga clic aquí para ver la imagen a tamaño completo](caching-data-with-the-objectdatasource-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="d232b-195">**Figure 6**: Enable GridView Support for Editing, Sorting, and Paging ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image14.png))</span></span>


<span data-ttu-id="d232b-196">Después de realizar estas modificaciones GridView, el marcado declarativo de s GridView y ObjectDataSource debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="d232b-196">After making these GridView modifications, the GridView and ObjectDataSource s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](caching-data-with-the-objectdatasource-vb/samples/sample2.aspx)]

<span data-ttu-id="d232b-197">Como se muestra en la figura 7, GridView editable muestra el nombre, la categoría y el precio de cada uno de los productos de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-197">As Figure 7 shows, the editable GridView lists the name, category, and price of each of the products in the database.</span></span> <span data-ttu-id="d232b-198">Tómese un momento para probar el criterio de ordenación de la funcionalidad de página s los resultados, la página a través de ellos y editar un registro.</span><span class="sxs-lookup"><span data-stu-id="d232b-198">Take a moment to test out the page s functionality sort the results, page through them, and edit a record.</span></span>


<span data-ttu-id="d232b-199">[![Cada producto es nombre, categoría y el precio se muestran en un Sortable, Pageable, GridView Editable](caching-data-with-the-objectdatasource-vb/_static/image16.png)](caching-data-with-the-objectdatasource-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="d232b-199">[![Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView](caching-data-with-the-objectdatasource-vb/_static/image16.png)](caching-data-with-the-objectdatasource-vb/_static/image15.png)</span></span>

<span data-ttu-id="d232b-200">**Figura 7**: s nombre de cada producto, la categoría y el precio se muestra en un Sortable, Pageable, GridView Editable ([haga clic aquí para ver la imagen a tamaño completo](caching-data-with-the-objectdatasource-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="d232b-200">**Figure 7**: Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image17.png))</span></span>


## <a name="step-3-examining-when-the-objectdatasource-is-requesting-data"></a><span data-ttu-id="d232b-201">Paso 3: Examinar cuando ObjectDataSource el es solicitar datos</span><span class="sxs-lookup"><span data-stu-id="d232b-201">Step 3: Examining When the ObjectDataSource is Requesting Data</span></span>

<span data-ttu-id="d232b-202">El `Products` GridView recupera sus datos para mostrar invocando la `Select` método de la `ProductsDataSource` ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="d232b-202">The `Products` GridView retrieves its data to display by invoking the `Select` method of the `ProductsDataSource` ObjectDataSource.</span></span> <span data-ttu-id="d232b-203">Este origen ObjectDataSource crea una instancia de la capa de lógica empresarial s `ProductsBLL` clase y llamadas a su `GetProducts()` método, que a su vez llama a la capa de acceso a datos s `ProductsTableAdapter` s `GetProducts()` método.</span><span class="sxs-lookup"><span data-stu-id="d232b-203">This ObjectDataSource creates an instance of the Business Logic Layer s `ProductsBLL` class and calls its `GetProducts()` method, which in turn calls the Data Access Layer s `ProductsTableAdapter` s `GetProducts()` method.</span></span> <span data-ttu-id="d232b-204">El método de la capa DAL se conecta a la base de datos Northwind y emite el configurado `SELECT` consulta.</span><span class="sxs-lookup"><span data-stu-id="d232b-204">The DAL method connects to the Northwind database and issues the configured `SELECT` query.</span></span> <span data-ttu-id="d232b-205">Estos datos, a continuación, se devuelven a la capa DAL, que empaqueta en un `NorthwindDataTable`.</span><span class="sxs-lookup"><span data-stu-id="d232b-205">This data is then returned to the DAL, which packages it up in a `NorthwindDataTable`.</span></span> <span data-ttu-id="d232b-206">Se devuelve el objeto DataTable a la capa BLL, que devuelve a la ObjectDataSource, que devuelve a la GridView.</span><span class="sxs-lookup"><span data-stu-id="d232b-206">The DataTable object is returned to the BLL, which returns it to the ObjectDataSource, which returns it to the GridView.</span></span> <span data-ttu-id="d232b-207">GridView, a continuación, crea un `GridViewRow` para cada objeto `DataRow` en la tabla de datos y cada uno de ellos `GridViewRow` finalmente se representa en el código HTML que se devuelve al cliente y se muestra en el Explorador de visitante s.</span><span class="sxs-lookup"><span data-stu-id="d232b-207">The GridView then creates a `GridViewRow` object for each `DataRow` in the DataTable, and each `GridViewRow` is eventually rendered into the HTML that is returned to the client and displayed on the visitor s browser.</span></span>

<span data-ttu-id="d232b-208">Esta secuencia de eventos se realiza cada vez que GridView debe enlazarse a los datos subyacentes.</span><span class="sxs-lookup"><span data-stu-id="d232b-208">This sequence of events happens each and every time the GridView needs to bind to its underlying data.</span></span> <span data-ttu-id="d232b-209">Esto ocurre cuando se visita la página en primer lugar, cuando se mueve de una página de datos a otro, al ordenar GridView, o al modificar los datos de GridView s a través de su integrado editen o eliminen interfaces.</span><span class="sxs-lookup"><span data-stu-id="d232b-209">That happens when the page is first visited, when moving from one page of data to another, when sorting the GridView, or when modifying the GridView s data through its built-in editing or deleting interfaces.</span></span> <span data-ttu-id="d232b-210">Si se deshabilita el estado de vista de GridView s, se puede Reenlazar la GridView en cada postback también.</span><span class="sxs-lookup"><span data-stu-id="d232b-210">If the GridView s view state is disabled, the GridView will be rebound on each and every postback as well.</span></span> <span data-ttu-id="d232b-211">GridView puede también ser explícitamente vuelve a enlazar a sus datos mediante una llamada a su `DataBind()` método.</span><span class="sxs-lookup"><span data-stu-id="d232b-211">The GridView can also be explicitly rebound to its data by calling its `DataBind()` method.</span></span>

<span data-ttu-id="d232b-212">Para apreciar la frecuencia con la que se recuperan los datos de la base de datos, deje que s muestre un mensaje que indica si los datos se va a volver a recuperados.</span><span class="sxs-lookup"><span data-stu-id="d232b-212">To fully appreciate the frequency with which the data is retrieved from the database, let s display a message indicating when the data is being re-retrieved.</span></span> <span data-ttu-id="d232b-213">Agregar un control Web Label anteriormente GridView denominado `ODSEvents`.</span><span class="sxs-lookup"><span data-stu-id="d232b-213">Add a Label Web control above the GridView named `ODSEvents`.</span></span> <span data-ttu-id="d232b-214">Borrar su `Text` propiedad y establezca su `EnableViewState` propiedad `False`.</span><span class="sxs-lookup"><span data-stu-id="d232b-214">Clear out its `Text` property and set its `EnableViewState` property to `False`.</span></span> <span data-ttu-id="d232b-215">Debajo de la etiqueta, agregue un control Web de botón y establezca su `Text` propiedad a la devolución de datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-215">Underneath the Label, add a Button Web control and set its `Text` property to Postback .</span></span>


<span data-ttu-id="d232b-216">[![Agregar una etiqueta y un botón a la página situada encima de GridView](caching-data-with-the-objectdatasource-vb/_static/image19.png)](caching-data-with-the-objectdatasource-vb/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="d232b-216">[![Add a Label and Button to the Page Above the GridView](caching-data-with-the-objectdatasource-vb/_static/image19.png)](caching-data-with-the-objectdatasource-vb/_static/image18.png)</span></span>

<span data-ttu-id="d232b-217">**Figura 8**: agregar una etiqueta y un botón a la página encima de la GridView ([haga clic aquí para ver la imagen a tamaño completo](caching-data-with-the-objectdatasource-vb/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="d232b-217">**Figure 8**: Add a Label and Button to the Page Above the GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image20.png))</span></span>


<span data-ttu-id="d232b-218">Durante el flujo de trabajo de acceso de datos, las operaciones de asignación ObjectDataSource `Selecting` evento se desencadena antes de crea el objeto subyacente y el método configurado que se invoca.</span><span class="sxs-lookup"><span data-stu-id="d232b-218">During the data access workflow, the ObjectDataSource s `Selecting` event fires before the underlying object is created and its configured method invoked.</span></span> <span data-ttu-id="d232b-219">Cree un controlador de eventos para este evento y agregue el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="d232b-219">Create an event handler for this event and add the following code:</span></span>


[!code-vb[Main](caching-data-with-the-objectdatasource-vb/samples/sample3.vb)]

<span data-ttu-id="d232b-220">Cada vez que el ObjectDataSource realiza una solicitud a la arquitectura de datos, la etiqueta mostrará el evento de selección de texto que se desencadena.</span><span class="sxs-lookup"><span data-stu-id="d232b-220">Each time the ObjectDataSource makes a request to the architecture for data, the Label will display the text Selecting event fired .</span></span>

<span data-ttu-id="d232b-221">Visite esta página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="d232b-221">Visit this page in a browser.</span></span> <span data-ttu-id="d232b-222">Cuando primero se visita la página, se muestra el evento de selección de texto que se desencadena.</span><span class="sxs-lookup"><span data-stu-id="d232b-222">When the page is first visited, the text Selecting event fired is shown.</span></span> <span data-ttu-id="d232b-223">Haga clic en el botón de devolución de datos y tenga en cuenta que el texto desaparece (suponiendo que las operaciones de asignación GridView `EnableViewState` propiedad está establecida en `True`, el valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="d232b-223">Click the Postback button and note that the text disappears (assuming that the GridView s `EnableViewState` property is set to `True`, the default).</span></span> <span data-ttu-id="d232b-224">Esto es porque, en la devolución de datos, se reconstruye GridView desde su estado de vista y, por tanto, t activar a ObjectDataSource para sus datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-224">This is because, on postback, the GridView is reconstructed from its view state and therefore doesn t turn to the ObjectDataSource for its data.</span></span> <span data-ttu-id="d232b-225">Ordenación, paginación o modificar los datos, sin embargo, hace GridView a enlazarse a su origen de datos, y, por tanto, desencadena el evento de selección de texto vuelve a aparecer.</span><span class="sxs-lookup"><span data-stu-id="d232b-225">Sorting, paging, or editing the data, however, causes the GridView to rebind to its data source, and therefore the Selecting event fired text reappears.</span></span>


<span data-ttu-id="d232b-226">[![Cada vez que se vuelve a enlazar el control GridView a su origen de datos, se muestra si selecciona el evento](caching-data-with-the-objectdatasource-vb/_static/image22.png)](caching-data-with-the-objectdatasource-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="d232b-226">[![Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed](caching-data-with-the-objectdatasource-vb/_static/image22.png)](caching-data-with-the-objectdatasource-vb/_static/image21.png)</span></span>

<span data-ttu-id="d232b-227">**Figura 9**: GridView el cada vez que se vuelve a enlazar a su origen de datos, se muestra si selecciona el evento ([haga clic aquí para ver la imagen a tamaño completo](caching-data-with-the-objectdatasource-vb/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="d232b-227">**Figure 9**: Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image23.png))</span></span>


<span data-ttu-id="d232b-228">[![Haga clic en el botón de devolución de datos hace GridView a se reconstruye a partir de su estado de vista](caching-data-with-the-objectdatasource-vb/_static/image25.png)](caching-data-with-the-objectdatasource-vb/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="d232b-228">[![Clicking the Postback Button Causes the GridView to be Reconstructed from its View State](caching-data-with-the-objectdatasource-vb/_static/image25.png)](caching-data-with-the-objectdatasource-vb/_static/image24.png)</span></span>

<span data-ttu-id="d232b-229">**Figura 10**: haga clic en el botón de devolución de datos que GridView a se reconstruye a partir de su estado de vista ([haga clic aquí para ver la imagen a tamaño completo](caching-data-with-the-objectdatasource-vb/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="d232b-229">**Figure 10**: Clicking the Postback Button Causes the GridView to be Reconstructed from its View State ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image26.png))</span></span>


<span data-ttu-id="d232b-230">Puede parecer excesivo recuperar los datos de la base de datos cada vez que se paginar a través o se ordenan los datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-230">It may seem wasteful to retrieve the database data each time the data is paged through or sorted.</span></span> <span data-ttu-id="d232b-231">Después de todo, desde que se re use la paginación de manera predeterminada, el ObjectDataSource ha recuperado todos los registros cuando se muestra la primera página.</span><span class="sxs-lookup"><span data-stu-id="d232b-231">After all, since we re using default paging, the ObjectDataSource has retrieved all of the records when displaying the first page.</span></span> <span data-ttu-id="d232b-232">Incluso aunque no proporcione GridView ordenar y paginar el soporte técnico, los datos deben obtenerse de la base de datos cada vez que primero se visita la página por cualquier usuario (y en cada devolución de datos, si el estado de vista está deshabilitado).</span><span class="sxs-lookup"><span data-stu-id="d232b-232">Even if the GridView does not provide sorting and paging support, the data must be retrieved from the database each time the page is first visited by any user (and on every postback, if view state is disabled).</span></span> <span data-ttu-id="d232b-233">Pero si GridView muestra los mismos datos para todos los usuarios, estas solicitudes de base de datos adicional superfluas.</span><span class="sxs-lookup"><span data-stu-id="d232b-233">But if the GridView is showing the same data to all users, these extra database requests are superfluous.</span></span> <span data-ttu-id="d232b-234">¿Por qué no almacenar en caché los resultados devueltos por la `GetProducts()` método y se enlaza el control GridView a los almacenados en memoria caché los resultados?</span><span class="sxs-lookup"><span data-stu-id="d232b-234">Why not cache the results returned from the `GetProducts()` method and bind the GridView to those cached results?</span></span>

## <a name="step-4-caching-the-data-using-the-objectdatasource"></a><span data-ttu-id="d232b-235">Paso 4: Almacenamiento en caché los datos a través de ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="d232b-235">Step 4: Caching the Data Using the ObjectDataSource</span></span>

<span data-ttu-id="d232b-236">Basta con establecer algunas propiedades, ObjectDataSource puede configurarse para que se almacenan automáticamente en caché los datos recuperados en la caché de datos ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d232b-236">By simply setting a few properties, the ObjectDataSource can be configured to automatically cache its retrieved data in the ASP.NET data cache.</span></span> <span data-ttu-id="d232b-237">En la lista siguiente se resume las propiedades relacionadas con la memoria caché de ObjectDataSource:</span><span class="sxs-lookup"><span data-stu-id="d232b-237">The following list summarizes the cache-related properties of the ObjectDataSource:</span></span>

- <span data-ttu-id="d232b-238">[EnableCaching](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) debe establecerse en `True` para habilitar el almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-238">[EnableCaching](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) must be set to `True` to enable caching.</span></span> <span data-ttu-id="d232b-239">De manera predeterminada, es `False`.</span><span class="sxs-lookup"><span data-stu-id="d232b-239">The default is `False`.</span></span>
- <span data-ttu-id="d232b-240">[CacheDuration](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) la cantidad de tiempo, en segundos, que se almacena en caché los datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-240">[CacheDuration](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) the amount of time, in seconds, that the data is cached.</span></span> <span data-ttu-id="d232b-241">El valor predeterminado es 0.</span><span class="sxs-lookup"><span data-stu-id="d232b-241">The default is 0.</span></span> <span data-ttu-id="d232b-242">ObjectDataSource almacenará sólo en memoria caché datos si `EnableCaching` es `True` y `CacheDuration` se establece en un valor mayor que cero.</span><span class="sxs-lookup"><span data-stu-id="d232b-242">The ObjectDataSource will only cache data if `EnableCaching` is `True` and `CacheDuration` is set to a value greater than zero.</span></span>
- <span data-ttu-id="d232b-243">[CacheExpirationPolicy](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) se puede establecer en `Absolute` o `Sliding`.</span><span class="sxs-lookup"><span data-stu-id="d232b-243">[CacheExpirationPolicy](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) can be set to `Absolute` or `Sliding`.</span></span> <span data-ttu-id="d232b-244">Si `Absolute`, ObjectDataSource almacena en caché los datos recuperados para `CacheDuration` segundos; si `Sliding`, expiren los datos solo después de no se ha accedido durante `CacheDuration` segundos.</span><span class="sxs-lookup"><span data-stu-id="d232b-244">If `Absolute`, the ObjectDataSource caches its retrieved data for `CacheDuration` seconds; if `Sliding`, the data expires only after it has not been accessed for `CacheDuration` seconds.</span></span> <span data-ttu-id="d232b-245">De manera predeterminada, es `Absolute`.</span><span class="sxs-lookup"><span data-stu-id="d232b-245">The default is `Absolute`.</span></span>
- <span data-ttu-id="d232b-246">[CacheKeyDependency](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) utilizar esta propiedad para asociar las entradas de caché de ObjectDataSource s con una dependencia de caché existente.</span><span class="sxs-lookup"><span data-stu-id="d232b-246">[CacheKeyDependency](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) use this property to associate the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="d232b-247">Las entradas de datos de ObjectDataSource s se pueda expulsar prematuramente de la memoria caché mediante la expiración de su asociado `CacheKeyDependency`.</span><span class="sxs-lookup"><span data-stu-id="d232b-247">The ObjectDataSource s data entries can be prematurely evicted from the cache by expiring its associated `CacheKeyDependency`.</span></span> <span data-ttu-id="d232b-248">Esta propiedad normalmente se usa para asociar una dependencia de caché SQL con la caché de s ObjectDataSource, un tema exploraremos en el futuro [utilizando las dependencias de caché de SQL](using-sql-cache-dependencies-vb.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="d232b-248">This property is most commonly used to associate a SQL cache dependency with the ObjectDataSource s cache, a topic we'll explore in the future [Using SQL Cache Dependencies](using-sql-cache-dependencies-vb.md) tutorial.</span></span>

<span data-ttu-id="d232b-249">Permiten s configurar el `ProductsDataSource` ObjectDataSource en caché sus datos durante 30 segundos en escala absoluta.</span><span class="sxs-lookup"><span data-stu-id="d232b-249">Let s configure the `ProductsDataSource` ObjectDataSource to cache its data for 30 seconds on an absolute scale.</span></span> <span data-ttu-id="d232b-250">Establecer la s ObjectDataSource `EnableCaching` propiedad `True` y su `CacheDuration` propiedad a 30.</span><span class="sxs-lookup"><span data-stu-id="d232b-250">Set the ObjectDataSource s `EnableCaching` property to `True` and its `CacheDuration` property to 30.</span></span> <span data-ttu-id="d232b-251">Deje el `CacheExpirationPolicy` propiedad establecida en su valor predeterminado, `Absolute`.</span><span class="sxs-lookup"><span data-stu-id="d232b-251">Leave the `CacheExpirationPolicy` property set to its default, `Absolute`.</span></span>


<span data-ttu-id="d232b-252">[![Configurar el ObjectDataSource para almacenar sus datos en caché durante 30 segundos](caching-data-with-the-objectdatasource-vb/_static/image28.png)](caching-data-with-the-objectdatasource-vb/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="d232b-252">[![Configure the ObjectDataSource to Cache its Data for 30 Seconds](caching-data-with-the-objectdatasource-vb/_static/image28.png)](caching-data-with-the-objectdatasource-vb/_static/image27.png)</span></span>

<span data-ttu-id="d232b-253">**Figura 11**: configurar el ObjectDataSource para almacenar sus datos en caché durante 30 segundos ([haga clic aquí para ver la imagen a tamaño completo](caching-data-with-the-objectdatasource-vb/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="d232b-253">**Figure 11**: Configure the ObjectDataSource to Cache its Data for 30 Seconds ([Click to view full-size image](caching-data-with-the-objectdatasource-vb/_static/image29.png))</span></span>


<span data-ttu-id="d232b-254">Guarde los cambios y volver a visitar esta página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="d232b-254">Save your changes and revisit this page in a browser.</span></span> <span data-ttu-id="d232b-255">El texto de evento que se activa si selecciona aparecerá cuando visite la página por primera vez como inicialmente los datos no están en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-255">The Selecting event fired text will appear when you first visit the page, as initially the data is not in the cache.</span></span> <span data-ttu-id="d232b-256">Pero no de postbacks posteriores desencadenados haciendo clic en el botón de devolución de datos, ordenación, paginación, o haga clic en los botones Editar o cancelar *no* texto que desencadena el evento si selecciona volver a mostrar.</span><span class="sxs-lookup"><span data-stu-id="d232b-256">But subsequent postbacks triggered by clicking the Postback button, sorting, paging, or clicking the Edit or Cancel buttons does *not* redisplay the Selecting event fired text.</span></span> <span data-ttu-id="d232b-257">Esto es porque el `Selecting` evento sólo se desencadena cuando el ObjectDataSource obtiene sus datos de su objeto subyacente; el `Selecting` evento no se desencadena si los datos se extraen desde la caché de datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-257">This is because the `Selecting` event only fires when the ObjectDataSource gets its data from its underlying object; the `Selecting` event does not fire if the data is pulled from the data cache.</span></span>

<span data-ttu-id="d232b-258">Después de 30 segundos, los datos se expulsen de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-258">After 30 seconds, the data will be evicted from the cache.</span></span> <span data-ttu-id="d232b-259">Los datos también se eliminan de la caché si las operaciones de asignación ObjectDataSource `Insert`, `Update`, o `Delete` los métodos se invocan.</span><span class="sxs-lookup"><span data-stu-id="d232b-259">The data will also be evicted from the cache if the ObjectDataSource s `Insert`, `Update`, or `Delete` methods are invoked.</span></span> <span data-ttu-id="d232b-260">Por lo tanto, una vez transcurridos 30 segundos o el botón de actualización se ha hecho clic, ordenación, paginación, o al hacer clic en los botones Editar o cancelar hará que el ObjectDataSource obtener sus datos de su objeto subyacente, mostrando el evento Selecting desencadena texto cuando el `Selecting` desencadena el evento.</span><span class="sxs-lookup"><span data-stu-id="d232b-260">Consequently, after 30 seconds have passed or the Update button has been clicked, sorting, paging, or clicking the Edit or Cancel buttons will cause the ObjectDataSource to get its data from its underlying object, displaying the Selecting event fired text when the `Selecting` event fires.</span></span> <span data-ttu-id="d232b-261">Los resultados devueltos se colocan en la caché de datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-261">These returned results are placed back into the data cache.</span></span>

> [!NOTE]
> <span data-ttu-id="d232b-262">Si ve el texto de evento que se activa si selecciona con frecuencia, incluso cuando se espera que el ObjectDataSource a trabajar con datos almacenados en caché, es posible debido a restricciones de memoria.</span><span class="sxs-lookup"><span data-stu-id="d232b-262">If you see the Selecting event fired text frequently, even when you expect the ObjectDataSource to be working with cached data, it may be due to memory constraints.</span></span> <span data-ttu-id="d232b-263">Si no hay suficiente memoria libre, los datos agregados a la memoria caché por el ObjectDataSource pueden haber ha eliminación de registros obsoletos.</span><span class="sxs-lookup"><span data-stu-id="d232b-263">If there is not enough free memory, the data added to the cache by the ObjectDataSource may have been scavenged.</span></span> <span data-ttu-id="d232b-264">Si t ObjectDataSource parece estar correctamente el almacenamiento en caché los datos o solo las memorias caché los datos de forma esporádica, cierre algunas aplicaciones para liberar memoria y vuelva a intentarlo.</span><span class="sxs-lookup"><span data-stu-id="d232b-264">If the ObjectDataSource doesn t appear to be correctly caching the data or only caches the data sporadically, close some applications to free memory and try again.</span></span>


<span data-ttu-id="d232b-265">Figura 12 muestra las operaciones de asignación ObjectDataSource almacenamiento en caché de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="d232b-265">Figure 12 illustrates the ObjectDataSource s caching workflow.</span></span> <span data-ttu-id="d232b-266">Cuando se desencadena el evento si selecciona el texto aparece en la pantalla, es porque los datos no estaba en la memoria caché y se tuvieron que se recupera del objeto subyacente.</span><span class="sxs-lookup"><span data-stu-id="d232b-266">When the Selecting event fired text appears on your screen, it is because the data was not in the cache and had to be retrieved from the underlying object.</span></span> <span data-ttu-id="d232b-267">Cuando este texto falta, sin embargo, se s porque los datos estuvieran disponibles de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-267">When this text is missing, however, it s because the data was available from the cache.</span></span> <span data-ttu-id="d232b-268">Cuando los datos se devuelven desde la memoria caché ahí s ejecuta ninguna llamada al objeto subyacente y, por lo tanto, ninguna consulta de base de datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-268">When the data is returned from the cache there s no call to the underlying object and, therefore, no database query executed.</span></span>


![Los almacenes de ObjectDataSource y recupera sus datos de la caché de datos](caching-data-with-the-objectdatasource-vb/_static/image30.png)

<span data-ttu-id="d232b-270">**Figura 12**: ObjectDataSource almacena y recupera sus datos de la caché de datos</span><span class="sxs-lookup"><span data-stu-id="d232b-270">**Figure 12**: The ObjectDataSource Stores and Retrieves its Data from the Data Cache</span></span>


<span data-ttu-id="d232b-271">Cada aplicación de ASP.NET tiene su propia memoria caché de datos s comparten todas las páginas y los visitantes de la instancia.</span><span class="sxs-lookup"><span data-stu-id="d232b-271">Each ASP.NET application has its own data cache instance that s shared across all pages and visitors.</span></span> <span data-ttu-id="d232b-272">Esto significa que los datos almacenados en la caché de datos por el ObjectDataSource igualmente se comparten entre todos los usuarios que visitan la página.</span><span class="sxs-lookup"><span data-stu-id="d232b-272">That means that the data stored in the data cache by the ObjectDataSource is likewise shared across all users who visit the page.</span></span> <span data-ttu-id="d232b-273">Para comprobarlo, abra el `ObjectDataSource.aspx` página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="d232b-273">To verify this, open the `ObjectDataSource.aspx` page in a browser.</span></span> <span data-ttu-id="d232b-274">Al primero visitar la página, se mostrará el texto de evento que se activa si selecciona (suponiendo que los datos agregados a la memoria caché por las pruebas anteriores se, hasta ahora, ha desalojado).</span><span class="sxs-lookup"><span data-stu-id="d232b-274">When first visiting the page, the Selecting event fired text will appear (assuming that the data added to the cache by previous tests has, by now, been evicted).</span></span> <span data-ttu-id="d232b-275">Abra una segunda instancia del explorador y copiar y pegar la dirección URL de la primera instancia del explorador para el segundo.</span><span class="sxs-lookup"><span data-stu-id="d232b-275">Open a second browser instance and copy and paste the URL from the first browser instance to the second.</span></span> <span data-ttu-id="d232b-276">En la segunda instancia del explorador, no se muestra el texto de evento que se activa si selecciona porque lo s usando la misma en memoria caché datos que el primero.</span><span class="sxs-lookup"><span data-stu-id="d232b-276">In the second browser instance, the Selecting event fired text is not shown because it s using the same cached data as the first.</span></span>

<span data-ttu-id="d232b-277">Al insertar los datos recuperados en la memoria caché, ObjectDataSource utiliza un valor de clave de caché que incluye: el `CacheDuration` y `CacheExpirationPolicy` valores de propiedad; el tipo del objeto de negocios subyacente usándola ObjectDataSource, que se especifica a través de la [ `TypeName` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) (`ProductsBLL`, en este ejemplo); el valor de la `SelectMethod` propiedad y el nombre y los valores de los parámetros en el `SelectParameters` colección; y los valores de sus `StartRowIndex`y `MaximumRows` propiedades, que se usan al implementar [paginación personalizada](../paging-and-sorting/paging-and-sorting-report-data-vb.md).</span><span class="sxs-lookup"><span data-stu-id="d232b-277">When inserting its retrieved data into the cache, the ObjectDataSource uses a cache key value that includes: the `CacheDuration` and `CacheExpirationPolicy` property values; the type of the underlying business object being used by the ObjectDataSource, which is specified via the [`TypeName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) (`ProductsBLL`, in this example); the value of the `SelectMethod` property and the name and values of the parameters in the `SelectParameters` collection; and the values of its `StartRowIndex` and `MaximumRows` properties, which are used when implementing [custom paging](../paging-and-sorting/paging-and-sorting-report-data-vb.md).</span></span>

<span data-ttu-id="d232b-278">Elaborar el valor de clave de caché como una combinación de estas propiedades garantiza una entrada de caché única, como cambian estos valores.</span><span class="sxs-lookup"><span data-stu-id="d232b-278">Crafting the cache key value as a combination of these properties ensures a unique cache entry as these values change.</span></span> <span data-ttu-id="d232b-279">Por ejemplo, en los tutoriales anteriores se ha examinado utilizando la `ProductsBLL` clase s. `GetProductsByCategoryID(categoryID)`, que devuelve todos los productos de la categoría especificada.</span><span class="sxs-lookup"><span data-stu-id="d232b-279">For example, in past tutorials we ve looked at using the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)`, which returns all products for a specified category.</span></span> <span data-ttu-id="d232b-280">Un usuario puede llegar a la página y vista de bebidas, que tiene un `CategoryID` de 1.</span><span class="sxs-lookup"><span data-stu-id="d232b-280">One user might come to the page and view beverages, which has a `CategoryID` of 1.</span></span> <span data-ttu-id="d232b-281">Si el ObjectDataSource almacenado en caché los resultados sin tener en cuenta el `SelectParameters` valores, cuando otro usuario ha llegado a la página Ver condimentos mientras los productos de bebidas estuviera en la memoria caché, d verán los productos de bebidas en caché en lugar de condimentos.</span><span class="sxs-lookup"><span data-stu-id="d232b-281">If the ObjectDataSource cached its results without regard for the `SelectParameters` values, when another user came to the page to view condiments while the beverages products were in the cache, they d see the cached beverage products rather than condiments.</span></span> <span data-ttu-id="d232b-282">Mediante la variación de la clave de caché por estas propiedades, que incluyen los valores de la `SelectParameters`, ObjectDataSource mantiene una entrada de caché independiente para bebidas y condimentos.</span><span class="sxs-lookup"><span data-stu-id="d232b-282">By varying the cache key by these properties, which include the values of the `SelectParameters`, the ObjectDataSource maintains a separate cache entry for beverages and condiments.</span></span>

## <a name="stale-data-concerns"></a><span data-ttu-id="d232b-283">Problemas de datos obsoletos</span><span class="sxs-lookup"><span data-stu-id="d232b-283">Stale Data Concerns</span></span>

<span data-ttu-id="d232b-284">ObjectDataSource expulsa automáticamente sus elementos de la memoria caché cuando cualquiera de sus `Insert`, `Update`, o `Delete` los métodos se invocan.</span><span class="sxs-lookup"><span data-stu-id="d232b-284">The ObjectDataSource automatically evicts its items from the cache when any one of its `Insert`, `Update`, or `Delete` methods is invoked.</span></span> <span data-ttu-id="d232b-285">Esto ayuda a protegerse contra datos obsoletos borrando las entradas de caché cuando se modifican los datos a través de la página.</span><span class="sxs-lookup"><span data-stu-id="d232b-285">This helps protect against stale data by clearing out the cache entries when the data is modified through the page.</span></span> <span data-ttu-id="d232b-286">Sin embargo, es posible que un ObjectDataSource con almacenamiento en caché para seguirá mostrando datos obsoletos.</span><span class="sxs-lookup"><span data-stu-id="d232b-286">However, it is possible for an ObjectDataSource using caching to still display stale data.</span></span> <span data-ttu-id="d232b-287">En el caso más simple, puede ser debido a los datos de cambio directamente dentro de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-287">In the simplest case, it can be due to the data changing directly within the database.</span></span> <span data-ttu-id="d232b-288">Quizás un administrador de base de datos ha ejecutado un script que modifica algunos de los registros en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="d232b-288">Perhaps a database administrator just ran a script that modifies some of the records in the database.</span></span>

<span data-ttu-id="d232b-289">También puede expandir este escenario de una manera más sutil.</span><span class="sxs-lookup"><span data-stu-id="d232b-289">This scenario could also unfold in a more subtle way.</span></span> <span data-ttu-id="d232b-290">Aunque el ObjectDataSource expulsa sus elementos de la memoria caché cuando se llama a uno de sus métodos de modificación de datos, quitados los elementos almacenados en caché son para la combinación ObjectDataSource s valores de propiedad (`CacheDuration`, `TypeName`, `SelectMethod`, y así sucesivamente).</span><span class="sxs-lookup"><span data-stu-id="d232b-290">While the ObjectDataSource evicts its items from the cache when one of its data modification methods is called, the cached items removed are for the ObjectDataSource s particular combination of property values (`CacheDuration`, `TypeName`, `SelectMethod`, and so on).</span></span> <span data-ttu-id="d232b-291">Si tiene dos ObjectDataSources que usan diferentes `SelectMethods` o `SelectParameters`, pero todavía puede actualizar los mismos datos, a continuación, uno ObjectDataSource puede actualizar una fila e invalidar sus propias entradas de caché, pero la fila correspondiente de la segundo ObjectDataSource todavía se servirá desde las almacenadas en caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-291">If you have two ObjectDataSources that use different `SelectMethods` or `SelectParameters`, but still can update the same data, then one ObjectDataSource may update a row and invalidate its own cache entries, but the corresponding row for the second ObjectDataSource will still be served from the cached.</span></span> <span data-ttu-id="d232b-292">Le animo a crear páginas para exhibir esta funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="d232b-292">I encourage you to create pages to exhibit this functionality.</span></span> <span data-ttu-id="d232b-293">Cree una página que muestra un control GridView editable que extrae los datos de un ObjectDataSource que usa la memoria caché y está configurado para obtener datos de la `ProductsBLL` clase s. `GetProducts()` método.</span><span class="sxs-lookup"><span data-stu-id="d232b-293">Create a page that displays an editable GridView that pulls its data from an ObjectDataSource that uses caching and is configured to get data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="d232b-294">Agregue otro GridView editables y ObjectDataSource a esta página (o de otro), pero para este segundo ObjectDataSource que use la `GetProductsByCategoryID(categoryID)` método.</span><span class="sxs-lookup"><span data-stu-id="d232b-294">Add another editable GridView and ObjectDataSource to this page (or another one), but for this second ObjectDataSource have it use the `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="d232b-295">Desde el dos ObjectDataSources `SelectMethod` propiedades son diferentes, se ll cada tienen sus propios valores almacenados en caché.</span><span class="sxs-lookup"><span data-stu-id="d232b-295">Since the two ObjectDataSources `SelectMethod` properties differ, they ll each have their own cached values.</span></span> <span data-ttu-id="d232b-296">Si edita un producto en una cuadrícula, la próxima vez que enlazar los datos a la cuadrícula de otra (de paginación, ordenación etc.), se seguir atendiendo a los datos almacenados en caché anteriores y no reflejar el cambio que se realiza desde la cuadrícula de otra.</span><span class="sxs-lookup"><span data-stu-id="d232b-296">If you edit a product in one grid, the next time you bind the data back to the other grid (by paging, sorting, and so forth), it will still serve the old, cached data and not reflect the change that was made from the other grid.</span></span>

<span data-ttu-id="d232b-297">En resumen, utilice caducados basado en tiempo solo si está dispuesto a tienen el potencial de datos obsoletos y utilizar caducados más cortas para escenarios donde la actualización de los datos es importante.</span><span class="sxs-lookup"><span data-stu-id="d232b-297">In short, only use time-based expiries if you are willing to have the potential of stale data, and use shorter expiries for scenarios where the freshness of data is important.</span></span> <span data-ttu-id="d232b-298">Si los datos obsoletos no están aceptables, ya sea renunciar el almacenamiento en caché o usar las dependencias de caché SQL (suponiendo que es la base de datos que se van a almacenamiento en caché).</span><span class="sxs-lookup"><span data-stu-id="d232b-298">If stale data is not acceptable, either forgo caching or use SQL cache dependencies (assuming it is database data you re caching).</span></span> <span data-ttu-id="d232b-299">Analizaremos las dependencias de caché SQL en un tutorial posterior.</span><span class="sxs-lookup"><span data-stu-id="d232b-299">We'll explore SQL cache dependencies in a future tutorial.</span></span>

## <a name="summary"></a><span data-ttu-id="d232b-300">Resumen</span><span class="sxs-lookup"><span data-stu-id="d232b-300">Summary</span></span>

<span data-ttu-id="d232b-301">En este tutorial se examinan las capacidades de almacenamiento en caché de ObjectDataSource s integradas.</span><span class="sxs-lookup"><span data-stu-id="d232b-301">In this tutorial we examined the ObjectDataSource s built-in caching capabilities.</span></span> <span data-ttu-id="d232b-302">Estableciendo simplemente algunas propiedades, se puede indicar a ObjectDataSource para almacenar en caché los resultados devueltos de los especificados `SelectMethod` en la caché de datos ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d232b-302">By simply setting a few properties, we can instruct the ObjectDataSource to cache the results returned from the specified `SelectMethod` into the ASP.NET data cache.</span></span> <span data-ttu-id="d232b-303">El `CacheDuration` y `CacheExpirationPolicy` propiedades indican la duración se almacena en caché el elemento y si es absoluto o la expiración variable.</span><span class="sxs-lookup"><span data-stu-id="d232b-303">The `CacheDuration` and `CacheExpirationPolicy` properties indicate the duration the item is cached and whether it is an absolute or sliding expiration.</span></span> <span data-ttu-id="d232b-304">El `CacheKeyDependency` propiedad todas las entradas de caché de ObjectDataSource s asocia una dependencia de caché existente.</span><span class="sxs-lookup"><span data-stu-id="d232b-304">The `CacheKeyDependency` property associates all of the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="d232b-305">Esto puede utilizarse para expulsar las entradas de s ObjectDataSource desde la memoria caché antes de que se alcanza la expiración basada en el tiempo y se suele utilizar con las dependencias de caché SQL.</span><span class="sxs-lookup"><span data-stu-id="d232b-305">This can be used to evict the ObjectDataSource s entries from the cache before the time-based expiration is reached, and is typically used with SQL cache dependencies.</span></span>

<span data-ttu-id="d232b-306">Puesto que el ObjectDataSource simplemente almacena en caché sus valores a la caché de datos, se pudo replicar la funcionalidad integrada de ObjectDataSource s mediante programación.</span><span class="sxs-lookup"><span data-stu-id="d232b-306">Since the ObjectDataSource simply caches its values to the data cache, we could replicate the ObjectDataSource s built-in functionality programmatically.</span></span> <span data-ttu-id="d232b-307">Tiene sentido hacer esto en el nivel de presentación, ya que el ObjectDataSource ofrece esta funcionalidad de fábrica, pero podemos implementar capacidades de almacenamiento en caché en una capa independiente de la arquitectura.</span><span class="sxs-lookup"><span data-stu-id="d232b-307">It doesn t make sense to do this at the Presentation Layer, since the ObjectDataSource offers this functionality out of the box, but we can implement caching capabilities in a separate layer of the architecture.</span></span> <span data-ttu-id="d232b-308">Para ello, necesitamos repetir la misma lógica utilizada por el ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="d232b-308">To do so, we'll need to repeat the same logic used by the ObjectDataSource.</span></span> <span data-ttu-id="d232b-309">Exploraremos cómo trabajar mediante programación con la caché de datos desde dentro de la arquitectura en nuestro tutorial siguiente.</span><span class="sxs-lookup"><span data-stu-id="d232b-309">We'll explore how to programmatically work with the data cache from within the architecture in our next tutorial.</span></span>

<span data-ttu-id="d232b-310">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="d232b-310">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="d232b-311">Información adicional</span><span class="sxs-lookup"><span data-stu-id="d232b-311">Further Reading</span></span>

<span data-ttu-id="d232b-312">Para obtener más información sobre los temas tratados en este tutorial, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="d232b-312">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="d232b-313">Almacenamiento en caché de ASP.NET: Técnicas y prácticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="d232b-313">ASP.NET Caching: Techniques and Best Practices</span></span>](https://msdn.microsoft.com/library/aa478965.aspx)
- [<span data-ttu-id="d232b-314">Guía de arquitectura de almacenamiento en caché para aplicaciones de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="d232b-314">Caching Architecture Guide for .NET Framework Applications</span></span>](https://msdn.microsoft.com/library/ee817645.aspx)
- [<span data-ttu-id="d232b-315">Caché de salida en ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="d232b-315">Output Caching in ASP.NET 2.0</span></span>](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx)

## <a name="about-the-author"></a><span data-ttu-id="d232b-316">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="d232b-316">About the Author</span></span>

<span data-ttu-id="d232b-317">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros sobre ASP/ASP.NET y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha trabajado con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="d232b-317">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="d232b-318">Scott funciona como un consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="d232b-318">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="d232b-319">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="d232b-319">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="d232b-320">Puede ponerse en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) o a través de su blog, que se pueden encontrar en [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="d232b-320">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="d232b-321">Agradecimientos especiales a</span><span class="sxs-lookup"><span data-stu-id="d232b-321">Special Thanks To</span></span>

<span data-ttu-id="d232b-322">Esta serie de tutoriales se revisó por varios revisores útiles.</span><span class="sxs-lookup"><span data-stu-id="d232b-322">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="d232b-323">Revisor inicial para este tutorial era Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="d232b-323">Lead reviewer for this tutorial was Teresa Murphy.</span></span> <span data-ttu-id="d232b-324">¿Está interesado en revisar mi próximos artículos MSDN?</span><span class="sxs-lookup"><span data-stu-id="d232b-324">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="d232b-325">Si es así, me quitar una línea en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="d232b-325">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="d232b-326">[Anterior](using-sql-cache-dependencies-cs.md)
> [Siguiente](caching-data-in-the-architecture-vb.md)</span><span class="sxs-lookup"><span data-stu-id="d232b-326">[Previous](using-sql-cache-dependencies-cs.md)
[Next](caching-data-in-the-architecture-vb.md)</span></span>
