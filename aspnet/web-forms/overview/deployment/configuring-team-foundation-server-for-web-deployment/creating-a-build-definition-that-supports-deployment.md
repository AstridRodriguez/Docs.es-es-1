---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
title: "Crear una definición de compilación que admite la implementación | Documentos de Microsoft"
author: jrjlee
description: "Si desea realizar cualquier tipo de compilación de Team Foundation Server (TFS) 2010, debe crear una definición de compilación dentro de su proyecto de equipo. Des de este tema..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: fe47a018-f6d0-4979-80e7-5b1fa75a5865
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
msc.type: authoredcontent
ms.openlocfilehash: e5610753968328e5d0f1dba4cbbfed08480fd773
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/24/2018
---
<a name="creating-a-build-definition-that-supports-deployment"></a><span data-ttu-id="0923f-104">Crear una definición de compilación que admite la implementación</span><span class="sxs-lookup"><span data-stu-id="0923f-104">Creating a Build Definition That Supports Deployment</span></span>
====================
<span data-ttu-id="0923f-105">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="0923f-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="0923f-106">Descarga de PDF</span><span class="sxs-lookup"><span data-stu-id="0923f-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="0923f-107">Si desea realizar cualquier tipo de compilación de Team Foundation Server (TFS) 2010, debe crear una definición de compilación dentro de su proyecto de equipo.</span><span class="sxs-lookup"><span data-stu-id="0923f-107">If you want to perform any kind of build in Team Foundation Server (TFS) 2010, you need to create a build definition within your team project.</span></span> <span data-ttu-id="0923f-108">En este tema se describe cómo crear una nueva definición de compilación en TFS y cómo controlar la implementación de web como parte del proceso de compilación de Team Build.</span><span class="sxs-lookup"><span data-stu-id="0923f-108">This topic describes how to create a new build definition in TFS and how to control web deployment as part of the build process in Team Build.</span></span>


<span data-ttu-id="0923f-109">Este tema forma parte de una serie de tutoriales que se basa en los requisitos de implementación de empresa de una compañía ficticia denominada Fabrikam, Inc. Esta serie de tutoriales que utiliza una solución de ejemplo & #x 2014; la [póngase en contacto con el administrador solución](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014; para representar una aplicación web con un nivel de complejidad, incluso una aplicación de ASP.NET MVC 3, Windows realista Servicio de Communication Foundation (WCF) y un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="0923f-109">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="0923f-110">El método de implementación en el centro de estos tutoriales se basa en el enfoque de archivo de proyecto de división descrito en [comprender el archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), en que el proceso de compilación e implementación se controla mediante dos archivos de proyecto & #x 2014; o ne que contiene las instrucciones de compilación que se aplican a cada entorno de destino y la otra contiene configuración específica del entorno de compilación e implementación.</span><span class="sxs-lookup"><span data-stu-id="0923f-110">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build and deployment process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="0923f-111">En tiempo de compilación, se combina el archivo de proyecto específicas del entorno en el archivo de proyecto independiente del entorno para formar un conjunto completo de las instrucciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="0923f-111">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="0923f-112">Información general sobre tareas</span><span class="sxs-lookup"><span data-stu-id="0923f-112">Task Overview</span></span>

<span data-ttu-id="0923f-113">Una definición de compilación es el mecanismo que controla cómo y cuándo se producen compilaciones de proyectos de equipo en TFS.</span><span class="sxs-lookup"><span data-stu-id="0923f-113">A build definition is the mechanism that controls how and when builds occur for team projects in TFS.</span></span> <span data-ttu-id="0923f-114">Cada definición de compilación especifica:</span><span class="sxs-lookup"><span data-stu-id="0923f-114">Each build definition specifies:</span></span>

- <span data-ttu-id="0923f-115">Las acciones que desee crear, como archivos de solución de Visual Studio o archivos de proyecto personalizados de Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="0923f-115">The things you want to build, like Visual Studio solution files or custom Microsoft Build Engine (MSBuild) project files.</span></span>
- <span data-ttu-id="0923f-116">Los criterios que determinan cuándo se debe realizar una compilación coloca, como desencadenadores manuales, la integración continua (CI), o entradas validadas.</span><span class="sxs-lookup"><span data-stu-id="0923f-116">The criteria that determine when a build should take place, like manual triggers, continuous integration (CI), or gated check-ins.</span></span>
- <span data-ttu-id="0923f-117">La ubicación a la que Team Build debería enviar resultados de la compilación, incluidos los artefactos de implementación como paquetes de web y las secuencias de comandos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="0923f-117">The location to which Team Build should send build outputs, including deployment artifacts like web packages and database scripts.</span></span>
- <span data-ttu-id="0923f-118">La cantidad de tiempo que debe conservarse cada compilación.</span><span class="sxs-lookup"><span data-stu-id="0923f-118">The amount of time that each build should be retained.</span></span>
- <span data-ttu-id="0923f-119">Varios otros parámetros del proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="0923f-119">Various other parameters of the build process.</span></span>

> [!NOTE]
> <span data-ttu-id="0923f-120">Para obtener más información sobre las definiciones de compilación, consulte [definir el proceso de compilación](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="0923f-120">For more information on build definitions, see [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span>


<span data-ttu-id="0923f-121">En este tema le mostrará cómo crear una definición de compilación que utiliza el elemento de configuración, por lo que una compilación se desencadena cuando un desarrollador protege en contenido nuevo.</span><span class="sxs-lookup"><span data-stu-id="0923f-121">This topic will show you how to create a build definition that uses CI, so that a build is triggered when a developer checks in new content.</span></span> <span data-ttu-id="0923f-122">Si la compilación se realiza correctamente, el servicio de compilación ejecuta un archivo de proyecto personalizadas para implementar la solución en un entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="0923f-122">If the build succeeds, the build service runs a custom project file to deploy the solution to a test environment.</span></span>

<span data-ttu-id="0923f-123">Cuando se activa una compilación, estas acciones deben ocurrir:</span><span class="sxs-lookup"><span data-stu-id="0923f-123">When you trigger a build, these actions need to happen:</span></span>

- <span data-ttu-id="0923f-124">En primer lugar, Team Build debe compilar la solución.</span><span class="sxs-lookup"><span data-stu-id="0923f-124">First, Team Build should build the solution.</span></span> <span data-ttu-id="0923f-125">Como parte de este proceso, Team Build invocará la canalización de publicación de Web (WPP) para generar paquetes de implementación web para cada uno de los proyectos de aplicación web en la solución.</span><span class="sxs-lookup"><span data-stu-id="0923f-125">As part of this process, Team Build will invoke the Web Publishing Pipeline (WPP) to generate web deployment packages for each of the web application projects in the solution.</span></span> <span data-ttu-id="0923f-126">Compilación de equipo también ejecutará las pruebas de unidad asociadas a la solución.</span><span class="sxs-lookup"><span data-stu-id="0923f-126">Team Build will also run any unit tests associated with the solution.</span></span>
- <span data-ttu-id="0923f-127">Si se produce un error en la compilación de soluciones, Team Build no realizará ninguna otra acción.</span><span class="sxs-lookup"><span data-stu-id="0923f-127">If the solution build fails, Team Build should take no further action.</span></span> <span data-ttu-id="0923f-128">Errores de las pruebas unitarias deben tratarse como un error de compilación.</span><span class="sxs-lookup"><span data-stu-id="0923f-128">Unit test failures should be treated as a build failure.</span></span>
- <span data-ttu-id="0923f-129">Si se realiza correctamente la compilación de soluciones, Team Build debe ejecutar el archivo de proyecto personalizadas que controla la implementación de la solución.</span><span class="sxs-lookup"><span data-stu-id="0923f-129">If the solution build succeeds, Team Build should run the custom project file that controls the deployment of the solution.</span></span> <span data-ttu-id="0923f-130">Como parte de este proceso, Team Build invocará la herramienta de implementación Web de Internet Information Services (IIS) (Web Deploy) para instalar las aplicaciones web empaquetada en los servidores web de destino y va a invocar la utilidad VSDBCMD.exe para ejecutar la creación de la base de datos secuencias de comandos en los servidores de base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="0923f-130">As part of this process, Team Build will invoke the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to install the packaged web applications on the destination web servers, and it will invoke the VSDBCMD.exe utility to run database creation scripts on the destination database servers.</span></span>

<span data-ttu-id="0923f-131">Esto ilustra el proceso:</span><span class="sxs-lookup"><span data-stu-id="0923f-131">This illustrates the process:</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image1.png)

<span data-ttu-id="0923f-132">El [póngase en contacto con el Administrador de](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) solución de ejemplo incluye un archivo de proyecto de MSBuild personalizado, *Publish.proj*, que puede ejecutar desde MSBuild o Team Build.</span><span class="sxs-lookup"><span data-stu-id="0923f-132">The [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution includes a custom MSBuild project file, *Publish.proj*, that you can run from MSBuild or Team Build.</span></span> <span data-ttu-id="0923f-133">Como se describe en [descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md), este archivo de proyecto define la lógica que implementa los paquetes de web y las bases de datos en un entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="0923f-133">As described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), this project file defines the logic that deploys your web packages and databases to a target environment.</span></span> <span data-ttu-id="0923f-134">El archivo incluye lógica que omite el edificio y el proceso de empaquetado, si se está ejecutando en Team Build, dejando las tareas de implementación para que se ejecute.</span><span class="sxs-lookup"><span data-stu-id="0923f-134">The file includes logic that omits the building and packaging process if it's running in Team Build, leaving just the deployment tasks to run.</span></span> <span data-ttu-id="0923f-135">Esto se debe al automatizar la implementación de esta manera, normalmente querrá asegurarse de que la solución se compila correctamente y pasa cualquier prueba unitaria antes de comenzar el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="0923f-135">This is because when you automate deployment in this way, you'll typically want to ensure that the solution builds successfully and passes any unit tests before the deployment process commences.</span></span>

<span data-ttu-id="0923f-136">La siguiente sección explica cómo implementar este proceso mediante la creación de una nueva definición de compilación.</span><span class="sxs-lookup"><span data-stu-id="0923f-136">The next section explains how to implement this process by creating a new build definition.</span></span>

> [!NOTE]
> <span data-ttu-id="0923f-137">Este procedimiento & #x 2014; en el que se genera un único proceso automatizado, pruebas e implementa una solución & #x 2014; es probable que sea más adecuado para la implementación en entornos de prueba.</span><span class="sxs-lookup"><span data-stu-id="0923f-137">This procedure&#x2014;in which a single automated process builds, tests, and deploys a solution&#x2014;is likely to be most suited to deployment to test environments.</span></span> <span data-ttu-id="0923f-138">Para entornos de ensayo y producción está mucho más probable que desee distribuir el contenido desde una compilación anterior que ya haya verificado y validado en un entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="0923f-138">For staging and production environments you're a lot more likely to want to deploy content from a previous build that you've already verified and validated in a test environment.</span></span> <span data-ttu-id="0923f-139">Este enfoque se describe en el tema siguiente, [implementar una compilación concreta](deploying-a-specific-build.md).</span><span class="sxs-lookup"><span data-stu-id="0923f-139">This approach is described in the next topic, [Deploying a Specific Build](deploying-a-specific-build.md).</span></span>


### <a name="who-performs-this-procedure"></a><span data-ttu-id="0923f-140">¿Que lleva a cabo este procedimiento?</span><span class="sxs-lookup"><span data-stu-id="0923f-140">Who Performs This Procedure?</span></span>

<span data-ttu-id="0923f-141">Normalmente, un administrador de TFS lleva a cabo este procedimiento.</span><span class="sxs-lookup"><span data-stu-id="0923f-141">Typically, a TFS administrator performs this procedure.</span></span> <span data-ttu-id="0923f-142">En algunos casos, un coordinador del equipo de desarrolladores puede asumir la responsabilidad de la colección de proyectos de equipo en TFS.</span><span class="sxs-lookup"><span data-stu-id="0923f-142">In some cases, a developer team leader may take responsibility for the team project collection in TFS.</span></span> <span data-ttu-id="0923f-143">Para crear una nueva definición de compilación, debe ser un miembro de la **Project Collection Administrators compilar** grupo de la colección de proyectos de equipo que contiene la solución.</span><span class="sxs-lookup"><span data-stu-id="0923f-143">In order to create a new build definition, you need to be a member of the **Project Collection Build Administrators** group for the team project collection that contains your solution.</span></span>

## <a name="create-a-build-definition-for-ci-and-deployment"></a><span data-ttu-id="0923f-144">Crear una definición de compilación para los elementos de configuración e implementación</span><span class="sxs-lookup"><span data-stu-id="0923f-144">Create a Build Definition for CI and Deployment</span></span>

<span data-ttu-id="0923f-145">El procedimiento siguiente describe cómo crear una definición de compilación que desencadena el elemento de configuración.</span><span class="sxs-lookup"><span data-stu-id="0923f-145">The next procedure describes how to create a build definition that CI triggers.</span></span> <span data-ttu-id="0923f-146">Si la compilación se realiza correctamente, la solución se implementa con la lógica en un archivo de proyecto de MSBuild personalizado.</span><span class="sxs-lookup"><span data-stu-id="0923f-146">If the build succeeds, the solution is deployed using the logic in a custom MSBuild project file.</span></span>

<span data-ttu-id="0923f-147">**Para crear una definición de compilación para los elementos de configuración e implementación**</span><span class="sxs-lookup"><span data-stu-id="0923f-147">**To create a build definition for CI and deployment**</span></span>

1. <span data-ttu-id="0923f-148">En Visual Studio 2010, en la **Team Explorer** ventana, expanda el nodo del proyecto de equipo, haga clic en **compilaciones**y, a continuación, haga clic en **nueva definición de compilación**.</span><span class="sxs-lookup"><span data-stu-id="0923f-148">In Visual Studio 2010, in the **Team Explorer** window, expand your team project node, right-click **Builds**, and then click **New Build Definition**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image2.png)
2. <span data-ttu-id="0923f-149">En el **General** ficha, asigne un nombre a la definición de compilación (por ejemplo, **DeployToTest**) y una descripción opcional.</span><span class="sxs-lookup"><span data-stu-id="0923f-149">On the **General** tab, give the build definition a name (for example, **DeployToTest**) and an optional description.</span></span>
3. <span data-ttu-id="0923f-150">En el **desencadenador** ficha, seleccione los criterios en el que desea desencadenar una compilación nueva.</span><span class="sxs-lookup"><span data-stu-id="0923f-150">On the **Trigger** tab, select the criteria on which you want to trigger a new build.</span></span> <span data-ttu-id="0923f-151">Por ejemplo, si desea compilar la solución e implementarla en el entorno de prueba, cada vez que un desarrollador protege en el nuevo código, seleccione **integración continua**.</span><span class="sxs-lookup"><span data-stu-id="0923f-151">For example, if you want to build the solution and deploy to the test environment every time a developer checks in new code, select **Continuous Integration**.</span></span>
4. <span data-ttu-id="0923f-152">En el **valores predeterminados de compilación** ficha la **resultados en la siguiente carpeta de destino de compilación copia** , escriba la ruta de acceso de convención de nomenclatura universal (UNC, Universal Naming Convention) de la carpeta de entrega (por ejemplo,  **\\TFSBUILD\Drops**).</span><span class="sxs-lookup"><span data-stu-id="0923f-152">On the **Build Defaults** tab, in the **Copy build output to the following drop folder** box, type the Universal Naming Convention (UNC) path of your drop folder (for example, **\\TFSBUILD\Drops**).</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image3.png)

    > [!NOTE]
    > <span data-ttu-id="0923f-153">Esta ubicación de destino almacena varias compilaciones, dependiendo de la directiva de retención configurada.</span><span class="sxs-lookup"><span data-stu-id="0923f-153">This drop location stores several builds, depending on the retention policy you configure.</span></span> <span data-ttu-id="0923f-154">Si desea publicar artefactos de implementación desde una compilación concreta en un entorno de ensayo o de producción, esto es donde podrá encontrarlos.</span><span class="sxs-lookup"><span data-stu-id="0923f-154">When you want to publish deployment artifacts from a specific build to a staging or production environment, this is where you'll find them.</span></span>
5. <span data-ttu-id="0923f-155">En el **proceso** ficha la **archivo del proceso de compilación** lista desplegable, deje **DefaultTemplate.xaml** seleccionado.</span><span class="sxs-lookup"><span data-stu-id="0923f-155">On the **Process** tab, in the **Build process file** dropdown list, leave **DefaultTemplate.xaml** selected.</span></span> <span data-ttu-id="0923f-156">Esta es una de las plantillas de proceso de compilación predeterminadas que se agregan a todos los nuevos proyectos de equipo.</span><span class="sxs-lookup"><span data-stu-id="0923f-156">This is one of the default build process templates that get added to all new team projects.</span></span>
6. <span data-ttu-id="0923f-157">En el **parámetros del proceso de compilación** , haga clic en el **elementos para compilar** fila y, a continuación, haga clic en el **puntos suspensivos** botón.</span><span class="sxs-lookup"><span data-stu-id="0923f-157">In the **Build process parameters** table, click in the **Items to Build** row, and then click the **ellipsis** button.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image4.png)
7. <span data-ttu-id="0923f-158">En el **elementos para compilar** cuadro de diálogo, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="0923f-158">In the **Items to Build** dialog box, click **Add**.</span></span>
8. <span data-ttu-id="0923f-159">Vaya a la ubicación del archivo de solución y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="0923f-159">Browse to the location of your solution file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image5.png)
9. <span data-ttu-id="0923f-160">En el **elementos para compilar** cuadro de diálogo, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="0923f-160">In the **Items to Build** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="0923f-161">En el **elementos de tipo** lista desplegable, seleccione **archivos de proyecto de MSBuild**.</span><span class="sxs-lookup"><span data-stu-id="0923f-161">In the **Items of type** dropdown list, select **MSBuild Project files**.</span></span>
11. <span data-ttu-id="0923f-162">Vaya a la ubicación del archivo de proyecto personalizado con el que controlan el proceso de implementación, seleccione el archivo y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="0923f-162">Browse to the location of the custom project file with which you control the deployment process, select the file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image6.png)
12. <span data-ttu-id="0923f-163">El **elementos para compilar** cuadro de diálogo debe mostrar ahora dos elementos.</span><span class="sxs-lookup"><span data-stu-id="0923f-163">The **Items to Build** dialog box should now show two items.</span></span> <span data-ttu-id="0923f-164">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="0923f-164">Click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image7.png)
13. <span data-ttu-id="0923f-165">En el **proceso** ficha la **parámetros del proceso de compilación** tabla, expanda la **avanzadas** sección.</span><span class="sxs-lookup"><span data-stu-id="0923f-165">On the **Process** tab, in the **Build process parameters** table, expand the **Advanced** section.</span></span>
14. <span data-ttu-id="0923f-166">En el **argumentos de MSBuild** la fila, agregue los argumentos de línea de comandos de MSBuild que *cualquier* de los elementos para compilar requiere.</span><span class="sxs-lookup"><span data-stu-id="0923f-166">In the **MSBuild Arguments** row, add any MSBuild command-line arguments that *either* of your items to build requires.</span></span> <span data-ttu-id="0923f-167">En el escenario de solución póngase en contacto con el administrador, se requieren estos argumentos:</span><span class="sxs-lookup"><span data-stu-id="0923f-167">In the Contact Manager solution scenario, these arguments are required:</span></span>

    [!code-console[Main](creating-a-build-definition-that-supports-deployment/samples/sample1.cmd)]

    ![](creating-a-build-definition-that-supports-deployment/_static/image8.png)
15. <span data-ttu-id="0923f-168">En este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="0923f-168">In this example:</span></span>

    1. <span data-ttu-id="0923f-169">El **DeployOnBuild = true** y **DeployTarget = paquete** argumentos son necesarios cuando se compila la solución póngase en contacto con el administrador.</span><span class="sxs-lookup"><span data-stu-id="0923f-169">The **DeployOnBuild=true** and **DeployTarget=package** arguments are required when you build the Contact Manager solution.</span></span> <span data-ttu-id="0923f-170">Esto indica a MSBuild que cree web paquetes de implementación después de compilar cada proyecto de aplicación web, como se describe en [edificio y proyectos de aplicación Web de empaquetado](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="0923f-170">This instructs MSBuild to create web deployment packages after building each web application project, as described in [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span>
    2. <span data-ttu-id="0923f-171">El **TargetEnvPropsFile** argumento es necesario cuando se compila el *Publish.proj* archivo.</span><span class="sxs-lookup"><span data-stu-id="0923f-171">The **TargetEnvPropsFile** argument is required when you build the *Publish.proj* file.</span></span> <span data-ttu-id="0923f-172">Esta propiedad indica la ubicación del archivo de configuración específicos del entorno, tal y como se describe en [descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="0923f-172">This property indicates the location of the environment-specific configuration file, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>
16. <span data-ttu-id="0923f-173">En el **directiva de retención** pestaña, configure el número de compilaciones de cada tipo que desea conservar según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="0923f-173">On the **Retention Policy** tab, configure how many builds of each type you want to retain as required.</span></span>
17. <span data-ttu-id="0923f-174">Haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="0923f-174">Click **Save**.</span></span>

## <a name="queue-a-build"></a><span data-ttu-id="0923f-175">Poner en cola una compilación</span><span class="sxs-lookup"><span data-stu-id="0923f-175">Queue a Build</span></span>

<span data-ttu-id="0923f-176">En este momento, ha creado al menos una nueva definición de compilación.</span><span class="sxs-lookup"><span data-stu-id="0923f-176">At this point, you have created at least one new build definition.</span></span> <span data-ttu-id="0923f-177">Ahora se ejecutará el proceso de compilación que define según los desencadenadores que especificó en la definición de compilación.</span><span class="sxs-lookup"><span data-stu-id="0923f-177">The build process you defined will now run according to the triggers you specified in the build definition.</span></span>

<span data-ttu-id="0923f-178">Si ha configurado la definición de compilación para usar el elemento de configuración, puede probar la definición de compilación de dos maneras:</span><span class="sxs-lookup"><span data-stu-id="0923f-178">If you've configured your build definition to use CI, you can test your build definition in two ways:</span></span>

- <span data-ttu-id="0923f-179">Compruebe en algún contenido al proyecto de equipo para desencadenar una compilación automática.</span><span class="sxs-lookup"><span data-stu-id="0923f-179">Check in some content to the team project to trigger an automatic build.</span></span>
- <span data-ttu-id="0923f-180">Poner en cola una compilación manualmente.</span><span class="sxs-lookup"><span data-stu-id="0923f-180">Queue a build manually.</span></span>

<span data-ttu-id="0923f-181">**Para poner en cola una compilación manualmente**</span><span class="sxs-lookup"><span data-stu-id="0923f-181">**To queue a build manually**</span></span>

1. <span data-ttu-id="0923f-182">En el **Team Explorer** ventana, haga clic en la definición de compilación y, a continuación, haga clic en **poner nueva compilación en cola**.</span><span class="sxs-lookup"><span data-stu-id="0923f-182">In the **Team Explorer** window, right-click the build definition, and then click **Queue New Build**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image9.png)
2. <span data-ttu-id="0923f-183">En el **poner en cola compilación** cuadro de diálogo, revise las propiedades de compilación y, a continuación, haga clic en **cola**.</span><span class="sxs-lookup"><span data-stu-id="0923f-183">In the **Queue Build** dialog box, review the build properties, and then click **Queue**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image10.png)

<span data-ttu-id="0923f-184">Para revisar el progreso y el resultado de una compilación & #x 2014; independientemente de si se activó de forma manual o automática & #x 2014; haga doble clic en la definición de compilación en el **Team Explorer** ventana.</span><span class="sxs-lookup"><span data-stu-id="0923f-184">To review the progress and the outcome of a build&#x2014;regardless of whether it was triggered manually or automatically&#x2014;double-click the build definition in the **Team Explorer** window.</span></span> <span data-ttu-id="0923f-185">Se abrirá una **Explorador de compilaciones** ficha.</span><span class="sxs-lookup"><span data-stu-id="0923f-185">This will open a **Build Explorer** tab.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image11.png)

<span data-ttu-id="0923f-186">Desde aquí, puede solucionar los errores en las generaciones.</span><span class="sxs-lookup"><span data-stu-id="0923f-186">From here, you can troubleshoot failed builds.</span></span> <span data-ttu-id="0923f-187">Si hace doble clic en una generación individual, puede ver información de resumen y haga clic en a través de los archivos de registro detallado.</span><span class="sxs-lookup"><span data-stu-id="0923f-187">If you double-click an individual build, you can view summary information and click through to detailed log files.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image12.png)

<span data-ttu-id="0923f-188">Puede utilizar esta información para solucionar problemas de errores en las generaciones y solucionar los problemas antes de intentar otra compilación.</span><span class="sxs-lookup"><span data-stu-id="0923f-188">You can use this information to troubleshoot failed builds and address any problems before you attempt another build.</span></span>

> [!NOTE]
> <span data-ttu-id="0923f-189">Compilaciones que se ejecutan la lógica de implementación son propensos a errores hasta que se hayan concedido al servidor de compilación de los permisos necesarios en el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="0923f-189">Builds that execute deployment logic are likely to fail until you have granted the build server any permissions required in the destination environment.</span></span> <span data-ttu-id="0923f-190">Para obtener más información, consulte [configurar permisos para el equipo de compilación implementación](configuring-permissions-for-team-build-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="0923f-190">For more information, see [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md).</span></span>


## <a name="monitor-the-build-process"></a><span data-ttu-id="0923f-191">Supervisar el proceso de compilación</span><span class="sxs-lookup"><span data-stu-id="0923f-191">Monitor the Build Process</span></span>

<span data-ttu-id="0923f-192">Proporciona una amplia gama de funcionalidad para ayudarle a supervisar el proceso de compilación en TFS.</span><span class="sxs-lookup"><span data-stu-id="0923f-192">TFS provides a broad range of functionality to help you monitor the build process.</span></span> <span data-ttu-id="0923f-193">Por ejemplo, TFS puede enviar un correo electrónico o mostrar las alertas en el área de notificación de la barra de tareas cuando se complete una compilación.</span><span class="sxs-lookup"><span data-stu-id="0923f-193">For example, TFS can send you an email or display alerts in your taskbar notification area when a build has completed.</span></span> <span data-ttu-id="0923f-194">Para obtener más información, consulte [ejecutar y supervisar las compilaciones](https://msdn.microsoft.com/library/ms181721.aspx).</span><span class="sxs-lookup"><span data-stu-id="0923f-194">For more information, see [Run and Monitor Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="0923f-195">Conclusión</span><span class="sxs-lookup"><span data-stu-id="0923f-195">Conclusion</span></span>

<span data-ttu-id="0923f-196">En este tema se describe cómo crear una definición de compilación en TFS.</span><span class="sxs-lookup"><span data-stu-id="0923f-196">This topic described how to create a build definition in TFS.</span></span> <span data-ttu-id="0923f-197">La definición de compilación está configurada para el elemento de configuración, por lo que el proceso de compilación se ejecute siempre que un desarrollador protege en el contenido al proyecto de equipo.</span><span class="sxs-lookup"><span data-stu-id="0923f-197">The build definition is configured for CI, so the build process runs whenever a developer checks in content to the team project.</span></span> <span data-ttu-id="0923f-198">La definición de compilación ejecuta un archivo de proyecto de MSBuild personalizado para implementar paquetes de web y las secuencias de comandos de base de datos en un entorno de servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="0923f-198">The build definition executes a custom MSBuild project file to deploy web packages and database scripts to a target server environment.</span></span>

<span data-ttu-id="0923f-199">En orden para una implementación automatizada se realice correctamente como parte de un proceso de compilación, deberá conceder los permisos adecuados a la cuenta de servicio de compilación en los servidores web de destino y el servidor de base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="0923f-199">In order for an automated deployment to succeed as part of a build process, you'll need to grant appropriate permissions to the build service account on the target web servers and the target database server.</span></span> <span data-ttu-id="0923f-200">En este tutorial, el tema final [configurar permisos para el equipo de compilación implementación](configuring-permissions-for-team-build-deployment.md), se describe cómo identificar y configurar los permisos necesarios para la implementación automatizada de un servidor de Team Build.</span><span class="sxs-lookup"><span data-stu-id="0923f-200">The final topic in this tutorial, [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md), describes how to identify and configure the permissions required for automated deployment from a Team Build server.</span></span>

## <a name="further-reading"></a><span data-ttu-id="0923f-201">Información adicional</span><span class="sxs-lookup"><span data-stu-id="0923f-201">Further Reading</span></span>

<span data-ttu-id="0923f-202">Para obtener más información acerca de cómo crear definiciones de compilación, consulte [crear una definición de compilación básica](https://msdn.microsoft.com/library/ms181716.aspx) y [definir el proceso de compilación](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="0923f-202">For more information on creating build definitions, see [Create a Basic Build Definition](https://msdn.microsoft.com/library/ms181716.aspx) and [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span> <span data-ttu-id="0923f-203">Para obtener más instrucciones en las compilaciones de puesta en cola, vea [poner en cola una compilación](https://msdn.microsoft.com/library/ms181722.aspx).</span><span class="sxs-lookup"><span data-stu-id="0923f-203">For more guidance on queuing builds, see [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="0923f-204">[Anterior](configuring-a-tfs-build-server-for-web-deployment.md)
[Siguiente](deploying-a-specific-build.md)</span><span class="sxs-lookup"><span data-stu-id="0923f-204">[Previous](configuring-a-tfs-build-server-for-web-deployment.md)
[Next](deploying-a-specific-build.md)</span></span>
