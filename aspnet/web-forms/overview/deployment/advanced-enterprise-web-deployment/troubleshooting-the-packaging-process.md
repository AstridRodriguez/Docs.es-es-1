---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
title: Solucionar problemas del proceso de empaquetado | Documentos de Microsoft
author: jrjlee
description: "Este tema describe cómo puede recopilar información detallada sobre el proceso de empaquetado mediante la propiedad EnablePackageProcessLoggingAndAssert en el M..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 794bd819-00fc-47e2-876d-fc5d15e0de1c
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
msc.type: authoredcontent
ms.openlocfilehash: 977077357eb5774193a40c55fabee9733dd5ab2f
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/10/2017
---
<a name="troubleshooting-the-packaging-process"></a><span data-ttu-id="d2f53-103">Solucionar problemas del proceso de empaquetado</span><span class="sxs-lookup"><span data-stu-id="d2f53-103">Troubleshooting the Packaging Process</span></span>
====================
<span data-ttu-id="d2f53-104">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="d2f53-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="d2f53-105">Descarga de PDF</span><span class="sxs-lookup"><span data-stu-id="d2f53-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="d2f53-106">Este tema describe cómo recopilar información detallada sobre el proceso de empaquetado utilizando la **EnablePackageProcessLoggingAndAssert** propiedad en Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="d2f53-106">This topic describes how you can collect detailed information about the packaging process by using the **EnablePackageProcessLoggingAndAssert** property in the Microsoft Build Engine (MSBuild).</span></span>
> 
> <span data-ttu-id="d2f53-107">Al establecer el **EnablePackageProcessLoggingAndAssert** propiedad **true**, le de MSBuild:</span><span class="sxs-lookup"><span data-stu-id="d2f53-107">When you set the **EnablePackageProcessLoggingAndAssert** property to **true**, MSBuild will:</span></span>
> 
> - <span data-ttu-id="d2f53-108">Agregar información adicional sobre el proceso de empaquetado en los registros de compilación.</span><span class="sxs-lookup"><span data-stu-id="d2f53-108">Add additional information about the packaging process to the build logs.</span></span>
> - <span data-ttu-id="d2f53-109">Registrar errores en determinadas condiciones, por ejemplo, si se encuentran archivos duplicados en la lista de empaquetado.</span><span class="sxs-lookup"><span data-stu-id="d2f53-109">Log errors under certain conditions, for example, if duplicate files are found in the packaging list.</span></span>
> - <span data-ttu-id="d2f53-110">Cree un directorio de registro en el *ProjectName*\_carpeta de paquete y usarlo para registrar información sobre los archivos que se va a empaquetar.</span><span class="sxs-lookup"><span data-stu-id="d2f53-110">Create a Log directory in the *ProjectName*\_Package folder and use it to record information about the files you're packaging.</span></span>
> 
> <span data-ttu-id="d2f53-111">Si se producen errores en el proceso de empaquetado, o los paquetes de implementación web no contienen los archivos que se esperan, puede utilizar esta información para resolver problemas del proceso y el punto de anclaje donde va incorrecto todo.</span><span class="sxs-lookup"><span data-stu-id="d2f53-111">If the packaging process is failing, or your web deployment packages don't contain the files that you expect, you can use this information to troubleshoot the process and pinpoint where things are going wrong.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="d2f53-112">El **EnablePackageProcessLoggingAndAssert** propiedad solo funciona si compila el proyecto con el **depurar** configuración.</span><span class="sxs-lookup"><span data-stu-id="d2f53-112">The **EnablePackageProcessLoggingAndAssert** property only works if you build your project using the **Debug** configuration.</span></span> <span data-ttu-id="d2f53-113">La propiedad se omite en otras configuraciones.</span><span class="sxs-lookup"><span data-stu-id="d2f53-113">The property is ignored in other configurations.</span></span>


<span data-ttu-id="d2f53-114">Este tema forma parte de una serie de tutoriales que se basa en los requisitos de implementación de empresa de una compañía ficticia denominada Fabrikam, Inc. Esta serie de tutoriales que utiliza una solución de ejemplo & #x 2014; la [póngase en contacto con el administrador solución](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014; para representar una aplicación web con un nivel de complejidad, incluso una aplicación de ASP.NET MVC 3, Windows realista Servicio de Communication Foundation (WCF) y un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="d2f53-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="d2f53-115">El método de implementación en el centro de estos tutoriales se basa en el enfoque de archivo de proyecto de división descrito en [comprender el archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), en que el proceso de compilación se controla mediante dos proyectos, archivos de & #x 2014; uno que contiene instrucciones que se aplican a cada entorno de destino y que contiene la configuración de compilación e implementación específica del entorno de compilación.</span><span class="sxs-lookup"><span data-stu-id="d2f53-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="d2f53-116">En tiempo de compilación, se combina el archivo de proyecto específicas del entorno en el archivo de proyecto independiente del entorno para formar un conjunto completo de las instrucciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="d2f53-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="understanding-the-enablepackageprocessloggingandassert-property"></a><span data-ttu-id="d2f53-117">Descripción de la propiedad EnablePackageProcessLoggingAndAssert</span><span class="sxs-lookup"><span data-stu-id="d2f53-117">Understanding the EnablePackageProcessLoggingAndAssert Property</span></span>

<span data-ttu-id="d2f53-118">[Compilar y empaquetar proyectos de aplicación Web](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) se describe cómo la canalización de publicación de Web (WPP) proporciona un conjunto de destinos de MSBuild que amplían la funcionalidad de MSBuild y habilitarlo para integrarse con la Web de Internet Information Services (IIS) Herramienta de implementación (Web Deploy).</span><span class="sxs-lookup"><span data-stu-id="d2f53-118">[Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) described how the Web Publishing Pipeline (WPP) provides a set of MSBuild targets that extend the functionality of MSBuild and enable it to integrate with the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span> <span data-ttu-id="d2f53-119">Si empaqueta un proyecto de aplicación web, que se están invocando destinos WPP.</span><span class="sxs-lookup"><span data-stu-id="d2f53-119">When you package a web application project, you're invoking WPP targets.</span></span>

<span data-ttu-id="d2f53-120">Muchos de estos destinos WPP incluyen lógica condicional que registra la información adicional cuando la **EnablePackageProcessLoggingAndAssert** propiedad está establecida en **true**.</span><span class="sxs-lookup"><span data-stu-id="d2f53-120">Lots of these WPP targets include conditional logic that logs additional information when the **EnablePackageProcessLoggingAndAssert** property is set to **true**.</span></span> <span data-ttu-id="d2f53-121">Por ejemplo, si examina la **paquete** destino, puede ver que crea un directorio de registro adicionales y se escribe una lista de archivos en un archivo de texto si **EnablePackageProcessLoggingAndAssert** es igual a **true**.</span><span class="sxs-lookup"><span data-stu-id="d2f53-121">For example, if you review the **Package** target, you can see that it creates an additional log directory and writes a list of files to a text file if **EnablePackageProcessLoggingAndAssert** is equal to **true**.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample1.xml)]


> [!NOTE]
> <span data-ttu-id="d2f53-122">Los destinos WPP se definen en el *Microsoft.Web.Publishing.targets* archivo en la carpeta de %\MSBuild\Microsoft\VisualStudio\v10.0\Web % PROGRAMFILES (x 86).</span><span class="sxs-lookup"><span data-stu-id="d2f53-122">The WPP targets are defined in the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span> <span data-ttu-id="d2f53-123">Puede abrir este archivo y revisar los destinos en Visual Studio 2010 o en cualquier editor de XML.</span><span class="sxs-lookup"><span data-stu-id="d2f53-123">You can open this file and review the targets in Visual Studio 2010 or any XML editor.</span></span> <span data-ttu-id="d2f53-124">Procure no para modificar el contenido del archivo.</span><span class="sxs-lookup"><span data-stu-id="d2f53-124">Take care not to modify the contents of the file.</span></span>


## <a name="enabling-the-additional-logging"></a><span data-ttu-id="d2f53-125">Habilitar el inicio de sesión adicional</span><span class="sxs-lookup"><span data-stu-id="d2f53-125">Enabling the Additional Logging</span></span>

<span data-ttu-id="d2f53-126">Puede proporcionar un valor para el **EnablePackageProcessLoggingAndAssert** propiedad de varias maneras, dependiendo de cómo compilar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="d2f53-126">You can supply a value for the **EnablePackageProcessLoggingAndAssert** property in various ways, depending on how you build your project.</span></span>

<span data-ttu-id="d2f53-127">Si compila el proyecto desde la línea de comandos, puede proporcionar un valor para el **EnablePackageProcessLoggingAndAssert** propiedad como un argumento de línea de comandos:</span><span class="sxs-lookup"><span data-stu-id="d2f53-127">If you build your project from the command line, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property as a command-line argument:</span></span>


[!code-console[Main](troubleshooting-the-packaging-process/samples/sample2.cmd)]


<span data-ttu-id="d2f53-128">Si usa un archivo de proyecto personalizado para generar los proyectos, puede incluir la **EnablePackageProcessLoggingAndAssert** valor en el **propiedades** atributo de la **MSBuild**tareas:</span><span class="sxs-lookup"><span data-stu-id="d2f53-128">If you're using a custom project file to build your projects, you can include the **EnablePackageProcessLoggingAndAssert** value in the **Properties** attribute of the **MSBuild** task:</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample3.xml)]


<span data-ttu-id="d2f53-129">Si usa una definición de compilación de Team Foundation Server (TFS) para compilar los proyectos, puede proporcionar un valor para el **EnablePackageProcessLoggingAndAssert** propiedad en el **argumentos de MSBuild** fila:![](troubleshooting-the-packaging-process/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d2f53-129">If you're using a Team Foundation Server (TFS) build definition to build your projects, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property in the **MSBuild Arguments** row:![](troubleshooting-the-packaging-process/_static/image1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="d2f53-130">Para obtener más información sobre cómo crear y configurar las definiciones de compilación, consulte [crear una compilación que admite la implementación de la definición](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="d2f53-130">For more information on creating and configuring build definitions, see [Creating a Build Definition That Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>


<span data-ttu-id="d2f53-131">Como alternativa, si desea incluir el paquete en cada compilación, puede modificar el archivo de proyecto para el proyecto de aplicación web establecer el **EnablePackageProcessLoggingAndAssert** propiedad **true**.</span><span class="sxs-lookup"><span data-stu-id="d2f53-131">Alternatively, if you want to include the package in every build, you can modify the project file for your web application project to set the **EnablePackageProcessLoggingAndAssert** property to **true**.</span></span> <span data-ttu-id="d2f53-132">Debe agregar la propiedad a la primera **PropertyGroup** elemento dentro del archivo .csproj o .vbproj.</span><span class="sxs-lookup"><span data-stu-id="d2f53-132">You should add the property to the first **PropertyGroup** element within your .csproj or .vbproj file.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample4.xml)]


## <a name="reviewing-the-log-files"></a><span data-ttu-id="d2f53-133">Revisar los archivos de registro</span><span class="sxs-lookup"><span data-stu-id="d2f53-133">Reviewing the Log Files</span></span>

<span data-ttu-id="d2f53-134">Cuando se compila y empaqueta un proyecto de aplicación web con **EnablePackageProcessLoggingAndAssert** establecido en **true**, MSBuild crea una carpeta adicional con el nombre de registro en el *ProjectName* \_Carpeta del paquete.</span><span class="sxs-lookup"><span data-stu-id="d2f53-134">When you build and package a web application project with **EnablePackageProcessLoggingAndAssert** set to **true**, MSBuild creates an additional folder named Log in the *ProjectName*\_Package folder.</span></span> <span data-ttu-id="d2f53-135">La carpeta de registro contiene varios archivos:</span><span class="sxs-lookup"><span data-stu-id="d2f53-135">The Log folder contains various files:</span></span>

![](troubleshooting-the-packaging-process/_static/image2.png)

<span data-ttu-id="d2f53-136">La lista de archivos que se ven varían según los elementos del proyecto y el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="d2f53-136">The list of files that you see will vary according to the things in your project and your build process.</span></span> <span data-ttu-id="d2f53-137">Sin embargo, estos archivos se usan normalmente para registrar la lista de archivos que está recopilando el WPP para hacer el empaquetado en distintas fases del proceso:</span><span class="sxs-lookup"><span data-stu-id="d2f53-137">However, these files are typically used to record the list of files that the WPP is collecting for packaging, at various stages of the process:</span></span>

- <span data-ttu-id="d2f53-138">El *PreExcludePipelineCollectFilesPhaseFileList.txt* archivo incluyen los archivos que recopila de MSBuild para empaquetar antes de que se quitan los archivos que se especifican para su exclusión.</span><span class="sxs-lookup"><span data-stu-id="d2f53-138">The *PreExcludePipelineCollectFilesPhaseFileList.txt* file lists the files that MSBuild collects for packaging before any files that are specified for exclusion are removed.</span></span>
- <span data-ttu-id="d2f53-139">El *AfterExcludeFilesFilesList.txt* archivo contiene la lista de archivos modificados después de quitan los archivos que se especifican para su exclusión.</span><span class="sxs-lookup"><span data-stu-id="d2f53-139">The *AfterExcludeFilesFilesList.txt* file contains the modified file list after any files that are specified for exclusion are removed.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d2f53-140">Para obtener más información acerca de cómo excluir archivos y carpetas desde el proceso de empaquetado, vea [excluir archivos y carpetas de implementación](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="d2f53-140">For more information on excluding files and folders from the packaging process, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>
- <span data-ttu-id="d2f53-141">El *AfterTransformWebConfig.txt* archivo enumera los archivos recopilados para hacer el empaquetado después de un *Web.config* transformaciones que se hayan realizado.</span><span class="sxs-lookup"><span data-stu-id="d2f53-141">The *AfterTransformWebConfig.txt* file lists the files collected for packaging after any *Web.config* transforms have been performed.</span></span> <span data-ttu-id="d2f53-142">En esta lista, cualquier específicas de la configuración *Web.config* transformar los archivos, como *Web.Debug.config* y *Web.Release.config*, se excluyen de la lista de archivos para empaquetado.</span><span class="sxs-lookup"><span data-stu-id="d2f53-142">In this list, any configuration-specific *Web.config* transform files, like *Web.Debug.config* and *Web.Release.config*, are excluded from the list of files for packaging.</span></span> <span data-ttu-id="d2f53-143">Una sola transforman *Web.config* se incluye en su lugar.</span><span class="sxs-lookup"><span data-stu-id="d2f53-143">A single transformed *Web.config* is included in their place.</span></span>
- <span data-ttu-id="d2f53-144">El *PostAutoParameterizationWebConfigConnectionStrings.txt* archivo contiene la lista de archivos después de las cadenas de conexión en el *Web.config* archivo con parámetros.</span><span class="sxs-lookup"><span data-stu-id="d2f53-144">The *PostAutoParameterizationWebConfigConnectionStrings.txt* file contains the list of files after the connection strings in the *Web.config* file have been parameterized.</span></span> <span data-ttu-id="d2f53-145">Este es el proceso que le permite reemplazar las cadenas de conexión con la configuración correcta para su entorno de destino al implementar el paquete.</span><span class="sxs-lookup"><span data-stu-id="d2f53-145">This is the process that lets you replace your connection strings with the right settings for your target environment when you deploy the package.</span></span>
- <span data-ttu-id="d2f53-146">El *Prepackage.txt* archivo contiene la lista anterior a la compilación finalizada de archivos que se van a incluirse en el paquete.</span><span class="sxs-lookup"><span data-stu-id="d2f53-146">The *Prepackage.txt* file contains the finalized pre-build list of files to be included in the package.</span></span>

> [!NOTE]
> <span data-ttu-id="d2f53-147">Los nombres de los archivos de registro adicionales normalmente corresponden a los destinos WPP.</span><span class="sxs-lookup"><span data-stu-id="d2f53-147">The names of the additional log files typically correspond to WPP targets.</span></span> <span data-ttu-id="d2f53-148">Puede revisar estos destinos mediante el examen de la *Microsoft.Web.Publishing.targets* archivo en la carpeta de %\MSBuild\Microsoft\VisualStudio\v10.0\Web % PROGRAMFILES (x 86).</span><span class="sxs-lookup"><span data-stu-id="d2f53-148">You can review these targets by examining the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>


<span data-ttu-id="d2f53-149">Si el contenido del paquete web no es lo que esperaba, revise estos archivos puede ser una forma útil de identificar en qué punto en los aspectos del proceso produjo un error.</span><span class="sxs-lookup"><span data-stu-id="d2f53-149">If the contents of your web package aren't what you expected, reviewing these files can be a useful way to identify at what point in the process things went wrong.</span></span>

## <a name="conclusion"></a><span data-ttu-id="d2f53-150">Conclusión</span><span class="sxs-lookup"><span data-stu-id="d2f53-150">Conclusion</span></span>

<span data-ttu-id="d2f53-151">En este tema se describe cómo puede utilizar el **EnablePackageProcessLoggingAndAssert** propiedad de MSBuild para solucionar problemas del proceso de empaquetado.</span><span class="sxs-lookup"><span data-stu-id="d2f53-151">This topic described how you can use the **EnablePackageProcessLoggingAndAssert** property in MSBuild to troubleshoot the packaging process.</span></span> <span data-ttu-id="d2f53-152">Explican las distintas maneras en que puede proporcionar el valor de propiedad para el proceso de compilación y describe la información adicional que se registra cuando se establece la propiedad en **true**.</span><span class="sxs-lookup"><span data-stu-id="d2f53-152">It explained the different ways in which you can supply the property value to the build process, and it described the additional information that is recorded when you set the property to **true**.</span></span>

## <a name="further-reading"></a><span data-ttu-id="d2f53-153">Información adicional</span><span class="sxs-lookup"><span data-stu-id="d2f53-153">Further Reading</span></span>

<span data-ttu-id="d2f53-154">Para obtener más información sobre el uso de archivos de proyecto de MSBuild personalizados para controlar el proceso de implementación, consulte [comprender el archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md) y [descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="d2f53-154">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="d2f53-155">Para obtener más información sobre la WPP y el modo en que administra el proceso de empaquetado, vea [edificio y proyectos de aplicación Web de empaquetado](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="d2f53-155">For more information on the WPP and how it manages the packaging process, see [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span> <span data-ttu-id="d2f53-156">Para obtener instrucciones acerca de cómo excluir determinados archivos y carpetas de los paquetes de implementación web, consulte [excluir archivos y carpetas de implementación](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="d2f53-156">For guidance on how to exclude specific files and folders from web deployment packages, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="d2f53-157">Anterior</span><span class="sxs-lookup"><span data-stu-id="d2f53-157">Previous</span></span>](running-windows-powershell-scripts-from-msbuild-project-files.md)
