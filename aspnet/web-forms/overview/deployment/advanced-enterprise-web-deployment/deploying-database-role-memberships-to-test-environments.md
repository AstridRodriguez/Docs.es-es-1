---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
title: "Implementación de las pertenencias a roles de base de datos en entornos de prueba | Documentos de Microsoft"
author: jrjlee
description: "En este tema se describe cómo agregar cuentas de usuario a los roles de base de datos como parte de una implementación de la solución en un entorno de prueba. Al implementar una solución que contenga..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 9b2af539-7ad9-47aa-b66e-873bd9906e79
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
msc.type: authoredcontent
ms.openlocfilehash: ac780c6cd522f9216cafe3b5f23772ef6ebf5d11
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/10/2017
---
<a name="deploying-database-role-memberships-to-test-environments"></a><span data-ttu-id="f93e1-104">Implementación de las pertenencias a roles de base de datos en entornos de prueba</span><span class="sxs-lookup"><span data-stu-id="f93e1-104">Deploying Database Role Memberships to Test Environments</span></span>
====================
<span data-ttu-id="f93e1-105">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="f93e1-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="f93e1-106">Descarga de PDF</span><span class="sxs-lookup"><span data-stu-id="f93e1-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="f93e1-107">En este tema se describe cómo agregar cuentas de usuario a los roles de base de datos como parte de una implementación de la solución en un entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="f93e1-107">This topic describes how to add user accounts to database roles as part of a solution deployment to a test environment.</span></span>
> 
> <span data-ttu-id="f93e1-108">Al implementar una solución que contenga un proyecto de base de datos en un entorno de ensayo o de producción, normalmente no desea que el programador para automatizar la adición de cuentas de usuario a los roles de base de datos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-108">When you deploy a solution containing a database project to a staging or production environment, you typically don't want the developer to automate the addition of user accounts to database roles.</span></span> <span data-ttu-id="f93e1-109">En la mayoría de los casos, el desarrollador no sabrá qué cuentas de usuario deben agregarse a los roles de base de datos y estos requisitos podrían cambiar en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="f93e1-109">In most cases, the developer won't know which user accounts need to be added to which database roles, and these requirements could change at any time.</span></span> <span data-ttu-id="f93e1-110">Sin embargo, al implementar una solución que contenga un proyecto de base de datos para un desarrollo o entorno de prueba, la situación suele ser muy diferente:</span><span class="sxs-lookup"><span data-stu-id="f93e1-110">However, when you deploy a solution containing a database project to a development or test environment, the situation is usually rather different:</span></span>
> 
> - <span data-ttu-id="f93e1-111">El programador suele volver a implementa la solución de forma regular, a menudo varias veces al día.</span><span class="sxs-lookup"><span data-stu-id="f93e1-111">The developer typically re-deploys the solution on a regular basis, often several times a day.</span></span>
> - <span data-ttu-id="f93e1-112">La base de datos normalmente se vuelve a crear en cada implementación, lo que significa que los usuarios de base de datos deben pueden crearse y agregarse a los roles después de cada implementación.</span><span class="sxs-lookup"><span data-stu-id="f93e1-112">The database is typically re-created on every deployment, which means that database users must be created and added to roles after every deployment.</span></span>
> - <span data-ttu-id="f93e1-113">Normalmente, el desarrollador tiene control total sobre el entorno de desarrollo o pruebas de destino.</span><span class="sxs-lookup"><span data-stu-id="f93e1-113">The developer typically has full control over the target development or test environment.</span></span>
> 
> <span data-ttu-id="f93e1-114">En este escenario, a menudo resulta útil crear usuarios de base de datos automáticamente y asignar a miembros de la función de base de datos como parte del proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="f93e1-114">In this scenario, it's often beneficial to automatically create database users and assign database role memberships as part of the deployment process.</span></span>
> 
> <span data-ttu-id="f93e1-115">El factor clave es que esta operación debe ser condicional según el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="f93e1-115">The key factor is that this operation needs to be conditional based on the target environment.</span></span> <span data-ttu-id="f93e1-116">Si va a implementar un almacenamiento provisional o en un entorno de producción, que desea omitir la operación.</span><span class="sxs-lookup"><span data-stu-id="f93e1-116">If you're deploying to a staging or a production environment, you want to skip the operation.</span></span> <span data-ttu-id="f93e1-117">Si va a implementar a un desarrollador o entorno de prueba, va a implementar las pertenencias a roles sin ninguna intervención adicional.</span><span class="sxs-lookup"><span data-stu-id="f93e1-117">If you're deploying to a developer or test environment, you want to deploy role memberships without further intervention.</span></span> <span data-ttu-id="f93e1-118">Este tema describe un método que puede utilizar para abordar este reto.</span><span class="sxs-lookup"><span data-stu-id="f93e1-118">This topic describes one approach you can use to address this challenge.</span></span>


<span data-ttu-id="f93e1-119">Este tema forma parte de una serie de tutoriales que se basa en los requisitos de implementación de empresa de una compañía ficticia denominada Fabrikam, Inc. Esta serie de tutoriales que utiliza una solución de ejemplo & #x 2014; la [póngase en contacto con el administrador solución](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014; para representar una aplicación web con un nivel de complejidad, incluso una aplicación de ASP.NET MVC 3, Windows realista Servicio de Communication Foundation (WCF) y un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-119">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="f93e1-120">El método de implementación en el centro de estos tutoriales se basa en el enfoque de archivo de proyecto de división descrito en [comprender el archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), en que el proceso de compilación se controla mediante dos proyectos, archivos de & #x 2014; uno que contiene instrucciones que se aplican a cada entorno de destino y que contiene la configuración de compilación e implementación específica del entorno de compilación.</span><span class="sxs-lookup"><span data-stu-id="f93e1-120">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="f93e1-121">En tiempo de compilación, se combina el archivo de proyecto específicas del entorno en el archivo de proyecto independiente del entorno para formar un conjunto completo de las instrucciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="f93e1-121">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="f93e1-122">Información general sobre tareas</span><span class="sxs-lookup"><span data-stu-id="f93e1-122">Task Overview</span></span>

<span data-ttu-id="f93e1-123">En este tema se supone:</span><span class="sxs-lookup"><span data-stu-id="f93e1-123">This topic assumes that:</span></span>

- <span data-ttu-id="f93e1-124">Usar el enfoque de archivo de proyecto de división para la implementación de la solución, como se describe en [comprender el archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="f93e1-124">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="f93e1-125">Llamar VSDBCMD desde el archivo de proyecto para implementar el proyecto de base de datos, como se describe en [descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="f93e1-125">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="f93e1-126">Para crear usuarios de base de datos y asignar a las pertenencias a roles al implementar un proyecto de base de datos en un entorno de prueba, necesitará:</span><span class="sxs-lookup"><span data-stu-id="f93e1-126">To create database users and assign role memberships when you deploy a database project to a test environment, you'll need to:</span></span>

- <span data-ttu-id="f93e1-127">Crear un script de Transact lenguaje de consulta estructurado (Transact-SQL) que realiza los cambios necesarios de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-127">Create a Transact Structured Query Language (Transact-SQL) script that makes the necessary database changes.</span></span>
- <span data-ttu-id="f93e1-128">Crear un destino de Microsoft Build Engine (MSBuild) que usa la utilidad sqlcmd.exe para ejecutar el script SQL.</span><span class="sxs-lookup"><span data-stu-id="f93e1-128">Create a Microsoft Build Engine (MSBuild) target that uses the sqlcmd.exe utility to run the SQL script.</span></span>
- <span data-ttu-id="f93e1-129">Configurar los archivos de proyecto para invocar el destino cuando va a implementar la solución en un entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="f93e1-129">Configure your project files to invoke the target when you're deploying your solution to a test environment.</span></span>

<span data-ttu-id="f93e1-130">En este tema le mostrará cómo realizar cada uno de estos procedimientos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-130">This topic will show you how to perform each of these procedures.</span></span>

## <a name="scripting-the-database-role-memberships"></a><span data-ttu-id="f93e1-131">Las pertenencias a roles de base de datos de secuencias de comandos</span><span class="sxs-lookup"><span data-stu-id="f93e1-131">Scripting the Database Role Memberships</span></span>

<span data-ttu-id="f93e1-132">Puede crear un script de Transact-SQL en un lote de maneras diferentes, y en cualquier ubicación elija.</span><span class="sxs-lookup"><span data-stu-id="f93e1-132">You can create a Transact-SQL script in a lot of different ways, and in any location you choose.</span></span> <span data-ttu-id="f93e1-133">El enfoque más sencillo consiste en crear la secuencia de comandos dentro de la solución en Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="f93e1-133">The easiest approach is to create the script within your solution in Visual Studio 2010.</span></span>

<span data-ttu-id="f93e1-134">**Para crear un script SQL**</span><span class="sxs-lookup"><span data-stu-id="f93e1-134">**To create a SQL script**</span></span>

1. <span data-ttu-id="f93e1-135">En el **el Explorador de soluciones** ventana, expanda el nodo del proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-135">In the **Solution Explorer** window, expand your database project node.</span></span>
2. <span data-ttu-id="f93e1-136">Haga clic en el **Scripts** carpeta, seleccione **agregar**y, a continuación, haga clic en **nueva carpeta**.</span><span class="sxs-lookup"><span data-stu-id="f93e1-136">Right-click the **Scripts** folder, point to **Add**, and then click **New Folder**.</span></span>
3. <span data-ttu-id="f93e1-137">Tipo de **prueba** como nombre de la carpeta y, a continuación, presione ENTRAR.</span><span class="sxs-lookup"><span data-stu-id="f93e1-137">Type **Test** as the folder name, and then press Enter.</span></span>
4. <span data-ttu-id="f93e1-138">Haga clic en el **prueba** carpeta, seleccione **agregar**y, a continuación, haga clic en **Script**.</span><span class="sxs-lookup"><span data-stu-id="f93e1-138">Right-click the **Test** folder, point to **Add**, and then click **Script**.</span></span>
5. <span data-ttu-id="f93e1-139">En el **Agregar nuevo elemento** diálogo cuadro, dar un nombre descriptivo a la secuencia de comandos (por ejemplo, **AddRoleMemberships.sql**) y, a continuación, haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="f93e1-139">In the **Add New Item** dialog box, give your script a meaningful name (for example, **AddRoleMemberships.sql**), and then click **Add**.</span></span>

    ![](deploying-database-role-memberships-to-test-environments/_static/image1.png)
6. <span data-ttu-id="f93e1-140">En el *AddRoleMemberships.sql* , agregue las instrucciones de Transact-SQL que:</span><span class="sxs-lookup"><span data-stu-id="f93e1-140">In the *AddRoleMemberships.sql* file, add Transact-SQL statements that:</span></span>

    1. <span data-ttu-id="f93e1-141">Cree un usuario de base de datos para el inicio de sesión de SQL Server que tenga acceso a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-141">Create a database user for the SQL Server login that will access your database.</span></span>
    2. <span data-ttu-id="f93e1-142">Agregue el usuario de base de datos a ningún rol de base de datos requeridas.</span><span class="sxs-lookup"><span data-stu-id="f93e1-142">Add the database user to any required database roles.</span></span>
7. <span data-ttu-id="f93e1-143">El archivo debe ser similar a este:</span><span class="sxs-lookup"><span data-stu-id="f93e1-143">The file should resemble this:</span></span>

    [!code-sql[Main](deploying-database-role-memberships-to-test-environments/samples/sample1.sql)]
8. <span data-ttu-id="f93e1-144">Guarde el archivo.</span><span class="sxs-lookup"><span data-stu-id="f93e1-144">Save the file.</span></span>

## <a name="executing-the-script-on-the-target-database"></a><span data-ttu-id="f93e1-145">Ejecutar el Script en la base de datos de destino</span><span class="sxs-lookup"><span data-stu-id="f93e1-145">Executing the Script on the Target Database</span></span>

<span data-ttu-id="f93e1-146">Idealmente, ejecutaría cualquier script de Transact-SQL necesario como parte de un script posterior a la implementación al implementar el proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-146">Ideally, you'd run any required Transact-SQL scripts as part of a post-deployment script when you deploy your database project.</span></span> <span data-ttu-id="f93e1-147">Sin embargo, las secuencias de comandos posteriores a la implementación no permiten ejecutar lógica de manera condicional basándose en las configuraciones de soluciones o propiedades de compilación.</span><span class="sxs-lookup"><span data-stu-id="f93e1-147">However, post-deployment scripts don't allow you to execute logic conditionally based on solution configurations or build properties.</span></span> <span data-ttu-id="f93e1-148">La alternativa consiste en ejecutar los scripts de SQL directamente desde el archivo de proyecto de MSBuild, mediante la creación de un **destino** elemento que ejecuta un comando de sqlcmd.exe.</span><span class="sxs-lookup"><span data-stu-id="f93e1-148">The alternative is to run your SQL scripts directly from the MSBuild project file, by creating a **Target** element that executes a sqlcmd.exe command.</span></span> <span data-ttu-id="f93e1-149">Puede utilizar este comando para ejecutar el script en la base de datos de destino:</span><span class="sxs-lookup"><span data-stu-id="f93e1-149">You can use this command to run your script on the target database:</span></span>


[!code-console[Main](deploying-database-role-memberships-to-test-environments/samples/sample2.cmd)]


> [!NOTE]
> <span data-ttu-id="f93e1-150">Para obtener más información sobre las opciones de línea de comandos de sqlcmd, vea [utilidad sqlcmd](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span><span class="sxs-lookup"><span data-stu-id="f93e1-150">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span></span>


<span data-ttu-id="f93e1-151">Antes de insertar este comando en un destino de MSBuild, debe tener en cuenta en las condiciones que desea que el script se ejecute:</span><span class="sxs-lookup"><span data-stu-id="f93e1-151">Before you embed this command in an MSBuild target, you need to consider under what conditions you want the script to run:</span></span>

- <span data-ttu-id="f93e1-152">La base de datos de destino debe existir antes de cambiar su pertenencia a roles.</span><span class="sxs-lookup"><span data-stu-id="f93e1-152">The target database must exist before you change its role memberships.</span></span> <span data-ttu-id="f93e1-153">Por lo tanto, debe ejecutar este script *después* la implementación de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-153">As such, you need to run this script *after* the database deployment.</span></span>
- <span data-ttu-id="f93e1-154">Debe incluir una condición para que solo se ejecuta la secuencia de comandos para entornos de prueba.</span><span class="sxs-lookup"><span data-stu-id="f93e1-154">You need to include a condition so that the script is only executed for test environments.</span></span>
- <span data-ttu-id="f93e1-155">Si está ejecutando una implementación de "¿Qué ocurre si" & #x 2014; en otras palabras, si está generando secuencias de comandos de implementación pero no ejecutándose en ellos & #x 2014; no debe ejecutar el script SQL.</span><span class="sxs-lookup"><span data-stu-id="f93e1-155">If you're running a "what if" deployment&#x2014;in other words, if you're generating deployment scripts but not actually running them&#x2014;you shouldn't run the SQL script.</span></span>

<span data-ttu-id="f93e1-156">Si está usando el enfoque de archivo de proyecto de división descrito en [comprender el archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), como se muestra en la solución de ejemplo póngase en contacto con el administrador, puede dividir las instrucciones de compilación para la secuencia de comandos SQL similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="f93e1-156">If you're using the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), as demonstrated by the Contact Manager sample solution, you can split the build instructions for your SQL script like this:</span></span>

- <span data-ttu-id="f93e1-157">Las necesarias propiedades específicas del entorno, junto con la propiedad que determina si se debe implementar permisos, deberían ir en el archivo de proyecto específicas del entorno (por ejemplo, *Dev.proj Env*).</span><span class="sxs-lookup"><span data-stu-id="f93e1-157">Any required environment-specific properties, together with the property that determines whether to deploy permissions, should go in the environment-specific project file (for example, *Env-Dev.proj*).</span></span>
- <span data-ttu-id="f93e1-158">El destino de MSBuild, junto con todas las propiedades que no se cambiará entre entornos de destino, debe ir en el archivo de proyecto universal (por ejemplo, *Publish.proj*).</span><span class="sxs-lookup"><span data-stu-id="f93e1-158">The MSBuild target itself, together with any properties that will not change between destination environments, should go in the universal project file (for example, *Publish.proj*).</span></span>

<span data-ttu-id="f93e1-159">En el archivo de proyecto específicos del entorno, debe definir el nombre del servidor de base de datos, el nombre de base de datos de destino y una propiedad booleana que permite al usuario especificar si va a implementar las pertenencias a roles.</span><span class="sxs-lookup"><span data-stu-id="f93e1-159">In the environment-specific project file, you need to define the database server name, the target database name, and a Boolean property that lets the user specify whether to deploy role memberships.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample3.xml)]


<span data-ttu-id="f93e1-160">En el archivo de proyecto universal, debe proporcionar la ubicación del ejecutable de SQLCMD y la ubicación de la secuencia de comandos SQL que va a ejecutar.</span><span class="sxs-lookup"><span data-stu-id="f93e1-160">In the universal project file, you need to provide the location of the sqlcmd executable and the location of the SQL script you want to run.</span></span> <span data-ttu-id="f93e1-161">Estas propiedades seguirá siendo el mismo independientemente del entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="f93e1-161">These properties will remain the same regardless of the destination environment.</span></span> <span data-ttu-id="f93e1-162">También debe crear un destino de MSBuild para ejecutar el comando sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="f93e1-162">You also need to create an MSBuild target to execute the sqlcmd command.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample4.xml)]


<span data-ttu-id="f93e1-163">Tenga en cuenta que agregar la ubicación del ejecutable de SQLCMD como una propiedad estática, como esto puede resultar útil a otros destinos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-163">Notice that you add the location of the sqlcmd executable as a static property, as this could be useful to other targets.</span></span> <span data-ttu-id="f93e1-164">En cambio, defina la ubicación de la secuencia de comandos SQL y la sintaxis del comando sqlcmd como propiedades dinámicas dentro del destino, ya que no son necesarios antes de que se ejecuta el destino.</span><span class="sxs-lookup"><span data-stu-id="f93e1-164">In contrast, you define the location of your SQL script and the syntax of the sqlcmd command as dynamic properties within the target, as they will not be required before the target is executed.</span></span> <span data-ttu-id="f93e1-165">En este caso, el **DeployTestDBPermissions** destino solo se ejecutará si se cumplen estas condiciones:</span><span class="sxs-lookup"><span data-stu-id="f93e1-165">In this case, the **DeployTestDBPermissions** target will only be executed if these conditions are met:</span></span>

- <span data-ttu-id="f93e1-166">El **DeployTestDBRoleMemberships** propiedad está establecida en **true**.</span><span class="sxs-lookup"><span data-stu-id="f93e1-166">The **DeployTestDBRoleMemberships** property is set to **true**.</span></span>
- <span data-ttu-id="f93e1-167">El usuario no ha especificado un **WhatIf = true** marca.</span><span class="sxs-lookup"><span data-stu-id="f93e1-167">The user hasn't specified a **WhatIf=true** flag.</span></span>

<span data-ttu-id="f93e1-168">Por último, no olvide invocar el destino.</span><span class="sxs-lookup"><span data-stu-id="f93e1-168">Finally, don't forget to invoke the target.</span></span> <span data-ttu-id="f93e1-169">En el *Publish.proj* archivo, puede hacerlo agregando el destino a la lista de dependencias para el valor predeterminado **FullPublish** destino.</span><span class="sxs-lookup"><span data-stu-id="f93e1-169">In the *Publish.proj* file, you can do this by adding the target to the dependency list for the default **FullPublish** target.</span></span> <span data-ttu-id="f93e1-170">Necesita asegurarse de que el **DeployTestDBPermissions** destino no se ejecuta hasta que la **PublishDbPackages** se ha ejecutado el destino.</span><span class="sxs-lookup"><span data-stu-id="f93e1-170">You need to ensure that the **DeployTestDBPermissions** target is not executed until the **PublishDbPackages** target has been executed.</span></span>


[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample5.xml)]


## <a name="conclusion"></a><span data-ttu-id="f93e1-171">Conclusión</span><span class="sxs-lookup"><span data-stu-id="f93e1-171">Conclusion</span></span>

<span data-ttu-id="f93e1-172">En este tema se describe una manera en que se pueden agregar usuarios de base de datos y las pertenencias a roles como una acción posterior a la implementación al implementar un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="f93e1-172">This topic described one way in which you can add database users and role memberships as a post-deployment action when you deploy a database project.</span></span> <span data-ttu-id="f93e1-173">Esto es suele ser útil cuando periódicamente volver a crear una base de datos en un entorno de prueba, pero normalmente debería evitarse al implementar las bases de datos en entornos de ensayo o de producción.</span><span class="sxs-lookup"><span data-stu-id="f93e1-173">This is typically useful when you regularly re-create a database in a test environment, but it should usually be avoided when you deploy databases to staging or production environments.</span></span> <span data-ttu-id="f93e1-174">Por lo tanto, debe asegurarse de que usa la lógica condicional necesaria para que los usuarios de base de datos y las pertenencias a roles solo se crean cuándo es adecuado hacerlo.</span><span class="sxs-lookup"><span data-stu-id="f93e1-174">As such, you should ensure that you use the necessary conditional logic so that database users and role memberships are only created when it's appropriate to do so.</span></span>

## <a name="further-reading"></a><span data-ttu-id="f93e1-175">Información adicional</span><span class="sxs-lookup"><span data-stu-id="f93e1-175">Further Reading</span></span>

<span data-ttu-id="f93e1-176">Para obtener más información sobre cómo utilizar VSDBCMD para implementar proyectos de base de datos, vea [implementar proyectos de base de datos](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="f93e1-176">For more information on using VSDBCMD to deploy database projects, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="f93e1-177">Para obtener instrucciones acerca de cómo personalizar las implementaciones de la base de datos para diferentes entornos de destino, vea [personalizar implementaciones de base de datos para varios entornos](customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="f93e1-177">For guidance on customizing database deployments for different target environments, see [Customizing Database Deployments for Multiple Environments](customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="f93e1-178">Para obtener más información sobre el uso de archivos de proyecto de MSBuild personalizados para controlar el proceso de implementación, consulte [comprender el archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md) y [descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="f93e1-178">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="f93e1-179">Para obtener más información sobre las opciones de línea de comandos de sqlcmd, vea [utilidad sqlcmd](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span><span class="sxs-lookup"><span data-stu-id="f93e1-179">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/en-us/library/ms162773.aspx).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="f93e1-180">[Anterior](customizing-database-deployments-for-multiple-environments.md)
[Siguiente](deploying-membership-databases-to-enterprise-environments.md)</span><span class="sxs-lookup"><span data-stu-id="f93e1-180">[Previous](customizing-database-deployments-for-multiple-environments.md)
[Next](deploying-membership-databases-to-enterprise-environments.md)</span></span>
