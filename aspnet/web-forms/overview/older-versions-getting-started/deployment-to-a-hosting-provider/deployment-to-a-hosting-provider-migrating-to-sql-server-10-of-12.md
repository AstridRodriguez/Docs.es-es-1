---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
title: 'Implementar una aplicación Web de ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: migrar a SQL Server - 10 de 12 | Documentos de Microsoft'
author: tdykstra
description: Esta serie de tutoriales muestra cómo implementar (publicar) ASP.NET proyecto de aplicación web que incluye una base de datos de SQL Server Compact usando Visual Stu...
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/17/2011
ms.topic: article
ms.assetid: a89d6f32-b71b-4036-8ff7-5f8ac2a6eca8
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
msc.type: authoredcontent
ms.openlocfilehash: 25a829f1d3c730c7bb3b174f075ce8163999e482
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
ms.locfileid: "30892100"
---
<a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-migrating-to-sql-server---10-of-12"></a><span data-ttu-id="e8eaa-103">Implementar una aplicación Web de ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: migrar a SQL Server - 10 de 12</span><span class="sxs-lookup"><span data-stu-id="e8eaa-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Migrating to SQL Server - 10 of 12</span></span>
====================
<span data-ttu-id="e8eaa-104">por [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="e8eaa-105">Descargar proyecto de inicio</span><span class="sxs-lookup"><span data-stu-id="e8eaa-105">Download Starter Project</span></span>](http://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="e8eaa-106">Esta serie de tutoriales muestra cómo implementar (publicar) ASP.NET proyecto de aplicación web que incluye una base de datos de SQL Server Compact con Visual Studio 2012 RC o Visual Studio Express 2012 RC for Web.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="e8eaa-107">También puede usar Visual Studio 2010 si instala la actualización de publicación de Web.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="e8eaa-108">Para obtener una introducción a la serie, consulte [el primer tutorial de la serie](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="e8eaa-109">Para obtener un tutorial que muestra las características de implementación introducidas después del lanzamiento de Visual Studio 2012 RC, se muestra cómo implementar las ediciones de SQL Server que no sea SQL Server Compact y muestra cómo implementar en aplicaciones de Web del servicio de aplicación de Azure, consulte [implementación Web de ASP.NET con Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>


## <a name="overview"></a><span data-ttu-id="e8eaa-110">Información general</span><span class="sxs-lookup"><span data-stu-id="e8eaa-110">Overview</span></span>

<span data-ttu-id="e8eaa-111">Este tutorial muestra cómo migrar de SQL Server Compact a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-111">This tutorial shows you how to migrate from SQL Server Compact to SQL Server.</span></span> <span data-ttu-id="e8eaa-112">Puede hacer que una de las razones es aprovechar las características de SQL Server que SQL Server Compact no admite, como procedimientos almacenados, desencadenadores, vistas o replicación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-112">One reason you might want to do that is to take advantage of SQL Server features that SQL Server Compact does not support, such as stored procedures, triggers, views, or replication.</span></span> <span data-ttu-id="e8eaa-113">Para obtener más información acerca de las diferencias entre SQL Server Compact y SQL Server, consulte el [implementar SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-113">For more information about the differences between SQL Server Compact and SQL Server, see the [Deploying SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) tutorial.</span></span>

### <a name="sql-server-express-versus-full-sql-server-for-development"></a><span data-ttu-id="e8eaa-114">SQL Server Express frente a completa de SQL Server para el desarrollo</span><span class="sxs-lookup"><span data-stu-id="e8eaa-114">SQL Server Express versus full SQL Server for Development</span></span>

<span data-ttu-id="e8eaa-115">Una vez que haya decidido actualizar a SQL Server, puede usar SQL Server o SQL Server Express en sus entornos de desarrollo y pruebas.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-115">Once you've decided to upgrade to SQL Server, you might want to use SQL Server or SQL Server Express in your development and test environments.</span></span> <span data-ttu-id="e8eaa-116">Además de las diferencias en la compatibilidad con las herramientas y características del motor de base de datos, existen diferencias en las implementaciones del proveedor entre SQL Server Compact y otras versiones de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-116">In addition to the differences in tool support and in database engine features, there are differences in provider implementations between SQL Server Compact and other versions of SQL Server.</span></span> <span data-ttu-id="e8eaa-117">Estas diferencias pueden ocasionar el mismo código generar resultados diferentes.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-117">These differences can cause the same code to generate different results.</span></span> <span data-ttu-id="e8eaa-118">Por lo tanto, si decide mantener SQL Server Compact como la base de datos de desarrollo, debe probar exhaustivamente su sitio en SQL Server o SQL Server Express en un entorno de prueba antes de cada implementación en producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-118">Therefore, if you decide to keep SQL Server Compact as your development database, you should thoroughly test your site in SQL Server or SQL Server Express in a test environment before each deployment to production.</span></span>

<span data-ttu-id="e8eaa-119">A diferencia de SQL Server Compact, SQL Server Express es básicamente el mismo motor de base de datos y utiliza el mismo proveedor de .NET como completa de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-119">Unlike SQL Server Compact, SQL Server Express is essentially the same database engine and uses the same .NET provider as full SQL Server.</span></span> <span data-ttu-id="e8eaa-120">Cuando se prueba con SQL Server Express, puede estar seguro de obtener los mismos resultados tal y como aparecerá con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-120">When you test with SQL Server Express, you can be confident of getting the same results as you will with SQL Server.</span></span> <span data-ttu-id="e8eaa-121">Puede utilizar la mayoría de las mismas herramientas de base de datos con SQL Server Express que pueden usar con SQL Server (una excepción notable que se va a [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), y es compatible con otras características de SQL Server como procedimientos almacenados, vistas, desencadenadores, y la replicación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-121">You can use most of the same database tools with SQL Server Express that you can use with SQL Server (a notable exception being [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), and it supports other features of SQL Server like stored procedures, views, triggers, and replication.</span></span> <span data-ttu-id="e8eaa-122">(Normalmente tendrá que usar completa de SQL Server en un sitio Web de producción, sin embargo.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-122">(You typically have to use full SQL Server in a production website, however.</span></span> <span data-ttu-id="e8eaa-123">SQL Server Express se puede ejecutar en un entorno de hospedaje compartido, pero no se diseñó para, y muchos proveedores de hospedaje no la admiten.)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-123">SQL Server Express can run in a shared hosting environment, but it was not designed for that, and many hosting providers do not support it.)</span></span>

<span data-ttu-id="e8eaa-124">Si usas Visual Studio 2012, normalmente elegir SQL Server Express LocalDB para su entorno de desarrollo ya que es lo que está instalado de forma predeterminada con Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-124">If you are using Visual Studio 2012, you typically choose SQL Server Express LocalDB for your development environment because that is what is installed by default with Visual Studio.</span></span> <span data-ttu-id="e8eaa-125">Sin embargo, LocalDB no funciona en IIS, por lo que para el entorno de prueba deba usar SQL Server o SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-125">However, LocalDB does not work in IIS, so for your test environment you have to use either SQL Server or SQL Server Express.</span></span>

### <a name="combining-databases-versus-keeping-them-separate"></a><span data-ttu-id="e8eaa-126">Combinar las bases de datos frente a mantenerlos independiente</span><span class="sxs-lookup"><span data-stu-id="e8eaa-126">Combining Databases versus Keeping Them Separate</span></span>

<span data-ttu-id="e8eaa-127">La aplicación de la Universidad de Contoso tiene dos bases de datos de SQL Server Compact: la base de datos de pertenencia (*aspnet.sdf*) y la base de datos de aplicación (*School.sdf*).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-127">The Contoso University application has two SQL Server Compact databases: the membership database (*aspnet.sdf*) and the application database (*School.sdf*).</span></span> <span data-ttu-id="e8eaa-128">Cuando se migra, puede migrar las bases de datos a dos bases de datos o a una sola base de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-128">When you migrate, you can migrate these databases to two separate databases or to a single database.</span></span> <span data-ttu-id="e8eaa-129">Desea combinarlas con el fin de facilitar las combinaciones de base de datos entre la base de datos de aplicación y la base de datos de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-129">You might want to combine them in order to facilitate database joins between your application database and your membership database.</span></span> <span data-ttu-id="e8eaa-130">El plan de hospedaje también puede proporcionar una razón para combinarlos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-130">Your hosting plan might also provide a reason to combine them.</span></span> <span data-ttu-id="e8eaa-131">Por ejemplo, el proveedor de hospedaje puede cobrar otras cuestiones para varias bases de datos o incluso podría no permitir a más de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-131">For example, the hosting provider might charge more for multiple databases or might not even allow more than one database.</span></span> <span data-ttu-id="e8eaa-132">Que es el caso con Cytanium Lite hospeda la cuenta que se usa para este tutorial, lo que permite una sola base de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-132">That's the case with the Cytanium Lite hosting account that's used for this tutorial, which allows only a single SQL Server database.</span></span>

<span data-ttu-id="e8eaa-133">En este tutorial, deberá migrar las dos bases de datos de esta forma:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-133">In this tutorial, you'll migrate your two databases this way:</span></span>

- <span data-ttu-id="e8eaa-134">Migrar a dos bases de datos de LocalDB en el entorno de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-134">Migrate to two LocalDB databases in the development environment.</span></span>
- <span data-ttu-id="e8eaa-135">Migrar a dos bases de datos de SQL Server Express en el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-135">Migrate to two SQL Server Express databases in the test environment.</span></span>
- <span data-ttu-id="e8eaa-136">Migrar a SQL Server completa combinada uno con una base de datos en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-136">Migrate to one combined full SQL Server database in the production environment.</span></span>

<span data-ttu-id="e8eaa-137">Aviso: Si aparece un mensaje de error o algo no funciona a medida que avances en el tutorial, asegúrese de comprobar la [página solución de problemas](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-137">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="installing-sql-server-express"></a><span data-ttu-id="e8eaa-138">Instalar SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="e8eaa-138">Installing SQL Server Express</span></span>

<span data-ttu-id="e8eaa-139">SQL Server Express se instala automáticamente con Visual Studio 2010 de forma predeterminada, pero de forma predeterminada no se instala con Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-139">SQL Server Express is automatically installed by default with Visual Studio 2010, but by default it is not installed with Visual Studio 2012.</span></span> <span data-ttu-id="e8eaa-140">Para instalar SQL Server 2012 Express, haga clic en el vínculo siguiente</span><span class="sxs-lookup"><span data-stu-id="e8eaa-140">To install SQL Server 2012 Express, click the following link</span></span>

- [<span data-ttu-id="e8eaa-141">SQL Server Express 2012</span><span class="sxs-lookup"><span data-stu-id="e8eaa-141">SQL Server Express 2012</span></span>](https://www.microsoft.com/download/details.aspx?id=29062)

<span data-ttu-id="e8eaa-142">Elija *ENU/x64/SQLEXPR\_x64\_ENU.exe* o *ENU/x86/SQLEXPR\_x86\_ENU.exe*y en el Asistente para la instalación, acepte el valor predeterminado Configuración.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-142">Choose *ENU/x64/SQLEXPR\_x64\_ENU.exe* or *ENU/x86/SQLEXPR\_x86\_ENU.exe*, and in the installation wizard accept the default settings.</span></span> <span data-ttu-id="e8eaa-143">Para obtener más información acerca de las opciones de instalación, consulte [instalar SQL Server 2012 desde el Asistente para la instalación (programa de instalación)](https://msdn.microsoft.com/library/ms143219.aspx).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-143">For more information about installation options, see [Install SQL Server 2012 from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span></span>

## <a name="creating-sql-server-express-databases-for-the-test-environment"></a><span data-ttu-id="e8eaa-144">Creación de bases de datos SQL Server Express para el entorno de prueba</span><span class="sxs-lookup"><span data-stu-id="e8eaa-144">Creating SQL Server Express Databases for the Test Environment</span></span>

<span data-ttu-id="e8eaa-145">El siguiente paso es crear la pertenencia a ASP.NET y las bases de datos School.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-145">The next step is to create the ASP.NET membership and School databases.</span></span>

<span data-ttu-id="e8eaa-146">Desde el **vista** menú, seleccione **Explorador de servidores** (**el Explorador de base de datos** en Visual Web Developer) y, a continuación, haga clic en **las conexiones de datos**y seleccione **crear nueva base de datos de SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-146">From the **View** menu select **Server Explorer** (**Database Explorer** in Visual Web Developer), and then right-click **Data Connections** and select **Create New SQL Server Database**.</span></span>

![Selecting_Create_New_SQL_Server_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image1.png)

<span data-ttu-id="e8eaa-148">En el **crear nueva base de datos de SQL Server** diálogo cuadro, escriba ". \SQLExpress" en la **nombre del servidor** cuadro y "aspnet-Test" en la **nuevo nombre de base de datos** cuadro, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-148">In the **Create New SQL Server Database** dialog box, enter ".\SQLExpress" in the **Server name** box and "aspnet-Test" in the **New database name** box, then click **OK**.</span></span>

![Create_New_SQL_Server_Database_aspnet](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image2.png)

<span data-ttu-id="e8eaa-150">Siga el mismo procedimiento para crear una nueva base de datos de la escuela de SQL Server Express denominada "Escuela-Test".</span><span class="sxs-lookup"><span data-stu-id="e8eaa-150">Follow the same procedure to create a new SQL Server Express School database named "School-Test".</span></span>

<span data-ttu-id="e8eaa-151">(Se anexa "Test" a estos nombres de base de datos porque más adelante creará una instancia adicional de cada base de datos para el entorno de desarrollo, y debe ser capaz de distinguir los dos conjuntos de bases de datos.)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-151">(You're appending "Test" to these database names because later you'll create an additional instance of each database for the development environment, and you need to be able to differentiate the two sets of databases.)</span></span>

<span data-ttu-id="e8eaa-152">**Explorador de servidores** muestra ahora las dos bases de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-152">**Server Explorer** now shows the two new databases.</span></span>

![New_databases_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image3.png)

## <a name="creating-a-grant-script-for-the-new-databases"></a><span data-ttu-id="e8eaa-154">Crear una secuencia de comandos de concesión para las bases de datos</span><span class="sxs-lookup"><span data-stu-id="e8eaa-154">Creating a Grant Script for the New Databases</span></span>

<span data-ttu-id="e8eaa-155">Cuando la aplicación se ejecuta en IIS en el equipo de desarrollo, la aplicación obtiene acceso a la base de datos utilizando las credenciales del grupo de aplicaciones predeterminado.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-155">When the application runs in IIS on your development computer, the application accesses the database by using the default application pool's credentials.</span></span> <span data-ttu-id="e8eaa-156">Sin embargo, de forma predeterminada, la identidad del grupo de aplicación no tiene permiso para abrir las bases de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-156">However, by default, the application pool identity does not have permission to open the databases.</span></span> <span data-ttu-id="e8eaa-157">Por lo que tendrá que ejecutar un script para conceder ese permiso.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-157">So you have to run a script to grant that permission.</span></span> <span data-ttu-id="e8eaa-158">En esta sección creará el script que se va a ejecutar más adelante si desea asegurarse de que la aplicación puede abrir las bases de datos cuando se ejecuta en IIS.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-158">In this section you create the script that you'll run later to make sure that the application can open the databases when it runs in IIS.</span></span>

<span data-ttu-id="e8eaa-159">En la solución *SolutionFiles* carpeta que creó en el [implementarla en el entorno de producción](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, cree un nuevo archivo SQL denominado *Grant.sql*.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-159">In the solution's *SolutionFiles* folder that you created in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, create a new SQL file named *Grant.sql*.</span></span> <span data-ttu-id="e8eaa-160">Copie los siguientes comandos SQL en el archivo y, a continuación, guarde y cierre el archivo:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-160">Copy the following SQL commands into the file, and then save and close the file:</span></span>

[!code-sql[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample1.sql)]

> [!NOTE]
> <span data-ttu-id="e8eaa-161">Esta secuencia de comandos está diseñado para trabajar con SQL Server 2008 y con la configuración de IIS en Windows 7, tal y como se especifican en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-161">This script is designed to work with SQL Server 2008 and with the IIS settings in Windows 7 as they are specified in this tutorial.</span></span> <span data-ttu-id="e8eaa-162">Si usa una versión diferente de SQL Server o de Windows, o si ha configurado IIS en el equipo diferente, los cambios en esta secuencia de comandos podrían ser necesarios.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-162">If you're using a different version of SQL Server or of Windows, or if you set up IIS on your computer differently, changes to this script might be required.</span></span> <span data-ttu-id="e8eaa-163">Para obtener más información acerca de los scripts de SQL Server, vea [libros en pantalla de SQL Server](https://go.microsoft.com/fwlink/?LinkId=132511).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-163">For more information about SQL Server scripts, see [SQL Server Books Online](https://go.microsoft.com/fwlink/?LinkId=132511).</span></span>


> [!NOTE] 
> 
> <span data-ttu-id="e8eaa-164">**Nota de seguridad** esta secuencia de comandos proporciona db\_permisos de propietario para el usuario que tiene acceso a la base de datos en tiempo de ejecución, que es lo que tendrá en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-164">**Security Note** This script gives db\_owner permissions to the user that accesses the database at run time, which is what you'll have in the production environment.</span></span> <span data-ttu-id="e8eaa-165">En algunos escenarios, puede especificar un usuario que tiene el esquema de base de datos completa actualizar los permisos para la implementación, y especificar para el tiempo de ejecución un usuario diferente que tenga permisos sólo para leer y escribir datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-165">In some scenarios you might want to specify a user that has full database schema update permissions only for deployment, and specify for run time a different user that has permissions only to read and write data.</span></span> <span data-ttu-id="e8eaa-166">Para obtener más información, consulte **revisar los cambios de Web.config automática para migraciones de Code First** en [implementación en IIS como un entorno de prueba](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-166">For more information, see **Reviewing the Automatic Web.config Changes for Code First Migrations** in [Deploying to IIS as a Test Environment](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span></span>


## <a name="configuring-database-deployment-for-the-test-environment"></a><span data-ttu-id="e8eaa-167">La configuración de implementación de base de datos para el entorno de prueba</span><span class="sxs-lookup"><span data-stu-id="e8eaa-167">Configuring Database Deployment for the Test Environment</span></span>

<span data-ttu-id="e8eaa-168">A continuación, podrá configurar Visual Studio para que realizará las tareas siguientes para cada base de datos:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-168">Next, you'll configure Visual Studio so that it will do the following tasks for each database:</span></span>

- <span data-ttu-id="e8eaa-169">Generar un script SQL que crea la estructura de la base de datos del origen (tablas, columnas, restricciones, etc.) en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-169">Generate a SQL script that creates the source database's structure (tables, columns, constraints, etc.) in the destination database.</span></span>
- <span data-ttu-id="e8eaa-170">Generar un script SQL que inserta datos de la base de datos del origen en las tablas de la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-170">Generate a SQL script that inserts the source database's data into the tables in the destination database.</span></span>
- <span data-ttu-id="e8eaa-171">Ejecutar los scripts generados y la secuencia de comandos de concesión que ha creado, en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-171">Run the generated scripts, and the Grant script that you created, in the destination database.</span></span>

<span data-ttu-id="e8eaa-172">Abra la **propiedades del proyecto** ventana y seleccione el **Empaquetar/publicar SQL** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-172">Open the **Project Properties** window and select the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="e8eaa-173">Asegúrese de que **activo (versión)** o **versión** está seleccionado en el **configuración** lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-173">Make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="e8eaa-174">Haga clic en **habilitar esta página**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-174">Click **Enable this Page**.</span></span>

![Package_Publish_SQL_tab_Enable_This_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image4.png)

<span data-ttu-id="e8eaa-176">El **Empaquetar/publicar SQL** ficha normalmente está deshabilitada porque especifica un método de implementación heredada.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-176">The **Package/Publish SQL** tab is normally disabled because it specifies a legacy deployment method.</span></span> <span data-ttu-id="e8eaa-177">Para la mayoría de los escenarios, debe configurar la implementación de la base de datos en el **Publicar Web** asistente.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-177">For most scenarios, you should configure database deployment in the **Publish Web** wizard.</span></span> <span data-ttu-id="e8eaa-178">Migración de SQL Server Compact a SQL Server o SQL Server Express es un caso especial para el que este método es una buena elección.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-178">Migrating from SQL Server Compact to SQL Server or SQL Server Express is a special case for which this method is a good choice.</span></span>

<span data-ttu-id="e8eaa-179">Haga clic en **importar desde Web.config**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-179">Click **Import from Web.config**.</span></span>

![Selecting_Import_from_Web.config](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image5.png)

<span data-ttu-id="e8eaa-181">Visual Studio busca cadenas de conexión en el *Web.config* archivo, busca una para la base de datos de pertenencia y otra para la base de datos School y agrega una fila correspondiente a cada cadena de conexión en el **las entradas de la base de datos**  tabla.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-181">Visual Studio looks for connection strings in the *Web.config* file, finds one for the membership database and one for the School database, and adds a row corresponding to each connection string in the **Database Entries** table.</span></span> <span data-ttu-id="e8eaa-182">Las cadenas de conexión que se encuentra son para las bases de datos de SQL Server Compact existentes, y será el siguiente paso configurar cómo y dónde implementar estas bases de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-182">The connection strings it finds are for the existing SQL Server Compact databases, and your next step will be to configure how and where to deploy these databases.</span></span>

<span data-ttu-id="e8eaa-183">Especificar configuración de implementación de base de datos en el **detalles de la entrada de base de datos** sección más adelante el **las entradas de la base de datos** tabla.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-183">You enter database deployment settings in the **Database Entry Details** section below the **Database Entries** table.</span></span> <span data-ttu-id="e8eaa-184">La configuración se muestra en el **detalles de la entrada de base de datos** sección pertenecen a lo que la fila en la **entradas de la base de datos** tabla está seleccionada, tal como se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-184">The settings shown in the **Database Entry Details** section pertain to whichever row in the **Database Entries** table is selected, as shown in the following illustration.</span></span>

![Database_Entry_Details_section_of_Package_Publish_SQL_tab](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image6.png)

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="e8eaa-186">Configuración de la implementación de la base de datos de pertenencia</span><span class="sxs-lookup"><span data-stu-id="e8eaa-186">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="e8eaa-187">Seleccione el **DefaultConnection implementación** de fila en la **entradas de la base de datos** tabla con el fin de configurar las opciones que se aplican a la base de datos de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-187">Select the **DefaultConnection-Deployment** row in the **Database Entries** table in order to configure settings that apply to the membership database.</span></span>

<span data-ttu-id="e8eaa-188">En **cadena de conexión de base de datos de destino**, escriba una cadena de conexión que apunta a la nueva base de pertenencia de SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-188">In **Connection string for destination database**, enter a connection string that points to the new SQL Server Express membership database.</span></span> <span data-ttu-id="e8eaa-189">Puede obtener la cadena de conexión que necesita de **Explorador de servidores**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-189">You can get the connection string you need from **Server Explorer**.</span></span> <span data-ttu-id="e8eaa-190">En **Explorador de servidores**, expanda **las conexiones de datos** y seleccione la **aspnetTest** base de datos, a continuación, desde el **propiedades** copia de la ventana el **Cadena de conexión** valor.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-190">In **Server Explorer**, expand **Data Connections** and select the **aspnetTest** database, then from the **Properties** window copy the **Connection String** value.</span></span>

![aspnet_connection_string_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image7.png)

<span data-ttu-id="e8eaa-192">La misma cadena de conexión se reproduce aquí:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-192">The same connection string is reproduced here:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample2.cmd)]

<span data-ttu-id="e8eaa-193">Copie y pegue esta cadena de conexión en **cadena de conexión de base de datos de destino** en el **Empaquetar/publicar SQL** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-193">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="e8eaa-194">Asegúrese de que **extraer datos y/o esquema de una base de datos existente** está seleccionada.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-194">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span> <span data-ttu-id="e8eaa-195">Esto es lo que hace que las secuencias de comandos SQL se generan automáticamente y se ejecutan en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-195">This is what causes SQL scripts to be automatically generated and run in the destination database.</span></span>

<span data-ttu-id="e8eaa-196">El **cadena de conexión para la base de datos de origen** se extrae el valor de la *Web.config* archivo y apunta a la base de datos de SQL Server Compact de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-196">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="e8eaa-197">Se trata de la base de datos de origen que se usará para generar los scripts que se ejecutarán más adelante en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-197">This is the source database that will be used to generate the scripts that will run later in the destination database.</span></span> <span data-ttu-id="e8eaa-198">Puesto que desea implementar la versión de producción de la base de datos, cambie "aspnet-Dev.sdf" a "aspnet-Prod.sdf".</span><span class="sxs-lookup"><span data-stu-id="e8eaa-198">Since you want to deploy the production version of the database, change "aspnet-Dev.sdf" to "aspnet-Prod.sdf".</span></span>

<span data-ttu-id="e8eaa-199">Cambio **opciones de scripting de base de datos** de **solo esquema** a **esquema y los datos**, ya que van a copiar los datos (cuentas de usuario y roles), así como la estructura de base de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-199">Change **Database scripting options** from **Schema Only** to **Schema and data**, since you want to copy your data (user accounts and roles) as well as the database structure.</span></span>

<span data-ttu-id="e8eaa-200">Para configurar la implementación para ejecutar las secuencias de comandos de concesión que creó anteriormente, tendrá que agregarlos a la **secuencias de comandos de base de datos** sección.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-200">To configure deployment to run the grant scripts that you created earlier, you have to add them to the **Database Scripts** section.</span></span> <span data-ttu-id="e8eaa-201">Haga clic en **agregar Script**y en el **agregar secuencias de comandos SQL** cuadro de diálogo, navegue hasta la carpeta donde guardó la secuencia de comandos de concesión (ésta es la carpeta que contiene el archivo de solución).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-201">Click **Add Script**, and in the **Add SQL Scripts** dialog box, navigate to the folder where you stored the grant script (this is the folder that contains your solution file).</span></span> <span data-ttu-id="e8eaa-202">Seleccione el archivo denominado *Grant.sql*y haga clic en **abiertos**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-202">Select the file named *Grant.sql*, and click **Open**.</span></span>

<span data-ttu-id="e8eaa-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span></span>

<span data-ttu-id="e8eaa-204">La configuración de la **DefaultConnection implementación** de fila en **entradas de la base de datos** parecerse a la siguiente ilustración:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-204">The settings for the **DefaultConnection-Deployment** row in **Database Entries** now look like the following illustration:</span></span>

![Database_Entry_Details_for_DefaultConnection_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image10.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="e8eaa-206">Configuración de la implementación de la base de datos School</span><span class="sxs-lookup"><span data-stu-id="e8eaa-206">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="e8eaa-207">A continuación, seleccione la **SchoolContext implementación** de fila en la **entradas de la base de datos** tabla para configurar opciones de implementación para la base de datos School.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-207">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure deployment settings for the School database.</span></span>

<span data-ttu-id="e8eaa-208">Puede usar el mismo método que usó previamente para obtener la cadena de conexión para la base de datos nueva de SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-208">You can use the same method you used earlier to get the connection string for the new SQL Server Express database.</span></span> <span data-ttu-id="e8eaa-209">Copie esta cadena de conexión en **cadena de conexión de base de datos de destino** en el **Empaquetar/publicar SQL** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-209">Copy this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample3.cmd)]

<span data-ttu-id="e8eaa-210">Asegúrese de que **extraer datos y/o esquema de una base de datos existente** está seleccionada.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-210">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span>

<span data-ttu-id="e8eaa-211">El **cadena de conexión para la base de datos de origen** se extrae el valor de la *Web.config* archivo y apunta a la base de datos de SQL Server Compact de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-211">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="e8eaa-212">Cambie "Escuela Dev.sdf" a "Escuela-Prod.sdf" para implementar la versión de producción de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-212">Change "School-Dev.sdf" to "School-Prod.sdf" to deploy the production version of the database.</span></span> <span data-ttu-id="e8eaa-213">(Nunca se creó un archivo Prod.sdf School en la aplicación\_carpeta de datos, por lo que deberá copiar dicho archivo desde el entorno de prueba en la aplicación\_carpeta de datos en la carpeta del proyecto ContosoUniversity más adelante.)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-213">(You never created a School-Prod.sdf file in the App\_Data folder, so you'll copy that file from the test environment to the App\_Data folder in the ContosoUniversity project folder later.)</span></span>

<span data-ttu-id="e8eaa-214">Cambio **opciones de scripting de base de datos** a **esquema y los datos**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-214">Change **Database scripting options** to **Schema and data**.</span></span>

<span data-ttu-id="e8eaa-215">También puede ejecutar el script para conceder la lectura y permisos de escritura en esta base de datos a la identidad del grupo de aplicaciones, así que agregue el *Grant.sql* que escribió para la base de datos de pertenencia a los archivos de scripts.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-215">You also want to run the script to grant read and write permission for this database to the application pool identity, so add the *Grant.sql* script file as you did for the membership database.</span></span>

<span data-ttu-id="e8eaa-216">Cuando haya terminado, la configuración la **SchoolContext implementación** de fila en **entradas de la base de datos** el aspecto de la siguiente ilustración:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-216">When you're done, the settings for the **SchoolContext-Deployment** row in **Database Entries** look like the following illustration:</span></span>

![Database_Entry_Details_for_SchoolContext_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image11.png)

<span data-ttu-id="e8eaa-218">Guardar los cambios a la **Empaquetar/publicar SQL** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-218">Save the changes to the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="e8eaa-219">Copia la *School-Prod.sdf* de archivos desde el *c:\inetpub\wwwroot\ContosoUniversity\App\_datos* carpeta a la *aplicación\_datos* carpeta en el proyecto ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-219">Copy the *School-Prod.sdf* file from the *c:\inetpub\wwwroot\ContosoUniversity\App\_Data* folder to the *App\_Data* folder in the ContosoUniversity project.</span></span>

### <a name="specifying-transacted-mode-for-the-grant-script"></a><span data-ttu-id="e8eaa-220">Especificar el modo de transacción para la secuencia de comandos de concesión</span><span class="sxs-lookup"><span data-stu-id="e8eaa-220">Specifying Transacted Mode for the Grant Script</span></span>

<span data-ttu-id="e8eaa-221">El proceso de implementación genera scripts que implementan el esquema de base de datos y los datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-221">The deployment process generates scripts that deploy the database schema and data.</span></span> <span data-ttu-id="e8eaa-222">De forma predeterminada, estas secuencias de comandos se ejecutan en una transacción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-222">By default, these scripts run in a transaction.</span></span> <span data-ttu-id="e8eaa-223">Sin embargo, los scripts personalizados (por ejemplo, las secuencias de comandos de concesión) de forma predeterminada no se ejecutan en una transacción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-223">However, custom scripts (like the grant scripts) by default do not run in a transaction.</span></span> <span data-ttu-id="e8eaa-224">Si el proceso de implementación mezcla los modos de transacción, podría obtener un error de tiempo de espera cuando se ejecutan los scripts durante la implementación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-224">If the deployment process mixes transaction modes, you might get a timeout error when the scripts run during deployment.</span></span> <span data-ttu-id="e8eaa-225">En esta sección, edita el archivo de proyecto con el fin de configurar los scripts personalizados para que se ejecute en una transacción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-225">In this section, you edit the project file in order to configure the custom scripts to run in a transaction.</span></span>

<span data-ttu-id="e8eaa-226">En **el Explorador de soluciones**, haga clic en el **ContosoUniversity** de proyecto y seleccione **descargar el proyecto**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-226">In **Solution Explorer**, right-click the **ContosoUniversity** project and select **Unload Project**.</span></span>

![Unload_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image12.png)

<span data-ttu-id="e8eaa-228">A continuación, haga clic en el proyecto nuevo y seleccione **ContosoUniversity.csproj editar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-228">Then right-click the project again and select **Edit ContosoUniversity.csproj**.</span></span>

![Edit_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image13.png)

<span data-ttu-id="e8eaa-230">El editor de Visual Studio muestra el contenido XML del archivo del proyecto.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-230">The Visual Studio editor shows you the XML content of the project file.</span></span> <span data-ttu-id="e8eaa-231">Observe que hay varias `PropertyGroup` elementos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-231">Notice that there are several `PropertyGroup` elements.</span></span> <span data-ttu-id="e8eaa-232">(En la imagen, el contenido de la `PropertyGroup` elementos se han omitido.)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-232">(In the image, the contents of the `PropertyGroup` elements have been omitted.)</span></span>

![Ventana del editor de archivos de proyecto](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image15.png)

<span data-ttu-id="e8eaa-234">La primera de ellas, que no tiene ningún `Condition` atributo, se hace para valores que se aplican con independencia de la configuración de compilación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-234">The first one, which has no `Condition` attribute, is for settings that apply regardless of build configuration.</span></span> <span data-ttu-id="e8eaa-235">Una `PropertyGroup` elemento solo se aplica a la configuración de compilación de depuración (tenga en cuenta el `Condition` atributo), uno solo se aplica a la configuración de compilación de lanzamiento, y uno solo se aplica a la configuración de compilación de prueba.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-235">One `PropertyGroup` element applies only to the Debug build configuration (note the `Condition` attribute), one applies only to the Release build configuration, and one applies only to the Test build configuration.</span></span> <span data-ttu-id="e8eaa-236">En el `PropertyGroup` elemento para la configuración de compilación de lanzamiento, verá un `PublishDatabaseSettings` elemento que contiene los valores que especificó en el **Empaquetar/publicar SQL** ficha. Hay un `Object` elemento que corresponde a cada una de las secuencias de comandos de concesión (Observe las dos instancias especificadas de "Grant.sql").</span><span class="sxs-lookup"><span data-stu-id="e8eaa-236">Within the `PropertyGroup` element for the Release build configuration, you'll see a `PublishDatabaseSettings` element that contains the settings you entered on the **Package/Publish SQL** tab. There is an `Object` element that corresponds to each of the grant scripts you specified (notice the two instances of "Grant.sql").</span></span> <span data-ttu-id="e8eaa-237">De forma predeterminada, el `Transacted` atributo de la `Source` elemento por cada secuencia de comandos de concesión es `False`.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-237">By default, the `Transacted` attribute of the `Source` element for each grant script is `False`.</span></span>

![Transacted_false](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image16.png)

<span data-ttu-id="e8eaa-239">Cambie el valor de la `Transacted` atributo de la `Source` elemento `True`.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-239">Change the value of the `Transacted` attribute of the `Source` element to `True`.</span></span>

![Transacted_true](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image17.png)

<span data-ttu-id="e8eaa-241">Guarde y cierre el archivo de proyecto y, a continuación, haga clic en el proyecto en **el Explorador de soluciones** y seleccione **recargar el proyecto**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-241">Save and close the project file, and then right-click the project in **Solution Explorer** and select **Reload Project**.</span></span>

![Reload_project](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image18.png)

## <a name="setting-up-webconfig-transformations-for-the-connection-strings"></a><span data-ttu-id="e8eaa-243">Configuración de las transformaciones de Web.Config para las cadenas de conexión</span><span class="sxs-lookup"><span data-stu-id="e8eaa-243">Setting up Web.Config Transformations for the Connection Strings</span></span>

<span data-ttu-id="e8eaa-244">Las cadenas de la conexión para el nuevo SQL Express bases de datos que se escriben en el **Empaquetar/publicar SQL** pestaña solo se usan Web Deploy para actualizar la base de datos de destino durante la implementación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-244">The connection strings for the new SQL Express databases that you entered on the **Package/Publish SQL** tab are used by Web Deploy only for updating the destination database during deployment.</span></span> <span data-ttu-id="e8eaa-245">También tendrá que configurar *Web.config* transformaciones para que las cadenas de la conexión en implementado *Web.config* archivo, seleccione las nuevas bases de datos SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-245">You still have to set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file point to the new SQL Server Express databases.</span></span> <span data-ttu-id="e8eaa-246">(Cuando se usa el **Empaquetar/publicar SQL** ficha, no se puede configurar cadenas de conexión en el perfil de publicación.)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-246">(When you use the **Package/Publish SQL** tab, you can't configure connection strings in the publish profile.)</span></span>

<span data-ttu-id="e8eaa-247">Abra *Web.Test.config* y reemplace el `connectionStrings` elemento con la `connectionStrings` elemento en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-247">Open *Web.Test.config* and replace the `connectionStrings` element with the `connectionStrings` element in the following example.</span></span> <span data-ttu-id="e8eaa-248">(Asegúrese de que solo copiar el elemento connectionStrings, no en el código adyacente que se muestra aquí para proporcionar un contexto.)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-248">(Make sure you only copy the connectionStrings element, not the surrounding code that is shown here to provide context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample4.xml?highlight=2-11)]

<span data-ttu-id="e8eaa-249">Este código hace que la `connectionString` y `providerName` atributos de cada `add` elemento se reemplacen en implementado *Web.config* archivo.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-249">This code causes the `connectionString` and `providerName` attributes of each `add` element to be replaced in the deployed *Web.config* file.</span></span> <span data-ttu-id="e8eaa-250">Estas cadenas de conexión no son idénticas a los que escribió en el **Empaquetar/publicar SQL** ficha. El valor "MultipleActiveResultSets = True" se ha agregado a ellas porque es necesario para Entity Framework y los proveedores universales.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-250">These connection strings are not identical to the ones you entered in the **Package/Publish SQL** tab. The setting "MultipleActiveResultSets=True" has been added to them because it's required for the Entity Framework and the Universal Providers.</span></span>

## <a name="installing-sql-server-compact"></a><span data-ttu-id="e8eaa-251">Instalar SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="e8eaa-251">Installing SQL Server Compact</span></span>

<span data-ttu-id="e8eaa-252">El paquete de SqlServerCompact NuGet proporciona la base de datos de SQL Server Compact ensamblados de motor para la aplicación de la Universidad de Contoso.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-252">The SqlServerCompact NuGet package provides the SQL Server Compact database engine assemblies for the Contoso University application.</span></span> <span data-ttu-id="e8eaa-253">Pero ahora no es la aplicación pero Web Deploy que debe tener permiso para leer las bases de datos de SQL Server Compact, con el fin de crear scripts para que se ejecute en las bases de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-253">But now it is not the application but Web Deploy that must be able to read the SQL Server Compact databases, in order to create scripts to run in the SQL Server databases.</span></span> <span data-ttu-id="e8eaa-254">Para habilitar Web Deploy leer las bases de datos de SQL Server Compact, instalar SQL Server Compact en el equipo de desarrollo con el siguiente vínculo: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-254">To enable Web Deploy to read SQL Server Compact databases, install SQL Server Compact on the development computer by using the following link: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span></span>

## <a name="deploying-to-the-test-environment"></a><span data-ttu-id="e8eaa-255">Implementación en el entorno de prueba</span><span class="sxs-lookup"><span data-stu-id="e8eaa-255">Deploying to the Test Environment</span></span>

<span data-ttu-id="e8eaa-256">Para publicar en el entorno de prueba, tendrá que crear un perfil de publicación que está configurado para usar el **Empaquetar/publicar SQL** ficha para base de datos de publicación en lugar de la configuración de base de datos de perfil de publicación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-256">In order to publish to the Test environment, you have to create a publish profile that is configured to use the **Package/Publish SQL** tab for database publishing instead of the publish profile database settings.</span></span>

<span data-ttu-id="e8eaa-257">En primer lugar, elimine el perfil de prueba existente.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-257">First, delete the existing Test profile.</span></span>

<span data-ttu-id="e8eaa-258">En **el Explorador de soluciones**, haga clic en el proyecto ContosoUniversity y haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-258">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="e8eaa-259">Seleccione el **perfil** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-259">Select the **Profile** tab.</span></span>

<span data-ttu-id="e8eaa-260">Haga clic en **administrar perfiles de**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-260">Click **Manage Profiles**.</span></span>

<span data-ttu-id="e8eaa-261">Seleccione **prueba**, haga clic en **quitar**y, a continuación, haga clic en **cerrar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-261">Select **Test**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="e8eaa-262">Cerrar la **Publicar Web** Asistente para guardar los cambios.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-262">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="e8eaa-263">A continuación, crear un nuevo perfil de prueba y usarlo para publicar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-263">Next, create a new Test profile and use it to publish the project.</span></span>

<span data-ttu-id="e8eaa-264">En **el Explorador de soluciones**, haga clic en el proyecto ContosoUniversity y haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-264">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="e8eaa-265">Seleccione el **perfil** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-265">Select the **Profile** tab.</span></span>

<span data-ttu-id="e8eaa-266">Seleccione **&lt;nuevo... &gt;** en la lista desplegable lista y, escriba "Test" como el nombre del perfil.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-266">Select **&lt;New...&gt;** from the drop-down list, and enter "Test" as the profile name.</span></span>

<span data-ttu-id="e8eaa-267">En el **dirección URL del servicio** cuadro, escriba *localhost*.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-267">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="e8eaa-268">En el **sitio o aplicación** cuadro, escriba *sitio Web predeterminado/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-268">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="e8eaa-269">En el **dirección URL de destino** cuadro, escriba `http://localhost/ContosoUniversity/`.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-269">In the **Destination URL** box, enter `http://localhost/ContosoUniversity/`.</span></span>

<span data-ttu-id="e8eaa-270">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-270">Click **Next**.</span></span>

<span data-ttu-id="e8eaa-271">El **configuración** ficha le advierte que el **Empaquetar/publicar SQL** ficha se ha configurado, y le da la oportunidad de invalidación, haga clic en habilitar la base de datos nuevas mejoras de publicación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-271">The **Settings** tab warns you that the **Package/Publish SQL** tab has been configured, and it gives you an opportunity to override them by clicking enable the new database publishing improvements.</span></span> <span data-ttu-id="e8eaa-272">Para esta implementación que no desea reemplazar el **Empaquetar/publicar SQL** pestaña Configuración, por lo que basta con hacer clic **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-272">For this deployment you don't want to override the **Package/Publish SQL** tab settings, so just click **Next**.</span></span>

![Publish_Web_wizard_Settings_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image19.png)

<span data-ttu-id="e8eaa-274">Un mensaje en el **vista previa** ficha indica que **ninguna base de datos se han seleccionado para la publicación**, pero esto sólo significa que la publicación de la base de datos no está configurada en el perfil de publicación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-274">A message on the **Preview** tab indicates that **No databases are selected to publish**, but this only means that database publishing is not configured in the publish profile.</span></span>

<span data-ttu-id="e8eaa-275">Haga clic en **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-275">Click **Publish**.</span></span>

![Publish_Web_wizard_Preview_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image20.png)

<span data-ttu-id="e8eaa-277">Visual Studio implementa la aplicación y abre el explorador a la página principal del sitio en el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-277">Visual Studio deploys the application and opens the browser to the home page of the site in the test environment.</span></span> <span data-ttu-id="e8eaa-278">Ejecute la página de instructores para ver que muestra los mismos datos que vio anteriormente.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-278">Run the Instructors page to see that it displays the same data that you saw earlier.</span></span> <span data-ttu-id="e8eaa-279">Ejecute el **agregar estudiantes** página, agregue un nuevo alumno y, a continuación, ver el nuevo alumno en el **estudiantes** página.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-279">Run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="e8eaa-280">Esto comprueba que el se puede actualizar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-280">This verifies that the you can update the database.</span></span> <span data-ttu-id="e8eaa-281">Seleccione el **actualización créditos** página (que necesite iniciar sesión) para comprobar que se implementó la base de datos de pertenencia y tiene acceso a él.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-281">Select the **Update Credits** page (you'll need to log in) to verify that the membership database was deployed and you have access to it.</span></span>

## <a name="creating-a-sql-server-database-for-the-production-environment"></a><span data-ttu-id="e8eaa-282">Crear una base de datos SQL Server para el entorno de producción</span><span class="sxs-lookup"><span data-stu-id="e8eaa-282">Creating a SQL Server Database for the Production Environment</span></span>

<span data-ttu-id="e8eaa-283">Ahora que se han implementado en el entorno de prueba, está listo para configurar la implementación de producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-283">Now that you've deployed to the test environment, you're ready to set up deployment to production.</span></span> <span data-ttu-id="e8eaa-284">Comenzar como hizo en el entorno de prueba mediante la creación de una base de datos para implementar en.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-284">You begin as you did for the test environment, by creating a database to deploy to.</span></span> <span data-ttu-id="e8eaa-285">Tal y como recuerda la información general, el plan de hospedaje Cytanium Lite solo permite una sola base de datos de SQL Server, por lo que vamos a configurar una base de datos, no dos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-285">As you recall from the Overview, the Cytanium Lite hosting plan only allows a single SQL Server database, so you will set up only one database, not two.</span></span> <span data-ttu-id="e8eaa-286">Todas las tablas y los datos de la pertenencia y las bases de datos School SQL Server Compact se implementará en una base de datos de SQL Server en producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-286">All of the tables and data from the membership and School SQL Server Compact databases will be deployed into one SQL Server database in production.</span></span>

<span data-ttu-id="e8eaa-287">Vaya al panel de control Cytanium en [ http://panel.cytanium.com ](http://panel.cytanium.com). Mantenga el mouse sobre **bases de datos** y, a continuación, haga clic en **SQL Server 2008**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-287">Go to the Cytanium control panel at [http://panel.cytanium.com](http://panel.cytanium.com). Hold the mouse over **Databases** and then click **SQL Server 2008**.</span></span>

<span data-ttu-id="e8eaa-288">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-288">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span></span>

<span data-ttu-id="e8eaa-289">En el **SQL Server 2008** página, haga clic en **Create Database**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-289">In the **SQL Server 2008** page, click **Create Database**.</span></span>

<span data-ttu-id="e8eaa-290">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-290">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span></span>

<span data-ttu-id="e8eaa-291">Nombre de la base de datos "Escuela" y haga clic en **guardar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-291">Name the database "School" and click **Save**.</span></span> <span data-ttu-id="e8eaa-292">(La página automáticamente agrega el prefijo "contosou", por lo que el nombre efectivo será "contosouSchool").</span><span class="sxs-lookup"><span data-stu-id="e8eaa-292">(The page automatically adds the prefix "contosou", so the effective name will be "contosouSchool".)</span></span>

<span data-ttu-id="e8eaa-293">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-293">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span></span>

<span data-ttu-id="e8eaa-294">En la misma página, haga clic en **Create User**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-294">On the same page, click **Create User**.</span></span> <span data-ttu-id="e8eaa-295">En servidores de Cytanium, en lugar de usar seguridad integrada de Windows y dejar que la identidad del grupo de aplicaciones a abrir la base de datos, creará un usuario que tenga autoridad para abrir la base de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-295">On Cytanium's servers, rather than using integrated Windows security and letting the application pool identity open your database, you'll create a user that has authority to open your database.</span></span> <span data-ttu-id="e8eaa-296">Va a agregar las credenciales del usuario a las cadenas de conexión que van en la producción *Web.config* archivo.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-296">You'll add the user's credentials to the connection strings that go in the production *Web.config* file.</span></span> <span data-ttu-id="e8eaa-297">En este paso creará esas credenciales.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-297">In this step you create those credentials.</span></span>

<span data-ttu-id="e8eaa-298">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-298">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span></span>

<span data-ttu-id="e8eaa-299">Rellene los campos obligatorios en el **propiedades de usuario de SQL** página:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-299">Fill in the required fields in the **SQL User Properties** page:</span></span>

- <span data-ttu-id="e8eaa-300">Escriba "ContosoUniversityUser" como el nombre.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-300">Enter "ContosoUniversityUser" as the name.</span></span>
- <span data-ttu-id="e8eaa-301">Escriba una contraseña.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-301">Enter a password.</span></span>
- <span data-ttu-id="e8eaa-302">Seleccione **contosouSchool** como la base de datos de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-302">Select **contosouSchool** as the default database.</span></span>
- <span data-ttu-id="e8eaa-303">Seleccione el **contosouSchool** casilla de verificación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-303">Select the **contosouSchool** check box.</span></span>

<span data-ttu-id="e8eaa-304">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-304">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span></span>

## <a name="configuring-database-deployment-for-the-production-environment"></a><span data-ttu-id="e8eaa-305">La configuración de implementación de base de datos para el entorno de producción</span><span class="sxs-lookup"><span data-stu-id="e8eaa-305">Configuring Database Deployment for the Production Environment</span></span>

<span data-ttu-id="e8eaa-306">Ahora está listo para configurar la configuración de implementación de base de datos en el **Empaquetar/publicar SQL** ficha, como lo hizo anteriormente para el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-306">Now you're ready to set up database deployment settings in the **Package/Publish SQL** tab, as you did earlier for the test environment.</span></span>

<span data-ttu-id="e8eaa-307">Abra la **propiedades del proyecto** ventana, seleccione la **Empaquetar/publicar SQL** pestaña y asegúrese de que **activo (versión)** o **versión** es seleccionado en el **configuración** lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-307">Open the **Project Properties** window, select the **Package/Publish SQL** tab, and make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="e8eaa-308">Al configurar valores de implementación para cada base de datos, la principal diferencia entre lo que hacer para entornos de producción y de prueba está en cómo configurar cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-308">When you configure deployment settings for each database, the key difference between what you do for production and test environments is in how you configure connection strings.</span></span> <span data-ttu-id="e8eaa-309">El entorno de prueba que ha especificado las cadenas de conexión de base de datos de destino diferente, pero para el entorno de producción, la cadena de conexión de destino será el mismo para ambas bases de datos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-309">For the test environment you entered different destination database connection strings, but for the production environment the destination connection string will be the same for both databases.</span></span> <span data-ttu-id="e8eaa-310">Esto es porque va a implementar ambas bases de datos en una base de datos de producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-310">This is because you are deploying both databases to one database in production.</span></span>

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="e8eaa-311">Configuración de la implementación de la base de datos de pertenencia</span><span class="sxs-lookup"><span data-stu-id="e8eaa-311">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="e8eaa-312">Para configurar los valores que se aplican a la base de datos de pertenencia, seleccione la **DefaultConnection implementación** de fila en la **entradas de la base de datos** tabla.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-312">To configure settings that apply to the membership database, select the **DefaultConnection-Deployment** row in the **Database Entries** table.</span></span>

<span data-ttu-id="e8eaa-313">En **cadena de conexión de base de datos de destino**, escriba una cadena de conexión que apunta a la base de datos de SQL Server de producción nueva que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-313">In **Connection string for destination database**, enter a connection string that points to the new production SQL Server database that you just created.</span></span> <span data-ttu-id="e8eaa-314">Puede obtener la cadena de conexión desde el correo electrónico de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-314">You can get the connection string from your welcome email.</span></span> <span data-ttu-id="e8eaa-315">La parte correspondiente del correo electrónico contiene la cadena de conexión de ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-315">The relevant part of the email contains the following sample connection string:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample5.cmd)]

<span data-ttu-id="e8eaa-316">Después de reemplazar las tres variables, la cadena de conexión que necesita es similar en este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-316">After you replace the three variables, the connection string you need looks like this example:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample6.cmd)]

<span data-ttu-id="e8eaa-317">Copie y pegue esta cadena de conexión en **cadena de conexión de base de datos de destino** en el **Empaquetar/publicar SQL** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-317">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="e8eaa-318">Asegúrese de que **extraer datos y/o esquema de una base de datos** es aún seleccionado y que **opciones de scripting de base de datos** sigue siendo **esquema y los datos**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-318">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="e8eaa-319">En el **secuencias de comandos de base de datos** cuadro, desactive la casilla de verificación situada junto a la secuencia de comandos Grant.sql.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-319">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

![Disable_Grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image31.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="e8eaa-321">Configuración de la implementación de la base de datos School</span><span class="sxs-lookup"><span data-stu-id="e8eaa-321">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="e8eaa-322">A continuación, seleccione la **SchoolContext implementación** de fila en la **entradas de la base de datos** tabla para configurar las opciones de base de datos School.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-322">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure the School database settings.</span></span>

<span data-ttu-id="e8eaa-323">Copie la misma cadena de conexión en **cadena de conexión de base de datos de destino** que ha copiado en ese campo de la base de datos de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-323">Copy the same connection string into **Connection string for destination database** that you copied into that field for the membership database.</span></span>

<span data-ttu-id="e8eaa-324">Asegúrese de que **extraer datos y/o esquema de una base de datos** es aún seleccionado y que **opciones de scripting de base de datos** sigue siendo **esquema y los datos**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-324">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="e8eaa-325">En el **secuencias de comandos de base de datos** cuadro, desactive la casilla de verificación situada junto a la secuencia de comandos Grant.sql.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-325">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

<span data-ttu-id="e8eaa-326">Guardar los cambios a la **Empaquetar/publicar SQL** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-326">Save the changes to the **Package/Publish SQL** tab.</span></span>

## <a name="setting-up-webconfig-transforms-for-the-connection-strings-to-production-databases"></a><span data-ttu-id="e8eaa-327">Configuración de Web.Config se transforma para las cadenas de conexión a bases de datos de producción</span><span class="sxs-lookup"><span data-stu-id="e8eaa-327">Setting Up Web.Config Transforms for the Connection Strings to Production Databases</span></span>

<span data-ttu-id="e8eaa-328">A continuación, configure las *Web.config* transformaciones para que las cadenas de la conexión en implementado *Web.config* archivo para que apunte a la nueva base de datos de producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-328">Next, you'll set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file to point to the new production database.</span></span> <span data-ttu-id="e8eaa-329">La cadena de conexión que ha especificado en el **Empaquetar/publicar SQL** ficha de Web Deploy usar es el mismo que la aplicación debe usar, excepto por la adición de la `MultipleResultSets` opción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-329">The connection string that you entered on the **Package/Publish SQL** tab for Web Deploy to use is the same as the one the application needs to use, except for the addition of the `MultipleResultSets` option.</span></span>

<span data-ttu-id="e8eaa-330">Abra *Web.Production.config* y reemplace el `connectionStrings` elemento con un `connectionStrings` elemento que es similar al ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-330">Open *Web.Production.config* and replace the `connectionStrings` element with a `connectionStrings` element that looks like the following example.</span></span> <span data-ttu-id="e8eaa-331">(Copiar solo la `connectionStrings` elemento, no las etiquetas adyacentes que se proporcionan para mostrar el contexto.)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-331">(Only copy the `connectionStrings` element, not the surrounding tags that are provided to show the context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample7.xml?highlight=2-11)]

<span data-ttu-id="e8eaa-332">A veces puede ver consejos que indica si debe siempre cifrar cadenas de conexión en el *Web.config* archivo.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-332">You sometimes see advice that tells you to always encrypt connection strings in the *Web.config* file.</span></span> <span data-ttu-id="e8eaa-333">Esto podría ser adecuado si estuviera implementando a servidores de red de su empresa.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-333">This might be appropriate if you were deploying to servers on your own company's network.</span></span> <span data-ttu-id="e8eaa-334">Cuando va a implementar en un entorno de hospedaje compartido, sin embargo, está confiando en las prácticas de seguridad del proveedor de hospedaje, y no es necesario ni práctico cifrar las cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-334">When you are deploying to a shared hosting environment, though, you're trusting the security practices of the hosting provider, and it's not necessary or practical to encrypt the connection strings.</span></span>

## <a name="deploying-to-the-production-environment"></a><span data-ttu-id="e8eaa-335">Implementación en el entorno de producción</span><span class="sxs-lookup"><span data-stu-id="e8eaa-335">Deploying to the Production Environment</span></span>

<span data-ttu-id="e8eaa-336">Ahora está listo para implementarse en producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-336">Now you're ready to deploy to production.</span></span> <span data-ttu-id="e8eaa-337">Web Deploy leerá las bases de datos de SQL Server Compact en el proyecto *aplicación\_datos* carpeta y vuelva a crear todas sus tablas y datos en la base de datos de SQL Server de producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-337">Web Deploy will read the SQL Server Compact databases in your project's *App\_Data* folder and re-create all of their tables and data in the production SQL Server database.</span></span> <span data-ttu-id="e8eaa-338">Para poder publicar mediante la **Empaquetar/Publicar Web** configuración de las tabulaciones, tendrá que crear un nuevo perfil de publicación para la producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-338">In order to publish by using the **Package/Publish Web** tab settings, you have to create a new publish profile for production.</span></span>

<span data-ttu-id="e8eaa-339">En primer lugar, debe eliminar el perfil de producción existente como lo hizo anteriormente el perfil de prueba.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-339">First, delete the existing Production profile as you did the Test profile earlier.</span></span>

<span data-ttu-id="e8eaa-340">En **el Explorador de soluciones**, haga clic en el proyecto ContosoUniversity y haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-340">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="e8eaa-341">Seleccione el **perfil** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-341">Select the **Profile** tab.</span></span>

<span data-ttu-id="e8eaa-342">Haga clic en **administrar perfiles de**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-342">Click **Manage Profiles**.</span></span>

<span data-ttu-id="e8eaa-343">Seleccione **producción**, haga clic en **quitar**y, a continuación, haga clic en **cerrar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-343">Select **Production**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="e8eaa-344">Cerrar la **Publicar Web** Asistente para guardar los cambios.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-344">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="e8eaa-345">A continuación, crear un nuevo perfil de producción y usarla para publicar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-345">Next, create a new Production profile and use it to publish the project.</span></span>

<span data-ttu-id="e8eaa-346">En **el Explorador de soluciones**, haga clic en el proyecto ContosoUniversity y haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-346">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="e8eaa-347">Seleccione el **perfil** ficha.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-347">Select the **Profile** tab.</span></span>

<span data-ttu-id="e8eaa-348">Haga clic en **importación**y seleccione el archivo .publishsettings que descargó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-348">Click **Import**, and select the .publishsettings file that you downloaded earlier.</span></span>

<span data-ttu-id="e8eaa-349">En el **conexión** , modifique la **dirección URL de destino** a la URL correcta temporal, que en este ejemplo es http://contosouniversity.com.vserver01.cytanium.com.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-349">On the **Connection** tab, change the **Destination URL** to the correct temporary URL, which in this example is http://contosouniversity.com.vserver01.cytanium.com.</span></span>

<span data-ttu-id="e8eaa-350">Cambie el nombre del perfil de producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-350">Rename the profile to Production.</span></span> <span data-ttu-id="e8eaa-351">(Seleccione la **perfil** ficha y haga clic en **administrar perfiles** hacerlo).</span><span class="sxs-lookup"><span data-stu-id="e8eaa-351">(Select the **Profile** tab and click **Manage Profiles** to do that).</span></span>

<span data-ttu-id="e8eaa-352">Cerrar la **Publicar Web** Asistente para guardar los cambios.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-352">Close the **Publish Web** wizard to save your changes.</span></span>

<span data-ttu-id="e8eaa-353">En una aplicación real en el que se está actualizando la base de datos en producción, haría lo ahora dos pasos adicionales antes de publicar:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-353">In a real application in which the database was being updated in production, you would do two additional steps now before you publish:</span></span>

1. <span data-ttu-id="e8eaa-354">Cargar *aplicación\_offline.htm*, tal y como se muestra en el [implementarla en el entorno de producción](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-354">Upload *app\_offline.htm*, as shown in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial.</span></span>
2. <span data-ttu-id="e8eaa-355">Use la **el Administrador de archivos** característica del panel de control Cytanium para copiar el *aspnet Prod.sdf* y *School-Prod.sdf* archivos desde el sitio de producción a la *Aplicación\_datos* carpeta del proyecto ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-355">Use the **File Manager** feature of the Cytanium control panel to copy the *aspnet-Prod.sdf* and *School-Prod.sdf* files from the production site to the *App\_Data* folder of the ContosoUniversity project.</span></span> <span data-ttu-id="e8eaa-356">Esto garantiza que los datos que se va a implementar la nueva base de datos de SQL Server incluyen las actualizaciones más recientes realizadas por el sitio Web de producción.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-356">This ensures that the data you're deploying to the new SQL Server database includes the latest updates made by your production website.</span></span>

<span data-ttu-id="e8eaa-357">En el **Web uno haga clic en publicar** barra de herramientas, asegúrese de que el **producción** perfil está seleccionada y, a continuación, haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-357">In the **Web One Click Publish** toolbar, make sure that the **Production** profile is selected, and then click **Publish**.</span></span>

<span data-ttu-id="e8eaa-358">Si cargó <em>aplicación\_offline.htm</em> antes de la publicación, deberá utilizar el <strong>el Administrador de archivos</strong> utilidad en el panel de control de Cytanium eliminar <em>aplicación\_sin conexión.</em> htm antes de probar.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-358">If you uploaded <em>app\_offline.htm</em> before publishing, you have to use the <strong>File Manager</strong> utility in the Cytanium control panel to delete <em>app\_offline.</em>htm before you test.</span></span> <span data-ttu-id="e8eaa-359">También puede al mismo tiempo eliminar el <em>.sdf</em> archivos desde el <em>aplicación\_datos</em> carpeta.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-359">You can also at the same time delete the <em>.sdf</em> files from the <em>App\_Data</em> folder.</span></span>

<span data-ttu-id="e8eaa-360">Ahora puede abrir un explorador y vaya a la dirección URL de su sitio público para probar la aplicación de la misma manera que después de implementar en el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-360">You can now open a browser and go to the URL of your public site to test the application the same way you did after deploying to the test environment.</span></span>

## <a name="switching-to-sql-server-express-localdb-in-development"></a><span data-ttu-id="e8eaa-361">Cambiar a SQL Server Express LocalDB en el desarrollo</span><span class="sxs-lookup"><span data-stu-id="e8eaa-361">Switching to SQL Server Express LocalDB in Development</span></span>

<span data-ttu-id="e8eaa-362">Tal y como se ha explicado en la información general, es suele ser preferible utilizar el mismo motor de base de datos en desarrollo que use en producción y pruebas.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-362">As was explained in the Overview, it's generally best to use the same database engine in development that you use in test and production.</span></span> <span data-ttu-id="e8eaa-363">(Recuerde que la ventaja de utilizar SQL Server Express en el desarrollo es que la base de datos funcionan igual en los entornos de desarrollo, prueba y producción). En esta sección podrá configurar el proyecto ContosoUniversity para usar SQL Server Express LocalDB cuando se ejecuta la aplicación desde Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-363">(Remember that the advantage to using SQL Server Express in development is that the database will work the same in your development, test, and production environments.) In this section you'll set up the ContosoUniversity project to use SQL Server Express LocalDB when you run the application from Visual Studio.</span></span>

<span data-ttu-id="e8eaa-364">La manera más sencilla de realizar esta migración es dejar que Code First y el sistema de pertenencia a crear las nuevas bases de datos de desarrollo para usted.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-364">The simplest way to perform this migration is to let Code First and the membership system create both new development databases for you.</span></span> <span data-ttu-id="e8eaa-365">Con este método para migrar requiere tres pasos:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-365">Using this method to migrate requires three steps:</span></span>

1. <span data-ttu-id="e8eaa-366">Cambiar las cadenas de conexión para especificar nuevas bases de datos de SQL Express LocalDB.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-366">Change the connection strings to specify new SQL Express LocalDB databases.</span></span>
2. <span data-ttu-id="e8eaa-367">Ejecute la herramienta de administración de sitios Web para crear un usuario de administrador.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-367">Run the Web Site Administration Tool to create an administrator user.</span></span> <span data-ttu-id="e8eaa-368">Esto crea la base de datos de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-368">This creates the membership database.</span></span>
3. <span data-ttu-id="e8eaa-369">Use el comando de actualización de base de datos de migraciones de Code First para crear e inicializar la base de datos de aplicación.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-369">Use the Code First Migrations update-database command to create and seed the application database.</span></span>

### <a name="updating-connection-strings-in-the-webconfig-file"></a><span data-ttu-id="e8eaa-370">Actualizar las cadenas de conexión en el archivo Web.config</span><span class="sxs-lookup"><span data-stu-id="e8eaa-370">Updating Connection Strings in the Web.config file</span></span>

<span data-ttu-id="e8eaa-371">Abra la *Web.config* archivo y reemplazar el `connectionStrings` elemento con el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-371">Open the *Web.config* file and replace the `connectionStrings` element with the following code:</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample8.xml)]

### <a name="creating-the-membership-database"></a><span data-ttu-id="e8eaa-372">Crear la base de datos de pertenencia</span><span class="sxs-lookup"><span data-stu-id="e8eaa-372">Creating the Membership Database</span></span>

<span data-ttu-id="e8eaa-373">En **el Explorador de soluciones**, seleccione el proyecto ContosoUniversity y, a continuación, haga clic en **de configuración de ASP.NET** en el **proyecto** menú.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-373">In **Solution Explorer**, select the ContosoUniversity project, and then click **ASP.NET Configuration** in the **Project** menu.</span></span>

<span data-ttu-id="e8eaa-374">Seleccione la ficha seguridad.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-374">Select the Security tab.</span></span>

<span data-ttu-id="e8eaa-375">Haga clic en **crear o administrar funciones**y, a continuación, cree un **administrador** rol.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-375">Click **Create or Manage Roles**, and then create an **Administrator** role.</span></span>

<span data-ttu-id="e8eaa-376">Volver a la ficha seguridad.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-376">Return to the Security tab.</span></span>

<span data-ttu-id="e8eaa-377">Haga clic en **crear usuario**y, a continuación, seleccione la **administrador** casilla de verificación y crea un usuario denominado administrador.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-377">Click **Create user**, and then select the **Administrator** check box and create a user named admin.</span></span>

<span data-ttu-id="e8eaa-378">Cerrar la **herramienta de administración de sitios Web**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-378">Close the **Web Site Administration Tool**.</span></span>

### <a name="creating-the-school-database"></a><span data-ttu-id="e8eaa-379">Crear la base de datos School</span><span class="sxs-lookup"><span data-stu-id="e8eaa-379">Creating the School Database</span></span>

<span data-ttu-id="e8eaa-380">Abra la ventana de la consola de administrador de paquetes.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-380">Open the Package Manager Console window.</span></span>

<span data-ttu-id="e8eaa-381">En el **proyecto predeterminado** lista desplegable, seleccione el proyecto ContosoUniversity.DAL.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-381">In the **Default project** drop-down list, select the ContosoUniversity.DAL project.</span></span>

<span data-ttu-id="e8eaa-382">Escriba el comando siguiente:</span><span class="sxs-lookup"><span data-stu-id="e8eaa-382">Enter the following command:</span></span>

[!code-powershell[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample9.ps1)]

<span data-ttu-id="e8eaa-383">Migraciones de Code First se aplica a la migración inicial que crea la base de datos y, a continuación, se aplica la migración de AddBirthDate, a continuación, se ejecuta el método de inicialización.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-383">Code First Migrations applies the Initial migration that creates the database and then applies the AddBirthDate migration, then it runs the Seed method.</span></span>

<span data-ttu-id="e8eaa-384">Ejecute el sitio Web presionando F5 de Control.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-384">Run the site by pressing Control-F5.</span></span> <span data-ttu-id="e8eaa-385">Igual que para los entornos de prueba y producción, ejecute el **agregar estudiantes** página, agregue un nuevo alumno y, a continuación, ver el nuevo alumno en el **estudiantes** página.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-385">As you did for the test and production environments, run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="e8eaa-386">Esto comprueba que la base de datos School creado e inicializado y que ha leído y acceso de escritura a él.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-386">This verifies that the School database was created and initialized and that you have read and write access to it.</span></span>

<span data-ttu-id="e8eaa-387">Seleccione el **actualización créditos** página e inicie sesión para comprobar que se implementó la base de datos de pertenencia y que tiene acceso a él.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-387">Select the **Update Credits** page and log in to verify that the membership database was deployed and that you have access to it.</span></span> <span data-ttu-id="e8eaa-388">Si no se ha migrado las cuentas de usuario, cree una cuenta de administrador y, a continuación, seleccione la **actualización créditos** página para comprobar que funciona.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-388">If you did not migrate your user accounts, create an administrator account and then select the **Update Credits** page to verify that it works.</span></span>

## <a name="cleaning-up-sql-server-compact-files"></a><span data-ttu-id="e8eaa-389">Limpiar los archivos SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="e8eaa-389">Cleaning Up SQL Server Compact Files</span></span>

<span data-ttu-id="e8eaa-390">Ya no necesita los archivos y los paquetes de NuGet que se incluyeron para admitir SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-390">You no longer need files and NuGet packages that were included to support SQL Server Compact.</span></span> <span data-ttu-id="e8eaa-391">Si desea (este paso no es necesario), puede limpiar los archivos innecesarios y referencias.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-391">If you want (this step is not required), you can clean up unneeded files and references.</span></span>

<span data-ttu-id="e8eaa-392">En **el Explorador de soluciones**, eliminar el *.sdf* archivos desde el *aplicación\_datos* carpeta y el *amd64* y *x86* carpetas desde la *bin* carpeta.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-392">In **Solution Explorer**, delete the *.sdf* files from the *App\_Data* folder and the *amd64* and *x86* folders from the *bin* folder.</span></span>

<span data-ttu-id="e8eaa-393">En **el Explorador de soluciones**, haga clic en la solución (no de uno de los proyectos) y, a continuación, haga clic en **administrar paquetes de NuGet para la solución**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-393">In **Solution Explorer**, right-click the solution (not one of the projects), and then click **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="e8eaa-394">En el panel izquierdo de la **administrar paquetes de NuGet** cuadro de diálogo, seleccione **paquetes instalados**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-394">In the left pane of the **Manage NuGet Packages** dialog box, select **Installed packages**.</span></span>

<span data-ttu-id="e8eaa-395">Seleccione el **EntityFramework.SqlServerCompact** del paquete y haga clic en **administrar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-395">Select the **EntityFramework.SqlServerCompact** package and click **Manage**.</span></span>

<span data-ttu-id="e8eaa-396">En el **seleccionar proyectos** cuadro de diálogo, se seleccionan ambos proyectos.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-396">In the **Select Projects** dialog box, both projects are selected.</span></span> <span data-ttu-id="e8eaa-397">Para desinstalar el paquete en los dos proyectos, desactive las casillas de verificación y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-397">To uninstall the package in both projects, clear both check boxes, then click **OK**.</span></span>

<span data-ttu-id="e8eaa-398">En el cuadro de diálogo que le pregunta si desea desinstalar los paquetes dependientes también, haga clic en no.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-398">In the dialog box that asks if you want to uninstall the dependent packages also, click No.</span></span> <span data-ttu-id="e8eaa-399">Uno de ellos es el paquete de Entity Framework que se debe mantener.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-399">One of these is the Entity Framework package that you have to keep.</span></span>

<span data-ttu-id="e8eaa-400">Siga el mismo procedimiento para desinstalar el **SqlServerCompact** paquete.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-400">Follow the same procedure to uninstall the **SqlServerCompact** package.</span></span> <span data-ttu-id="e8eaa-401">(Los paquetes deben desinstalarse en este orden porque la **EntityFramework.SqlServerCompact** paquete depende de la **SqlServerCompact** paquete.)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-401">(The packages must be uninstalled in this order because the **EntityFramework.SqlServerCompact** package depends on the **SqlServerCompact** package.)</span></span>

<span data-ttu-id="e8eaa-402">Ahora ha migrado correctamente a SQL Server Express y completa de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-402">You have now successfully migrated to SQL Server Express and full SQL Server.</span></span> <span data-ttu-id="e8eaa-403">En el siguiente tutorial realizará otro cambio de base de datos y aprenderá a implementar los cambios de la base de datos cuando las bases de datos de prueba y producción usan SQL Server Express y completa de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e8eaa-403">In the next tutorial you'll make another database change, and you'll see how to deploy database changes when your test and production databases use SQL Server Express and full SQL Server.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e8eaa-404">[Anterior](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
> [Siguiente](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="e8eaa-404">[Previous](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
[Next](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span></span>
