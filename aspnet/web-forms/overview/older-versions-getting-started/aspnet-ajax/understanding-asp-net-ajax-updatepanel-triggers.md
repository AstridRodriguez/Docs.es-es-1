---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: Descripción de los desencadenadores ASP.NET AJAX UpdatePanel | Documentos de Microsoft
author: scottcate
description: Cuando se trabaja en el editor de marcado en Visual Studio, puede observar (de IntelliSense) que hay dos elementos secundarios de un control UpdatePanel. Uno de qu...
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/12/2008
ms.topic: article
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: f30f2ead402d2f49a89b2caf47cc30b6445d4cfb
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
---
<a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="a5a3f-104">Descripción de los desencadenadores de UpdatePanel de AJAX de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="a5a3f-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>
====================
<span data-ttu-id="a5a3f-105">por [Scott ndicar](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="a5a3f-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="a5a3f-106">Descarga de PDF</span><span class="sxs-lookup"><span data-stu-id="a5a3f-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="a5a3f-107">Cuando se trabaja en el editor de marcado en Visual Studio, puede observar (de IntelliSense) que hay dos elementos secundarios de un control UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="a5a3f-108">Uno de los cuales es el elemento de desencadenadores, que especifica los controles en la página (o el control de usuario, si está usando uno) que activará una representación parcial del control UpdatePanel en el que reside el elemento.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>


## <a name="introduction"></a><span data-ttu-id="a5a3f-109">Introducción</span><span class="sxs-lookup"><span data-stu-id="a5a3f-109">Introduction</span></span>

<span data-ttu-id="a5a3f-110">Tecnología de Microsoft, ASP.NET proporciona un modelo de programación orientada a objetos y orientada a eventos y agrupa las ventajas del código compilado.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="a5a3f-111">Sin embargo, su modelo de procesamiento en el servidor tiene varias desventajas inherentes de la tecnología, muchas de las cuales se pueden solucionar si las nuevas características incluidas en las extensiones de AJAX de Microsoft ASP.NET 3.5.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="a5a3f-112">Estas extensiones permiten muchas características nuevas de cliente completas, incluida la representación parcial de páginas sin necesidad de una actualización de página completa, la capacidad para tener acceso a servicios Web a través de script de cliente (incluida la API de generación de perfiles de ASP.NET) y una amplia API de cliente diseñada para reflejar muchos de los esquemas de control que se muestra en el conjunto de control de servidor ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="a5a3f-113">Estas notas del producto examina la funcionalidad de los desencadenadores de XML de ASP.NET AJAX `UpdatePanel` componente.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="a5a3f-114">Desencadenadores de XML proporcionan un control granular sobre los componentes que pueden causar la representación parcial para los controles UpdatePanel específicos.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="a5a3f-115">Estas notas del producto se basan en la versión Beta 2 de .NET Framework 3.5 y Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="a5a3f-116">Las extensiones de AJAX de ASP.NET, previamente un ensamblado de complemento destinado a ASP.NET 2.0, ahora están integradas en la biblioteca de clases Base de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="a5a3f-117">Estas notas del producto también se supone que va a trabajar con Visual Studio 2008, no Visual Web Developer Express y le proporcionará los tutoriales de acuerdo con la interfaz de usuario de Visual Studio (aunque estarán completamente compatibles con independencia de los listados de código entorno de desarrollo).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="a5a3f-118">*Desencadenadores*</span><span class="sxs-lookup"><span data-stu-id="a5a3f-118">*Triggers*</span></span>

<span data-ttu-id="a5a3f-119">Desencadenadores para una determinada UpdatePanel, de forma predeterminada, incluyen automáticamente todos los controles secundarios que se invocación una devolución de datos, incluidos los controles de cuadro de texto que tienen (por ejemplo) sus `AutoPostBack` propiedad establecida en **true**.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="a5a3f-120">Sin embargo, desencadenadores también se incluye de forma declarativa utilizando marcado; Esto se realiza dentro de la `<triggers>` sección de la declaración del control UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="a5a3f-121">Aunque los desencadenadores son accesibles a través de la `Triggers` propiedad de colección, se recomienda registrar los desencadenadores de representación parcial en tiempo de ejecución (por ejemplo, si un control no está disponible en tiempo de diseño) mediante el uso de la `RegisterAsyncPostBackControl(Control)` método de la ScriptManager de objeto dentro de la página, el `Page_Load` eventos.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="a5a3f-122">Recuerde que las páginas son sin estado y, por lo que se deben volver a registrar estos controles cada vez que se crean.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="a5a3f-123">Inclusión de desencadenador automática secundarios también se puede deshabilitar (de modo que los controles secundarios que crear postbacks desencadenará automáticamente crea la representación parcial) estableciendo el `ChildrenAsTriggers` propiedad **false**.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="a5a3f-124">Esto le permite la máxima flexibilidad para asignar los controles específicos puede invocar una representación de página y se recomienda, por lo que un programador se participar en para responder a un evento, en lugar de controlar los eventos que pueden surgir.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="a5a3f-125">Tenga en cuenta que cuando están anidados controles UpdatePanel, cuando el UpdateMode está establecido en **condicional**, si el elemento secundario UpdatePanel se desencadene, pero el elemento primario no es así, es, a continuación, solo el elemento secundario UpdatePanel se actualizará.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="a5a3f-126">Sin embargo, si el elemento primario UpdatePanel se actualiza, a continuación, el elemento secundario UpdatePanel también se actualiza.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="a5a3f-127">*El &lt;desencadenadores&gt; elemento*</span><span class="sxs-lookup"><span data-stu-id="a5a3f-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="a5a3f-128">Cuando se trabaja en el editor de marcado en Visual Studio, puede observar (de IntelliSense) que hay dos elementos secundarios de un `UpdatePanel` control.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="a5a3f-129">El elemento con mayor frecuencia encontrado es el `<ContentTemplate>` elemento, que básicamente encapsula el contenido que se pueden guardar en el panel de actualización (es decir, el contenido para el que nos estamos habilitar la representación parcial).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="a5a3f-130">El otro elemento es el `<Triggers>` elemento, que especifica los controles en la página (o el control de usuario, si está usando uno) que activará una representación parcial del control UpdatePanel en el que el &lt;desencadenadores&gt; elemento reside.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="a5a3f-131">El `<Triggers>` elemento puede contener cualquier número cada de dos nodos secundarios: `<asp:AsyncPostBackTrigger>` y `<asp:PostBackTrigger>`.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="a5a3f-132">Aceptan dos atributos, `ControlID` y `EventName`y puede especificar cualquier Control dentro de la unidad actual de encapsulación (por ejemplo, si el control UpdatePanel reside dentro de un Control de usuario Web, no debe intentar hacer referencia a un Control en la página en el que residirá el Control de usuario).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="a5a3f-133">El `<asp:AsyncPostBackTrigger>` elemento es especialmente útil en que puede tener como destino cualquier evento de un Control que existe como un elemento secundario de *cualquier* control UpdatePanel en la unidad de encapsulación, no solo el UpdatePanel en las que este desencadenador es un elemento secundario .</span><span class="sxs-lookup"><span data-stu-id="a5a3f-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="a5a3f-134">Por lo tanto, se puede realizar cualquier control para desencadenar una actualización parcial de la página.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="a5a3f-135">De forma similar, la `<asp:PostBackTrigger>` elemento puede utilizarse para representar una página parcial de desencadenador, pero que requiere un envío y recepción en el servidor.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="a5a3f-136">Este elemento de desencadenador también se puede usar para forzar una presentación de página completa cuando un control en caso contrario, normalmente activan una representación parcial de la página (por ejemplo, cuando un `Button` control existe en el `<ContentTemplate>` elemento de un control UpdatePanel).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="a5a3f-137">Una vez más, el elemento PostBackTrigger puede especificar cualquier control que es un elemento secundario de cualquier control UpdatePanel en la unidad actual de la encapsulación.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="a5a3f-138">*&lt;Desencadenadores&gt; referencia del elemento*</span><span class="sxs-lookup"><span data-stu-id="a5a3f-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="a5a3f-139">*Descendientes de marcado:*</span><span class="sxs-lookup"><span data-stu-id="a5a3f-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="a5a3f-140">**Tag**</span><span class="sxs-lookup"><span data-stu-id="a5a3f-140">**Tag**</span></span> | <span data-ttu-id="a5a3f-141">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="a5a3f-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="a5a3f-142">&lt;asp:AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="a5a3f-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="a5a3f-143">Especifica un control y el evento que hará que una actualización parcial de página para el control UpdatePanel que contiene una referencia de desencadenador.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="a5a3f-144">&lt;asp:PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="a5a3f-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="a5a3f-145">Especifica un control y el evento que hará que una actualización de página completa (una actualización de página completa).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="a5a3f-146">Esta etiqueta se puede utilizar para forzar una actualización completa cuando un control en caso contrario, se activará la representación parcial.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="a5a3f-147">*Tutorial: Entre-UpdatePanel desencadenadores*</span><span class="sxs-lookup"><span data-stu-id="a5a3f-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="a5a3f-148">Crear una nueva página ASP.NET con un objeto ScriptManager que se establecen para habilitar la representación parcial.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="a5a3f-149">Agregar dos UpdatePanel a esta página: en la primera, incluyen un control de etiqueta (Label1) y dos controles de botón (Button1 y Button2).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="a5a3f-150">Button1 debe indicar, haga clic para actualizarlas y Button2 debe indicar, haga clic para actualizar esta o algo a lo largo de estas líneas.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="a5a3f-151">En el segundo UpdatePanel, incluyen un control de etiqueta (Label2), pero establezca la propiedad de color de primer plano en algo distinto del predeterminado para diferenciarla.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="a5a3f-152">Establezca la propiedad UpdateMode de las dos etiquetas UpdatePanel a **condicional**.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="a5a3f-153">**Lista 1: Marcado para default.aspx:**</span><span class="sxs-lookup"><span data-stu-id="a5a3f-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="a5a3f-154">En el controlador de eventos Click para Button1, establezca Label1.Text y Label2.Text a algo dependientes del tiempo (por ejemplo, DateTime.Now.ToLongTimeString()).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="a5a3f-155">Para el controlador de eventos Click de Button2, establezca Label1.Text solo en el valor de dependientes del tiempo.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="a5a3f-156">**La lista 2: A código subyacente (recortada) en default.aspx.cs:**</span><span class="sxs-lookup"><span data-stu-id="a5a3f-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="a5a3f-157">Presione F5 para compilar y ejecutar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="a5a3f-158">Tenga en cuenta que, al hacer clic en actualizar los paneles, ambas etiquetas cambian texto; Sin embargo, al hacer clic en el Panel de esta actualización, las actualizaciones solo Label1.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="a5a3f-159">([Haga clic aquí para ver la imagen a tamaño completo](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a5a3f-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>


## <a name="under-the-hood"></a><span data-ttu-id="a5a3f-160">*Aspectos técnicos*</span><span class="sxs-lookup"><span data-stu-id="a5a3f-160">*Under the Hood*</span></span>

<span data-ttu-id="a5a3f-161">Al utilizar el ejemplo que se acaba de crear, podemos realizar un vistazo a lo que está haciendo AJAX de ASP.NET y el funcionan de nuestro desencadenadores entre-panel de UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="a5a3f-162">Para ello, vamos a trabajar con el origen de la página generada HTML, así como la extensión de Mozilla Firefox, denominada a FireBug - con él, podemos examinar fácilmente las devoluciones de AJAX.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="a5a3f-163">También utilizamos la herramienta .NET Reflector de Lutz Roeder.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="a5a3f-164">Ambas herramientas están disponibles en línea y pueden encontrarse con una búsqueda en internet.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="a5a3f-165">Un examen del código fuente de página muestra casi nada fuera de lo normal; los controles UpdatePanel se representan como `<div>` contenedores y tenemos podemos ver que el recurso de script incluye proporcionados por el `<asp:ScriptManager>`.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="a5a3f-166">También hay algunas nuevas llamadas específico de AJAX a PageRequestManager internos de la biblioteca de script de cliente de AJAX.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="a5a3f-167">Por último, vemos que los dos contenedores de UpdatePanel: uno con el representado `<input>` botones con los dos `<asp:Label>` controles que se representan como `<span>` contenedores.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="a5a3f-168">(Si examina el árbol DOM en FireBug, observará que las etiquetas aparecen atenuadas para indicar que no se produce contenido visible).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="a5a3f-169">Haga clic en el botón de actualización este Panel y observe que la UpdatePanel superior se actualizará con la hora actual del servidor.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="a5a3f-170">En FireBug, elija la pestaña de la consola para que se puede examinar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="a5a3f-171">Examine los parámetros de solicitud POST en primer lugar:</span><span class="sxs-lookup"><span data-stu-id="a5a3f-171">Examine the POST request parameters first:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="a5a3f-172">([Haga clic aquí para ver la imagen a tamaño completo](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a5a3f-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>


<span data-ttu-id="a5a3f-173">Tenga en cuenta que el UpdatePanel ha indicado en el código de AJAX del lado servidor con precisión qué árbol de control se activó a través del parámetro ScriptManager1: `Button1` de la `UpdatePanel1` control.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="a5a3f-174">Ahora, haga clic en el botón de actualización los paneles.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="a5a3f-175">A continuación, examinar la respuesta, se ve una serie de variables establecidas en una cadena; delimitado por canalización en concreto, se puede ver el UpdatePanel superior, `UpdatePanel1`, tiene la totalidad de su HTML que se envía al explorador.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="a5a3f-176">La biblioteca de script de cliente de AJAX sustituye HTML original de UpdatePanel contenido con el nuevo contenido a través de la `.innerHTML` propiedad, de modo que el servidor envía el contenido cambiado desde el servidor como HTML.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="a5a3f-177">Ahora, haga clic en el botón de actualización los paneles y examinar los resultados del servidor.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="a5a3f-178">Los resultados son muy similares: ambos UpdatePanel recibe el nuevo código HTML desde el servidor.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="a5a3f-179">Al igual que con la devolución de llamada anterior, se envía el estado de página adicionales.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="a5a3f-180">Como se puede observar, porque no se utiliza ningún código especial para llevar a cabo una devolución de AJAX, la biblioteca de script de cliente de AJAX es capaz de interceptar las devoluciones de formularios sin ningún código adicional.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="a5a3f-181">Controles de servidor utilizan automáticamente JavaScript para que no envíen automáticamente el formulario: ASP.NET inserta automáticamente código de validación del formulario y el estado ya, que principalmente se logra mediante la inclusión de recursos de secuencia de comandos automática, la clase PostBackOptions y la clase ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="a5a3f-182">Por ejemplo, considere la posibilidad de un control CheckBox; Examine el desensamblado de la clase de .NET Reflector.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="a5a3f-183">Para ello, asegúrese de que el ensamblado System.Web está abierto y navegue hasta la `System.Web.UI.WebControls.CheckBox` (clase), abra el `RenderInputTag` método.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="a5a3f-184">Busque una instrucción condicional que comprueba el `AutoPostBack` propiedad:</span><span class="sxs-lookup"><span data-stu-id="a5a3f-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="a5a3f-185">([Haga clic aquí para ver la imagen a tamaño completo](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a5a3f-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>


<span data-ttu-id="a5a3f-186">Cuando se habilita la devolución de datos automática en un `CheckBox` control (a través de la propiedad AutoPostBack sea true), el resultante `<input>` etiqueta, por tanto, se representa con una secuencia de comandos de control de eventos ASP.NET su `onclick` atributo.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="a5a3f-187">La interceptación de envío del formulario, a continuación, permite AJAX de ASP.NET para que se insertará en la página nonintrusively, lo que ayuda a evitar cualquier posibilidad cambios importantes que pueden producirse al utilizar un reemplazo de cadena posiblemente imprecisa.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="a5a3f-188">Además, esto permite *cualquier* utilizan la eficacia de AJAX de ASP.NET sin ningún código adicional para admitir su uso dentro de un contenedor de UpdatePanel control personalizado de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="a5a3f-189">El `<triggers>` funcionalidad corresponde a los valores inicializados en la llamada PageRequestManager a \_updateControls (tenga en cuenta que la biblioteca de scripts de cliente de AJAX de ASP.NET usa la convención que métodos, eventos y nombres de campo que comiencen con un carácter de subrayado están marcados como internos y no están diseñadas para su uso fuera de la propia biblioteca).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="a5a3f-190">Con él, se puede observar qué controles están diseñados para hacer que las devoluciones de AJAX.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="a5a3f-191">Por ejemplo, vamos a agregar dos controles adicionales a la página, dejando un control fuera el UpdatePanel por completo y dejando uno dentro de un UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="a5a3f-192">Se agregará un control CheckBox en UpdatePanel superior y colocar un DropDownList con un número de colores definidos en la lista.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="a5a3f-193">Este es el marcado nuevo:</span><span class="sxs-lookup"><span data-stu-id="a5a3f-193">Here is the new markup:</span></span>

<span data-ttu-id="a5a3f-194">**Listado 3: Nueva marca**</span><span class="sxs-lookup"><span data-stu-id="a5a3f-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="a5a3f-195">Y este es el nuevo código subyacente:</span><span class="sxs-lookup"><span data-stu-id="a5a3f-195">And here is the new code-behind:</span></span>

<span data-ttu-id="a5a3f-196">**Listado 4: código subyacente**</span><span class="sxs-lookup"><span data-stu-id="a5a3f-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="a5a3f-197">La idea que subyace en esta página es que la lista desplegable selecciona uno de tres colores para mostrar la segunda etiqueta, que la casilla de verificación determina si está en negrita, tanto si las etiquetas muestran la fecha, así como el tiempo.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="a5a3f-198">La casilla de verificación no debería causar una actualización de AJAX, pero debe la lista desplegable, aunque no se encuentran dentro de un UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>


[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="a5a3f-199">([Haga clic aquí para ver la imagen a tamaño completo](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a5a3f-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>


<span data-ttu-id="a5a3f-200">Como es evidente en la captura de pantalla anterior, se encontraba el botón más reciente que se hizo clic en el botón derecho el Panel de esta actualización, que actualiza el superior independientemente de la hora de la parte inferior.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="a5a3f-201">La fecha también se desactivarse entre los clics, como la fecha está visible en la etiqueta de la parte inferior.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="a5a3f-202">Por último, es el color de la etiqueta de la parte inferior: se actualizó más recientemente que el texto de la etiqueta, que muestra que el estado de control es importante, y los usuarios esperan que se conserve a través de devoluciones de AJAX.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="a5a3f-203">*Sin embargo*, no se actualizó el tiempo.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-203">*However*, the time was not updated.</span></span> <span data-ttu-id="a5a3f-204">La hora se vuelve a llenar automáticamente a través de la persistencia de la \_ \_campo de estado de vista de la página que se interpreta en tiempo de ejecución de ASP.NET cuando el control se vuelven a representar en el servidor.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="a5a3f-205">El código de servidor de AJAX de ASP.NET no reconoce en el que los controles de métodos están cambiando el estado; basta con volver a llenar del estado de vista y, a continuación, ejecuta los eventos que son adecuados.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="a5a3f-206">Se debe señalarse, sin embargo, que había ha inicializado la hora en la página\_evento Load, la hora habría ha incrementado correctamente.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="a5a3f-207">Por lo tanto, los desarrolladores deben tener cuidado de que se está ejecutando el código adecuado durante los controladores de eventos apropiado y evite el uso de la página\_se carguen cuando un controlador de eventos de control sería adecuado.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="a5a3f-208">Resumen</span><span class="sxs-lookup"><span data-stu-id="a5a3f-208">Summary</span></span>

<span data-ttu-id="a5a3f-209">El control de ASP.NET AJAX Extensions UpdatePanel es versátil y puede utilizar varios métodos para identificar los eventos de control que pueda provocar que se actualice.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="a5a3f-210">Se admite que se actualizan de forma automática sus controles secundarios, pero también puede responder a eventos de control en otro lugar en la página.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="a5a3f-211">Para reducir la posibilidad de carga de procesamiento del servidor, se recomienda que el `ChildrenAsTriggers` propiedad de un UpdatePanel se establece en `false`, y que los eventos se participa en lugar de incluido de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="a5a3f-212">Esto también evita que los eventos innecesarios de causar efectos potencialmente no deseado, incluida la validación y cambios en campos de entrada.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="a5a3f-213">Estos tipos de errores pueden ser difíciles aislar, porque la página actualizaciones de forma transparente para el usuario y la causa, por tanto, puede no ser obvia.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="a5a3f-214">Mediante el examen de los mecanismos internos de la forma de AJAX de ASP.NET después de modelo de interceptación, hemos podidos determinar que utiliza el marco de trabajo ya proporcionada por ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="a5a3f-215">Si lo hace, se conserva la máxima compatibilidad con controles diseñado con el mismo marco de trabajo y mínimamente entra en todo el código JavaScript adicional escrito para la página.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="a5a3f-216">Bio</span><span class="sxs-lookup"><span data-stu-id="a5a3f-216">Bio</span></span>

<span data-ttu-id="a5a3f-217">Rob Paveza es un desarrollador de aplicaciones .NET senior en Terralever ([www.terralever.com](http://www.terralever.com)), una empresa de marketing interactiva inicial en Tempe, AZ.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="a5a3f-218">Puede ponerse en [ robpaveza@gmail.com ](mailto:robpaveza@gmail.com), y se encuentra en su blog [ http://geekswithblogs.net/robp/ ](http://geekswithblogs.net/robp/).</span><span class="sxs-lookup"><span data-stu-id="a5a3f-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="a5a3f-219">Scott categoría ha estado trabajando con las tecnologías Web de Microsoft desde 1997 y es el director general de myKB.com ([www.myKB.com](http://www.myKB.com)) donde está especializado en la escritura de ASP.NET en función de las aplicaciones que se centra en las soluciones de Software de Base de conocimiento.</span><span class="sxs-lookup"><span data-stu-id="a5a3f-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="a5a3f-220">Scott se puede contactar a través de correo electrónico en [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) o su blog en [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="a5a3f-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a5a3f-221">[Anterior](understanding-partial-page-updates-with-asp-net-ajax.md)
> [Siguiente](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="a5a3f-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>
