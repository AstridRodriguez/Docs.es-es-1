---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-controller
title: Cómo agregar un controlador (C#) | Documentos de Microsoft
author: Rick-Anderson
description: Este tutorial le enseñará los aspectos básicos de la creación de una aplicación Web de ASP.NET MVC mediante Microsoft Visual Web Developer 2010 Express servicio Pack 1, qué i...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/12/2011
ms.topic: article
ms.assetid: 0b8c56b5-fdf3-42dd-a866-98fbe0ab78a0
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-controller
msc.type: authoredcontent
ms.openlocfilehash: 963d3bbbadf408d7045c50bfd693069e4097d45d
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
---
<a name="adding-a-controller-c"></a><span data-ttu-id="4297b-103">Cómo agregar un controlador (C#)</span><span class="sxs-lookup"><span data-stu-id="4297b-103">Adding a Controller (C#)</span></span>
====================
<span data-ttu-id="4297b-104">por [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="4297b-104">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> > [!NOTE]
> > <span data-ttu-id="4297b-105">Hay disponible una versión actualizada de este tutorial [aquí](../../../getting-started/introduction/getting-started.md) que usa ASP.NET MVC 5 y Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="4297b-105">An updated version of this tutorial is available [here](../../../getting-started/introduction/getting-started.md) that uses ASP.NET MVC 5 and Visual Studio 2013.</span></span> <span data-ttu-id="4297b-106">Es más seguro y mucho más fácil de seguir y se muestra más características.</span><span class="sxs-lookup"><span data-stu-id="4297b-106">It's more secure, much simpler to follow and demonstrates more features.</span></span>
> 
> 
> <span data-ttu-id="4297b-107">Este tutorial le enseñará los aspectos básicos de la creación de una aplicación Web de ASP.NET MVC mediante Microsoft Visual Web Developer 2010 Express Service Pack 1, que es una versión gratuita de Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4297b-107">This tutorial will teach you the basics of building an ASP.NET MVC Web application using Microsoft Visual Web Developer 2010 Express Service Pack 1, which is a free version of Microsoft Visual Studio.</span></span> <span data-ttu-id="4297b-108">Antes de empezar, asegúrese de que ha instalado los requisitos previos descritos a continuación.</span><span class="sxs-lookup"><span data-stu-id="4297b-108">Before you start, make sure you've installed the prerequisites listed below.</span></span> <span data-ttu-id="4297b-109">Puede instalar todas ellas haciendo clic en el siguiente vínculo: [instalador de plataforma Web](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="4297b-109">You can install all of them by clicking the following link: [Web Platform Installer](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span></span> <span data-ttu-id="4297b-110">Como alternativa, puede instalar por separado los requisitos previos mediante los siguientes vínculos:</span><span class="sxs-lookup"><span data-stu-id="4297b-110">Alternatively, you can individually install the prerequisites using the following links:</span></span>
> 
> - [<span data-ttu-id="4297b-111">Requisitos previos visuales Studio Web Developer Express SP1</span><span class="sxs-lookup"><span data-stu-id="4297b-111">Visual Studio Web Developer Express SP1 prerequisites</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack)
> - [<span data-ttu-id="4297b-112">ASP.NET MVC 3 Tools Update</span><span class="sxs-lookup"><span data-stu-id="4297b-112">ASP.NET MVC 3 Tools Update</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=MVC3)
> - <span data-ttu-id="4297b-113">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(se admiten en tiempo de ejecución + herramientas)</span><span class="sxs-lookup"><span data-stu-id="4297b-113">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(runtime + tools support)</span></span>
> 
> <span data-ttu-id="4297b-114">Si usa Visual Studio 2010 en lugar de Visual Web Developer 2010, instale los requisitos previos, haga clic en el siguiente vínculo: [requisitos previos de Visual Studio 2010](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="4297b-114">If you're using Visual Studio 2010 instead of Visual Web Developer 2010, install the prerequisites by clicking the following link: [Visual Studio 2010 prerequisites](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span></span>
> 
> <span data-ttu-id="4297b-115">Un proyecto de Visual Web Developer con el código fuente de C# está disponible como acompañamiento de este tema.</span><span class="sxs-lookup"><span data-stu-id="4297b-115">A Visual Web Developer project with C# source code is available to accompany this topic.</span></span> <span data-ttu-id="4297b-116">[Descargue la versión de C#](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span><span class="sxs-lookup"><span data-stu-id="4297b-116">[Download the C# version](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span></span> <span data-ttu-id="4297b-117">Si prefiere Visual Basic, cambie a la [versión de Visual Basic](../vb/intro-to-aspnet-mvc-3.md) de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="4297b-117">If you prefer Visual Basic, switch to the [Visual Basic version](../vb/intro-to-aspnet-mvc-3.md) of this tutorial.</span></span>


<span data-ttu-id="4297b-118">MVC es el acrónimo *model-view-controller*.</span><span class="sxs-lookup"><span data-stu-id="4297b-118">MVC stands for *model-view-controller*.</span></span> <span data-ttu-id="4297b-119">MVC es un modelo para desarrollar aplicaciones que están bien diseñada y fáciles de mantener.</span><span class="sxs-lookup"><span data-stu-id="4297b-119">MVC is a pattern for developing applications that are well architected and easy to maintain.</span></span> <span data-ttu-id="4297b-120">Las aplicaciones basadas en MVC contienen:</span><span class="sxs-lookup"><span data-stu-id="4297b-120">MVC-based applications contain:</span></span>

- <span data-ttu-id="4297b-121">Controladores: Las clases que controlan las solicitudes entrantes a la aplicación, recuperar datos del modelo y, a continuación, especificar plantillas de vista que devuelven una respuesta al cliente.</span><span class="sxs-lookup"><span data-stu-id="4297b-121">Controllers: Classes that handle incoming requests to the application, retrieve model data, and then specify view templates that return a response to the client.</span></span>
- <span data-ttu-id="4297b-122">Modelos de clases que representan los datos de la aplicación y que usan una lógica de validación para aplicar las reglas de negocios para esos datos.</span><span class="sxs-lookup"><span data-stu-id="4297b-122">Models: Classes that represent the data of the application and that use validation logic to enforce business rules for that data.</span></span>
- <span data-ttu-id="4297b-123">Vistas: Archivos de plantilla que la aplicación usa para generar dinámicamente las respuestas HTML.</span><span class="sxs-lookup"><span data-stu-id="4297b-123">Views: Template files that your application uses to dynamically generate HTML responses.</span></span>

<span data-ttu-id="4297b-124">Comenzaremos ser que cubren todos estos conceptos en esta serie de tutoriales y muestran cómo utilizarlas para crear una aplicación.</span><span class="sxs-lookup"><span data-stu-id="4297b-124">We'll be covering all these concepts in this tutorial series and show you how to use them to build an application.</span></span>

<span data-ttu-id="4297b-125">Vamos a empezar a crear una clase de controlador.</span><span class="sxs-lookup"><span data-stu-id="4297b-125">Let's begin by creating a controller class.</span></span> <span data-ttu-id="4297b-126">En **el Explorador de soluciones**, haga clic en el *controladores* carpeta y, a continuación, seleccione **Agregar controlador**.</span><span class="sxs-lookup"><span data-stu-id="4297b-126">In **Solution Explorer**, right-click the *Controllers* folder and then select **Add Controller**.</span></span>

[![](adding-a-controller/_static/image2.png)](adding-a-controller/_static/image1.png)

<span data-ttu-id="4297b-127">Nombre el nuevo controlador de "HelloWorldController".</span><span class="sxs-lookup"><span data-stu-id="4297b-127">Name your new controller "HelloWorldController".</span></span> <span data-ttu-id="4297b-128">Deje la plantilla predeterminada como **controlador en blanco** y haga clic en **agregar**.</span><span class="sxs-lookup"><span data-stu-id="4297b-128">Leave the default template as **Empty controller** and click **Add**.</span></span>

<span data-ttu-id="4297b-129">[![AddHelloWorldController](adding-a-controller/_static/image4.png)](adding-a-controller/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="4297b-129">[![AddHelloWorldController](adding-a-controller/_static/image4.png)](adding-a-controller/_static/image3.png)</span></span>

<span data-ttu-id="4297b-130">Observe que en **el Explorador de soluciones** que un nuevo archivo se ha creado con nombre *HelloWorldController.cs*.</span><span class="sxs-lookup"><span data-stu-id="4297b-130">Notice in **Solution Explorer** that a new file has been created named *HelloWorldController.cs*.</span></span> <span data-ttu-id="4297b-131">El archivo está abierto en el IDE.</span><span class="sxs-lookup"><span data-stu-id="4297b-131">The file is open in the IDE.</span></span>

![](adding-a-controller/_static/image5.png)

<span data-ttu-id="4297b-132">Dentro de la `public class HelloWorldController` de bloque, cree dos métodos que tengan un aspecto similar al código siguiente.</span><span class="sxs-lookup"><span data-stu-id="4297b-132">Inside the `public class HelloWorldController` block, create two methods that look like the following code.</span></span> <span data-ttu-id="4297b-133">El controlador devolverá una cadena HTML como un ejemplo.</span><span class="sxs-lookup"><span data-stu-id="4297b-133">The controller will return a string of HTML as an example.</span></span>

[!code-csharp[Main](adding-a-controller/samples/sample1.cs)]

<span data-ttu-id="4297b-134">El controlador se denomina `HelloWorldController` y el primer método anterior se denomina `Index`.</span><span class="sxs-lookup"><span data-stu-id="4297b-134">Your controller is named `HelloWorldController` and the first method above is named `Index`.</span></span> <span data-ttu-id="4297b-135">Vamos a invocarlo desde un explorador.</span><span class="sxs-lookup"><span data-stu-id="4297b-135">Let's invoke it from a browser.</span></span> <span data-ttu-id="4297b-136">Ejecute la aplicación (presione F5 o CTRL+F5).</span><span class="sxs-lookup"><span data-stu-id="4297b-136">Run the application (press F5 or Ctrl+F5).</span></span> <span data-ttu-id="4297b-137">En el explorador, anexe "HelloWorld" a la ruta de acceso en la barra de direcciones.</span><span class="sxs-lookup"><span data-stu-id="4297b-137">In the browser, append "HelloWorld" to the path in the address bar.</span></span> <span data-ttu-id="4297b-138">(Por ejemplo, en la ilustración siguiente, su `http://localhost:43246/HelloWorld.`) la página en el explorador será similar a la captura de pantalla siguiente.</span><span class="sxs-lookup"><span data-stu-id="4297b-138">(For example, in the illustration below, it's `http://localhost:43246/HelloWorld.`) The page in the browser will look like the following screenshot.</span></span> <span data-ttu-id="4297b-139">En el método anterior, el código devuelve una cadena directamente.</span><span class="sxs-lookup"><span data-stu-id="4297b-139">In the method above, the code returned a string directly.</span></span> <span data-ttu-id="4297b-140">Indicar el sistema para devolver algo de HTML y así ha sido!</span><span class="sxs-lookup"><span data-stu-id="4297b-140">You told the system to just return some HTML, and it did!</span></span>

![](adding-a-controller/_static/image6.png)

<span data-ttu-id="4297b-141">ASP.NET MVC invoca las clases de controlador diferente (y métodos de acción diferentes dentro de ellas) dependiendo de la dirección URL entrante.</span><span class="sxs-lookup"><span data-stu-id="4297b-141">ASP.NET MVC invokes different controller classes (and different action methods within them) depending on the incoming URL.</span></span> <span data-ttu-id="4297b-142">La lógica de asignación predeterminada usa ASP.NET MVC utiliza un formato similar al siguiente para determinar qué código debe invocar:</span><span class="sxs-lookup"><span data-stu-id="4297b-142">The default mapping logic used by ASP.NET MVC uses a format like this to determine what code to invoke:</span></span>

`/[Controller]/[ActionName]/[Parameters]`

<span data-ttu-id="4297b-143">La primera parte de la dirección URL determina la clase de controlador que se ejecutará.</span><span class="sxs-lookup"><span data-stu-id="4297b-143">The first part of the URL determines the controller class to execute.</span></span> <span data-ttu-id="4297b-144">Por lo que */HelloWorld* se asigna a la `HelloWorldController` clase.</span><span class="sxs-lookup"><span data-stu-id="4297b-144">So */HelloWorld* maps to the `HelloWorldController` class.</span></span> <span data-ttu-id="4297b-145">La segunda parte de la dirección URL determina el método de acción en la clase que se ejecutará.</span><span class="sxs-lookup"><span data-stu-id="4297b-145">The second part of the URL determines the action method on the class to execute.</span></span> <span data-ttu-id="4297b-146">Por lo que */HelloWorld/índice* provocaría que el `Index` método de la `HelloWorldController` clase que se ejecutará.</span><span class="sxs-lookup"><span data-stu-id="4297b-146">So */HelloWorld/Index* would cause the `Index` method of the `HelloWorldController` class to execute.</span></span> <span data-ttu-id="4297b-147">Tenga en cuenta que sólo tuvimos que vaya a */HelloWorld* y `Index` usó el método de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4297b-147">Notice that we only had to browse to */HelloWorld* and the `Index` method was used by default.</span></span> <span data-ttu-id="4297b-148">Esto es porque un método denominado `Index` es el método predeterminado que se llamará en un controlador si no se especifica explícitamente.</span><span class="sxs-lookup"><span data-stu-id="4297b-148">This is because a method named `Index` is the default method that will be called on a controller if one is not explicitly specified.</span></span>

<span data-ttu-id="4297b-149">Vaya a `http://localhost:xxxx/HelloWorld/Welcome`.</span><span class="sxs-lookup"><span data-stu-id="4297b-149">Browse to `http://localhost:xxxx/HelloWorld/Welcome`.</span></span> <span data-ttu-id="4297b-150">El método `Welcome` se ejecuta y devuelve la cadena "This is the Welcome action method..." (Este es el método de acción de bienvenida).</span><span class="sxs-lookup"><span data-stu-id="4297b-150">The `Welcome` method runs and returns the string "This is the Welcome action method...".</span></span> <span data-ttu-id="4297b-151">La asignación de MVC predeterminada es `/[Controller]/[ActionName]/[Parameters]`.</span><span class="sxs-lookup"><span data-stu-id="4297b-151">The default MVC mapping is `/[Controller]/[ActionName]/[Parameters]`.</span></span> <span data-ttu-id="4297b-152">Para esta dirección URL, el controlador es `HelloWorld` y `Welcome` es el método de acción.</span><span class="sxs-lookup"><span data-stu-id="4297b-152">For this URL, the controller is `HelloWorld` and `Welcome` is the action method.</span></span> <span data-ttu-id="4297b-153">Todavía no ha usado el elemento `[Parameters]` de la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="4297b-153">You haven't used the `[Parameters]` part of the URL yet.</span></span>

![](adding-a-controller/_static/image7.png)

<span data-ttu-id="4297b-154">Vamos a modificar el ejemplo ligeramente para que pueda pasar cierta información de parámetro de la dirección URL para el controlador (por ejemplo, */HelloWorld/bienvenida? name = Scott&amp;numtimes = 4*).</span><span class="sxs-lookup"><span data-stu-id="4297b-154">Let's modify the example slightly so that you can pass some parameter information from the URL to the controller (for example, */HelloWorld/Welcome?name=Scott&amp;numtimes=4*).</span></span> <span data-ttu-id="4297b-155">Cambiar el `Welcome` método debe incluir dos parámetros, tal y como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="4297b-155">Change your `Welcome` method to include two parameters as shown below.</span></span> <span data-ttu-id="4297b-156">Tenga en cuenta que el código usa la característica de parámetro opcional de C# para indicar que el `numTimes` parámetro, de forma predeterminada en 1 si se pasa ningún valor para ese parámetro.</span><span class="sxs-lookup"><span data-stu-id="4297b-156">Note that the code uses the C# optional-parameter feature to indicate that the `numTimes` parameter should default to 1 if no value is passed for that parameter.</span></span>

[!code-csharp[Main](adding-a-controller/samples/sample2.cs)]

<span data-ttu-id="4297b-157">Ejecute la aplicación y busque la dirección URL de ejemplo (`http://localhost:xxxx/HelloWorld/Welcome?name=Scott&numtimes=4)`.</span><span class="sxs-lookup"><span data-stu-id="4297b-157">Run your application and browse to the example URL (`http://localhost:xxxx/HelloWorld/Welcome?name=Scott&numtimes=4)`.</span></span> <span data-ttu-id="4297b-158">Puede probar valores diferentes para `name` y `numtimes` en la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="4297b-158">You can try different values for `name` and `numtimes` in the URL.</span></span> <span data-ttu-id="4297b-159">El sistema asigna automáticamente los parámetros con nombre de la cadena de consulta en la barra de direcciones a los parámetros del método.</span><span class="sxs-lookup"><span data-stu-id="4297b-159">The system automatically maps the named parameters from the query string in the address bar to parameters in your method.</span></span>

![](adding-a-controller/_static/image8.png)

<span data-ttu-id="4297b-160">En estos ejemplos de ambos el controlador ha realizado la parte "VC" de MVC, es decir, el trabajo de vista y controlador.</span><span class="sxs-lookup"><span data-stu-id="4297b-160">In both these examples the controller has been doing the "VC" portion of MVC — that is, the view and controller work.</span></span> <span data-ttu-id="4297b-161">El controlador devuelve HTML directamente.</span><span class="sxs-lookup"><span data-stu-id="4297b-161">The controller is returning HTML directly.</span></span> <span data-ttu-id="4297b-162">Normalmente no desea devolver HTML directamente, desde que se vuelve muy complicada al código de controladores.</span><span class="sxs-lookup"><span data-stu-id="4297b-162">Ordinarily you don't want controllers returning HTML directly, since that becomes very cumbersome to code.</span></span> <span data-ttu-id="4297b-163">En su lugar, vamos a usar normalmente un archivo de plantilla de vista independiente para ayudar a generar la respuesta HTML.</span><span class="sxs-lookup"><span data-stu-id="4297b-163">Instead we'll typically use a separate view template file to help generate the HTML response.</span></span> <span data-ttu-id="4297b-164">Echemos un vistazo siguiente en cómo podemos hacer esto.</span><span class="sxs-lookup"><span data-stu-id="4297b-164">Let's look next at how we can do this.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4297b-165">[Anterior](intro-to-aspnet-mvc-3.md)
> [Siguiente](adding-a-view.md)</span><span class="sxs-lookup"><span data-stu-id="4297b-165">[Previous](intro-to-aspnet-mvc-3.md)
[Next](adding-a-view.md)</span></span>
