---
uid: mvc/overview/performance/bundling-and-minification
title: Agrupar y Minificar | Documentos de Microsoft
author: Rick-Anderson
description: Agrupar y minificar son dos técnicas puede usar en ASP.NET 4.5 para mejorar el tiempo de carga de solicitud. Agrupar y minificar mejora el tiempo de carga por reducin...
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/23/2012
ms.topic: article
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: 001ebf89cda66a50cddcd7e4944f27b9396d4450
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/10/2018
---
<a name="bundling-and-minification"></a><span data-ttu-id="d909e-104">Agrupar y Minificar</span><span class="sxs-lookup"><span data-stu-id="d909e-104">Bundling and Minification</span></span>
====================
<span data-ttu-id="d909e-105">por [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="d909e-105">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="d909e-106">Agrupar y minificar son dos técnicas puede usar en ASP.NET 4.5 para mejorar el tiempo de carga de solicitud.</span><span class="sxs-lookup"><span data-stu-id="d909e-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="d909e-107">Agrupar y minificar mejora el tiempo de carga, lo que reduce el número de solicitudes al servidor y reducir el tamaño de los activos solicitados (por ejemplo, CSS y JavaScript).</span><span class="sxs-lookup"><span data-stu-id="d909e-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>


<span data-ttu-id="d909e-108">La mayoría de los principales exploradores actuales limita el número de [conexiones simultáneas](http://www.browserscope.org/?category=network) por cada nombre de host a seis.</span><span class="sxs-lookup"><span data-stu-id="d909e-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="d909e-109">Esto significa que mientras se están procesando seis solicitudes, las solicitudes adicionales de activos en un host se pondrá en cola por el explorador.</span><span class="sxs-lookup"><span data-stu-id="d909e-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="d909e-110">En la imagen siguiente, las pestañas de red de herramientas de desarrollador de F12 de Internet Explorer muestra el tiempo para activos requeridos por la vista de información acerca de una aplicación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d909e-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="d909e-112">Las barras grises muestran el tiempo que la solicitud se pone en cola con el explorador que se espera en el límite de seis conexiones.</span><span class="sxs-lookup"><span data-stu-id="d909e-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="d909e-113">La barra amarilla es el tiempo de solicitud hasta el primer byte, es decir, el tiempo dedicado a enviar la solicitud y recibir la primera respuesta desde el servidor.</span><span class="sxs-lookup"><span data-stu-id="d909e-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="d909e-114">Las barras azules muestran el tiempo dedicado a recibir los datos de respuesta del servidor.</span><span class="sxs-lookup"><span data-stu-id="d909e-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="d909e-115">Puede hacer doble clic en un recurso para obtener información de tiempo detallada.</span><span class="sxs-lookup"><span data-stu-id="d909e-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="d909e-116">Por ejemplo, la siguiente imagen muestra los detalles de tiempo para cargar la */Scripts/MyScripts/JavaScript6.js* archivo.</span><span class="sxs-lookup"><span data-stu-id="d909e-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="d909e-117">La imagen anterior se muestra la **iniciar** eventos, que proporciona la hora de la solicitud se puso en cola por el explorador limita el número de conexiones simultáneas.</span><span class="sxs-lookup"><span data-stu-id="d909e-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="d909e-118">En este caso, la solicitud se puso en cola para 46 milisegundos de espera otra solicitud en completarse.</span><span class="sxs-lookup"><span data-stu-id="d909e-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="d909e-119">Cómo agrupar</span><span class="sxs-lookup"><span data-stu-id="d909e-119">Bundling</span></span>

<span data-ttu-id="d909e-120">Cómo agrupar es una nueva característica de ASP.NET 4.5 que facilita el proceso combinar o agrupar varios archivos en un único archivo.</span><span class="sxs-lookup"><span data-stu-id="d909e-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="d909e-121">Puede crear CSS, JavaScript y otros paquetes.</span><span class="sxs-lookup"><span data-stu-id="d909e-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="d909e-122">Menos archivos significa menos solicitudes HTTP y que puede mejorar el rendimiento de carga de primera página.</span><span class="sxs-lookup"><span data-stu-id="d909e-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="d909e-123">La siguiente imagen muestra la misma vista de control de tiempo de la vista de acerca mostrada anteriormente, pero esta vez con agrupación y minificación habilitado.</span><span class="sxs-lookup"><span data-stu-id="d909e-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="d909e-124">Minificación</span><span class="sxs-lookup"><span data-stu-id="d909e-124">Minification</span></span>

<span data-ttu-id="d909e-125">Minificación realiza una serie de optimizaciones de código diferente para las secuencias de comandos o css, como la eliminación de espacio en blanco innecesario y comentarios y acortar los nombres de variable con un único carácter.</span><span class="sxs-lookup"><span data-stu-id="d909e-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="d909e-126">Considere la siguiente función de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="d909e-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="d909e-127">Después de la reducción, la función se reduce a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d909e-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="d909e-128">Además de quitar los comentarios y espacios en blanco innecesarios, los siguientes parámetros y nombres de variables se cambió el nombre (abreviar) como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="d909e-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="d909e-129">**Original**</span><span class="sxs-lookup"><span data-stu-id="d909e-129">**Original**</span></span> | <span data-ttu-id="d909e-130">**Cambiar el nombre**</span><span class="sxs-lookup"><span data-stu-id="d909e-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="d909e-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="d909e-131">imageTagAndImageID</span></span> | <span data-ttu-id="d909e-132">n</span><span class="sxs-lookup"><span data-stu-id="d909e-132">n</span></span> |
| <span data-ttu-id="d909e-133">imageContext</span><span class="sxs-lookup"><span data-stu-id="d909e-133">imageContext</span></span> | <span data-ttu-id="d909e-134">m</span><span class="sxs-lookup"><span data-stu-id="d909e-134">t</span></span> |
| <span data-ttu-id="d909e-135">imageElement</span><span class="sxs-lookup"><span data-stu-id="d909e-135">imageElement</span></span> | <span data-ttu-id="d909e-136">i</span><span class="sxs-lookup"><span data-stu-id="d909e-136">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="d909e-137">Impacto de la agrupación y Minificación</span><span class="sxs-lookup"><span data-stu-id="d909e-137">Impact of Bundling and Minification</span></span>

<span data-ttu-id="d909e-138">En la tabla siguiente muestra algunas diferencias importantes entre enumerar todos los activos de forma individual y el uso de agrupación y minificación (B/M) en el programa de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d909e-138">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="d909e-139">**Uso de B/M**</span><span class="sxs-lookup"><span data-stu-id="d909e-139">**Using B/M**</span></span> | <span data-ttu-id="d909e-140">**Sin B/M**</span><span class="sxs-lookup"><span data-stu-id="d909e-140">**Without B/M**</span></span> | <span data-ttu-id="d909e-141">**Change**</span><span class="sxs-lookup"><span data-stu-id="d909e-141">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="d909e-142">**Solicitudes de archivos**</span><span class="sxs-lookup"><span data-stu-id="d909e-142">**File Requests**</span></span> | <span data-ttu-id="d909e-143">9</span><span class="sxs-lookup"><span data-stu-id="d909e-143">9</span></span> | <span data-ttu-id="d909e-144">34</span><span class="sxs-lookup"><span data-stu-id="d909e-144">34</span></span> | <span data-ttu-id="d909e-145">256%</span><span class="sxs-lookup"><span data-stu-id="d909e-145">256%</span></span> |
| <span data-ttu-id="d909e-146">**KB enviado**</span><span class="sxs-lookup"><span data-stu-id="d909e-146">**KB Sent**</span></span> | <span data-ttu-id="d909e-147">3.26</span><span class="sxs-lookup"><span data-stu-id="d909e-147">3.26</span></span> | <span data-ttu-id="d909e-148">11.92</span><span class="sxs-lookup"><span data-stu-id="d909e-148">11.92</span></span> | <span data-ttu-id="d909e-149">266%</span><span class="sxs-lookup"><span data-stu-id="d909e-149">266%</span></span> |
| <span data-ttu-id="d909e-150">**KB recibido**</span><span class="sxs-lookup"><span data-stu-id="d909e-150">**KB Received**</span></span> | <span data-ttu-id="d909e-151">388.51</span><span class="sxs-lookup"><span data-stu-id="d909e-151">388.51</span></span> | <span data-ttu-id="d909e-152">530</span><span class="sxs-lookup"><span data-stu-id="d909e-152">530</span></span> | <span data-ttu-id="d909e-153">36%</span><span class="sxs-lookup"><span data-stu-id="d909e-153">36%</span></span> |
| <span data-ttu-id="d909e-154">**Tiempo de carga**</span><span class="sxs-lookup"><span data-stu-id="d909e-154">**Load Time**</span></span> | <span data-ttu-id="d909e-155">510 MS</span><span class="sxs-lookup"><span data-stu-id="d909e-155">510 MS</span></span> | <span data-ttu-id="d909e-156">780 MS</span><span class="sxs-lookup"><span data-stu-id="d909e-156">780 MS</span></span> | <span data-ttu-id="d909e-157">53%</span><span class="sxs-lookup"><span data-stu-id="d909e-157">53%</span></span> |

<span data-ttu-id="d909e-158">Los bytes enviados tenían una reducción significativa de la agrupación sea bastante detallados con los encabezados HTTP de que se aplican en las solicitudes los exploradores.</span><span class="sxs-lookup"><span data-stu-id="d909e-158">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="d909e-159">La reducción de bytes recibidos no es tan grande porque los archivos de mayor tamaño (*Scripts\jquery-ui-1.8.11.min.js* y *Scripts\jquery-1.7.1.min.js*) ya se ha reducido.</span><span class="sxs-lookup"><span data-stu-id="d909e-159">The received bytes reduction is not as large because the largest files (*Scripts\jquery-ui-1.8.11.min.js* and *Scripts\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="d909e-160">Nota: Los intervalos en el programa de ejemplo que usa el [Fiddler](http://www.fiddler2.com/fiddler2/) herramienta para simular una red lenta.</span><span class="sxs-lookup"><span data-stu-id="d909e-160">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="d909e-161">(Desde el Fiddler **reglas** menú, seleccione **rendimiento** , a continuación, **simular un módem**.)</span><span class="sxs-lookup"><span data-stu-id="d909e-161">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="d909e-162">Depuración de empaquetado y reducido JavaScript</span><span class="sxs-lookup"><span data-stu-id="d909e-162">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="d909e-163">Es fácil depurar el código JavaScript en un entorno de desarrollo (donde el [compilación elemento](https://msdn.microsoft.com/library/s10awwz0.aspx) en el *Web.config* archivo se establece en `debug="true"` ) porque no se incluyen los archivos JavaScript o reducido.</span><span class="sxs-lookup"><span data-stu-id="d909e-163">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="d909e-164">También puede depurar una versión de lanzamiento donde están incluidos y reduce los archivos JavaScript.</span><span class="sxs-lookup"><span data-stu-id="d909e-164">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="d909e-165">Con las herramientas de desarrollo F12 de Internet Explorer, depurar una función de JavaScript que se incluyen en un paquete reducido mediante el siguiente método:</span><span class="sxs-lookup"><span data-stu-id="d909e-165">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="d909e-166">Seleccione el **Script** ficha y, a continuación, seleccione la **iniciar la depuración** botón.</span><span class="sxs-lookup"><span data-stu-id="d909e-166">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="d909e-167">Seleccione el paquete que contiene la función de JavaScript que va a depurar mediante el botón de activos.</span><span class="sxs-lookup"><span data-stu-id="d909e-167">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="d909e-168">Formato JavaScript reducida, seleccione la **botón configuración** ![](bundling-and-minification/_static/image5.png)y, a continuación, seleccione **formato JavaScript**.</span><span class="sxs-lookup"><span data-stu-id="d909e-168">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="d909e-169">En el **búsqueda script** cuadro de entrada de t, seleccione el nombre de la función que va a depurar.</span><span class="sxs-lookup"><span data-stu-id="d909e-169">In the **Search Scrip** t input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="d909e-170">En la siguiente imagen, **AddAltToImg** se escribió en el **búsqueda script** cuadro de entrada de t.</span><span class="sxs-lookup"><span data-stu-id="d909e-170">In the following image, **AddAltToImg** was entered in the **Search Scrip** t input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="d909e-171">Para obtener más información sobre cómo depurar con las herramientas de desarrollo F12, vea el artículo MSDN [mediante las herramientas de desarrollo F12 para depurar errores de JavaScript](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="d909e-171">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="d909e-172">Controlar agrupar y Minificar</span><span class="sxs-lookup"><span data-stu-id="d909e-172">Controlling Bundling and Minification</span></span>

<span data-ttu-id="d909e-173">Agrupar y minificar está habilitada o deshabilitada estableciendo el valor del atributo de depuración en el [compilación elemento](https://msdn.microsoft.com/library/s10awwz0.aspx) en el *Web.config* archivo.</span><span class="sxs-lookup"><span data-stu-id="d909e-173">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="d909e-174">En el siguiente código XML, `debug` se establece en true, agrupación y minificación está deshabilitado.</span><span class="sxs-lookup"><span data-stu-id="d909e-174">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="d909e-175">Para habilitar la agrupación y minificación, establezca el `debug` valor en "false".</span><span class="sxs-lookup"><span data-stu-id="d909e-175">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="d909e-176">Puede invalidar la *Web.config* establecer con el `EnableOptimizations` propiedad en la `BundleTable` clase.</span><span class="sxs-lookup"><span data-stu-id="d909e-176">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="d909e-177">El código siguiente permite agrupar y minificar e invalida cualquier configuración en el *Web.config* archivo.</span><span class="sxs-lookup"><span data-stu-id="d909e-177">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="d909e-178">A menos que `EnableOptimizations` es `true` o el atributo de depuración en el [compilación elemento](https://msdn.microsoft.com/library/s10awwz0.aspx) en el *Web.config* archivo se establece en `false`, los archivos no se incluye o se reduce.</span><span class="sxs-lookup"><span data-stu-id="d909e-178">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="d909e-179">Además, no se usará la versión .min de archivos, se seleccionará las versiones de depuración completa.</span><span class="sxs-lookup"><span data-stu-id="d909e-179">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="d909e-180">`EnableOptimizations` invalida el atributo de depuración en el [compilación elemento](https://msdn.microsoft.com/library/s10awwz0.aspx) en el *Web.config* archivo</span><span class="sxs-lookup"><span data-stu-id="d909e-180">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file</span></span>


## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="d909e-181">Mediante la agrupación y Minificación con ASP.NET Web Forms y páginas Web</span><span class="sxs-lookup"><span data-stu-id="d909e-181">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="d909e-182">Para las páginas Web, consulte la entrada de blog [agregar optimización Web a un sitio Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="d909e-182">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="d909e-183">Para los formularios Web Forms, vea la entrada de blog [Agregar agrupación y Minificación a formularios Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="d909e-183">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="d909e-184">Mediante la agrupación y Minificación con ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="d909e-184">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="d909e-185">En esta sección se creará un ASP.NET MVC proyecto para examinar la agrupación y minificación.</span><span class="sxs-lookup"><span data-stu-id="d909e-185">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="d909e-186">En primer lugar, cree un nuevo proyecto de ASP.NET MVC internet denominado **MvcBM** sin cambiar cualquiera de los valores predeterminados.</span><span class="sxs-lookup"><span data-stu-id="d909e-186">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="d909e-187">Abra la *aplicación\_Start\BundleConfig.cs* de archivo y examine la `RegisterBundles` método que se utiliza para crear, registrar y configurar paquetes.</span><span class="sxs-lookup"><span data-stu-id="d909e-187">Open the *App\_Start\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="d909e-188">El código siguiente muestra una parte de la `RegisterBundles` método.</span><span class="sxs-lookup"><span data-stu-id="d909e-188">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="d909e-189">El código anterior crea un nuevo paquete de JavaScript denominado *~/bundles/jquery* que incluye todos los controles (que es debug o reducido pero no.* vsdoc*) archivos en el *Scripts* carpeta que coincide con la cadena de carácter comodín "{versión} ~/Scripts/jquery-.js".</span><span class="sxs-lookup"><span data-stu-id="d909e-189">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="d909e-190">En ASP.NET MVC 4, esto significa que con una configuración de depuración, el archivo *1.7.1.js jquery* se agregará a la agrupación.</span><span class="sxs-lookup"><span data-stu-id="d909e-190">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="d909e-191">En una configuración de lanzamiento, *1.7.1.min.js jquery* se agregará.</span><span class="sxs-lookup"><span data-stu-id="d909e-191">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="d909e-192">El marco de agrupación sigue varias convenciones comunes como:</span><span class="sxs-lookup"><span data-stu-id="d909e-192">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="d909e-193">Seleccionar archivo de ".min" para la versión cuando existen "FileX.min.js" y "FileX.js".</span><span class="sxs-lookup"><span data-stu-id="d909e-193">Selecting ".min" file for release when "FileX.min.js" and "FileX.js" exist.</span></span>
- <span data-ttu-id="d909e-194">Seleccione la versión no es ".min" para la depuración.</span><span class="sxs-lookup"><span data-stu-id="d909e-194">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="d909e-195">Se omitirá "-vsdoc" archivos (por ejemplo, jquery-1.7.1-vsdoc.js), que solo son utilizados por IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="d909e-195">Ignoring "-vsdoc" files (such as jquery-1.7.1-vsdoc.js), which are used only by IntelliSense.</span></span>

<span data-ttu-id="d909e-196">El `{version}` comodín coincidencia mostrado anteriormente se utiliza para crear automáticamente un paquete jQuery con la versión adecuada de jQuery en su *Scripts* carpeta.</span><span class="sxs-lookup"><span data-stu-id="d909e-196">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="d909e-197">En este ejemplo, el uso de un carácter comodín proporciona las siguientes ventajas:</span><span class="sxs-lookup"><span data-stu-id="d909e-197">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="d909e-198">Permite usar NuGet para actualizar a una versión más reciente de jQuery sin cambiar el código anterior de agrupación o referencias de jQuery en las páginas de vista.</span><span class="sxs-lookup"><span data-stu-id="d909e-198">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="d909e-199">Selecciona la versión completa de configuraciones de depuración y la versión de ".min" para la versión genera automáticamente.</span><span class="sxs-lookup"><span data-stu-id="d909e-199">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="d909e-200">Uso de una CDN</span><span class="sxs-lookup"><span data-stu-id="d909e-200">Using a CDN</span></span>

 <span data-ttu-id="d909e-201">El código siguiente reemplaza la agrupación de jQuery local con una agrupación de jQuery CDN.</span><span class="sxs-lookup"><span data-stu-id="d909e-201">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="d909e-202">En el código anterior, será necesario jQuery desde la red CDN mientras en versión modo y la versión de depuración de jQuery se capturarán localmente en el modo de depuración.</span><span class="sxs-lookup"><span data-stu-id="d909e-202">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="d909e-203">Cuando se usa una CDN, debe tener un mecanismo de reserva en caso de que se produce un error en la solicitud de red CDN.</span><span class="sxs-lookup"><span data-stu-id="d909e-203">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="d909e-204">El siguiente marcado fragmentar desde el final de la secuencia de comandos de muestra de archivo diseño, agrega para solicitar jQuery falla la red CDN.</span><span class="sxs-lookup"><span data-stu-id="d909e-204">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="d909e-205">Crear un paquete</span><span class="sxs-lookup"><span data-stu-id="d909e-205">Creating a Bundle</span></span>

<span data-ttu-id="d909e-206">El [agrupación](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) clase `Include` método toma una matriz de cadenas, donde cada cadena es una ruta de acceso virtual al recurso.</span><span class="sxs-lookup"><span data-stu-id="d909e-206">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="d909e-207">El código siguiente en el método RegisterBundles en el *aplicación\_Start\BundleConfig.cs* archivo muestra cómo varios archivos se agregan a una agrupación:</span><span class="sxs-lookup"><span data-stu-id="d909e-207">The following code from the RegisterBundles method in the *App\_Start\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="d909e-208">El [agrupación](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) clase `IncludeDirectory` método se proporciona para agregar todos los archivos en un directorio (y, opcionalmente, todos los subdirectorios) que coinciden con un patrón de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="d909e-208">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="d909e-209">El [agrupación](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) clase `IncludeDirectory` API se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="d909e-209">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="d909e-210">Los paquetes se hace referencia en vistas utilizando el método Render, ( `Styles.Render` de CSS y `Scripts.Render` de JavaScript).</span><span class="sxs-lookup"><span data-stu-id="d909e-210">Bundles are referenced in views using the Render method, ( `Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="d909e-211">El siguiente marcado de la *Views\Shared\\_Layout.cshtml* archivo muestra cómo hacer referencia a las vistas de proyecto ASP.NET internet predeterminadas agrupaciones CSS y JavaScript.</span><span class="sxs-lookup"><span data-stu-id="d909e-211">The following markup from the *Views\Shared\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="d909e-212">Tenga en cuenta los métodos de representación toma una matriz de cadenas, por lo que puede agregar varios paquetes en una sola línea de código.</span><span class="sxs-lookup"><span data-stu-id="d909e-212">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="d909e-213">Por lo general deseará utilizar los métodos de representación que crear el código HTML necesario para hacer referencia al recurso.</span><span class="sxs-lookup"><span data-stu-id="d909e-213">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="d909e-214">Puede usar el `Url` método para generar la dirección URL para el recurso sin el formato necesario para hacer referencia al recurso.</span><span class="sxs-lookup"><span data-stu-id="d909e-214">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="d909e-215">Imagine que desea utilizar la nueva HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) atributo.</span><span class="sxs-lookup"><span data-stu-id="d909e-215">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="d909e-216">El código siguiente muestra cómo hacer referencia a modernizr utilizando el `Url` método.</span><span class="sxs-lookup"><span data-stu-id="d909e-216">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="d909e-217">Mediante la "\*" carácter comodín para seleccionar archivos</span><span class="sxs-lookup"><span data-stu-id="d909e-217">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="d909e-218">La ruta de acceso virtual especificada en el `Include` método y la búsqueda de patrón en el `IncludeDirectory` método puede aceptar una "\*" carácter comodín como un prefijo o sufijo que en el último segmento de ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="d909e-218">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="d909e-219">La cadena de búsqueda distingue mayúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="d909e-219">The search string is case insensitive.</span></span> <span data-ttu-id="d909e-220">El `IncludeDirectory` método tiene la opción de buscar en los subdirectorios.</span><span class="sxs-lookup"><span data-stu-id="d909e-220">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="d909e-221">Considere la posibilidad de un proyecto con los siguientes archivos JavaScript:</span><span class="sxs-lookup"><span data-stu-id="d909e-221">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="d909e-222">*Scripts\Common\AddAltToImg.js*</span><span class="sxs-lookup"><span data-stu-id="d909e-222">*Scripts\Common\AddAltToImg.js*</span></span>
- <span data-ttu-id="d909e-223">*Scripts\Common\ToggleDiv.js*</span><span class="sxs-lookup"><span data-stu-id="d909e-223">*Scripts\Common\ToggleDiv.js*</span></span>
- <span data-ttu-id="d909e-224">*Scripts\Common\ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="d909e-224">*Scripts\Common\ToggleImg.js*</span></span>
- <span data-ttu-id="d909e-225">*Scripts\Common\Sub1\ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="d909e-225">*Scripts\Common\Sub1\ToggleLinks.js*</span></span>

![imag dir](bundling-and-minification/_static/image7.png)

<span data-ttu-id="d909e-227">La siguiente tabla muestra los archivos agregados a una agrupación mediante el carácter comodín, como se muestra:</span><span class="sxs-lookup"><span data-stu-id="d909e-227">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="d909e-228">**Call**</span><span class="sxs-lookup"><span data-stu-id="d909e-228">**Call**</span></span> | <span data-ttu-id="d909e-229">**Archivos agregados o produjo una excepción**</span><span class="sxs-lookup"><span data-stu-id="d909e-229">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="d909e-230">Include("~/Scripts/Common/\*.js")</span><span class="sxs-lookup"><span data-stu-id="d909e-230">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="d909e-231">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="d909e-231">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="d909e-232">Include("~/Scripts/Common/T\*.js")</span><span class="sxs-lookup"><span data-stu-id="d909e-232">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="d909e-233">Excepción de patrón no válida.</span><span class="sxs-lookup"><span data-stu-id="d909e-233">Invalid pattern exception.</span></span> <span data-ttu-id="d909e-234">El carácter comodín solo se permite en el prefijo o sufijo.</span><span class="sxs-lookup"><span data-stu-id="d909e-234">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="d909e-235">Include("~/Scripts/Common/\*og.\*")</span><span class="sxs-lookup"><span data-stu-id="d909e-235">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="d909e-236">Excepción de patrón no válida.</span><span class="sxs-lookup"><span data-stu-id="d909e-236">Invalid pattern exception.</span></span> <span data-ttu-id="d909e-237">Se permite sólo un carácter comodín.</span><span class="sxs-lookup"><span data-stu-id="d909e-237">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="d909e-238">"Include("~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="d909e-238">"Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="d909e-239">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="d909e-239">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="d909e-240">"Include("~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="d909e-240">"Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="d909e-241">Excepción de patrón no válida.</span><span class="sxs-lookup"><span data-stu-id="d909e-241">Invalid pattern exception.</span></span> <span data-ttu-id="d909e-242">Un segmento de carácter comodín pura no es válido.</span><span class="sxs-lookup"><span data-stu-id="d909e-242">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="d909e-243">IncludeDirectory("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="d909e-243">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="d909e-244">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="d909e-244">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="d909e-245">IncludeDirectory ("~/Scripts/Common", "T\*", true)</span><span class="sxs-lookup"><span data-stu-id="d909e-245">IncludeDirectory("~/Scripts/Common", "T\*",true)</span></span> | <span data-ttu-id="d909e-246">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="d909e-246">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span></span> |

<span data-ttu-id="d909e-247">Agregar explícitamente cada archivo a una agrupación es generalmente el preferido sobre comodín carga de archivos por los motivos siguientes:</span><span class="sxs-lookup"><span data-stu-id="d909e-247">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="d909e-248">Agregar secuencias de comandos por los valores predeterminados de comodín para cargarlos en orden alfabético, que normalmente no es lo desea.</span><span class="sxs-lookup"><span data-stu-id="d909e-248">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="d909e-249">Con frecuencia, los archivos CSS y JavaScript deben agregarse en un orden específico (no alfabéticos).</span><span class="sxs-lookup"><span data-stu-id="d909e-249">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="d909e-250">Puede mitigar este riesgo mediante la adición de un personalizado [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementación pero agregar explícitamente cada archivo es menos propenso a errores.</span><span class="sxs-lookup"><span data-stu-id="d909e-250">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="d909e-251">Por ejemplo, puede agregar nuevos activos en una carpeta en el futuro que podrían requerir que se modifique su [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementación.</span><span class="sxs-lookup"><span data-stu-id="d909e-251">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="d909e-252">Agregado a un directorio mediante la carga de carácter comodín de determinados archivos de vista pueden incluirse en todas las vistas que hacen referencia a ese paquete.</span><span class="sxs-lookup"><span data-stu-id="d909e-252">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="d909e-253">Si la secuencia de comandos específicos de la vista se agrega a una agrupación, puede obtener un error de JavaScript en otras vistas que hacen referencia a la agrupación.</span><span class="sxs-lookup"><span data-stu-id="d909e-253">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="d909e-254">Como resultado archivos CSS que importan otros archivos en los archivos importados cargados dos veces.</span><span class="sxs-lookup"><span data-stu-id="d909e-254">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="d909e-255">Por ejemplo, el código siguiente crea un paquete con la mayoría de los archivos CSS de jQuery UI tema cargados dos veces.</span><span class="sxs-lookup"><span data-stu-id="d909e-255">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

  <span data-ttu-id="d909e-256">El selector de comodín "\*.css" pone en cada archivo CSS en la carpeta, incluido el *Content\themes\base\jquery.ui.all.css* archivo.</span><span class="sxs-lookup"><span data-stu-id="d909e-256">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\themes\base\jquery.ui.all.css* file.</span></span> <span data-ttu-id="d909e-257">El *jquery.ui.all.css* archivo importa otros archivos CSS.</span><span class="sxs-lookup"><span data-stu-id="d909e-257">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="d909e-258">Agrupar el almacenamiento en caché</span><span class="sxs-lookup"><span data-stu-id="d909e-258">Bundle Caching</span></span>

<span data-ttu-id="d909e-259">Agrupaciones de establecer el encabezado Expires de HTTP un año de cuando se crea el paquete.</span><span class="sxs-lookup"><span data-stu-id="d909e-259">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="d909e-260">Si navega a una página consultada anteriormente, Internet Explorer no realizar una solicitud condicional para la agrupación, se muestra en Fiddler es decir, hay ninguna solicitud HTTP GET desde Internet Explorer para las agrupaciones y ninguna respuesta HTTP 304 desde el servidor.</span><span class="sxs-lookup"><span data-stu-id="d909e-260">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="d909e-261">Puede hacer que Internet Explorer para realizar una solicitud condicional para cada agrupación con la tecla F5 (lo que genera una respuesta HTTP 304 por cada agrupación).</span><span class="sxs-lookup"><span data-stu-id="d909e-261">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="d909e-262">Puede forzar una actualización completa mediante ^ F5 (lo que genera una respuesta HTTP 200 por cada agrupación).</span><span class="sxs-lookup"><span data-stu-id="d909e-262">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="d909e-263">La siguiente imagen muestra la **Caching** ficha del panel de respuesta de Fiddler:</span><span class="sxs-lookup"><span data-stu-id="d909e-263">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![imagen de almacenamiento en caché de Fiddler](bundling-and-minification/_static/image8.png)

<span data-ttu-id="d909e-265">La solicitud</span><span class="sxs-lookup"><span data-stu-id="d909e-265">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="d909e-266">es para la agrupación **AllMyScripts** y contiene un par de cadena de consulta **v = r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span><span class="sxs-lookup"><span data-stu-id="d909e-266">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="d909e-267">La cadena de consulta **v** tiene un valor de símbolo (token) que es un identificador único usado para almacenar en caché.</span><span class="sxs-lookup"><span data-stu-id="d909e-267">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="d909e-268">Siempre que el paquete no cambia, la aplicación ASP.NET, se solicitará la **AllMyScripts** empaquetar con este token.</span><span class="sxs-lookup"><span data-stu-id="d909e-268">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="d909e-269">Si cambia cualquier archivo en el paquete, el marco de trabajo de optimización de ASP.NET generará un nuevo token para garantizar que las solicitudes del explorador para la agrupación obtendrán el paquete más reciente.</span><span class="sxs-lookup"><span data-stu-id="d909e-269">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="d909e-270">Si ejecuta las herramientas de desarrollo F12 de IE9 y navegar a una página previamente cargada, Internet Explorer incorrectamente muestra solicitudes GET condicionales realizadas en cada paquete y el servidor devuelve HTTP 304.</span><span class="sxs-lookup"><span data-stu-id="d909e-270">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="d909e-271">Puede leer por qué IE9 tiene problemas para determinar si se realizó una solicitud condicional en la entrada de blog [utilizando CDN y Expires para mejorar el rendimiento del sitio Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="d909e-271">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="d909e-272">MENOR, CoffeeScript, SCSS, Sass, cómo agrupar.</span><span class="sxs-lookup"><span data-stu-id="d909e-272">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="d909e-273">El marco de agrupación y minificación proporciona un mecanismo para procesar idiomas intermedios como [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [menos](http://www.dotlesscss.org/) o [Coffeescript ](http://coffeescript.org/)y aplicar transformaciones como minificación a la agrupación resultante.</span><span class="sxs-lookup"><span data-stu-id="d909e-273">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="d909e-274">Por ejemplo, para agregar [. less](http://www.dotlesscss.org/) archivos al proyecto de MVC 4:</span><span class="sxs-lookup"><span data-stu-id="d909e-274">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="d909e-275">Cree una carpeta para la menor cantidad de contenido.</span><span class="sxs-lookup"><span data-stu-id="d909e-275">Create a folder for your LESS content.</span></span> <span data-ttu-id="d909e-276">En el ejemplo siguiente se usa el *Content\MyLess* carpeta.</span><span class="sxs-lookup"><span data-stu-id="d909e-276">The following example uses the *Content\MyLess* folder.</span></span>
2. <span data-ttu-id="d909e-277">Agregar el [. less](http://www.dotlesscss.org/) paquete NuGet **punto** al proyecto.</span><span class="sxs-lookup"><span data-stu-id="d909e-277">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="d909e-278">![Instalación de punto de NuGet](bundling-and-minification/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="d909e-278">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="d909e-279">Agregue una clase que implementa el [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interfaz.</span><span class="sxs-lookup"><span data-stu-id="d909e-279">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="d909e-280">Para la transformación. less, agregue el código siguiente a su proyecto.</span><span class="sxs-lookup"><span data-stu-id="d909e-280">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="d909e-281">Crear un paquete de menos archivos con la `LessTransform` y [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transformar.</span><span class="sxs-lookup"><span data-stu-id="d909e-281">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="d909e-282">Agregue el código siguiente a la `RegisterBundles` método en el *aplicación\_Start\BundleConfig.cs* archivo.</span><span class="sxs-lookup"><span data-stu-id="d909e-282">Add the following code to the `RegisterBundles` method in the *App\_Start\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="d909e-283">Agregue el código siguiente a cualquier vista que hace referencia a la agrupación de menos.</span><span class="sxs-lookup"><span data-stu-id="d909e-283">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="d909e-284">Consideraciones de agrupación</span><span class="sxs-lookup"><span data-stu-id="d909e-284">Bundle Considerations</span></span>

<span data-ttu-id="d909e-285">Una buena convención deben seguir al crear agrupaciones consiste en incluir "paquete" como prefijo en el nombre del paquete.</span><span class="sxs-lookup"><span data-stu-id="d909e-285">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="d909e-286">Esto evitará que una posible [conflicto de enrutamiento](https://forums.asp.net/post/5012037.aspx).</span><span class="sxs-lookup"><span data-stu-id="d909e-286">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="d909e-287">Una vez que se actualiza un archivo en un paquete, se genera un nuevo token para el parámetro de cadena de consulta de agrupación y se debe descargar el paquete completo la próxima vez que un cliente solicita una página que contiene el paquete.</span><span class="sxs-lookup"><span data-stu-id="d909e-287">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="d909e-288">En el marcado tradicional donde cada activo se enumera individualmente, se descargarán solo el archivo modificado.</span><span class="sxs-lookup"><span data-stu-id="d909e-288">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="d909e-289">Activos que cambian con frecuencia no pueden ser buenas candidatas para la agrupación.</span><span class="sxs-lookup"><span data-stu-id="d909e-289">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="d909e-290">Agrupar y minificar mejoran principalmente el primer tiempo de carga de solicitud de página.</span><span class="sxs-lookup"><span data-stu-id="d909e-290">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="d909e-291">Una vez que se ha solicitado una página Web, el explorador se almacena en memoria caché los activos (JavaScript, CSS e imágenes) para agrupar y minificar no proporcionan ningún aumento del rendimiento cuando se solicita la misma página o páginas en el mismo sitio que solicita los activos de la mismos.</span><span class="sxs-lookup"><span data-stu-id="d909e-291">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="d909e-292">Si no establece la expira encabezado correctamente en los activos y no use agrupar y minificar, la heurística de actualización de los exploradores, se marcarán como los recursos obsoletos después de unos días y el explorador requerirá una solicitud de validación para cada recurso.</span><span class="sxs-lookup"><span data-stu-id="d909e-292">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="d909e-293">En este caso, agrupar y minificar proporcionan un aumento del rendimiento después de la primera solicitud de página.</span><span class="sxs-lookup"><span data-stu-id="d909e-293">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="d909e-294">Para obtener más información, consulte el blog de [utilizando CDN y Expires para mejorar el rendimiento del sitio Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="d909e-294">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="d909e-295">La limitación del navegador de seis conexiones simultáneas por cada nombre de host se puede mitigar mediante el uso de un [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="d909e-295">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="d909e-296">Debido a que la red CDN tiene un nombre de host diferente que el sitio de hospedaje, las solicitudes de activos de la red CDN se descontará el límite de conexiones simultáneas seis a su entorno de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="d909e-296">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="d909e-297">También puede proporcionar una CDN comunes del almacenamiento en caché de paquete y borde ventajas de caché.</span><span class="sxs-lookup"><span data-stu-id="d909e-297">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="d909e-298">Los paquetes se deben dividir por las páginas que las necesiten.</span><span class="sxs-lookup"><span data-stu-id="d909e-298">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="d909e-299">Por ejemplo, el valor predeterminado de plantilla de MVC de ASP.NET para una aplicación de internet crea una agrupación de validación de jQuery independiente de jQuery.</span><span class="sxs-lookup"><span data-stu-id="d909e-299">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="d909e-300">Dado que las vistas predeterminadas que se crea no tienen ninguna entrada y no registrar los valores, no incluyen la agrupación de validación.</span><span class="sxs-lookup"><span data-stu-id="d909e-300">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="d909e-301">El `System.Web.Optimization` espacio de nombres se implementa en System.Web.Optimization.DLL.</span><span class="sxs-lookup"><span data-stu-id="d909e-301">The `System.Web.Optimization` namespace is implemented in System.Web.Optimization.DLL.</span></span> <span data-ttu-id="d909e-302">Aprovecha la biblioteca de WebGrease (WebGrease.dll) para capacidades de reducción, que a su vez usa Antlr3.Runtime.dll.</span><span class="sxs-lookup"><span data-stu-id="d909e-302">It leverages the WebGrease library (WebGrease.dll) for minification capabilities, which in turn uses Antlr3.Runtime.dll.</span></span>

<span data-ttu-id="d909e-303">*Utilizo Twitter realizar entradas rápidos y compartir vínculos. Es el identificador de Twitter*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="d909e-303">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="d909e-304">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="d909e-304">Additional Resources</span></span>

- <span data-ttu-id="d909e-305">Vídeo:[agrupación y optimizar](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) por [Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="d909e-305">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="d909e-306">[Adición de optimización Web a un sitio de páginas Web](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="d909e-306">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="d909e-307">[Agregar agrupación y Minificación a formularios Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="d909e-307">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="d909e-308">[Implicaciones de rendimiento de agrupación y Minificación de exploración Web](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) por [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="d909e-308">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="d909e-309">[Usar CDN y caduca para mejorar el rendimiento del sitio Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="d909e-309">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="d909e-310">Minimizar RTT (tiempos de ida y vuelta)</span><span class="sxs-lookup"><span data-stu-id="d909e-310">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="d909e-311">Colaboradores</span><span class="sxs-lookup"><span data-stu-id="d909e-311">Contributors</span></span>

- <span data-ttu-id="d909e-312">Hao Kung</span><span class="sxs-lookup"><span data-stu-id="d909e-312">Hao Kung</span></span>
- [<span data-ttu-id="d909e-313">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="d909e-313">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="d909e-314">Diana LaRose</span><span class="sxs-lookup"><span data-stu-id="d909e-314">Diana LaRose</span></span>
