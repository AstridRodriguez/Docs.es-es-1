---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
title: Agregar un método de creación y crear vista | Documentos de Microsoft
author: shanselman
description: Se trata de un tutorial para principiantes que presenta los conceptos básicos de ASP.NET MVC. Crear una aplicación web simple que lee y escribe desde una base de datos.
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/14/2010
ms.topic: article
ms.assetid: a3a90963-0286-4fa0-9b3d-c230cc18b0a3
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
msc.type: authoredcontent
ms.openlocfilehash: 48e656a0c394b9db5baaec9c557ec38c4020d41b
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
---
<a name="adding-a-create-method-and-create-view"></a><span data-ttu-id="8dc43-104">Agregar un método de creación y crear vista</span><span class="sxs-lookup"><span data-stu-id="8dc43-104">Adding a Create Method and Create View</span></span>
====================
<span data-ttu-id="8dc43-105">por [Scott Hanselman](https://github.com/shanselman)</span><span class="sxs-lookup"><span data-stu-id="8dc43-105">by [Scott Hanselman](https://github.com/shanselman)</span></span>

> <span data-ttu-id="8dc43-106">Se trata de un tutorial para principiantes que presenta los conceptos básicos de ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="8dc43-106">This is a beginner tutorial that introduces the basics of ASP.NET MVC.</span></span> <span data-ttu-id="8dc43-107">Se creará una aplicación web simple que lee y escribe desde una base de datos.</span><span class="sxs-lookup"><span data-stu-id="8dc43-107">You'll create a simple web application that reads and writes from a database.</span></span> <span data-ttu-id="8dc43-108">Visite la [centro de aprendizaje de ASP.NET MVC](../../../index.md) para buscar otros ASP.NET MVC, tutoriales y ejemplos.</span><span class="sxs-lookup"><span data-stu-id="8dc43-108">Visit the [ASP.NET MVC learning center](../../../index.md) to find other ASP.NET MVC tutorials and samples.</span></span>


<span data-ttu-id="8dc43-109">En esta sección, vamos a implementar la compatibilidad necesaria para permitir a los usuarios crear nuevas películas en nuestra base de datos.</span><span class="sxs-lookup"><span data-stu-id="8dc43-109">In this section we are going to implement the support necessary to enable users to create new movies in our database.</span></span> <span data-ttu-id="8dc43-110">Deberá hacerlo mediante la implementación de la acción de dirección URL de películas/Create.</span><span class="sxs-lookup"><span data-stu-id="8dc43-110">We'll do this by implementing the /Movies/Create URL action.</span></span>

<span data-ttu-id="8dc43-111">La implementación de la dirección URL de películas/crear es un proceso de dos pasos.</span><span class="sxs-lookup"><span data-stu-id="8dc43-111">Implementing the /Movies/Create URL is a two step process.</span></span> <span data-ttu-id="8dc43-112">Cuando un usuario visita la dirección URL de películas/crear por primera vez que deseamos mostrar a un formulario HTML que puede rellenar para escribir una película nuevo.</span><span class="sxs-lookup"><span data-stu-id="8dc43-112">When a user first visits the /Movies/Create URL we want to show them an HTML form that they can fill out to enter a new movie.</span></span> <span data-ttu-id="8dc43-113">A continuación, cuando el usuario envía el formulario y publicaciones de que realizar copias de los datos al servidor, desea recuperar el contenido expuesto y guárdelo en nuestra base de datos.</span><span class="sxs-lookup"><span data-stu-id="8dc43-113">Then, when the user submits the form and posts the data back to the server, we want to retrieve the posted contents and save it into our database.</span></span>

<span data-ttu-id="8dc43-114">Implementaremos estos dos pasos en dos métodos de Create() dentro de nuestra clase MoviesController.</span><span class="sxs-lookup"><span data-stu-id="8dc43-114">We'll implement these two steps within two Create() methods within our MoviesController class.</span></span> <span data-ttu-id="8dc43-115">Un método mostrará el &lt;formulario&gt; que el usuario debe rellenar para crear una película nuevo.</span><span class="sxs-lookup"><span data-stu-id="8dc43-115">One method will show the &lt;form&gt; that the user should fill out to create a new movie.</span></span> <span data-ttu-id="8dc43-116">El segundo método controlará el procesamiento de los datos enviados cuando el usuario envía la &lt;formulario&gt; al servidor y guardar una película nuevo dentro de nuestra base de datos.</span><span class="sxs-lookup"><span data-stu-id="8dc43-116">The second method will handle processing the posted data when the user submits the &lt;form&gt; back to the server, and save a new Movie within our database.</span></span>

<span data-ttu-id="8dc43-117">A continuación se muestra el código vamos a agregar a nuestra clase MoviesController implementar esto:</span><span class="sxs-lookup"><span data-stu-id="8dc43-117">Below is the code we'll add to our MoviesController class to implement this:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample1.cs)]

<span data-ttu-id="8dc43-118">El código anterior contiene todo el código que necesitaremos dentro de nuestro controlador.</span><span class="sxs-lookup"><span data-stu-id="8dc43-118">The above code contains all of the code that we'll need within our Controller.</span></span>

<span data-ttu-id="8dc43-119">Implementemos ahora la plantilla Create View que vamos a usar para mostrar un formulario para el usuario.</span><span class="sxs-lookup"><span data-stu-id="8dc43-119">Let's now implement the Create View template that we'll use to display a form to the user.</span></span> <span data-ttu-id="8dc43-120">Se le haga clic en el primer método de crear y seleccione "Agregar vista" para crear la plantilla de vista de nuestro formulario de película.</span><span class="sxs-lookup"><span data-stu-id="8dc43-120">We'll right click in the first Create method and select "Add View" to create the view template for our Movie form.</span></span>

<span data-ttu-id="8dc43-121">Se seleccionará que se va a pasar a la plantilla de vista de una "película" como su clase de vista de datos e indican que deseamos "aplicar la técnica scaffolding" una plantilla "Crear".</span><span class="sxs-lookup"><span data-stu-id="8dc43-121">We'll select that we are going to pass the view template a "Movie" as its view data class, and indicate that we want to "scaffold" a "Create" template.</span></span>

<span data-ttu-id="8dc43-122">[![Agregar vista](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8dc43-122">[![Add View](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span></span>

<span data-ttu-id="8dc43-123">Tras hacer clic en el botón Agregar, plantilla de vista de \Movies\Create.aspx se creará para usted.</span><span class="sxs-lookup"><span data-stu-id="8dc43-123">After you click the Add button, \Movies\Create.aspx View template will be created for you.</span></span> <span data-ttu-id="8dc43-124">Dado que hemos seleccionado "Crear" en la lista desplegable de "vista contenido", el cuadro de diálogo Agregar vista automáticamente "scaffolding" algún contenido predeterminado para nosotros.</span><span class="sxs-lookup"><span data-stu-id="8dc43-124">Because we selected "Create" from the "view content" dropdown, the Add View dialog automatically "scaffolded" some default content for us.</span></span> <span data-ttu-id="8dc43-125">La técnica scaffolding creado HTML &lt;formulario&gt;, un lugar para error de validación de mensajes para ir y, puesto que la técnica scaffolding sabe de películas, crea etiqueta y los campos para cada propiedad de la clase.</span><span class="sxs-lookup"><span data-stu-id="8dc43-125">The scaffolding created an HTML &lt;form&gt;, a place for validation error messages to go, and since scaffolding knows about Movies, it created Label and Fields for each property of our class.</span></span>

[!code-aspx[Main](getting-started-with-mvc-part6/samples/sample2.aspx)]

<span data-ttu-id="8dc43-126">Puesto que nuestra base de datos proporciona automáticamente una película en un identificador, vamos a quitar esos campos ese modelo de referencia. Id. de la vista de creación.</span><span class="sxs-lookup"><span data-stu-id="8dc43-126">Since our database automatically gives a Movie an ID, let's remove those fields that reference model.Id from our Create View.</span></span> <span data-ttu-id="8dc43-127">Elimine las líneas después de 7 &lt;leyenda&gt;campos&lt;/legend&gt; tal y como se muestran el campo de identificador que no es aconsejable.</span><span class="sxs-lookup"><span data-stu-id="8dc43-127">Remove the 7 lines after &lt;legend&gt;Fields&lt;/legend&gt; as they show the ID field that we don't want.</span></span>

<span data-ttu-id="8dc43-128">Ahora vamos a crear una película nuevo y lo agrega a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8dc43-128">Let's now create a new movie and add it to the database.</span></span> <span data-ttu-id="8dc43-129">Se deberá hacer esto mediante la ejecución de la aplicación de nuevo y visite el "/ películas" dirección URL y haga clic en "Crear" Use el vínculo para agregar una película nuevo.</span><span class="sxs-lookup"><span data-stu-id="8dc43-129">We'll do this by running the application again and visit the "/Movies" URL and click the "Create" link to add a new Movie.</span></span>

<span data-ttu-id="8dc43-130">[![Crear - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="8dc43-130">[![Create - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span></span>

<span data-ttu-id="8dc43-131">Cuando se hace clic en el botón Crear, que publicaremos nuevo (a través de HTTP POST) los datos en este formulario para el método /Movies/Create que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="8dc43-131">When we click the Create button, we'll be posting back (via HTTP POST) the data on this form to the /Movies/Create method that we just created.</span></span> <span data-ttu-id="8dc43-132">Al igual que cuando el sistema automáticamente tardó el parámetro "numTimes" y "nombre" fuera de la dirección URL y ellos asignados a los parámetros en un método anteriormente, el sistema automáticamente toman los campos de formulario de una entrada de blog y asignarlos a un objeto.</span><span class="sxs-lookup"><span data-stu-id="8dc43-132">Just like when the system automatically took the "numTimes" and "name " parameter out of the URL and mapped them to parameters on a method earlier, the system will automatically take the Form Fields from a POST and map them to an object.</span></span> <span data-ttu-id="8dc43-133">En este caso, los valores de los campos en formato HTML como "ReleaseDate" y "Title" automáticamente se colocan en las propiedades correctas de una nueva instancia de una película.</span><span class="sxs-lookup"><span data-stu-id="8dc43-133">In this case, values from fields in HTML like "ReleaseDate" and "Title" will automatically be put into the correct properties of a new instance of a Movie.</span></span>

<span data-ttu-id="8dc43-134">Echemos un vistazo al segundo método Create de nuestro MoviesController nuevo.</span><span class="sxs-lookup"><span data-stu-id="8dc43-134">Let's look at the second Create method from our MoviesController again.</span></span> <span data-ttu-id="8dc43-135">Tenga en cuenta cómo toma un objeto de "Película" como argumento:</span><span class="sxs-lookup"><span data-stu-id="8dc43-135">Notice how it takes a "Movie" object as an argument:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample3.cs)]

<span data-ttu-id="8dc43-136">Este objeto de película, a continuación, se pasó a la versión [HttpPost] de nuestro método de acción Create, y se guardan en la base de datos y, a continuación, redirige al usuario al método de acción de Index() que mostrará el resultado guardado en la lista de película:</span><span class="sxs-lookup"><span data-stu-id="8dc43-136">This Movie object was then passed to the [HttpPost] version of our Create action method, and we saved it in the database and then redirected the user back to the Index() action method which will show the saved result in the movie list:</span></span>

<span data-ttu-id="8dc43-137">[![Lista de películas - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="8dc43-137">[![Movie List - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span></span>

<span data-ttu-id="8dc43-138">Hemos no estamos comprobando si nuestro películas son correctos, sin embargo, y la base de datos no permite guardar una película con ningún título.</span><span class="sxs-lookup"><span data-stu-id="8dc43-138">We aren't checking if our movies are correct, though, and the database won't allow us to save a movie with no Title.</span></span> <span data-ttu-id="8dc43-139">Sería bueno si podríamos indicamos al usuario que antes de la base de datos produjo un error.</span><span class="sxs-lookup"><span data-stu-id="8dc43-139">It'd be nice if we could tell the user that before the database threw an error.</span></span> <span data-ttu-id="8dc43-140">Esto a continuación, haremos agregando compatibilidad de validación a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8dc43-140">We'll do this next by adding validation support to our application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8dc43-141">[Anterior](getting-started-with-mvc-part5.md)
> [Siguiente](getting-started-with-mvc-part7.md)</span><span class="sxs-lookup"><span data-stu-id="8dc43-141">[Previous](getting-started-with-mvc-part5.md)
[Next](getting-started-with-mvc-part7.md)</span></span>
