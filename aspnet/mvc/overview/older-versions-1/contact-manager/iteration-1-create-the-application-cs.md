---
uid: mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-cs
title: 'Iteración #1: crear la aplicación (C#) | Documentos de Microsoft'
author: microsoft
description: 'En la primera iteración, se creará el póngase en contacto con el Administrador de la manera más sencilla posible. Se agrega compatibilidad para las operaciones de base de datos básicos: crear, leer, actualizar y D...'
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2009
ms.topic: article
ms.assetid: db0f160b-901c-46d3-865e-7ab6cd4ed68d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-cs
msc.type: authoredcontent
ms.openlocfilehash: 30f626511164363fea2195a05e73aeee5764933b
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
ms.locfileid: "30877390"
---
<a name="iteration-1--create-the-application-c"></a><span data-ttu-id="f9e2d-104">Iteración #1: crear la aplicación (C#)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-104">Iteration #1 – Create the Application (C#)</span></span>
====================
<span data-ttu-id="f9e2d-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="f9e2d-106">Descargar código</span><span class="sxs-lookup"><span data-stu-id="f9e2d-106">Download Code</span></span>](iteration-1-create-the-application-cs/_static/contactmanager_1_cs1.zip)

> <span data-ttu-id="f9e2d-107">En la primera iteración, se creará el póngase en contacto con el Administrador de la manera más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-107">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="f9e2d-108">Se agrega compatibilidad para las operaciones de base de datos básicos: crear, lectura, actualización y eliminación (CRUD).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-108">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="f9e2d-109">Creación de una aplicación de MVC de ASP.NET (VB) de administración de contactos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>

<span data-ttu-id="f9e2d-110">En esta serie de tutoriales, creamos una aplicación de administración de contactos toda desde el principio para finalizar.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="f9e2d-111">La aplicación de ponerse en contacto con el administrador permite almacenar información de contacto - nombres, números de teléfono y direcciones de correo electrónico: para obtener una lista de personas.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="f9e2d-112">Se compile la aplicación en varias iteraciones.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="f9e2d-113">Con cada iteración, se mejora gradualmente la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="f9e2d-114">El objetivo de este enfoque de iteración varias es para que pueda entender el motivo de cada cambio.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="f9e2d-115">Iteración #1: crear la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="f9e2d-116">En la primera iteración, se creará el póngase en contacto con el Administrador de la manera más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="f9e2d-117">Se agrega compatibilidad para las operaciones de base de datos básicos: crear, lectura, actualización y eliminación (CRUD).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="f9e2d-118">Iteración #2: hacer que la aplicación sea bonito.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="f9e2d-119">En esta iteración, mejorar la apariencia de la aplicación mediante la modificación de la página principal de vista de MVC de ASP.NET predeterminada y en cascada hoja de estilos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="f9e2d-120">Iteración #3: agregar validación del formulario.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="f9e2d-121">En la tercera iteración, agregamos la validación del formulario básico.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="f9e2d-122">Es evitar que los usuarios enviar un formulario sin completar los campos obligatorios.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="f9e2d-123">También hemos validar direcciones de correo electrónico y números de teléfono.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="f9e2d-124">Iteración #4: hacer que la aplicación de acoplamiento flexible.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="f9e2d-125">En esta tercera iteración, aprovechamos de varios patrones de diseño de software para que resulten más fáciles de mantener y modificar la aplicación póngase en contacto con el administrador.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-125">In this third iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="f9e2d-126">Por ejemplo, se refactoriza nuestra aplicación para que use el modelo de repositorio y el modelo de inserción de dependencias.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="f9e2d-127">Iteración #5: crear pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="f9e2d-128">En la iteración quinto, hacemos nuestra aplicación más fácil de mantener y modificar mediante la adición de pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="f9e2d-129">Hemos simular nuestro clases del modelo de datos y generar pruebas unitarias para nuestros controladores y la lógica de validación.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="f9e2d-130">Iteración 6 #: Use desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="f9e2d-131">En esta iteración sexto, se agregan nuevas funciones a nuestra aplicación escribiendo pruebas unitarias en primer lugar y escribir código frente a las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="f9e2d-132">En esta iteración, agregamos grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="f9e2d-133">Iteración #7 - agregar funcionalidad de Ajax.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="f9e2d-134">En la iteración séptima, mejorar la capacidad de respuesta y el rendimiento de nuestra aplicación agregando compatibilidad para Ajax.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="f9e2d-135">Esta iteración</span><span class="sxs-lookup"><span data-stu-id="f9e2d-135">This Iteration</span></span>

<span data-ttu-id="f9e2d-136">En esta primera iteración, se genere la aplicación básica.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-136">In this first iteration, we build the basic application.</span></span> <span data-ttu-id="f9e2d-137">El objetivo es crear el póngase en contacto con el Administrador de la manera más rápida y más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-137">The goal is to build the Contact Manager in the fastest and simplest way possible.</span></span> <span data-ttu-id="f9e2d-138">En las iteraciones posteriores, mejorar el diseño de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-138">In later iterations, we improve the design of the application.</span></span>

<span data-ttu-id="f9e2d-139">La aplicación de Contact Manager es una aplicación básica de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-139">The Contact Manager application is a basic database-driven application.</span></span> <span data-ttu-id="f9e2d-140">Puede usar la aplicación para crear nuevos contactos, editar contactos existentes y eliminar contactos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-140">You can use the application to create new contacts, edit existing contacts, and delete contacts.</span></span>

<span data-ttu-id="f9e2d-141">En esta iteración se completarán los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-141">In this iteration, we complete the following steps:</span></span>

1. <span data-ttu-id="f9e2d-142">Aplicación de ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="f9e2d-142">ASP.NET MVC application</span></span>
2. <span data-ttu-id="f9e2d-143">Crear una base de datos para almacenar nuestra contactos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-143">Create a database to store our contacts</span></span>
3. <span data-ttu-id="f9e2d-144">Generar una clase de modelo para nuestra base de datos con Microsoft Entity Framework</span><span class="sxs-lookup"><span data-stu-id="f9e2d-144">Generate a model class for our database with the Microsoft Entity Framework</span></span>
4. <span data-ttu-id="f9e2d-145">Crear una acción de controlador y la vista que nos permite enumerar todos los contactos de la base de datos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-145">Create a controller action and view that enables us to list all of the contacts in the database</span></span>
5. <span data-ttu-id="f9e2d-146">Crear acciones del controlador y una vista que nos permite crear un nuevo contacto en la base de datos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-146">Create controller actions and a view that enables us to create a new contact in the database</span></span>
6. <span data-ttu-id="f9e2d-147">Crear acciones del controlador y una vista que nos permite editar un contacto ya existente en la base de datos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-147">Create controller actions and a view that enables us to edit an existing contact in the database</span></span>
7. <span data-ttu-id="f9e2d-148">Crear acciones del controlador y una vista que nos permite eliminar un contacto ya existente en la base de datos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-148">Create controller actions and a view that enables us to delete an existing contact in the database</span></span>

## <a name="software-prerequisites"></a><span data-ttu-id="f9e2d-149">Requisitos previos de software</span><span class="sxs-lookup"><span data-stu-id="f9e2d-149">Software Prerequisites</span></span>

<span data-ttu-id="f9e2d-150">En las aplicaciones de ASP.NET MVC, debe tener Visual Studio 2008 o Visual Web Developer 2008 instalado en el equipo (Visual Web Developer es una versión gratuita de Visual Studio que no incluye todas las características avanzadas de Visual Studio).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-150">In ASP.NET MVC applications, you must have either Visual Studio 2008 or Visual Web Developer 2008 installed on your computer (Visual Web Developer is a free version of Visual Studio that does not include all of the advanced features of Visual Studio).</span></span> <span data-ttu-id="f9e2d-151">Puede descargar la versión de prueba de Visual Studio 2008 o Visual Web Developer desde la siguiente dirección:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-151">You can download either the trial version of Visual Studio 2008 or Visual Web Developer from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

> [!NOTE] 
> 
> <span data-ttu-id="f9e2d-152">Las aplicaciones de MVC de ASP.NET con Visual Web Developer, debe tener Visual Web Developer Service Pack 1 instalado.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-152">For ASP.NET MVC applications with Visual Web Developer, you must have Visual Web Developer Service Pack 1 installed.</span></span> <span data-ttu-id="f9e2d-153">Sin Service Pack 1, no se puede crear proyectos de aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-153">Without Service Pack 1, you cannot create Web Application Projects.</span></span>


<span data-ttu-id="f9e2d-154">Marco de ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-154">ASP.NET MVC framework.</span></span> <span data-ttu-id="f9e2d-155">Puede descargar el marco de MVC de ASP.NET desde la siguiente dirección:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-155">You can download the ASP.NET MVC framework from the following address:</span></span>

[https://www.asp.net/mvc](../../../index.md)

<span data-ttu-id="f9e2d-156">En este tutorial, usamos Microsoft Entity Framework para tener acceso a una base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-156">In this tutorial, we use the Microsoft Entity Framework to access a database.</span></span> <span data-ttu-id="f9e2d-157">Entity Framework se incluye con .NET Framework 3.5 Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-157">The Entity Framework is included with .NET Framework 3.5 Service Pack 1.</span></span> <span data-ttu-id="f9e2d-158">Puede descargar este service pack desde la siguiente ubicación:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-158">You can download this service pack from the following location:</span></span>

[<span data-ttu-id="f9e2d-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en</span><span class="sxs-lookup"><span data-stu-id="f9e2d-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en)

<span data-ttu-id="f9e2d-160">Como alternativa a la realización de cada una de estas descargas uno por uno, puede aprovechar las ventajas del instalador de plataforma Web (Web PI).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-160">As an alternative to performing each of these downloads one by one, you can take advantage of the Web Platform Installer (Web PI).</span></span> <span data-ttu-id="f9e2d-161">Puede descargar el instalador de plataforma Web desde la siguiente dirección:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-161">You can download the Web PI from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

## <a name="aspnet-mvc-project"></a><span data-ttu-id="f9e2d-162">Proyecto de ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="f9e2d-162">ASP.NET MVC Project</span></span>

<span data-ttu-id="f9e2d-163">Proyecto de aplicación Web de ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-163">ASP.NET MVC Web Application Project.</span></span> <span data-ttu-id="f9e2d-164">Inicie Visual Studio y seleccione la opción de menú **archivo, nuevo proyecto**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-164">Launch Visual Studio and select the menu option **File, New Project**.</span></span> <span data-ttu-id="f9e2d-165">El **nuevo proyecto** aparece de cuadro de diálogo (consulte la figura 1).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-165">The **New Project** dialog appears (see Figure 1).</span></span> <span data-ttu-id="f9e2d-166">Seleccione el **Web** tipo de proyecto y la **aplicación Web ASP.NET MVC** plantilla.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-166">Select the **Web** project type and the **ASP.NET MVC Web Application** template.</span></span> <span data-ttu-id="f9e2d-167">Nombre para el nuevo proyecto *ContactManager* y haga clic en el botón Aceptar.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-167">Name your new project *ContactManager* and click the OK button.</span></span>


<span data-ttu-id="f9e2d-168">Asegúrese de que tiene .NET Framework 3.5 seleccionado en la lista desplegable en la parte superior derecha de la **nuevo proyecto** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-168">Make sure that you have .NET Framework 3.5 selected from the dropdown list at the top right of the **New Project** dialog.</span></span> <span data-ttu-id="f9e2d-169">En caso contrario, la plantilla de aplicación Web ASP.NET MVC won t aparece.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-169">Otherwise, the ASP.NET MVC Web Application template won t appear.</span></span>


<span data-ttu-id="f9e2d-170">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image1.jpg)](iteration-1-create-the-application-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-170">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image1.jpg)](iteration-1-create-the-application-cs/_static/image1.png)</span></span>

<span data-ttu-id="f9e2d-171">**Figura 01**: cuadro de diálogo de nuevo el proyecto ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-171">**Figure 01**: The New Project dialog([Click to view full-size image](iteration-1-create-the-application-cs/_static/image2.png))</span></span>


<span data-ttu-id="f9e2d-172">Aplicación de ASP.NET MVC, la **crear proyecto de prueba unitaria** aparece el cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-172">ASP.NET MVC application, the **Create Unit Test Project** dialog appears.</span></span> <span data-ttu-id="f9e2d-173">Puede utilizar este cuadro de diálogo para indicar que desea crear y agregar un proyecto de prueba unitaria a la solución cuando se crea la aplicación de ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-173">You can use this dialog to indicate that you want to create and add a unit test project to your solution when you create your ASP.NET MVC application.</span></span> <span data-ttu-id="f9e2d-174">Aunque ganados t puede generar pruebas unitarias en esta iteración, debe seleccionar la opción **Sí, crear un proyecto de prueba unitaria** como tenemos previsto agregar pruebas unitarias en una iteración posterior.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-174">Although we won t be building unit tests in this iteration, you should select the option **Yes, create a unit test project** because we plan to add unit tests in a later iteration.</span></span> <span data-ttu-id="f9e2d-175">Agregar un proyecto de prueba cuando se crea por primera vez un nuevo proyecto de MVC de ASP.NET es mucho más sencillo que agregar un proyecto de prueba una vez creado el proyecto de MVC de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-175">Adding a Test project when you first create a new ASP.NET MVC project is much easier than adding a Test project after the ASP.NET MVC project has been created.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f9e2d-176">Dado que Visual Web Developer no admite proyectos de prueba, no se obtiene el cuadro de diálogo Crear proyecto de prueba unitaria cuando se utiliza Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-176">Because Visual Web Developer does not support Test projects, you do not get the Create Unit Test Project dialog when using Visual Web Developer.</span></span>


<span data-ttu-id="f9e2d-177">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image2.jpg)](iteration-1-create-the-application-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-177">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image2.jpg)](iteration-1-create-the-application-cs/_static/image3.png)</span></span>

<span data-ttu-id="f9e2d-178">**Figura 02**: cuadro de diálogo el proyecto de prueba unitaria crear ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-178">**Figure 02**: The Create Unit Test Project dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image4.png))</span></span>


<span data-ttu-id="f9e2d-179">Aplicación de ASP.NET MVC se muestra en la ventana Explorador de soluciones de Visual Studio (consulte la figura 3).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-179">ASP.NET MVC application appears in the Visual Studio Solution Explorer window (see Figure 3).</span></span> <span data-ttu-id="f9e2d-180">Si don t ve la ventana Explorador de soluciones, a continuación, puede abrir esta ventana, seleccione la opción de menú **la vista, el Explorador de soluciones**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-180">If you don t see the Solution Explorer window then you can open this window by selecting the menu option **View, Solution Explorer**.</span></span> <span data-ttu-id="f9e2d-181">Tenga en cuenta que la solución contiene dos proyectos: el proyecto de MVC de ASP.NET y el proyecto de prueba.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-181">Notice that the solution contains two projects: the ASP.NET MVC project and the Test project.</span></span> <span data-ttu-id="f9e2d-182">El proyecto de MVC de ASP.NET se denomina ContactManager y el proyecto de prueba se denomina ContactManager.Tests.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-182">The ASP.NET MVC project is named ContactManager and the Test project is named ContactManager.Tests.</span></span>


<span data-ttu-id="f9e2d-183">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image3.jpg)](iteration-1-create-the-application-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-183">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image3.jpg)](iteration-1-create-the-application-cs/_static/image5.png)</span></span>

<span data-ttu-id="f9e2d-184">**Figura 03**: ventana del explorador de soluciones ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-184">**Figure 03**: The Solution Explorer window ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image6.png))</span></span>


## <a name="deleting-the-project-sample-files"></a><span data-ttu-id="f9e2d-185">Eliminar los archivos de ejemplo de proyecto</span><span class="sxs-lookup"><span data-stu-id="f9e2d-185">Deleting the Project Sample Files</span></span>

<span data-ttu-id="f9e2d-186">La plantilla de proyecto de ASP.NET MVC incluye archivos de ejemplo para controladores y vistas.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-186">The ASP.NET MVC project template includes sample files for controllers and views.</span></span> <span data-ttu-id="f9e2d-187">Antes de crear una nueva aplicación MVC de ASP.NET, debe eliminar estos archivos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-187">Before creating a new ASP.NET MVC application, you should delete these files.</span></span> <span data-ttu-id="f9e2d-188">Puede eliminar archivos y carpetas en la ventana Explorador de soluciones, con el botón secundario en un archivo o carpeta y seleccione la opción de menú **eliminar**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-188">You can delete files and folders in the Solution Explorer window by right-clicking a file or folder and selecting the menu option **Delete**.</span></span>

<span data-ttu-id="f9e2d-189">Debe eliminar los siguientes archivos desde el proyecto de MVC de ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-189">You need to delete the following files from the ASP.NET MVC project:</span></span>

- <span data-ttu-id="f9e2d-190">\Controllers\HomeController.cs</span><span class="sxs-lookup"><span data-stu-id="f9e2d-190">\Controllers\HomeController.cs</span></span>

- <span data-ttu-id="f9e2d-191">\Views\Home\About.aspx</span><span class="sxs-lookup"><span data-stu-id="f9e2d-191">\Views\Home\About.aspx</span></span>

- <span data-ttu-id="f9e2d-192">\Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="f9e2d-192">\Views\Home\Index.aspx</span></span>

<span data-ttu-id="f9e2d-193">Y necesita eliminar el siguiente archivo del proyecto de prueba:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-193">And, you need to delete the following file from the Test project:</span></span>

<span data-ttu-id="f9e2d-194">\Controllers\HomeControllerTest.cs</span><span class="sxs-lookup"><span data-stu-id="f9e2d-194">\Controllers\HomeControllerTest.cs</span></span>

## <a name="creating-the-database"></a><span data-ttu-id="f9e2d-195">Crear la base de datos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-195">Creating the Database</span></span>

<span data-ttu-id="f9e2d-196">La aplicación póngase en contacto con el administrador es una aplicación web controlada por la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-196">The Contact Manager application is a database-driven web application.</span></span> <span data-ttu-id="f9e2d-197">Se usa una base de datos para almacenar la información de contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-197">We use a database to store the contact information.</span></span>

<span data-ttu-id="f9e2d-198">El marco de MVC de ASP.NET con cualquier base de datos moderna, incluidas bases de datos IBM DB2, Oracle, MySQL y Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-198">The ASP.NET MVC framework with any modern database including Microsoft SQL Server, Oracle, MySQL, and IBM DB2 databases.</span></span> <span data-ttu-id="f9e2d-199">En este tutorial, se usa una base de datos de Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-199">In this tutorial, we use a Microsoft SQL Server database.</span></span> <span data-ttu-id="f9e2d-200">Cuando se instala Visual Studio, se le proporcionará la opción de instalar Microsoft SQL Server Express que es una versión gratuita de la base de datos de Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-200">When you install Visual Studio, you are provided with the option of installing Microsoft SQL Server Express which is a free version of the Microsoft SQL Server database.</span></span>

<span data-ttu-id="f9e2d-201">Crear una nueva base de datos haciendo clic en la aplicación\_carpeta de datos en la ventana Explorador de soluciones y seleccionando la opción de menú **agregar, nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-201">Create a new database by right-clicking the App\_Data folder in the Solution Explorer window and selecting the menu option **Add, New Item**.</span></span> <span data-ttu-id="f9e2d-202">En el **Agregar nuevo elemento** cuadro de diálogo, seleccione la **datos** categoría y el **base de datos de SQL Server** plantilla (consulte la figura 4).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-202">In the **Add New Item** dialog, select the **Data** category and the **SQL Server Database** template (see Figure 4).</span></span> <span data-ttu-id="f9e2d-203">Nombre de la nueva base de datos ContactManagerDB.mdf y haga clic en el botón Aceptar.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-203">Name the new database ContactManagerDB.mdf and click the OK button.</span></span>


<span data-ttu-id="f9e2d-204">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image4.jpg)](iteration-1-create-the-application-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-204">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image4.jpg)](iteration-1-create-the-application-cs/_static/image7.png)</span></span>

<span data-ttu-id="f9e2d-205">**Figura 04**: crear una nueva base de datos Microsoft SQL Server Express ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-205">**Figure 04**: Creating a new Microsoft SQL Server Express database ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image8.png))</span></span>


<span data-ttu-id="f9e2d-206">Después de crear la nueva base de datos, la base de datos aparece en la aplicación\_carpeta de datos en la ventana Explorador de soluciones.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-206">After you create the new database, the database appears in the App\_Data folder in the Solution Explorer window.</span></span> <span data-ttu-id="f9e2d-207">Haga doble clic en el archivo ContactManager.mdf para abrir la ventana Explorador de servidores y conectarse a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-207">Double-click the ContactManager.mdf file to open the Server Explorer window and connect to the database.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f9e2d-208">La ventana Explorador de servidores se denomina la ventana del explorador de base de datos en el caso de Microsoft Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-208">The Server Explorer window is called the Database Explorer window in the case of Microsoft Visual Web Developer.</span></span>


<span data-ttu-id="f9e2d-209">Puede utilizar la ventana Explorador de servidores para crear nuevos objetos de base de datos como tablas de base de datos, vistas, desencadenadores y procedimientos almacenados.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-209">You can use the Server Explorer window to create new database objects such as database tables, views, triggers, and stored procedures.</span></span> <span data-ttu-id="f9e2d-210">Haga clic en la carpeta de tablas y seleccione la opción de menú **agregar nueva tabla**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-210">Right-click the Tables folder and select the menu option **Add New Table**.</span></span> <span data-ttu-id="f9e2d-211">El Diseñador de tablas de base de datos aparece (Véase la figura 5).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-211">The Database Table Designer appears (see Figure 5).</span></span>


<span data-ttu-id="f9e2d-212">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image5.jpg)](iteration-1-create-the-application-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-212">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image5.jpg)](iteration-1-create-the-application-cs/_static/image9.png)</span></span>

<span data-ttu-id="f9e2d-213">**Figura 05**: el Diseñador de tablas de base de datos ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-213">**Figure 05**: The Database Table Designer ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image10.png))</span></span>


<span data-ttu-id="f9e2d-214">Es preciso crear una tabla que contiene las columnas siguientes:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-214">We need to create a table that contains the following columns:</span></span>

<a id="0.1_table01"></a>


| <span data-ttu-id="f9e2d-215">**Nombre de columna**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-215">**Column Name**</span></span> | <span data-ttu-id="f9e2d-216">**Tipo de datos**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-216">**Data Type**</span></span> | <span data-ttu-id="f9e2d-217">**Permitir valores null**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-217">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f9e2d-218">Id.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-218">Id</span></span> | <span data-ttu-id="f9e2d-219">int</span><span class="sxs-lookup"><span data-stu-id="f9e2d-219">int</span></span> | <span data-ttu-id="f9e2d-220">False</span><span class="sxs-lookup"><span data-stu-id="f9e2d-220">false</span></span> |
| <span data-ttu-id="f9e2d-221">Nombre</span><span class="sxs-lookup"><span data-stu-id="f9e2d-221">FirstName</span></span> | <span data-ttu-id="f9e2d-222">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-222">nvarchar(50)</span></span> | <span data-ttu-id="f9e2d-223">False</span><span class="sxs-lookup"><span data-stu-id="f9e2d-223">false</span></span> |
| <span data-ttu-id="f9e2d-224">LastName</span><span class="sxs-lookup"><span data-stu-id="f9e2d-224">LastName</span></span> | <span data-ttu-id="f9e2d-225">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-225">nvarchar(50)</span></span> | <span data-ttu-id="f9e2d-226">False</span><span class="sxs-lookup"><span data-stu-id="f9e2d-226">false</span></span> |
| <span data-ttu-id="f9e2d-227">Teléfono</span><span class="sxs-lookup"><span data-stu-id="f9e2d-227">Phone</span></span> | <span data-ttu-id="f9e2d-228">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-228">nvarchar(50)</span></span> | <span data-ttu-id="f9e2d-229">False</span><span class="sxs-lookup"><span data-stu-id="f9e2d-229">false</span></span> |
| <span data-ttu-id="f9e2d-230">Correo electrónico</span><span class="sxs-lookup"><span data-stu-id="f9e2d-230">Email</span></span> | <span data-ttu-id="f9e2d-231">nvarchar(255)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-231">nvarchar(255)</span></span> | <span data-ttu-id="f9e2d-232">False</span><span class="sxs-lookup"><span data-stu-id="f9e2d-232">false</span></span> |


<span data-ttu-id="f9e2d-233">La primera columna, la columna Id., es especial.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-233">The first column, the Id column, is special.</span></span> <span data-ttu-id="f9e2d-234">Debe marcar la columna de identificador como una columna de identidad y una columna de clave principal.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-234">You need to mark the Id column as an Identity column and a Primary Key column.</span></span> <span data-ttu-id="f9e2d-235">Indicar que una columna es una columna de identidad mediante la expansión de propiedades de columna (mire en la parte inferior de la figura 6) y desplazarse hacia abajo hasta la propiedad de la especificación de identidad.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-235">You indicate that a column is an Identity column by expanding Column Properites (look at the bottom of Figure 6) and scrolling down to the Identity Specification property.</span></span> <span data-ttu-id="f9e2d-236">Establecer el **(identidad)** valor para la propiedad **Sí**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-236">Set the **(Is Identity)** property to the value **Yes**.</span></span>

<span data-ttu-id="f9e2d-237">Marcar una columna como una columna de clave principal, seleccione la columna y haga clic en el botón con el icono de una clave.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-237">You mark a column as a Primary Key column by selecting the column and clicking the button with the icon of a key.</span></span> <span data-ttu-id="f9e2d-238">Una vez se ha marcado una columna como columna de clave principal, aparece un icono de una clave junto a la columna (consulte la figura 6).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-238">After a column is marked as a Primary Key column, an icon of a key appears next to the column (see Figure 6).</span></span>

<span data-ttu-id="f9e2d-239">Cuando termine de crear la tabla, haga clic en el botón Guardar (el botón con un icono de un disquete) para guardar la nueva tabla.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-239">After you finish creating the table, click the Save button (the button with an icon of a floppy) to save the new table.</span></span> <span data-ttu-id="f9e2d-240">Asigne el nombre de la nueva tabla *contactos*.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-240">Give your new table the name *Contacts*.</span></span>

<span data-ttu-id="f9e2d-241">Después de finalizar la creación de la tabla de base de datos de contactos, debe agregar algunos registros a la tabla.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-241">After finish creating the Contacts database table, you should add some records to the table.</span></span> <span data-ttu-id="f9e2d-242">Haga clic en la tabla de contactos en la ventana Explorador de servidores y seleccione la opción de menú **mostrar datos de tabla**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-242">Right-click the Contacts table in the Server Explorer window and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="f9e2d-243">Escriba uno o más contactos en la cuadrícula que aparece.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-243">Enter one or more contacts in the grid that appears.</span></span>

## <a name="creating-the-data-model"></a><span data-ttu-id="f9e2d-244">Crear el modelo de datos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-244">Creating the Data Model</span></span>

<span data-ttu-id="f9e2d-245">La aplicación de MVC de ASP.NET consta de modelos, vistas y controladores.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-245">The ASP.NET MVC application consists of Models, Views, and Controllers.</span></span> <span data-ttu-id="f9e2d-246">Comenzamos creando una clase de modelo que representa la tabla de contactos que hemos creado en la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-246">We start by creating a Model class that represents the Contacts table that we created in the previous section.</span></span>

<span data-ttu-id="f9e2d-247">En este tutorial, usamos Microsoft Entity Framework para generar automáticamente una clase de modelo de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-247">In this tutorial, we use the Microsoft Entity Framework to generate a model class from the database automatically.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f9e2d-248">El marco de MVC de ASP.NET no está vinculado a Microsoft Entity Framework de ninguna manera.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-248">The ASP.NET MVC framework is not tied to the Microsoft Entity Framework in any way.</span></span> <span data-ttu-id="f9e2d-249">Puede usar ASP.NET MVC con tecnologías de acceso de base de datos alternativo incluidos NHibernate, LINQ to SQL o ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-249">You can use ASP.NET MVC with alternative database access technologies including NHibernate, LINQ to SQL, or ADO.NET.</span></span>


<span data-ttu-id="f9e2d-250">Siga estos pasos para crear las clases del modelo de datos:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-250">Follow these steps to create the data model classes:</span></span>

1. <span data-ttu-id="f9e2d-251">Haga clic en la carpeta de modelos en la ventana Explorador de soluciones y seleccione **agregar, nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-251">Right-click the Models folder in the Solution Explorer window and select **Add, New Item**.</span></span> <span data-ttu-id="f9e2d-252">El **Agregar nuevo elemento** aparece de cuadro de diálogo (consulte la figura 6).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-252">The **Add New Item** dialog appears (see Figure 6).</span></span>
2. <span data-ttu-id="f9e2d-253">Seleccione el **datos** categoría y el **ADO.NET Entity Data Model** plantilla.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-253">Select the **Data** category and the **ADO.NET Entity Data Model** template.</span></span> <span data-ttu-id="f9e2d-254">El modelo de datos el nombre *ContactManagerModel.edmx* y haga clic en el **agregar** botón.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-254">Name your data model *ContactManagerModel.edmx* and click the **Add** button.</span></span> <span data-ttu-id="f9e2d-255">Aparece el Asistente de Entity Data Model (consulte la figura 7).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-255">The Entity Data Model wizard appears (see Figure 7).</span></span>
3. <span data-ttu-id="f9e2d-256">En el **Elegir contenido del modelo** paso, seleccione **generar desde la base de datos** (consulte la figura 7).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-256">In the **Choose Model Contents** step, select **Generate from database** (see Figure 7).</span></span>
4. <span data-ttu-id="f9e2d-257">En el **elegir la conexión de datos** paso a paso, seleccione la base de datos de ContactManagerDB.mdf y escriba el nombre *ContactManagerDBEntities* para la configuración de conexión de entidad (consulte la figura 8).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-257">In the **Choose Your Data Connection** step, select the ContactManagerDB.mdf database and enter the name *ContactManagerDBEntities* for the Entity Connection Settings (see Figure 8).</span></span>
5. <span data-ttu-id="f9e2d-258">En el **elija los objetos de base de datos** paso a paso, seleccione la casilla de tablas (consulte la figura 9).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-258">In the **Choose Your Database Objects** step, select the checkbox labeled Tables (see Figure 9).</span></span> <span data-ttu-id="f9e2d-259">El modelo de datos incluirá todas las tablas incluidas en la base de datos (hay solo uno, la tabla Contacts).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-259">The data model will include all tables contained in your database (there is just one, the Contacts table).</span></span> <span data-ttu-id="f9e2d-260">Escriba el espacio de nombres *modelos*.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-260">Enter the namespace *Models*.</span></span> <span data-ttu-id="f9e2d-261">Haga clic en el botón Finalizar para completar al asistente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-261">Click the Finish button to complete the wizard.</span></span>


<span data-ttu-id="f9e2d-262">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image6.jpg)](iteration-1-create-the-application-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-262">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image6.jpg)](iteration-1-create-the-application-cs/_static/image11.png)</span></span>

<span data-ttu-id="f9e2d-263">**Figura 06**: cuadro de diálogo Agregar nuevo elemento ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-263">**Figure 06**: The Add New Item dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image12.png))</span></span>


<span data-ttu-id="f9e2d-264">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image7.jpg)](iteration-1-create-the-application-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-264">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image7.jpg)](iteration-1-create-the-application-cs/_static/image13.png)</span></span>

<span data-ttu-id="f9e2d-265">**Figura 07**: Elegir contenido del modelo ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-265">**Figure 07**: Choose Model Contents ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image14.png))</span></span>


<span data-ttu-id="f9e2d-266">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image8.jpg)](iteration-1-create-the-application-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-266">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image8.jpg)](iteration-1-create-the-application-cs/_static/image15.png)</span></span>

<span data-ttu-id="f9e2d-267">**Figura 08**: elegir la conexión de datos ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-267">**Figure 08**: Choose Your Data Connection ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image16.png))</span></span>


<span data-ttu-id="f9e2d-268">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image9.jpg)](iteration-1-create-the-application-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-268">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image9.jpg)](iteration-1-create-the-application-cs/_static/image17.png)</span></span>

<span data-ttu-id="f9e2d-269">**Figura 09**: elija los objetos de base de datos ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-269">**Figure 09**: Choose Your Database Objects ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image18.png))</span></span>


<span data-ttu-id="f9e2d-270">Después de completar al Asistente para Entity Data Model, aparece el Entity Data Model Designer.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-270">After you complete the Entity Data Model Wizard, the Entity Data Model Designer appears.</span></span> <span data-ttu-id="f9e2d-271">El diseñador muestra una clase que corresponde a cada tabla que se está modelando.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-271">The designer displays a class that corresponds to each table being modeled.</span></span> <span data-ttu-id="f9e2d-272">Debería ver una clase denominada contactos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-272">You should see one class named Contacts.</span></span>

<span data-ttu-id="f9e2d-273">El Asistente de Entity Data Model genera nombres de las clases basados en nombres de tabla de base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-273">The Entity Data Model wizard generates class names based on database table names.</span></span> <span data-ttu-id="f9e2d-274">Casi siempre debe cambiar el nombre de la clase generada por el asistente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-274">You almost always need to change the name of the class generated by the wizard.</span></span> <span data-ttu-id="f9e2d-275">Haga clic en la clase de contactos en el diseñador y seleccione la opción de menú **cambiar el nombre de**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-275">Right-click the Contacts class in the designer and select the menu option **Rename**.</span></span> <span data-ttu-id="f9e2d-276">Cambiar el nombre de la clase de contactos (plurales) para el contacto (singular).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-276">Change the name of the class from Contacts (plural) to Contact (singular).</span></span> <span data-ttu-id="f9e2d-277">Después de cambiar el nombre de clase, la clase debe aparecer como la figura 10.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-277">After you change the class name, the class should appear like Figure 10.</span></span>


<span data-ttu-id="f9e2d-278">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image10.jpg)](iteration-1-create-the-application-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-278">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image10.jpg)](iteration-1-create-the-application-cs/_static/image19.png)</span></span>

<span data-ttu-id="f9e2d-279">**Figura 10**: clase Contact The ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-279">**Figure 10**: The Contact class ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image20.png))</span></span>


<span data-ttu-id="f9e2d-280">En este punto, hemos creado nuestro modelo de base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-280">At this point, we have created our database model.</span></span> <span data-ttu-id="f9e2d-281">Podemos usar la clase Contact para representar un determinado registro de contacto en nuestra base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-281">We can use the Contact class to represent a particular contact record in our database.</span></span>

## <a name="creating-the-home-controller"></a><span data-ttu-id="f9e2d-282">Crear el controlador Home</span><span class="sxs-lookup"><span data-stu-id="f9e2d-282">Creating the Home Controller</span></span>

<span data-ttu-id="f9e2d-283">El siguiente paso es crear nuestro controlador Home.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-283">The next step is to create our Home controller.</span></span> <span data-ttu-id="f9e2d-284">El controlador Home es el controlador predeterminado que se invoca en una aplicación ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-284">The Home controller is the default controller invoked in an ASP.NET MVC application.</span></span>

<span data-ttu-id="f9e2d-285">Crear la clase de controlador de inicio haciendo clic en la carpeta de controladores en la ventana Explorador de soluciones y seleccionando la opción de menú **agregar, controlador** (consulte la figura 11).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-285">Create the Home controller class by right-clicking the Controllers folder in the Solution Explorer window and selecting the menu option **Add, Controller** (see Figure 11).</span></span> <span data-ttu-id="f9e2d-286">Observe la casilla **agregar métodos de acción para los escenarios de creación, actualización y detalles**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-286">Notice the checkbox labeled **Add action methods for Create, Update, and Details scenarios**.</span></span> <span data-ttu-id="f9e2d-287">Asegúrese de que está activada esta casilla de verificación antes de hacer clic en el **agregar** botón.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-287">Make sure that this checkbox is checked before clicking the **Add** button.</span></span>


<span data-ttu-id="f9e2d-288">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image11.jpg)](iteration-1-create-the-application-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-288">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image11.jpg)](iteration-1-create-the-application-cs/_static/image21.png)</span></span>

<span data-ttu-id="f9e2d-289">**Figura 11**: agregar el controlador Home ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-289">**Figure 11**: Adding the Home controller ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image22.png))</span></span>


<span data-ttu-id="f9e2d-290">Cuando se crea el controlador Home, obtener la clase en la lista 1.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-290">When you create the Home controller, you get the class in Listing 1.</span></span>

<span data-ttu-id="f9e2d-291">**Lista 1 - controllers\homecontroller**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-291">**Listing 1 - Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample1.cs)]

## <a name="listing-the-contacts"></a><span data-ttu-id="f9e2d-292">Enumerar los contactos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-292">Listing the Contacts</span></span>

<span data-ttu-id="f9e2d-293">Para mostrar los registros en la tabla de base de datos de contactos, necesitamos crear una acción de Index() y una vista de índice.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-293">In order to display the records in the Contacts database table, we need to create an Index() action and an Index view.</span></span>

<span data-ttu-id="f9e2d-294">El controlador Home ya contiene una acción Index().</span><span class="sxs-lookup"><span data-stu-id="f9e2d-294">The Home controller already contains an Index() action.</span></span> <span data-ttu-id="f9e2d-295">Es necesario modificar este método para que se parezca al listado 2.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-295">We need to modify this method so that it looks like Listing 2.</span></span>

<span data-ttu-id="f9e2d-296">**La lista 2 - controllers\homecontroller**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-296">**Listing 2 - Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample2.cs)]

<span data-ttu-id="f9e2d-297">Tenga en cuenta que la clase de controlador de inicio en el listado 2 contiene un campo privado denominado \_entidades.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-297">Notice that the Home controller class in Listing 2 contains a private field named \_entities.</span></span> <span data-ttu-id="f9e2d-298">La \_campos de entidades representa las entidades del modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-298">The \_entities field represents the entities from the data model.</span></span> <span data-ttu-id="f9e2d-299">Usamos el \_campo entidades para comunicarse con la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-299">We use the \_entities field to communicate with the database.</span></span>

<span data-ttu-id="f9e2d-300">El método Index() devuelve una vista que representa todos los contactos de la tabla de base de datos de contactos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-300">The Index() method returns a view that represents all of the contacts from the Contacts database table.</span></span> <span data-ttu-id="f9e2d-301">La expresión \_entidades. ContactSet.ToList() devuelve la lista de contactos como una lista genérica.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-301">The expression \_entities.ContactSet.ToList() returns the list of contacts as a generic list.</span></span>

<span data-ttu-id="f9e2d-302">Ahora que se ha creado el controlador de índice, que a continuación, necesitamos crear la vista de índice.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-302">Now that we ve created the Index controller, we next need to create the Index view.</span></span> <span data-ttu-id="f9e2d-303">Antes de crear la vista de índice, compile la aplicación seleccionando la opción de menú **compilar, compilar solución**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-303">Before creating the Index view, compile your application by selecting the menu option **Build, Build Solution**.</span></span> <span data-ttu-id="f9e2d-304">Siempre debe compilar el proyecto antes de agregar una vista en orden de la lista de clases de modelo que se mostrará en el **agregar vista** cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-304">You should always compile your project before adding a view in order for the list of model classes to be displayed in the **Add View** dialog.</span></span>

<span data-ttu-id="f9e2d-305">Crear la vista de índice haciendo clic en el método Index() y seleccionar la opción de menú **agregar vista** (consulte la figura 12).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-305">You create the Index view by right-clicking the Index() method and selecting the menu option **Add View** (see Figure 12).</span></span> <span data-ttu-id="f9e2d-306">Al seleccionar esta opción de menú se abre la **agregar vista** cuadro de diálogo (Véase la figura 13).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-306">Selecting this menu option opens the **Add View** dialog (see Figure 13).</span></span>


<span data-ttu-id="f9e2d-307">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image12.jpg)](iteration-1-create-the-application-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-307">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image12.jpg)](iteration-1-create-the-application-cs/_static/image23.png)</span></span>

<span data-ttu-id="f9e2d-308">**Figura 12**: agregar la vista de índice ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-308">**Figure 12**: Adding the Index view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image24.png))</span></span>


<span data-ttu-id="f9e2d-309">En el **agregar vista** cuadro de diálogo, active la casilla etiquetada **crear una vista fuertemente tipada**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-309">In the **Add View** dialog, check the checkbox labeled **Create a strongly-typed view**.</span></span> <span data-ttu-id="f9e2d-310">Seleccione la clase de datos de vista ContactManager.Models.Contact y la lista Ver contenido.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-310">Select the View data class ContactManager.Models.Contact and the View content List.</span></span> <span data-ttu-id="f9e2d-311">Al seleccionar estas opciones, genera una vista que muestra una lista de registros de contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-311">Selecting these options generates a view that displays a list of Contact records.</span></span>


<span data-ttu-id="f9e2d-312">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image13.jpg)](iteration-1-create-the-application-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-312">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image13.jpg)](iteration-1-create-the-application-cs/_static/image25.png)</span></span>

<span data-ttu-id="f9e2d-313">**Figura 13**: cuadro de diálogo de agregar la vista ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-313">**Figure 13**: The Add View dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image26.png))</span></span>


<span data-ttu-id="f9e2d-314">Al hacer clic en el **agregar** botón, la vista de índice en el listado 3 se genera.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-314">When you click the **Add** button, the Index view in Listing 3 is generated.</span></span> <span data-ttu-id="f9e2d-315">Observe el &lt;% @ Page %&gt; directiva que aparece en la parte superior del archivo.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-315">Notice the &lt;%@ Page %&gt; directive that appears at the top of the file.</span></span> <span data-ttu-id="f9e2d-316">La vista de índice se hereda de la ViewPage&lt;IEnumerable&lt;ContactManager.Models.Contact&gt; &gt; clase.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-316">The Index view inherits from the ViewPage&lt;IEnumerable&lt;ContactManager.Models.Contact&gt;&gt; class.</span></span> <span data-ttu-id="f9e2d-317">En otras palabras, la clase del modelo en la vista representa una lista de entidades de contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-317">In other words, the Model class in the view represents a list of Contact entities.</span></span>

<span data-ttu-id="f9e2d-318">El cuerpo de la vista de índice contiene un bucle foreach que recorre en iteración cada uno de los contactos representados por la clase del modelo.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-318">The body of the Index view contains a foreach loop that iterates through each of the contacts represented by the Model class.</span></span> <span data-ttu-id="f9e2d-319">El valor de cada propiedad de la clase de contacto se muestra dentro de una tabla HTML.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-319">The value of each property of the Contact class is displayed within an HTML table.</span></span>

<span data-ttu-id="f9e2d-320">**El listado 3 - Views\Home\Index.aspx (sin cambios)**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-320">**Listing 3 - Views\Home\Index.aspx (unmodified)**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample3.aspx)]

<span data-ttu-id="f9e2d-321">Es necesario realizar una modificación en la vista de índice.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-321">We need to make one modification to the Index view.</span></span> <span data-ttu-id="f9e2d-322">Dado que no vamos a crear una vista de detalles, podemos quitar el vínculo de detalles.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-322">Because we are not creating a Details view, we can remove the Details link.</span></span> <span data-ttu-id="f9e2d-323">Busque y quite el siguiente código desde la vista de índice:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-323">Find and remove the following code from the Index view:</span></span>

<span data-ttu-id="f9e2d-324">{Id. = elemento. % De ID})&gt;</span><span class="sxs-lookup"><span data-stu-id="f9e2d-324">{ id=item.Id })%&gt;</span></span>

<span data-ttu-id="f9e2d-325">Después de modificar la vista de índice, puede ejecutar la aplicación póngase en contacto con el administrador.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-325">After you modify the Index view, you can run the Contact Manager application.</span></span> <span data-ttu-id="f9e2d-326">Seleccione la opción de menú Depurar, Iniciar depuración o simplemente presione F5.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-326">Select the menu option Debug, Start Debugging or simply press F5.</span></span> <span data-ttu-id="f9e2d-327">La primera vez que ejecute la aplicación, obtendrá el cuadro de diálogo en la figura 14.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-327">The first time you run the application, you get the dialog in Figure 14.</span></span> <span data-ttu-id="f9e2d-328">Seleccione la opción **modificar el archivo Web.config para habilitar la depuración** y haga clic en el botón Aceptar.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-328">Select the option **Modify the Web.config file to enable debugging** and click the OK button.</span></span>


<span data-ttu-id="f9e2d-329">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image14.jpg)](iteration-1-create-the-application-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-329">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image14.jpg)](iteration-1-create-the-application-cs/_static/image27.png)</span></span>

<span data-ttu-id="f9e2d-330">**Figura 14**: habilitar la depuración ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-330">**Figure 14**: Enabling debugging ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image28.png))</span></span>


<span data-ttu-id="f9e2d-331">La vista de índice se devuelve de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-331">The Index view is returned by default.</span></span> <span data-ttu-id="f9e2d-332">Esta vista muestra todos los datos de la tabla de base de datos de contactos (consulte la figura 15).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-332">This view lists all of the data from the Contacts database table (see Figure 15).</span></span>


<span data-ttu-id="f9e2d-333">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image15.jpg)](iteration-1-create-the-application-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-333">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image15.jpg)](iteration-1-create-the-application-cs/_static/image29.png)</span></span>

<span data-ttu-id="f9e2d-334">**Figura 15**: vista del índice ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-334">**Figure 15**: The Index view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image30.png))</span></span>


<span data-ttu-id="f9e2d-335">Tenga en cuenta que la vista de índice incluye un vínculo con la etiqueta crear nuevo en la parte inferior de la vista.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-335">Notice that the Index view includes a link labeled Create New at the bottom of the view.</span></span> <span data-ttu-id="f9e2d-336">En la siguiente sección, aprenderá a crear nuevos contactos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-336">In the next section, you learn how to create new contacts.</span></span>

## <a name="creating-new-contacts"></a><span data-ttu-id="f9e2d-337">Crear nuevos contactos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-337">Creating New Contacts</span></span>

<span data-ttu-id="f9e2d-338">Para habilitar a los usuarios crear nuevos contactos, tenemos que agregar dos acciones Create() para el controlador Home.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-338">To enable users to create new contacts, we need to add two Create() actions to the Home controller.</span></span> <span data-ttu-id="f9e2d-339">Es necesario crear una acción de Create() que devuelve un formulario HTML para crear un nuevo contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-339">We need to create one Create() action that returns an HTML form for creating a new contact.</span></span> <span data-ttu-id="f9e2d-340">Es necesario crear una segunda acción Create() que realiza la inserción de base de datos real del nuevo contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-340">We need to create a second Create() action that performs the actual database insert of the new contact.</span></span>

<span data-ttu-id="f9e2d-341">Los nuevos métodos Create() que tenemos que agregar al controlador principal están contenidos en el listado 4.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-341">The new Create() methods that we need to add to the Home controller are contained in Listing 4.</span></span>

<span data-ttu-id="f9e2d-342">**Listado 4 - controllers\homecontroller (con crear métodos)**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-342">**Listing 4 - Controllers\HomeController.cs (with Create methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample4.cs)]

<span data-ttu-id="f9e2d-343">El primer método Create() se puede invocar con un GET de HTTP, mientras que el segundo método Create() solo se puede invocar una solicitud HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-343">The first Create() method can be invoked with an HTTP GET while the second Create() method can be invoked only by an HTTP POST.</span></span> <span data-ttu-id="f9e2d-344">En otras palabras, se puede invocar el segundo método Create() solo al enviar un formulario HTML.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-344">In other words, the second Create() method can be invoked only when posting an HTML form.</span></span> <span data-ttu-id="f9e2d-345">El primer método Create() simplemente devuelve una vista que contiene el formulario HTML para crear un nuevo contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-345">The first Create() method simply returns a view that contains the HTML form for creating a new contact.</span></span> <span data-ttu-id="f9e2d-346">El segundo método Create() es mucho más interesante: agrega el nuevo contacto a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-346">The second Create() method is much more interesting: it adds the new contact to the database.</span></span>

<span data-ttu-id="f9e2d-347">Tenga en cuenta que el segundo método Create() se ha modificado para aceptar una instancia de la clase Contact.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-347">Notice that the second Create() method has been modified to accept an instance of the Contact class.</span></span> <span data-ttu-id="f9e2d-348">Los valores del formulario registrados en el formulario HTML están enlazados a esta clase póngase en contacto con el marco de MVC de ASP.NET automáticamente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-348">The form values posted from the HTML form are bound to this Contact class by the ASP.NET MVC framework automatically.</span></span> <span data-ttu-id="f9e2d-349">Cada campo de formulario desde el formulario de creación de HTML se asigna a una propiedad del parámetro de contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-349">Each form field from the HTML Create form is assigned to a property of the Contact parameter.</span></span>

<span data-ttu-id="f9e2d-350">Tenga en cuenta que el parámetro de contacto se decora con un atributo [Bind].</span><span class="sxs-lookup"><span data-stu-id="f9e2d-350">Notice that the Contact parameter is decorated with a [Bind] attribute.</span></span> <span data-ttu-id="f9e2d-351">El atributo [Bind] se usa para excluir la propiedad de Id. de contacto del enlace.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-351">The [Bind] attribute is used to exclude the Contact Id property from binding.</span></span> <span data-ttu-id="f9e2d-352">Dado que la propiedad Id. representa una propiedad Identity, no queremos t desea establecer la propiedad Id.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-352">Because the Id property represents an Identity property, we don t want to set the Id property.</span></span>

<span data-ttu-id="f9e2d-353">En el cuerpo del método Create(), Entity Framework se utiliza para insertar el nuevo contacto en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-353">In the body of the Create() method, the Entity Framework is used to insert the new Contact into the database.</span></span> <span data-ttu-id="f9e2d-354">El nuevo contacto se agrega al conjunto existente de contactos y se llama al método SaveChanges() para insertar los cambios de nuevo a la base de datos subyacente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-354">The new Contact is added to the existing set of Contacts and the SaveChanges() method is called to push these changes back to the underlying database.</span></span>

<span data-ttu-id="f9e2d-355">Puede generar un formulario HTML para crear nuevos contactos haciendo clic en cualquiera de los dos métodos Create() y seleccionar la opción de menú **agregar vista** (Véase la figura 16).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-355">You can generate an HTML form for creating new Contacts by right-clicking either of the two Create() methods and selecting the menu option **Add View** (see Figure 16).</span></span>


<span data-ttu-id="f9e2d-356">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image16.jpg)](iteration-1-create-the-application-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-356">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image16.jpg)](iteration-1-create-the-application-cs/_static/image31.png)</span></span>

<span data-ttu-id="f9e2d-357">**Figura 16**: agregar la vista de creación ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-357">**Figure 16**: Adding the Create view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image32.png))</span></span>


<span data-ttu-id="f9e2d-358">En el **agregar vista** cuadro de diálogo, seleccione la **ContactManager.Models.Contact** clase y la **crear** opción para ver el contenido (vea la figura 17).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-358">In the **Add View** dialog, select the **ContactManager.Models.Contact** class and the **Create** option for view content (see Figure 17).</span></span> <span data-ttu-id="f9e2d-359">Al hacer clic en el **agregar** botón Crear vista se genera automáticamente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-359">When you click the **Add** button, a Create view is generated automatically.</span></span>


<span data-ttu-id="f9e2d-360">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image17.jpg)](iteration-1-create-the-application-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-360">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image17.jpg)](iteration-1-create-the-application-cs/_static/image33.png)</span></span>

<span data-ttu-id="f9e2d-361">**Figura 17**: ver una página seccionar ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-361">**Figure 17**: Seeing a page explode ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image34.png))</span></span>


<span data-ttu-id="f9e2d-362">La vista de creación contiene campos de formulario para cada una de las propiedades de la clase Contact.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-362">The Create view contains form fields for each of the properties of the Contact class.</span></span> <span data-ttu-id="f9e2d-363">El código de la vista de creación se incluye en el listado 5.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-363">The code for the Create view is included in Listing 5.</span></span>

<span data-ttu-id="f9e2d-364">**Listado 5 - Views\Home\Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-364">**Listing 5 - Views\Home\Create.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample5.aspx)]

<span data-ttu-id="f9e2d-365">Después de modificar los métodos Create() y agregar la vista de creación, puede ejecutar la aplicación de administrador de contacto y crear nuevos contactos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-365">After you modify the Create() methods and add the Create view, you can run the Contact Manger application and create new contacts.</span></span> <span data-ttu-id="f9e2d-366">Haga clic en el **crear nuevo** vínculo que aparece en la vista de índice para navegar a la vista de creación.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-366">Click the **Create New** link that appears in the Index view to navigate to the Create view.</span></span> <span data-ttu-id="f9e2d-367">Debería ver la vista en la figura 18.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-367">You should see the view in Figure 18.</span></span>


<span data-ttu-id="f9e2d-368">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image18.jpg)](iteration-1-create-the-application-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-368">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image18.jpg)](iteration-1-create-the-application-cs/_static/image35.png)</span></span>

<span data-ttu-id="f9e2d-369">**Figura 18**: The Create View ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-369">**Figure 18**: The Create View ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image36.png))</span></span>


## <a name="editing-contacts"></a><span data-ttu-id="f9e2d-370">Editar contactos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-370">Editing Contacts</span></span>

<span data-ttu-id="f9e2d-371">Agregar la funcionalidad para editar un registro de contacto es muy similar a agregar la funcionalidad para la creación de nuevos registros de contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-371">Adding the functionality for editing a contact record is very similar to adding the functionality for creating new contact records.</span></span> <span data-ttu-id="f9e2d-372">En primer lugar, necesitamos agregar dos nuevos métodos de edición a la clase del controlador principal.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-372">First, we need to add two new Edit methods to the Home controller class.</span></span> <span data-ttu-id="f9e2d-373">Estos nuevos métodos de Edit() están contenidos en el listado 6.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-373">These new Edit() methods are contained in Listing 6.</span></span>

<span data-ttu-id="f9e2d-374">**Listado 6 - controllers\homecontroller (con los métodos de edición)**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-374">**Listing 6 - Controllers\HomeController.cs (with Edit methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample6.cs)]

<span data-ttu-id="f9e2d-375">El primer método Edit() se invoca una operación GET de HTTP.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-375">The first Edit() method is invoked by an HTTP GET operation.</span></span> <span data-ttu-id="f9e2d-376">Un parámetro de identificador se pasa a este método que representa el identificador de registro de contacto que se está editando.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-376">An Id parameter is passed to this method which represents the Id of the contact record being edited.</span></span> <span data-ttu-id="f9e2d-377">Entity Framework se utiliza para recuperar un contacto que coincida con el identificador. Se devuelve una vista que contiene un formulario HTML para editar un registro.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-377">The Entity Framework is used to retrieve a contact that matches the Id. A view that contains an HTML form for editing a record is returned.</span></span>

<span data-ttu-id="f9e2d-378">El segundo método Edit() realiza la actualización real de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-378">The second Edit() method performs the actual update to the database.</span></span> <span data-ttu-id="f9e2d-379">Este método acepta una instancia de la clase Contact como un parámetro.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-379">This method accepts an instance of the Contact class as a parameter.</span></span> <span data-ttu-id="f9e2d-380">El marco de ASP.NET MVC enlaza los campos del formulario desde el formulario de edición para esta clase automáticamente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-380">The ASP.NET MVC framework binds the form fields from the Edit form to this class automatically.</span></span> <span data-ttu-id="f9e2d-381">Observe que no t incluyen el atributo [Bind] cuando se edita un contacto (se necesita el valor de la propiedad Id).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-381">Notice that you don t include the[Bind] attribute when editing a Contact (we need the value of the Id property).</span></span>

<span data-ttu-id="f9e2d-382">Entity Framework se usa para guardar el contacto modificado en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-382">The Entity Framework is used to save the modified Contact to the database.</span></span> <span data-ttu-id="f9e2d-383">El contacto original se debe recuperar de la base de datos en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-383">The original Contact must be retrieved from the database first.</span></span> <span data-ttu-id="f9e2d-384">A continuación, se llama al método de Entity Framework ApplyPropertyChanges() para registrar los cambios en el contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-384">Next, the Entity Framework ApplyPropertyChanges() method is called to record the changes to the Contact.</span></span> <span data-ttu-id="f9e2d-385">Por último, se llama al método de Entity Framework SaveChanges() para conservar los cambios a la base de datos subyacente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-385">Finally, the Entity Framework SaveChanges() method is called to persist the changes to the underlying database.</span></span>

<span data-ttu-id="f9e2d-386">Puede generar la vista que contiene el formulario de edición haciendo clic en el método Edit() y seleccionar la opción de menú Agregar vista.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-386">You can generate the view that contains the Edit form by right-clicking the Edit() method and selecting the menu option Add View.</span></span> <span data-ttu-id="f9e2d-387">En el cuadro de diálogo Agregar vista, seleccione la **ContactManager.Models.Contact** clase y la **editar** ver contenido (Véase la figura 19).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-387">In the Add View dialog, select the **ContactManager.Models.Contact** class and the **Edit** view content (see Figure 19).</span></span>


<span data-ttu-id="f9e2d-388">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image19.jpg)](iteration-1-create-the-application-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-388">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image19.jpg)](iteration-1-create-the-application-cs/_static/image37.png)</span></span>

<span data-ttu-id="f9e2d-389">**Figura 19**: agregar una vista de edición ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-389">**Figure 19**: Adding an Edit View ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image38.png))</span></span>


<span data-ttu-id="f9e2d-390">Al hacer clic en el botón Agregar, se genera automáticamente una nueva vista de edición.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-390">When you click the Add button, a new Edit view is generated automatically.</span></span> <span data-ttu-id="f9e2d-391">El formulario HTML que se genera contiene campos que corresponden a cada una de las propiedades de la clase Contact (consulte el listado 7).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-391">The HTML form that is generated contains fields that correspond to each of the properties of the Contact class (see Listing 7).</span></span>

<span data-ttu-id="f9e2d-392">**Listado 7 - Views\Home\Edit.aspx**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-392">**Listing 7 - Views\Home\Edit.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample7.aspx)]

## <a name="deleting-contacts"></a><span data-ttu-id="f9e2d-393">Eliminar contactos</span><span class="sxs-lookup"><span data-stu-id="f9e2d-393">Deleting Contacts</span></span>

<span data-ttu-id="f9e2d-394">Si desea eliminar los contactos, a continuación, debe agregar dos acciones Delete() a la clase de controlador principal.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-394">If you want to delete contacts then you need to add two Delete() actions to the Home controller class.</span></span> <span data-ttu-id="f9e2d-395">La primera acción Delete() muestra un formulario de confirmación de eliminación.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-395">The first Delete() action displays a delete confirmation form.</span></span> <span data-ttu-id="f9e2d-396">La segunda acción Delete() lleva a cabo la eliminación real.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-396">The second Delete() action performs the actual delete.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f9e2d-397">Más adelante, en la iteración #7, modificamos el póngase en contacto con el administrador para que admita una paso Ajax eliminar.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-397">Later, in Iteration #7, we modify the Contact Manager so that it supports a one step Ajax delete.</span></span>


<span data-ttu-id="f9e2d-398">Los dos nuevos métodos de Delete() están contenidos en el listado 8.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-398">The two new Delete() methods are contained in Listing 8.</span></span>

<span data-ttu-id="f9e2d-399">**Enumerar 8 - controllers\homecontroller (métodos de eliminación)**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-399">**Listing 8 - Controllers\HomeController.cs (Delete methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample8.cs)]

<span data-ttu-id="f9e2d-400">El primer método Delete() devuelve un formulario de confirmación para eliminar un registro de contacto de la base de datos (vea Figure20).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-400">The first Delete() method returns a confirmation form for deleting a contact record from the database (see Figure20).</span></span> <span data-ttu-id="f9e2d-401">El segundo método Delete() realiza la operación de eliminación real con la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-401">The second Delete() method performs the actual delete operation against the database.</span></span> <span data-ttu-id="f9e2d-402">Después de que el contacto original se ha recuperado de la base de datos, se llama a los métodos de Entity Framework DeleteObject() y SaveChanges() para llevar a cabo la eliminación de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-402">After the original contact has been retrieved from the database, the Entity Framework DeleteObject() and SaveChanges() methods are called to perform the database delete.</span></span>


<span data-ttu-id="f9e2d-403">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image20.jpg)](iteration-1-create-the-application-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-403">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image20.jpg)](iteration-1-create-the-application-cs/_static/image39.png)</span></span>

<span data-ttu-id="f9e2d-404">**Figura 20**: la vista de confirmación de eliminación ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-404">**Figure 20**: The delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image40.png))</span></span>


<span data-ttu-id="f9e2d-405">Es necesario modificar la vista de índice para que contenga un vínculo para eliminar registros de contactos (Véase la figura 21).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-405">We need to modify the Index view so that it contains a link for deleting contact records (see Figure 21).</span></span> <span data-ttu-id="f9e2d-406">Debe agregar el código siguiente a la misma celda de tabla que contiene el vínculo de edición:</span><span class="sxs-lookup"><span data-stu-id="f9e2d-406">You need to add the following code to the same table cell that contains the Edit link:</span></span>

<span data-ttu-id="f9e2d-407">Html.ActionLink ({Id. = elemento. % De ID})&gt;</span><span class="sxs-lookup"><span data-stu-id="f9e2d-407">Html.ActionLink( { id=item.Id }) %&gt;</span></span>


<span data-ttu-id="f9e2d-408">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image21.jpg)](iteration-1-create-the-application-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-408">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image21.jpg)](iteration-1-create-the-application-cs/_static/image41.png)</span></span>

<span data-ttu-id="f9e2d-409">**Figura 21**: índice de vista con el vínculo de edición ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-409">**Figure 21**: Index view with Edit link ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image42.png))</span></span>


<span data-ttu-id="f9e2d-410">A continuación, necesitamos crear la vista de confirmación de eliminación.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-410">Next, we need to create the delete confirmation view.</span></span> <span data-ttu-id="f9e2d-411">Haga clic en el método Delete() en la clase de controlador de inicio y seleccione la opción de menú Agregar vista.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-411">Right-click the Delete() method in the Home controller class and select the menu option Add View.</span></span> <span data-ttu-id="f9e2d-412">El cuadro de diálogo Agregar vista aparece (Véase la figura 22).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-412">The Add View dialog appears (see Figure 22).</span></span>

<span data-ttu-id="f9e2d-413">A diferencia de en el caso de las vistas de lista, crear y editar el cuadro de diálogo Agregar vista no contiene una opción para crear una vista de eliminación.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-413">Unlike in the case of the List, Create, and Edit views, the Add View dialog does not contain an option to create a Delete view.</span></span> <span data-ttu-id="f9e2d-414">En su lugar, seleccione la **ContactManager.Models.Contact** clase de datos y la **vacía** ver el contenido.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-414">Instead, select the **ContactManager.Models.Contact** data class and the **Empty** view content.</span></span> <span data-ttu-id="f9e2d-415">Seleccionar la vista vacía opción content será necesario crear la vista de nosotros mismos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-415">Selecting the Empty view content option will require us to create the view ourselves.</span></span>


<span data-ttu-id="f9e2d-416">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image22.jpg)](iteration-1-create-the-application-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-416">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image22.jpg)](iteration-1-create-the-application-cs/_static/image43.png)</span></span>

<span data-ttu-id="f9e2d-417">**Figura 22**: agregar la vista de confirmación de eliminación ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-417">**Figure 22**: Adding the delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image44.png))</span></span>


<span data-ttu-id="f9e2d-418">El contenido de la vista de eliminación se incluye en la lista de 9.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-418">The content of the Delete view is contained in Listing 9.</span></span> <span data-ttu-id="f9e2d-419">Esta vista contiene un formulario que se confirma o no debe ser un contacto determinado eliminado (consulte la figura 21).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-419">This view contains a form that confirms whether or not a particular contact should be deleted (see Figure 21).</span></span>

<span data-ttu-id="f9e2d-420">**Listado 9 - Views\Home\Delete.aspx**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-420">**Listing 9 - Views\Home\Delete.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample9.aspx)]

## <a name="changing-the-name-of-the-default-controller"></a><span data-ttu-id="f9e2d-421">Cambiar el nombre del controlador predeterminado</span><span class="sxs-lookup"><span data-stu-id="f9e2d-421">Changing the Name of the Default Controller</span></span>

<span data-ttu-id="f9e2d-422">Podría le molesta que el nombre de la clase de controlador para trabajar con los contactos se denomina la clase HomeController.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-422">It might bother you that the name of our controller class for working with contacts is named the HomeController class.</span></span> <span data-ttu-id="f9e2d-423">¿No debe t el controlador se denomina ContactController?</span><span class="sxs-lookup"><span data-stu-id="f9e2d-423">Shouldn t the controller be named ContactController?</span></span>

<span data-ttu-id="f9e2d-424">Es bastante fácil de corregir este problema.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-424">This issue is easy enough to fix.</span></span> <span data-ttu-id="f9e2d-425">En primer lugar, es necesario refactorizar el nombre del controlador Home.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-425">First, we need to refactor the name of the Home controller.</span></span> <span data-ttu-id="f9e2d-426">Abra la clase HomeController en el Editor de código de Visual Studio, haga clic en el nombre de la clase y seleccione la opción de menú **refactorizar, cambie el nombre**.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-426">Open the HomeController class in the Visual Studio Code Editor, right click the name of the class and select the menu option **Refactor, Rename**.</span></span> <span data-ttu-id="f9e2d-427">Al seleccionar esta opción de menú abre el cuadro de diálogo Cambiar el nombre.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-427">Selecting this menu option opens the Rename dialog.</span></span>


<span data-ttu-id="f9e2d-428">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image23.jpg)](iteration-1-create-the-application-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-428">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image23.jpg)](iteration-1-create-the-application-cs/_static/image45.png)</span></span>

<span data-ttu-id="f9e2d-429">**Figura 23**: un nombre de controlador de refactorización ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-429">**Figure 23**: Refactoring a controller name ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image46.png))</span></span>


<span data-ttu-id="f9e2d-430">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image24.jpg)](iteration-1-create-the-application-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-430">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image24.jpg)](iteration-1-create-the-application-cs/_static/image47.png)</span></span>

<span data-ttu-id="f9e2d-431">**Figura 24**: mediante el cuadro de diálogo Cambiar nombre ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-431">**Figure 24**: Using the Rename dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image48.png))</span></span>


<span data-ttu-id="f9e2d-432">Si cambia el nombre de la clase de controlador, Visual Studio actualizará el nombre de la carpeta en la carpeta Views así.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-432">If you rename your controller class, Visual Studio will update the name of the folder in the Views folder as well.</span></span> <span data-ttu-id="f9e2d-433">Visual Studio cambiará el nombre de la carpeta \Views\Home a la carpeta \Views\Contact.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-433">Visual Studio will rename the \Views\Home folder to the \Views\Contact folder.</span></span>

<span data-ttu-id="f9e2d-434">Después de realizar este cambio, la aplicación ya no tendrá un controlador Home.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-434">After you make this change, your application will no longer have a Home controller.</span></span> <span data-ttu-id="f9e2d-435">Al ejecutar la aplicación, obtendrá la página de error en la figura 25.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-435">When you run your application, you'll get the error page in Figure 25.</span></span>


<span data-ttu-id="f9e2d-436">[![El cuadro de diálogo nuevo proyecto](iteration-1-create-the-application-cs/_static/image25.jpg)](iteration-1-create-the-application-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="f9e2d-436">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image25.jpg)](iteration-1-create-the-application-cs/_static/image49.png)</span></span>

<span data-ttu-id="f9e2d-437">**Figura 25**: no hay ningún controlador predeterminado ([haga clic aquí para ver la imagen a tamaño completo](iteration-1-create-the-application-cs/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="f9e2d-437">**Figure 25**: No default controller ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image50.png))</span></span>


<span data-ttu-id="f9e2d-438">Es necesario actualizar la ruta predeterminada en el archivo Global.asax para usar el controlador de contacto en lugar del controlador principal.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-438">We need to update the default route in the Global.asax file to use the Contact controller instead of the Home controller.</span></span> <span data-ttu-id="f9e2d-439">Abra el archivo Global.asax y modifique el controlador predeterminado usado por la ruta predeterminada (consulte el listado 10).</span><span class="sxs-lookup"><span data-stu-id="f9e2d-439">Open the Global.asax file and modify the default controller used by the default route (see Listing 10).</span></span>

<span data-ttu-id="f9e2d-440">**Enumerar 10 - Global.asax.cs**</span><span class="sxs-lookup"><span data-stu-id="f9e2d-440">**Listing 10 - Global.asax.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample10.cs)]

<span data-ttu-id="f9e2d-441">Después de realizar estos cambios, el Administrador de contacto se ejecutará correctamente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-441">After you make these changes, the Contact Manager will run correctly.</span></span> <span data-ttu-id="f9e2d-442">Ahora, usará la clase de controlador de contacto como el controlador predeterminado.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-442">Now, it will use the Contact controller class as the default controller.</span></span>

## <a name="summary"></a><span data-ttu-id="f9e2d-443">Resumen</span><span class="sxs-lookup"><span data-stu-id="f9e2d-443">Summary</span></span>

<span data-ttu-id="f9e2d-444">En esta primera iteración, creamos una aplicación básica de póngase en contacto con el Administrador de la manera más rápida posible.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-444">In this first iteration, we created a basic Contact Manager application in the fastest way possible.</span></span> <span data-ttu-id="f9e2d-445">Aprovechamos de Visual Studio para generar automáticamente el código inicial para nuestro controladores y vistas.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-445">We took advantage of Visual Studio to generate the initial code for our controllers and views automatically.</span></span> <span data-ttu-id="f9e2d-446">También aprovechamos de Entity Framework para generar las clases de modelo de base de datos automáticamente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-446">We also took advantage of the Entity Framework to generate our database model classes automatically.</span></span>

<span data-ttu-id="f9e2d-447">Actualmente, podemos enumerar, crear, editar y eliminar registros de contactos con la aplicación de ponerse en contacto con el administrador.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-447">Currently, we can list, create, edit, and delete contact records with the Contact Manager application.</span></span> <span data-ttu-id="f9e2d-448">En otras palabras, se puede realizar todas las operaciones de base de datos básica requeridas por una aplicación web controlada por la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-448">In other words, we can perform all of the basic database operations required by a database-driven web application.</span></span>

<span data-ttu-id="f9e2d-449">Por desgracia, nuestra aplicación tiene algunos problemas.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-449">Unfortunately, our application has some problems.</span></span> <span data-ttu-id="f9e2d-450">Primero y puede dudar admitirlo, la aplicación póngase en contacto con el administrador no es la aplicación sea más atractiva.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-450">First and I hesitate to admit this, the Contact Manager application is not the most attractive application.</span></span> <span data-ttu-id="f9e2d-451">Necesita algún trabajo de diseño.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-451">It needs some design work.</span></span> <span data-ttu-id="f9e2d-452">En la siguiente iteración, se examinará cómo podemos cambiar la página maestra de la vista predeterminada y la hoja de estilos en cascada para mejorar el aspecto de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-452">In the next iteration, we'll look at how we can change the default view master page and cascading style sheet to improve the appearance of the application.</span></span>

<span data-ttu-id="f9e2d-453">En segundo lugar, no hemos implementado ninguna validación del formulario.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-453">Second, we have not implemented any form validation.</span></span> <span data-ttu-id="f9e2d-454">Por ejemplo, no hay nada para evitar que se envíe el formulario de contacto de creación sin especificar valores para cualquiera de los campos del formulario.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-454">For example, there is nothing to prevent you from submitting the Create contact form without entering values for any of the form fields.</span></span> <span data-ttu-id="f9e2d-455">Además, puede escribir direcciones de correo electrónico y de números de teléfono no válido.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-455">Furthermore, you can enter invalid phone numbers and email addresses.</span></span> <span data-ttu-id="f9e2d-456">Empezamos a abordar el problema de validación del formulario en la iteración #3.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-456">We start to tackle the problem of form validation in iteration #3.</span></span>

<span data-ttu-id="f9e2d-457">Por último y lo más importante, la iteración actual de la aplicación póngase en contacto con el administrador no puede modificar ni mantiene fácilmente.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-457">Finally, and most importantly, the current iteration of the Contact Manager application cannot be easily modified or maintained.</span></span> <span data-ttu-id="f9e2d-458">Por ejemplo, la lógica de acceso de la base de datos está preparada derecha en las acciones de controlador.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-458">For example, the database access logic is baked right into the controller actions.</span></span> <span data-ttu-id="f9e2d-459">Esto significa que no podemos modificar el código de acceso de datos sin modificar nuestro controladores.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-459">This means that we cannot modify our data access code without modifying our controllers.</span></span> <span data-ttu-id="f9e2d-460">En las iteraciones posteriores, exploramos patrones de diseño de software que se puede implementar para hacer más resistente a cambiar el Administrador de contacto.</span><span class="sxs-lookup"><span data-stu-id="f9e2d-460">In later iterations, we explore software design patterns that we can implement to make the Contact Manager more resilient to change.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="f9e2d-461">Siguiente</span><span class="sxs-lookup"><span data-stu-id="f9e2d-461">Next</span></span>](iteration-2-make-the-application-look-nice-cs.md)
