---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: 'Iteración 6 #: Use desarrollo controlado por pruebas (C#) | Documentos de Microsoft'
author: microsoft
description: En esta iteración sexto, se agregan nuevas funciones a nuestra aplicación escribiendo pruebas unitarias en primer lugar y escribir código frente a las pruebas unitarias. En esta iteración...
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2009
ms.topic: article
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: 94502625f66d3eb08a24b8f2a369bf456a3367b1
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/06/2018
---
<a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="97835-104">Iteración 6 #: Use desarrollo controlado por pruebas (C#)</span><span class="sxs-lookup"><span data-stu-id="97835-104">Iteration #6 – Use test-driven development (C#)</span></span>
====================
<span data-ttu-id="97835-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="97835-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="97835-106">Descargar código</span><span class="sxs-lookup"><span data-stu-id="97835-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="97835-107">En esta iteración sexto, se agregan nuevas funciones a nuestra aplicación escribiendo pruebas unitarias en primer lugar y escribir código frente a las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="97835-108">En esta iteración, agregamos grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="97835-109">Creación de una aplicación de MVC de ASP.NET de administración de contactos (C#)</span><span class="sxs-lookup"><span data-stu-id="97835-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>
  

<span data-ttu-id="97835-110">En esta serie de tutoriales, creamos una aplicación de administración de contactos toda desde el principio para finalizar.</span><span class="sxs-lookup"><span data-stu-id="97835-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="97835-111">La aplicación de ponerse en contacto con el administrador permite almacenar información de contacto - nombres, números de teléfono y direcciones de correo electrónico: para obtener una lista de personas.</span><span class="sxs-lookup"><span data-stu-id="97835-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="97835-112">Se compile la aplicación en varias iteraciones.</span><span class="sxs-lookup"><span data-stu-id="97835-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="97835-113">Con cada iteración, se mejora gradualmente la aplicación.</span><span class="sxs-lookup"><span data-stu-id="97835-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="97835-114">El objetivo de este enfoque de iteración varias es para que pueda entender el motivo de cada cambio.</span><span class="sxs-lookup"><span data-stu-id="97835-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="97835-115">Iteración #1: crear la aplicación.</span><span class="sxs-lookup"><span data-stu-id="97835-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="97835-116">En la primera iteración, se creará el póngase en contacto con el Administrador de la manera más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="97835-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="97835-117">Se agrega compatibilidad para las operaciones de base de datos básicos: crear, lectura, actualización y eliminación (CRUD).</span><span class="sxs-lookup"><span data-stu-id="97835-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="97835-118">Iteración #2: hacer que la aplicación sea bonito.</span><span class="sxs-lookup"><span data-stu-id="97835-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="97835-119">En esta iteración, mejorar la apariencia de la aplicación mediante la modificación de la página principal de vista de MVC de ASP.NET predeterminada y en cascada hoja de estilos.</span><span class="sxs-lookup"><span data-stu-id="97835-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="97835-120">Iteración #3: agregar validación del formulario.</span><span class="sxs-lookup"><span data-stu-id="97835-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="97835-121">En la tercera iteración, agregamos la validación del formulario básico.</span><span class="sxs-lookup"><span data-stu-id="97835-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="97835-122">Es evitar que los usuarios enviar un formulario sin completar los campos obligatorios.</span><span class="sxs-lookup"><span data-stu-id="97835-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="97835-123">También hemos validar direcciones de correo electrónico y números de teléfono.</span><span class="sxs-lookup"><span data-stu-id="97835-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="97835-124">Iteración #4: hacer que la aplicación de acoplamiento flexible.</span><span class="sxs-lookup"><span data-stu-id="97835-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="97835-125">En esta tercera iteración, aprovechamos de varios patrones de diseño de software para que resulten más fáciles de mantener y modificar la aplicación póngase en contacto con el administrador.</span><span class="sxs-lookup"><span data-stu-id="97835-125">In this third iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="97835-126">Por ejemplo, se refactoriza nuestra aplicación para que use el modelo de repositorio y el modelo de inserción de dependencias.</span><span class="sxs-lookup"><span data-stu-id="97835-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="97835-127">Iteración #5: crear pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="97835-128">En la iteración quinto, hacemos nuestra aplicación más fácil de mantener y modificar mediante la adición de pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="97835-129">Hemos simular nuestro clases del modelo de datos y generar pruebas unitarias para nuestros controladores y la lógica de validación.</span><span class="sxs-lookup"><span data-stu-id="97835-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="97835-130">Iteración 6 #: Use desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="97835-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="97835-131">En esta iteración sexto, se agregan nuevas funciones a nuestra aplicación escribiendo pruebas unitarias en primer lugar y escribir código frente a las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="97835-132">En esta iteración, agregamos grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="97835-133">Iteración #7 - agregar funcionalidad de Ajax.</span><span class="sxs-lookup"><span data-stu-id="97835-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="97835-134">En la iteración séptima, mejorar la capacidad de respuesta y el rendimiento de nuestra aplicación agregando compatibilidad para Ajax.</span><span class="sxs-lookup"><span data-stu-id="97835-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="97835-135">Esta iteración</span><span class="sxs-lookup"><span data-stu-id="97835-135">This Iteration</span></span>

<span data-ttu-id="97835-136">En las iteraciones anteriores de la aplicación Administrador de contacto, creamos pruebas unitarias para proporcionar una red de seguridad para el código.</span><span class="sxs-lookup"><span data-stu-id="97835-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="97835-137">La motivación para crear las pruebas unitarias fue hacer que el código más resistente a cambiar.</span><span class="sxs-lookup"><span data-stu-id="97835-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="97835-138">Con pruebas unitarias en su lugar, podemos, realizar cualquier cambio en el código y saber inmediatamente si se ha interrumpido la funcionalidad existente.</span><span class="sxs-lookup"><span data-stu-id="97835-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="97835-139">En esta iteración, utilizamos pruebas unitarias para un propósito completamente diferente.</span><span class="sxs-lookup"><span data-stu-id="97835-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="97835-140">En esta iteración, se utilizan pruebas unitarias como parte de una filosofía de diseño de la aplicación llama a *desarrollo controlado por pruebas*.</span><span class="sxs-lookup"><span data-stu-id="97835-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="97835-141">Cuando practicar el desarrollo controlado por pruebas, escribe pruebas en primer lugar y, a continuación, escribe código en las pruebas.</span><span class="sxs-lookup"><span data-stu-id="97835-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="97835-142">Más concretamente, al practicando con desarrollo controlado por pruebas, hay tres pasos que seguir al crear el código (rojo / verde/refactorizar):</span><span class="sxs-lookup"><span data-stu-id="97835-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="97835-143">Escribir una prueba unitaria que se produce un error (rojo)</span><span class="sxs-lookup"><span data-stu-id="97835-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="97835-144">Escribir el código que pasa la prueba unitaria (verde)</span><span class="sxs-lookup"><span data-stu-id="97835-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="97835-145">Refactorizar el código (refactorización)</span><span class="sxs-lookup"><span data-stu-id="97835-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="97835-146">En primer lugar, escribir la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="97835-146">First, you write the unit test.</span></span> <span data-ttu-id="97835-147">La prueba unitaria debe formularse de su intención de cómo se espera que el código se comportan.</span><span class="sxs-lookup"><span data-stu-id="97835-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="97835-148">Cuando se crea por primera vez la prueba unitaria, debe generar un error en la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="97835-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="97835-149">La prueba debe generar un error porque todavía no ha escrito ningún código de aplicación que supera la prueba.</span><span class="sxs-lookup"><span data-stu-id="97835-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="97835-150">A continuación, escriba únicamente el código suficiente en orden para que pase la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="97835-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="97835-151">El objetivo consiste en escribir el código en la forma laziest, sloppiest y más rápido posible.</span><span class="sxs-lookup"><span data-stu-id="97835-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="97835-152">No debe perder tiempo a pensar acerca de la arquitectura de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="97835-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="97835-153">En su lugar, debe centrarse en escribir la cantidad mínima de código necesario para satisfacer la intención expresada por la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="97835-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="97835-154">Finalmente, después de haber escrito el código suficiente, puede retroceder y considerar la arquitectura global de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="97835-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="97835-155">En este paso, reescriba (refactorización) patrones de su código aprovechando las ventajas de diseño de software, como el modelo de repositorio: para que el código sea más fácil de mantener.</span><span class="sxs-lookup"><span data-stu-id="97835-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="97835-156">Fearlessly puede volver a escribir el código en este paso porque el código está cubierto por las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="97835-157">Hay muchas ventajas resultantes practicando con el desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="97835-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="97835-158">En primer lugar, controlado por pruebas desarrollo obliga a centrarse en el código que realmente debe escribirse.</span><span class="sxs-lookup"><span data-stu-id="97835-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="97835-159">Dado que constantemente se centra en escribir simplemente el código suficiente para pasar una prueba determinada, no se permite desde adentra en las plantas y escritura de grandes cantidades de código que no utilizará nunca.</span><span class="sxs-lookup"><span data-stu-id="97835-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="97835-160">En segundo lugar, una metodología de diseño "probar primero", tendrá que escribir código desde la perspectiva de cómo se usará el código.</span><span class="sxs-lookup"><span data-stu-id="97835-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="97835-161">En otras palabras, cuando practicando con desarrollo controlado por pruebas, se escribe constantemente las pruebas desde la perspectiva del usuario.</span><span class="sxs-lookup"><span data-stu-id="97835-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="97835-162">Por lo tanto, puede dar lugar a desarrollo controlado por pruebas en las API más limpia y sea más comprensibles.</span><span class="sxs-lookup"><span data-stu-id="97835-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="97835-163">Por último, desarrollo controlado por pruebas, tendrá que escribir pruebas unitarias como parte del proceso normal de la escritura de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="97835-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="97835-164">Tal y como se acerca a una fecha límite del proyecto, prueba suele ser lo primero que sale de la ventana.</span><span class="sxs-lookup"><span data-stu-id="97835-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="97835-165">Cuando practicando con el desarrollo controlado por pruebas, por otro lado, es más probable que sean virtuoso sobre cómo escribir pruebas unitarias porque desarrollo controlado por pruebas no realiza pruebas unitarias central en el proceso de creación de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="97835-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="97835-166">Para más información acerca del desarrollo controlado por pruebas, recomienda leer el libro de Michael Feathers **trabajar eficazmente con código heredado**.</span><span class="sxs-lookup"><span data-stu-id="97835-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="97835-167">En esta iteración, agregamos una nueva característica a nuestra aplicación póngase en contacto con el administrador.</span><span class="sxs-lookup"><span data-stu-id="97835-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="97835-168">Se agregará compatibilidad para grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-168">We add support for Contact Groups.</span></span> <span data-ttu-id="97835-169">Puede usar grupos de contactos para organizar los contactos en categorías, como Business y grupos de confianza.</span><span class="sxs-lookup"><span data-stu-id="97835-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="97835-170">Esta nueva funcionalidad vamos a agregar a nuestra aplicación siguiendo un proceso de desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="97835-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="97835-171">Escribiremos nuestras pruebas unitarias en primer lugar y se escribirá todo el código en estas pruebas.</span><span class="sxs-lookup"><span data-stu-id="97835-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="97835-172">¿Qué Obtiene probado</span><span class="sxs-lookup"><span data-stu-id="97835-172">What Gets Tested</span></span>

<span data-ttu-id="97835-173">Como se explicó en la iteración anterior, normalmente no escribir pruebas unitarias para la lógica de acceso a datos, o ver lógica.</span><span class="sxs-lookup"><span data-stu-id="97835-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="97835-174">Cuando no las pruebas de unidad lógica de acceso a datos t escritura porque el acceso a una base de datos es una operación relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="97835-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="97835-175">Cuando no las pruebas de unidad de lógica de vista t escritura porque el acceso a una vista requiere poner en marcha un servidor web que es una operación relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="97835-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="97835-176">T no debe escribir una prueba unitaria a menos que la prueba se puede ejecutar una y otra vez muy rápido</span><span class="sxs-lookup"><span data-stu-id="97835-176">You shouldn t write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="97835-177">Dado el desarrollo controlado por pruebas está controlado por pruebas unitarias, nos centramos inicialmente sobre la escritura de controlador y la lógica empresarial.</span><span class="sxs-lookup"><span data-stu-id="97835-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="97835-178">Se evite tocar la base de datos o vistas.</span><span class="sxs-lookup"><span data-stu-id="97835-178">We avoid touching the database or views.</span></span> <span data-ttu-id="97835-179">Ganados t modificar la base de datos o crear nuestra vistas hasta el final de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="97835-179">We won t modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="97835-180">Empezaremos con lo que se puede probar.</span><span class="sxs-lookup"><span data-stu-id="97835-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="97835-181">Crear casos de usuario</span><span class="sxs-lookup"><span data-stu-id="97835-181">Creating User Stories</span></span>

<span data-ttu-id="97835-182">Cuando la práctica de desarrollo controlado por pruebas, siempre se inicia mediante la escritura de una prueba.</span><span class="sxs-lookup"><span data-stu-id="97835-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="97835-183">Esto genera inmediatamente la pregunta: ¿cómo se decide qué prueba de escribir en primer lugar?</span><span class="sxs-lookup"><span data-stu-id="97835-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="97835-184">Para responder a esta pregunta, debe escribir un conjunto de [ **casos de usuario**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="97835-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="97835-185">Un caso de usuario es una descripción (normalmente una oración) muy breve de un requisito de software.</span><span class="sxs-lookup"><span data-stu-id="97835-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="97835-186">Debe ser una descripción técnica de un requisito que se escriben desde la perspectiva del usuario.</span><span class="sxs-lookup"><span data-stu-id="97835-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="97835-187">Aquí s el conjunto de casos de usuario que describen las características requeridas por la nueva funcionalidad de grupo de contactos:</span><span class="sxs-lookup"><span data-stu-id="97835-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="97835-188">Usuario puede ver una lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="97835-189">Usuario puede crear un nuevo grupo de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="97835-190">Usuario puede eliminar un grupo de contactos existente.</span><span class="sxs-lookup"><span data-stu-id="97835-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="97835-191">Usuario puede seleccionar un grupo de contactos al crear un nuevo contacto.</span><span class="sxs-lookup"><span data-stu-id="97835-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="97835-192">Usuario puede seleccionar un grupo de contactos al editar un contacto ya existente.</span><span class="sxs-lookup"><span data-stu-id="97835-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="97835-193">Se muestra una lista de grupos de contactos en la vista de índice.</span><span class="sxs-lookup"><span data-stu-id="97835-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="97835-194">Cuando un usuario hace clic en un grupo de contactos, se muestra una lista de contactos coincidentes.</span><span class="sxs-lookup"><span data-stu-id="97835-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="97835-195">Tenga en cuenta que esta lista de casos de usuario es completamente comprensible por un cliente.</span><span class="sxs-lookup"><span data-stu-id="97835-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="97835-196">No hay ninguna mención de detalles de la implementación técnica.</span><span class="sxs-lookup"><span data-stu-id="97835-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="97835-197">Mientras que en el proceso de creación de la aplicación, el conjunto de casos de usuario puede llegar a ser más específicos.</span><span class="sxs-lookup"><span data-stu-id="97835-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="97835-198">Un caso de usuario se podría dividir en varios casos (requisitos).</span><span class="sxs-lookup"><span data-stu-id="97835-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="97835-199">Por ejemplo, podría decidir que crear un nuevo grupo de contactos debe implican la validación.</span><span class="sxs-lookup"><span data-stu-id="97835-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="97835-200">Envío de un grupo de contactos sin un nombre, debe devolver un error de validación.</span><span class="sxs-lookup"><span data-stu-id="97835-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="97835-201">Después de crear una lista de casos de usuario, está listo para escribir las primeras pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="97835-202">Comenzaremos por crear una prueba unitaria para ver la lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="97835-203">Lista de grupos de contactos</span><span class="sxs-lookup"><span data-stu-id="97835-203">Listing Contact Groups</span></span>

<span data-ttu-id="97835-204">Nuestro primer caso de usuario es que un usuario pueda ver una lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="97835-205">Es necesario expresar este artículo con una prueba.</span><span class="sxs-lookup"><span data-stu-id="97835-205">We need to express this story with a test.</span></span>

<span data-ttu-id="97835-206">Crear una nueva prueba unitaria haciendo clic en la carpeta de controladores en el proyecto ContactManager.Tests, seleccionar **agregar, nueva prueba**y seleccionando la **de prueba unitaria** plantilla (consulte la figura 1).</span><span class="sxs-lookup"><span data-stu-id="97835-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="97835-207">Nombre de la nueva unidad GroupControllerTest.cs de prueba y haga clic en el **Aceptar** botón.</span><span class="sxs-lookup"><span data-stu-id="97835-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>


<span data-ttu-id="97835-208">[![Agregar la prueba unitaria de GroupControllerTest](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="97835-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="97835-209">**Figura 01**: agregar la prueba unitaria de GroupControllerTest ([haga clic aquí para ver la imagen a tamaño completo](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="97835-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>


<span data-ttu-id="97835-210">La primera prueba unitaria se encuentra en la lista 1.</span><span class="sxs-lookup"><span data-stu-id="97835-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="97835-211">Esta prueba comprueba que el método Index() del controlador al grupo devuelve un conjunto de grupos.</span><span class="sxs-lookup"><span data-stu-id="97835-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="97835-212">La prueba comprueba que una colección de grupos aparece en la vista datos.</span><span class="sxs-lookup"><span data-stu-id="97835-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="97835-213">**Lista 1 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="97835-214">Cuando se escribe primero el código en el listado 1 en Visual Studio, obtendrá una gran cantidad de líneas onduladas rojas.</span><span class="sxs-lookup"><span data-stu-id="97835-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="97835-215">No hemos creado las clases de GroupController o grupo.</span><span class="sxs-lookup"><span data-stu-id="97835-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="97835-216">En este momento, podemos compilación incluso t nuestra aplicación, por lo que se puede ejecutar la primera prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="97835-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="97835-217">S buena.</span><span class="sxs-lookup"><span data-stu-id="97835-217">That s good.</span></span> <span data-ttu-id="97835-218">Que se considera una prueba fallida.</span><span class="sxs-lookup"><span data-stu-id="97835-218">That counts as a failing test.</span></span> <span data-ttu-id="97835-219">Por lo tanto, ahora tiene permiso para empezar a escribir el código de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="97835-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="97835-220">Es necesario escribir el código suficiente para ejecutar la prueba.</span><span class="sxs-lookup"><span data-stu-id="97835-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="97835-221">La clase de controlador de grupo en el listado 2 contiene la configuración mínima de código necesario para pasar la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="97835-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="97835-222">La acción de Index() devuelve una lista codificada de forma estática de grupos (la clase del grupo se define en el listado 3).</span><span class="sxs-lookup"><span data-stu-id="97835-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="97835-223">**La lista 2 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="97835-224">**El listado 3 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="97835-225">Una vez que se agregue las clases GroupController y grupo a nuestro proyecto, la primera prueba unitaria se completa correctamente (consulte la figura 2).</span><span class="sxs-lookup"><span data-stu-id="97835-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="97835-226">Hemos hecho el trabajo mínimo necesario para pasar la prueba.</span><span class="sxs-lookup"><span data-stu-id="97835-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="97835-227">Es el momento de celebrar.</span><span class="sxs-lookup"><span data-stu-id="97835-227">It is time to celebrate.</span></span>


<span data-ttu-id="97835-228">[![Correcto.](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="97835-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="97835-229">**Figura 02**: correcto! () [Haga clic aquí para ver la imagen a tamaño completo](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="97835-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="97835-230">Crear grupos de contactos</span><span class="sxs-lookup"><span data-stu-id="97835-230">Creating Contact Groups</span></span>

<span data-ttu-id="97835-231">Ahora podemos mover el segundo caso de usuario.</span><span class="sxs-lookup"><span data-stu-id="97835-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="97835-232">Es necesario para que pueda crear nuevos grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="97835-233">Es necesario expresar esta intención con una prueba.</span><span class="sxs-lookup"><span data-stu-id="97835-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="97835-234">La prueba en el listado 4 comprueba que el método Create() método con un nuevo grupo agrega el grupo a la lista de grupos devuelto por el método Index() de llamada.</span><span class="sxs-lookup"><span data-stu-id="97835-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="97835-235">En otras palabras, si crea un nuevo grupo, a continuación, debería poder obtener el nuevo grupo de la lista de grupos devuelto por el método Index().</span><span class="sxs-lookup"><span data-stu-id="97835-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="97835-236">**Listado 4 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="97835-237">La prueba en el listado 4 llama el método Create() con un nuevo grupo de contacto del controlador de grupo.</span><span class="sxs-lookup"><span data-stu-id="97835-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="97835-238">A continuación, la prueba comprueba que el controlador de grupo Index() método de llamada devuelve el nuevo grupo de datos de la vista.</span><span class="sxs-lookup"><span data-stu-id="97835-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="97835-239">El controlador de grupo modificado en el listado 5 contiene el mínimo estricto de los cambios necesarios para pasar la nueva prueba.</span><span class="sxs-lookup"><span data-stu-id="97835-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="97835-240">**Listado 5 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="97835-241">El controlador de grupo en el listado 5 tiene una nueva acción de Create().</span><span class="sxs-lookup"><span data-stu-id="97835-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="97835-242">Esta acción agrega un grupo a una colección de grupos.</span><span class="sxs-lookup"><span data-stu-id="97835-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="97835-243">Tenga en cuenta que se ha modificado la acción de Index() para devolver el contenido de la colección de grupos.</span><span class="sxs-lookup"><span data-stu-id="97835-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="97835-244">Una vez más, hemos realizado la cantidad mínima de trabajo requerida para pasar la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="97835-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="97835-245">Después de realizar estos cambios en el controlador de grupo, todas las de nuestro unidad pruebas pasada.</span><span class="sxs-lookup"><span data-stu-id="97835-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="97835-246">Agregar una validación</span><span class="sxs-lookup"><span data-stu-id="97835-246">Adding Validation</span></span>

<span data-ttu-id="97835-247">Este requisito no se ha indicado explícitamente en el caso de usuario.</span><span class="sxs-lookup"><span data-stu-id="97835-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="97835-248">Sin embargo, resulta razonable requerir que un grupo tiene un nombre.</span><span class="sxs-lookup"><span data-stu-id="97835-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="97835-249">En caso contrario, organizar los contactos en grupos podría no ser muy útil.</span><span class="sxs-lookup"><span data-stu-id="97835-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="97835-250">Listado 6 contiene una nueva prueba que expresa esta intención.</span><span class="sxs-lookup"><span data-stu-id="97835-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="97835-251">Esta prueba comprueba que al intentar crear un grupo sin proporcionar un nombre tiene como resultado en un mensaje de error de validación en el estado del modelo.</span><span class="sxs-lookup"><span data-stu-id="97835-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="97835-252">**Listado 6 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="97835-253">Para satisfacer esta prueba, es necesario agregar una propiedad de nombre a nuestra clase de grupo (consulte el listado 7).</span><span class="sxs-lookup"><span data-stu-id="97835-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="97835-254">Además, tenemos que agregar un poco de lógica de validación a nuestro controlador grupo s Create() acción (consulte el listado 8).</span><span class="sxs-lookup"><span data-stu-id="97835-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="97835-255">**Listado 7 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="97835-256">**Enumerar 8 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="97835-257">Observe que el controlador de grupo Create() acción ahora contiene lógica de validación y base de datos.</span><span class="sxs-lookup"><span data-stu-id="97835-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="97835-258">Actualmente, la base de datos usada por el controlador de grupo está formada por nada más que una colección en memoria.</span><span class="sxs-lookup"><span data-stu-id="97835-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="97835-259">Tiempo de refactorización</span><span class="sxs-lookup"><span data-stu-id="97835-259">Time to Refactor</span></span>

<span data-ttu-id="97835-260">El tercer paso en rojo/verde/refactorización es la parte de refactorización.</span><span class="sxs-lookup"><span data-stu-id="97835-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="97835-261">En este momento, es necesario el paso desde el código y tener en cuenta cómo se puede refactorizar la aplicación para mejorar su diseño.</span><span class="sxs-lookup"><span data-stu-id="97835-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="97835-262">La fase de refactorización es el escenario en el que creemos duros acerca de la mejor manera de implementar los patrones y principios de diseño de software.</span><span class="sxs-lookup"><span data-stu-id="97835-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="97835-263">Se está disponible modificar el código de manera que se elija para mejorar el diseño del código.</span><span class="sxs-lookup"><span data-stu-id="97835-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="97835-264">Tenemos una red de seguridad de las pruebas unitarias que nos impiden romper la funcionalidad existente.</span><span class="sxs-lookup"><span data-stu-id="97835-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="97835-265">En este momento, el controlador de grupo es un lío desde la perspectiva de buen diseño de software.</span><span class="sxs-lookup"><span data-stu-id="97835-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="97835-266">El controlador de grupo contiene un lío complicado de validación y código de acceso de datos.</span><span class="sxs-lookup"><span data-stu-id="97835-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="97835-267">Para evitar infringir el principio de responsabilidad única, es necesario separar estos problemas en clases diferentes.</span><span class="sxs-lookup"><span data-stu-id="97835-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="97835-268">Nuestra clase de controlador de grupo refactorizado se encuentra en el listado 9.</span><span class="sxs-lookup"><span data-stu-id="97835-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="97835-269">El controlador se ha modificado para utilizar la capa de servicio ContactManager.</span><span class="sxs-lookup"><span data-stu-id="97835-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="97835-270">Se trata de la misma capa de servicio que se usa con el controlador de contacto.</span><span class="sxs-lookup"><span data-stu-id="97835-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="97835-271">Enumerar 10 contiene los nuevos métodos que se agrega a la capa de servicio ContactManager para admitir la validación, enumerar y crear grupos.</span><span class="sxs-lookup"><span data-stu-id="97835-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="97835-272">La interfaz IContactManagerService se actualizó para incluir los nuevos métodos.</span><span class="sxs-lookup"><span data-stu-id="97835-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="97835-273">Listado 11 contiene una nueva clase FakeContactManagerRepository que implementa la interfaz IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="97835-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="97835-274">A diferencia de la clase EntityContactManagerRepository que también implementa la interfaz IContactManagerRepository, nuestra nueva clase FakeContactManagerRepository no se comunica con la base de datos.</span><span class="sxs-lookup"><span data-stu-id="97835-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="97835-275">La clase FakeContactManagerRepository utiliza una colección en memoria como un proxy para la base de datos.</span><span class="sxs-lookup"><span data-stu-id="97835-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="97835-276">Vamos a usar esta clase en nuestras pruebas unitarias como una capa de repositorio falsa.</span><span class="sxs-lookup"><span data-stu-id="97835-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="97835-277">**Listado 9 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="97835-278">**Lista de 10 - Controllers\ContactManagerService.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="97835-279">**Listado 11 - Controllers\FakeContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="97835-280">Modificar el IContactManagerRepository interfaz requiere utilizar para implementar los métodos CreateGroup() y ListGroups() en la clase EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="97835-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="97835-281">La forma laziest y más rápida de hacerlo consiste en Agregar métodos de código auxiliar que tengan un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="97835-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]


<span data-ttu-id="97835-282">Por último, estos cambios en el diseño de nuestra aplicación tenemos que realizar algunas modificaciones en nuestras pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="97835-283">Ahora necesitamos que utilizará el FakeContactManagerRepository al realizar las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="97835-284">La clase GroupControllerTest actualizada se encuentra en el listado 12.</span><span class="sxs-lookup"><span data-stu-id="97835-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="97835-285">**Enumerar 12 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="97835-286">Después de realizar todos estos, una vez más, todos los cambios de nuestro superación de las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="97835-287">Hemos completado todo el ciclo de rojo/verde/refactorizar.</span><span class="sxs-lookup"><span data-stu-id="97835-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="97835-288">Hemos implementado los casos de dos usuario primeros.</span><span class="sxs-lookup"><span data-stu-id="97835-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="97835-289">Ahora tenemos la compatibilidad con pruebas unitarias para los requisitos expresados en los casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="97835-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="97835-290">Implementar el resto de los casos de usuario consiste en repetir el mismo ciclo de rojo/verde/refactorizar.</span><span class="sxs-lookup"><span data-stu-id="97835-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="97835-291">Modificación de nuestra base de datos</span><span class="sxs-lookup"><span data-stu-id="97835-291">Modifying our Database</span></span>

<span data-ttu-id="97835-292">Por desgracia, aunque nos hemos cumple todos los requisitos que se expresa mediante nuestras pruebas unitarias, nuestro trabajo no se realiza.</span><span class="sxs-lookup"><span data-stu-id="97835-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="97835-293">Es necesario modificar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="97835-293">We still need to modify our database.</span></span>

<span data-ttu-id="97835-294">Es necesario crear una nueva tabla de base de datos de grupo.</span><span class="sxs-lookup"><span data-stu-id="97835-294">We need to create a new Group database table.</span></span> <span data-ttu-id="97835-295">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="97835-295">Follow these steps:</span></span>

1. <span data-ttu-id="97835-296">En la ventana Explorador de servidores, haga clic en la carpeta tablas y seleccione la opción de menú **agregar nueva tabla**.</span><span class="sxs-lookup"><span data-stu-id="97835-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="97835-297">Escriba las dos columnas que se describe a continuación, en el Diseñador de tablas.</span><span class="sxs-lookup"><span data-stu-id="97835-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="97835-298">Marcar la columna de identificador como una clave principal y una columna de identidad.</span><span class="sxs-lookup"><span data-stu-id="97835-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="97835-299">Guarde la nueva tabla con el nombre de grupos, haga clic en el icono del disquete.</span><span class="sxs-lookup"><span data-stu-id="97835-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>


| <span data-ttu-id="97835-300">**Nombre de columna**</span><span class="sxs-lookup"><span data-stu-id="97835-300">**Column Name**</span></span> | <span data-ttu-id="97835-301">**Tipo de datos**</span><span class="sxs-lookup"><span data-stu-id="97835-301">**Data Type**</span></span> | <span data-ttu-id="97835-302">**Permitir valores null**</span><span class="sxs-lookup"><span data-stu-id="97835-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="97835-303">Id.</span><span class="sxs-lookup"><span data-stu-id="97835-303">Id</span></span> | <span data-ttu-id="97835-304">int</span><span class="sxs-lookup"><span data-stu-id="97835-304">int</span></span> | <span data-ttu-id="97835-305">False</span><span class="sxs-lookup"><span data-stu-id="97835-305">False</span></span> |
| <span data-ttu-id="97835-306">nombre</span><span class="sxs-lookup"><span data-stu-id="97835-306">Name</span></span> | <span data-ttu-id="97835-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="97835-307">nvarchar(50)</span></span> | <span data-ttu-id="97835-308">False</span><span class="sxs-lookup"><span data-stu-id="97835-308">False</span></span> |


<span data-ttu-id="97835-309">A continuación, es necesario eliminar todos los datos de la tabla Contacts (en caso contrario, ganados t que pueda crear una relación entre las tablas de contactos y grupos).</span><span class="sxs-lookup"><span data-stu-id="97835-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won t be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="97835-310">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="97835-310">Follow these steps:</span></span>

1. <span data-ttu-id="97835-311">Haga clic en la tabla Contacts y seleccione la opción de menú **mostrar datos de tabla**.</span><span class="sxs-lookup"><span data-stu-id="97835-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="97835-312">Eliminar todas las filas.</span><span class="sxs-lookup"><span data-stu-id="97835-312">Delete all of the rows.</span></span>

<span data-ttu-id="97835-313">A continuación, es necesario definir una relación entre la tabla de base de datos de grupos y la tabla de base de datos de contactos existente.</span><span class="sxs-lookup"><span data-stu-id="97835-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="97835-314">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="97835-314">Follow these steps:</span></span>

1. <span data-ttu-id="97835-315">Haga doble clic en la tabla de contactos en la ventana Explorador de servidores para abrir el Diseñador de tablas.</span><span class="sxs-lookup"><span data-stu-id="97835-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="97835-316">Agregar una nueva columna de enteros a la tabla Contacts denominada GroupId.</span><span class="sxs-lookup"><span data-stu-id="97835-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="97835-317">Haga clic en el botón de relación para abrir el cuadro de diálogo de relaciones de clave externa (consulte la figura 3).</span><span class="sxs-lookup"><span data-stu-id="97835-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="97835-318">Haga clic en el botón Agregar.</span><span class="sxs-lookup"><span data-stu-id="97835-318">Click the Add button.</span></span>
5. <span data-ttu-id="97835-319">Haga clic en el botón de puntos suspensivos que aparece junto al botón de tabla y una especificación de columnas.</span><span class="sxs-lookup"><span data-stu-id="97835-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="97835-320">En el cuadro de diálogo tablas y columnas, seleccione los grupos como la tabla de clave principal y el identificador como columna de clave principal.</span><span class="sxs-lookup"><span data-stu-id="97835-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="97835-321">Seleccionar contactos como la tabla de clave externa y GroupId como columna de clave externa (consulte la figura 4).</span><span class="sxs-lookup"><span data-stu-id="97835-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="97835-322">Haga clic en el botón Aceptar.</span><span class="sxs-lookup"><span data-stu-id="97835-322">Click the OK button.</span></span>
7. <span data-ttu-id="97835-323">En **INSERT y UPDATE especificación**, seleccione el valor **Cascade** para **Eliminar regla**.</span><span class="sxs-lookup"><span data-stu-id="97835-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="97835-324">Haga clic en el botón Cerrar para cerrar el cuadro de diálogo de relaciones de clave externa.</span><span class="sxs-lookup"><span data-stu-id="97835-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="97835-325">Haga clic en el botón Guardar para guardar los cambios en la tabla Contacts.</span><span class="sxs-lookup"><span data-stu-id="97835-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="97835-326">[![Crear una relación de tabla de base de datos](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="97835-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="97835-327">**Figura 03**: crear una relación de tabla de base de datos ([haga clic aquí para ver la imagen a tamaño completo](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="97835-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>


<span data-ttu-id="97835-328">[![Especificar relaciones entre tablas](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="97835-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="97835-329">**Figura 04**: especificar las relaciones entre tablas ([haga clic aquí para ver la imagen a tamaño completo](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="97835-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="97835-330">Actualizar el modelo de datos</span><span class="sxs-lookup"><span data-stu-id="97835-330">Updating our Data Model</span></span>

<span data-ttu-id="97835-331">A continuación, deberá actualizar el modelo de datos para representar la nueva tabla de base de datos.</span><span class="sxs-lookup"><span data-stu-id="97835-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="97835-332">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="97835-332">Follow these steps:</span></span>

1. <span data-ttu-id="97835-333">Haga doble clic en el archivo ContactManagerModel.edmx en la carpeta de modelos para abrir el Diseñador de entidades.</span><span class="sxs-lookup"><span data-stu-id="97835-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="97835-334">Haga clic en la superficie del diseñador y seleccione la opción de menú **actualizar modelo desde base de datos**.</span><span class="sxs-lookup"><span data-stu-id="97835-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="97835-335">En el asistente, seleccione los grupos de la tabla y haga clic en el acabado botón (Véase la figura 5).</span><span class="sxs-lookup"><span data-stu-id="97835-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="97835-336">Haga clic en la entidad de grupos y seleccione la opción de menú **cambiar el nombre de**.</span><span class="sxs-lookup"><span data-stu-id="97835-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="97835-337">Cambiar el nombre de la *grupos* entidad a *grupo* (simples).</span><span class="sxs-lookup"><span data-stu-id="97835-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="97835-338">Haga clic en la propiedad de navegación de grupos que aparece en la parte inferior de la entidad Contact.</span><span class="sxs-lookup"><span data-stu-id="97835-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="97835-339">Cambiar el nombre de la *grupos* propiedad de navegación para *grupo* (simples).</span><span class="sxs-lookup"><span data-stu-id="97835-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="97835-340">[![Actualizar un modelo de Entity Framework de la base de datos](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="97835-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="97835-341">**Figura 05**: actualizar un modelo de Entity Framework de la base de datos ([haga clic aquí para ver la imagen a tamaño completo](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="97835-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>


<span data-ttu-id="97835-342">Después de completar estos pasos, el modelo de datos representan los contactos y los grupos de tablas.</span><span class="sxs-lookup"><span data-stu-id="97835-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="97835-343">El Diseñador de entidades debería mostrar ambas entidades (consulte la figura 6).</span><span class="sxs-lookup"><span data-stu-id="97835-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="97835-344">[![Presentación de grupo y póngase en contacto con el Diseñador de entidades](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="97835-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="97835-345">**Figura 06**: Entity Designer mostrar Group y Contact ([haga clic aquí para ver la imagen a tamaño completo](iteration-6-use-test-driven-development-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="97835-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="97835-346">Crear las clases de repositorio</span><span class="sxs-lookup"><span data-stu-id="97835-346">Creating our Repository Classes</span></span>

<span data-ttu-id="97835-347">A continuación, debemos implementar nuestra clase de repositorio.</span><span class="sxs-lookup"><span data-stu-id="97835-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="97835-348">En el transcurso de esta iteración, se agregan varios métodos nuevos a la interfaz de IContactManagerRepository al escribir código para satisfacer nuestras pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="97835-349">La versión final de la interfaz de IContactManagerRepository se encuentra en el listado 14.</span><span class="sxs-lookup"><span data-stu-id="97835-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="97835-350">**Enumerar 14 - Models\IContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="97835-351">Se refugio t realmente implementa cualquiera de los métodos relacionados con el trabajo con grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-351">We haven t actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="97835-352">Actualmente, la clase EntityContactManagerRepository tiene métodos de código auxiliar para cada uno de los métodos de grupo de contactos que se muestran en la interfaz IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="97835-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="97835-353">Por ejemplo, el método ListGroups() actualmente es similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="97835-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="97835-354">Los métodos de código auxiliar nos permitido compilar la aplicación y pasar las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="97835-355">Sin embargo, ahora es el momento para implementar estos métodos.</span><span class="sxs-lookup"><span data-stu-id="97835-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="97835-356">La versión final de la clase EntityContactManagerRepository se encuentra en el listado 13.</span><span class="sxs-lookup"><span data-stu-id="97835-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="97835-357">**Lista de 13 - Models\EntityContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="97835-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="97835-358">Crear las vistas</span><span class="sxs-lookup"><span data-stu-id="97835-358">Creating the Views</span></span>

<span data-ttu-id="97835-359">Aplicación de ASP.NET MVC cuando se usa el motor de vista ASP.NET de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="97835-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="97835-360">Por lo tanto, don t crear vistas en respuesta a una prueba unitaria determinada.</span><span class="sxs-lookup"><span data-stu-id="97835-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="97835-361">Sin embargo, dado que una aplicación podría ser sean inútil sin vistas, pero podemos t completar esta iteración sin tener que crear y modificar las vistas contenidas en la aplicación póngase en contacto con el administrador.</span><span class="sxs-lookup"><span data-stu-id="97835-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="97835-362">Se necesita crear las siguientes nuevas vistas para administrar grupos de contactos (consulte la figura 7):</span><span class="sxs-lookup"><span data-stu-id="97835-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="97835-363">Views\Group\Index.aspx - muestra una lista de grupos de contactos</span><span class="sxs-lookup"><span data-stu-id="97835-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="97835-364">Views\Group\Delete.aspx - formulario de confirmación de muestra para eliminar un grupo de contactos</span><span class="sxs-lookup"><span data-stu-id="97835-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="97835-365">[![La vista de índice de grupo](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="97835-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="97835-366">**Figura 07**: ver el índice de grupo ([haga clic aquí para ver la imagen a tamaño completo](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="97835-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>


<span data-ttu-id="97835-367">Es preciso modificar las siguientes vistas existentes para que incluyan grupos de contactos:</span><span class="sxs-lookup"><span data-stu-id="97835-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="97835-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="97835-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="97835-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="97835-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="97835-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="97835-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="97835-371">Puede ver las vistas modificadas examinando la aplicación de Visual Studio que se incluye en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="97835-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="97835-372">Por ejemplo, la figura 8 muestra la vista de índice de contactos.</span><span class="sxs-lookup"><span data-stu-id="97835-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="97835-373">[![La vista de índice de contactos](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="97835-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="97835-374">**Figura 08**: ver el índice de contactos ([haga clic aquí para ver la imagen a tamaño completo](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="97835-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="97835-375">Resumen</span><span class="sxs-lookup"><span data-stu-id="97835-375">Summary</span></span>

<span data-ttu-id="97835-376">En esta iteración, hemos agregado nuevas funcionalidades a nuestra aplicación póngase en contacto con el administrador siguiendo una metodología de diseño de aplicaciones de desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="97835-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="97835-377">Hemos iniciado mediante la creación de un conjunto de casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="97835-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="97835-378">Hemos creado un conjunto de pruebas unitarias que se corresponde con los requisitos de expresar los casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="97835-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="97835-379">Por último, indicamos únicamente el código suficiente para satisfacer los requisitos expresados por las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="97835-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="97835-380">Una vez finalizada la escritura de código suficiente para satisfacer los requisitos expresados por las pruebas unitarias, hemos actualizado nuestra base de datos y vistas.</span><span class="sxs-lookup"><span data-stu-id="97835-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="97835-381">Se agrega una nueva tabla de grupos a nuestra base de datos y se actualizaron nuestro modelo de datos de Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="97835-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="97835-382">También se crea y se modifica un conjunto de vistas.</span><span class="sxs-lookup"><span data-stu-id="97835-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="97835-383">En la siguiente iteración--la última iteración--volvemos a escribir la aplicación para aprovechar las ventajas de Ajax.</span><span class="sxs-lookup"><span data-stu-id="97835-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="97835-384">Aprovechando las ventajas de Ajax, se podrá mejorar la capacidad de respuesta y el rendimiento de la aplicación póngase en contacto con el administrador.</span><span class="sxs-lookup"><span data-stu-id="97835-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="97835-385">[Anterior](iteration-5-create-unit-tests-cs.md)
> [Siguiente](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="97835-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>
