---
uid: mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2
title: Cómo actualizar a ASP.NET MVC 4 y Web de proyecto de API a ASP.NET MVC 5 y Web API 2 | Microsoft Docs
author: Rick-Anderson
description: ASP.NET MVC 5 y Web API 2 poner un sinfín de características nuevas, como el enrutamiento mediante atributos, los filtros de autenticación y mucho más.
ms.author: riande
ms.date: 10/17/2013
ms.assetid: db0d02d9-58e8-4a0b-8d7d-b8df8ea97b88
msc.legacyurl: /mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2
msc.type: authoredcontent
ms.openlocfilehash: e313fc2229026f1b11d2f6a046a8b550c08ba96b
ms.sourcegitcommit: 45ac74e400f9f2b7dbded66297730f6f14a4eb25
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/16/2018
ms.locfileid: "41837870"
---
<a name="how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2"></a><span data-ttu-id="240d1-103">Cómo actualizar un ASP.NET MVC 4 y el proyecto de API Web a ASP.NET MVC 5 y Web API 2</span><span class="sxs-lookup"><span data-stu-id="240d1-103">How to Upgrade an ASP.NET MVC 4 and Web API Project to ASP.NET MVC 5 and Web API 2</span></span>
====================
<span data-ttu-id="240d1-104">por [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="240d1-104">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="240d1-105">ASP.NET MVC 5 y Web API 2 poner un sinfín de características nuevas, como el enrutamiento mediante atributos, los filtros de autenticación y mucho más.</span><span class="sxs-lookup"><span data-stu-id="240d1-105">ASP.NET MVC 5 and Web API 2 bring a host of new features, including attribute routing, authentication filters, and much more.</span></span> <span data-ttu-id="240d1-106">Consulte [ https://www.asp.net/vnext ](https://www.asp.net/core) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="240d1-106">See [https://www.asp.net/vnext](https://www.asp.net/core) for more details.</span></span>
> 
> <span data-ttu-id="240d1-107">En este tutorial le ayudará con los pasos necesarios para actualizar la aplicación a la versión más reciente.</span><span class="sxs-lookup"><span data-stu-id="240d1-107">This walkthrough will guide you with the steps required to upgrade your application to the latest version.</span></span>  
> 
> > [!NOTE]
> > <span data-ttu-id="240d1-108">Consulte [ASP.NET and Web Tools para Visual Studio 2013 notas](../../../visual-studio/overview/2013/release-notes.md) para obtener información sobre cambios importantes respecto a MVC 4 y Web API a la siguiente versión.</span><span class="sxs-lookup"><span data-stu-id="240d1-108">Please see [ASP.NET and Web Tools for Visual Studio 2013 Release Notes](../../../visual-studio/overview/2013/release-notes.md) for information on breaking changes from MVC 4 and Web API to the next version.</span></span>
> 
>   
> 
> <span data-ttu-id="240d1-109">En este artículo se escribió por Youngjune Hong y Rick Anderson ( [ @RickAndMSFT ](https://twitter.com/#!/RickAndMSFT) )</span><span class="sxs-lookup"><span data-stu-id="240d1-109">This article was written by Youngjune Hong and Rick Anderson ( [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT) )</span></span>


## <a name="upgrade-steps"></a><span data-ttu-id="240d1-110">Pasos de actualización</span><span class="sxs-lookup"><span data-stu-id="240d1-110">Upgrade Steps</span></span>

1. <span data-ttu-id="240d1-111">Copia de seguridad del proyecto.</span><span class="sxs-lookup"><span data-stu-id="240d1-111">Backup your project.</span></span> <span data-ttu-id="240d1-112">En este tutorial, deberá realizar cambios en el archivo de proyecto, configuración de paquete y los archivos web.config.</span><span class="sxs-lookup"><span data-stu-id="240d1-112">This walkthrough will require you to make changes to your project file, package configuration, and web.config files.</span></span>
2. <span data-ttu-id="240d1-113">Para actualizar desde API Web a Web API 2, en global.asax, cambie:</span><span class="sxs-lookup"><span data-stu-id="240d1-113">For upgrading from Web API to Web API 2, in global.asax, change:</span></span>

    [!code-csharp[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample1.cs)]

   <span data-ttu-id="240d1-114">por</span><span class="sxs-lookup"><span data-stu-id="240d1-114">to</span></span>

    [!code-csharp[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample2.cs)]
3. <span data-ttu-id="240d1-115">Asegúrese de que todos los paquetes que usan los proyectos son compatibles con MVC 5 y Web API 2.</span><span class="sxs-lookup"><span data-stu-id="240d1-115">Make sure all the packages that your projects use are compatible with MVC 5 and Web API 2.</span></span> <span data-ttu-id="240d1-116">La siguiente tabla se muestran los 4 MVC y Web API relacionadas con los paquetes que deben cambiarse.</span><span class="sxs-lookup"><span data-stu-id="240d1-116">The following table shows the MVC 4 and Web API related packages than need to be changed.</span></span> <span data-ttu-id="240d1-117">Si tiene un paquete que depende de uno de los paquetes que se enumeran a continuación, póngase en contacto con los publicadores para obtener las versiones más recientes que son compatibles con MVC 5 y Web API 2.</span><span class="sxs-lookup"><span data-stu-id="240d1-117">If you have a package that is dependent on one of the packages listed below, please contact the publishers to get the newer versions that are compatible with MVC 5 and Web API 2.</span></span> <span data-ttu-id="240d1-118">Si tiene el código fuente para esos paquetes, debe volver a compilar con los nuevos ensamblados de MVC 5 y Web API 2.</span><span class="sxs-lookup"><span data-stu-id="240d1-118">If you have the source code for those packages, you should recompile them with the new assemblies of MVC 5 and Web API 2.</span></span>   

    | <span data-ttu-id="240d1-119">**Id. de paquete**</span><span class="sxs-lookup"><span data-stu-id="240d1-119">**Package Id**</span></span> | <span data-ttu-id="240d1-120">**Versión anterior**</span><span class="sxs-lookup"><span data-stu-id="240d1-120">**Old version**</span></span> | <span data-ttu-id="240d1-121">**Nueva versión**</span><span class="sxs-lookup"><span data-stu-id="240d1-121">**New version**</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="240d1-122">Microsoft.AspNet.Razor</span><span class="sxs-lookup"><span data-stu-id="240d1-122">Microsoft.AspNet.Razor</span></span> | <span data-ttu-id="240d1-123">2.0.x.x</span><span class="sxs-lookup"><span data-stu-id="240d1-123">2.0.x.x</span></span> | <span data-ttu-id="240d1-124">3.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-124">3.0.0</span></span> |
    | <span data-ttu-id="240d1-125">Microsoft.AspNet.WebPages</span><span class="sxs-lookup"><span data-stu-id="240d1-125">Microsoft.AspNet.WebPages</span></span> | <span data-ttu-id="240d1-126">2.0.x.x</span><span class="sxs-lookup"><span data-stu-id="240d1-126">2.0.x.x</span></span> | <span data-ttu-id="240d1-127">3.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-127">3.0.0</span></span> |
    | <span data-ttu-id="240d1-128">Microsoft.AspNet.WebPages.WebData</span><span class="sxs-lookup"><span data-stu-id="240d1-128">Microsoft.AspNet.WebPages.WebData</span></span> | <span data-ttu-id="240d1-129">2.0.x.x</span><span class="sxs-lookup"><span data-stu-id="240d1-129">2.0.x.x</span></span> | <span data-ttu-id="240d1-130">3.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-130">3.0.0</span></span> |
    | <span data-ttu-id="240d1-131">Microsoft.AspNet.WebPages.OAuth</span><span class="sxs-lookup"><span data-stu-id="240d1-131">Microsoft.AspNet.WebPages.OAuth</span></span> | <span data-ttu-id="240d1-132">2.0.x.x</span><span class="sxs-lookup"><span data-stu-id="240d1-132">2.0.x.x</span></span> | <span data-ttu-id="240d1-133">3.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-133">3.0.0</span></span> |
    | <span data-ttu-id="240d1-134">Microsoft.AspNet.Mvc</span><span class="sxs-lookup"><span data-stu-id="240d1-134">Microsoft.AspNet.Mvc</span></span> | <span data-ttu-id="240d1-135">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-135">4.0.x.x</span></span> | <span data-ttu-id="240d1-136">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-136">5.0.0</span></span> |
    | <span data-ttu-id="240d1-137">Microsoft.AspNet.Mvc.Facebook</span><span class="sxs-lookup"><span data-stu-id="240d1-137">Microsoft.AspNet.Mvc.Facebook</span></span> | <span data-ttu-id="240d1-138">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-138">4.0.x.x</span></span> | <span data-ttu-id="240d1-139">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-139">5.0.0</span></span> |
    | <span data-ttu-id="240d1-140">Microsoft.AspNet.WebApi.Core</span><span class="sxs-lookup"><span data-stu-id="240d1-140">Microsoft.AspNet.WebApi.Core</span></span> | <span data-ttu-id="240d1-141">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-141">4.0.x.x</span></span> | <span data-ttu-id="240d1-142">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-142">5.0.0</span></span> |
    | <span data-ttu-id="240d1-143">Microsoft.AspNet.WebApi.SelfHost</span><span class="sxs-lookup"><span data-stu-id="240d1-143">Microsoft.AspNet.WebApi.SelfHost</span></span> | <span data-ttu-id="240d1-144">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-144">4.0.x.x</span></span> | <span data-ttu-id="240d1-145">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-145">5.0.0</span></span> |
    | <span data-ttu-id="240d1-146">Microsoft.AspNet.WebApi.Client</span><span class="sxs-lookup"><span data-stu-id="240d1-146">Microsoft.AspNet.WebApi.Client</span></span> | <span data-ttu-id="240d1-147">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-147">4.0.x.x</span></span> | <span data-ttu-id="240d1-148">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-148">5.0.0</span></span> |
    | <span data-ttu-id="240d1-149">Microsoft.AspNet.WebApi.OData</span><span class="sxs-lookup"><span data-stu-id="240d1-149">Microsoft.AspNet.WebApi.OData</span></span> | <span data-ttu-id="240d1-150">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-150">4.0.x.x</span></span> | <span data-ttu-id="240d1-151">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-151">5.0.0</span></span> |
    | <span data-ttu-id="240d1-152">Microsoft.AspNet.WebApi</span><span class="sxs-lookup"><span data-stu-id="240d1-152">Microsoft.AspNet.WebApi</span></span> | <span data-ttu-id="240d1-153">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-153">4.0.x.x</span></span> | <span data-ttu-id="240d1-154">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-154">5.0.0</span></span> |
    | <span data-ttu-id="240d1-155">Microsoft.AspNet.WebApi.WebHost</span><span class="sxs-lookup"><span data-stu-id="240d1-155">Microsoft.AspNet.WebApi.WebHost</span></span> | <span data-ttu-id="240d1-156">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-156">4.0.x.x</span></span> | <span data-ttu-id="240d1-157">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-157">5.0.0</span></span> |
    | <span data-ttu-id="240d1-158">Microsoft.AspNet.WebApi.Tracing</span><span class="sxs-lookup"><span data-stu-id="240d1-158">Microsoft.AspNet.WebApi.Tracing</span></span> | <span data-ttu-id="240d1-159">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-159">4.0.x.x</span></span> | <span data-ttu-id="240d1-160">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-160">5.0.0</span></span> |
    | <span data-ttu-id="240d1-161">Microsoft.AspNet.WebApi.HelpPage</span><span class="sxs-lookup"><span data-stu-id="240d1-161">Microsoft.AspNet.WebApi.HelpPage</span></span> | <span data-ttu-id="240d1-162">4.0</span><span class="sxs-lookup"><span data-stu-id="240d1-162">4.0.x.x</span></span> | <span data-ttu-id="240d1-163">5.0.0</span><span class="sxs-lookup"><span data-stu-id="240d1-163">5.0.0</span></span> |
    | <span data-ttu-id="240d1-164">Microsoft.Net.Http</span><span class="sxs-lookup"><span data-stu-id="240d1-164">Microsoft.Net.Http</span></span> | <span data-ttu-id="240d1-165">2.0. x.</span><span class="sxs-lookup"><span data-stu-id="240d1-165">2.0.x.</span></span> | <span data-ttu-id="240d1-166">2.2. x.</span><span class="sxs-lookup"><span data-stu-id="240d1-166">2.2.x.</span></span> |
    | <span data-ttu-id="240d1-167">Microsoft.Data.OData</span><span class="sxs-lookup"><span data-stu-id="240d1-167">Microsoft.Data.OData</span></span> | <span data-ttu-id="240d1-168">5.2. x</span><span class="sxs-lookup"><span data-stu-id="240d1-168">5.2.x</span></span> | <span data-ttu-id="240d1-169">5.6</span><span class="sxs-lookup"><span data-stu-id="240d1-169">5.6.x</span></span> |
    | <span data-ttu-id="240d1-170">System.Spatial</span><span class="sxs-lookup"><span data-stu-id="240d1-170">System.Spatial</span></span> | <span data-ttu-id="240d1-171">5.2. x</span><span class="sxs-lookup"><span data-stu-id="240d1-171">5.2.x</span></span> | <span data-ttu-id="240d1-172">5.6</span><span class="sxs-lookup"><span data-stu-id="240d1-172">5.6.x</span></span> |
    | <span data-ttu-id="240d1-173">Microsoft.Data.Edm</span><span class="sxs-lookup"><span data-stu-id="240d1-173">Microsoft.Data.Edm</span></span> | <span data-ttu-id="240d1-174">5.2. x</span><span class="sxs-lookup"><span data-stu-id="240d1-174">5.2.x</span></span> | <span data-ttu-id="240d1-175">5.6</span><span class="sxs-lookup"><span data-stu-id="240d1-175">5.6.x</span></span> |
    | <span data-ttu-id="240d1-176">Microsoft.AspNet.Mvc.FixedDisplayModes</span><span class="sxs-lookup"><span data-stu-id="240d1-176">Microsoft.AspNet.Mvc.FixedDisplayModes</span></span> | <span data-ttu-id="240d1-177">< o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="240d1-177"><o:p> </o:p></span></span> | <span data-ttu-id="240d1-178">Quitada</span><span class="sxs-lookup"><span data-stu-id="240d1-178">Removed</span></span> |
    | <span data-ttu-id="240d1-179">Microsoft.AspNet.WebPages.Administration</span><span class="sxs-lookup"><span data-stu-id="240d1-179">Microsoft.AspNet.WebPages.Administration</span></span> | <span data-ttu-id="240d1-180">< o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="240d1-180"><o:p> </o:p></span></span> | <span data-ttu-id="240d1-181">Quitada</span><span class="sxs-lookup"><span data-stu-id="240d1-181">Removed</span></span> |
    | <span data-ttu-id="240d1-182">Aplicaciones auxiliares de Web de Microsoft</span><span class="sxs-lookup"><span data-stu-id="240d1-182">Microsoft-Web-Helpers</span></span> | <span data-ttu-id="240d1-183">< o:p >< / o:p ></span><span class="sxs-lookup"><span data-stu-id="240d1-183"><o:p> </o:p></span></span> | <span data-ttu-id="240d1-184">Microsoft.AspNet.WebHelpers</span><span class="sxs-lookup"><span data-stu-id="240d1-184">Microsoft.AspNet.WebHelpers</span></span> |

    > [!NOTE]
    > <span data-ttu-id="240d1-185">Aplicaciones auxiliares de Web de Microsoft se ha reemplazado por Microsoft.AspNet.WebHelpers.</span><span class="sxs-lookup"><span data-stu-id="240d1-185">Microsoft-Web-Helpers has been replaced with Microsoft.AspNet.WebHelpers.</span></span> <span data-ttu-id="240d1-186">Debe quitar el paquete antiguo en primer lugar y, a continuación, instale el paquete más reciente.</span><span class="sxs-lookup"><span data-stu-id="240d1-186">You should remove the old package first, and then install the newer package.</span></span>   
    >   
    > <span data-ttu-id="240d1-187">No hay ninguna compatibilidad de versiones entre los paquetes principales de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="240d1-187">There is no cross version compatibility among major ASP.NET packages.</span></span> <span data-ttu-id="240d1-188">Por ejemplo, MVC 5 es compatible con solo Razor 3 y 2 de Razor no.</span><span class="sxs-lookup"><span data-stu-id="240d1-188">For example, MVC 5 is compatible with only Razor 3, and not Razor 2.</span></span>
4. <span data-ttu-id="240d1-189">Abra el proyecto en Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="240d1-189">Open your project in Visual Studio 2013.</span></span>
5. <span data-ttu-id="240d1-190">Quitar cualquiera de los siguientes paquetes de NuGet de ASP.NET que se instalan.</span><span class="sxs-lookup"><span data-stu-id="240d1-190">Remove any of the following ASP.NET NuGet packages that are installed.</span></span> <span data-ttu-id="240d1-191">Quitará ellas mediante la consola de administrador de paquetes (PMC).</span><span class="sxs-lookup"><span data-stu-id="240d1-191">You will remove these using the Package Manager Console (PMC).</span></span> <span data-ttu-id="240d1-192">Para abrir la PMC, seleccione el **herramientas** menú y, a continuación, seleccione **Administrador de paquetes de biblioteca,** , a continuación, seleccione **Package Manager Console**.</span><span class="sxs-lookup"><span data-stu-id="240d1-192">To open the PMC, select the **Tools** menu and then select **Library Package Manager,** then select **Package Manager Console**.</span></span> <span data-ttu-id="240d1-193">El proyecto no puede incluir todos ellos.</span><span class="sxs-lookup"><span data-stu-id="240d1-193">Your project might not include all of these.</span></span>

    1. `Microsoft.AspNet.WebPages.Administration`  
   <span data-ttu-id="240d1-194">Normalmente, este paquete se agrega al actualizar de MVC 3 a MVC 4.</span><span class="sxs-lookup"><span data-stu-id="240d1-194">This package is typically added when upgrading from MVC 3 to MVC 4.</span></span> <span data-ttu-id="240d1-195">Para quitarlo, ejecute el siguiente comando en la PMC:</span><span class="sxs-lookup"><span data-stu-id="240d1-195">To remove it, run the following command in the PMC:</span></span>  
        `Uninstall-Package -Id Microsoft.AspNet.WebPages.Administration`
    2. `Microsoft-Web-Helpers`   
   <span data-ttu-id="240d1-196">Este paquete se ha pasado a llamarse `Microsoft.AspNet.WebHelpers`.</span><span class="sxs-lookup"><span data-stu-id="240d1-196">This package has been rebranded as `Microsoft.AspNet.WebHelpers`.</span></span> <span data-ttu-id="240d1-197">Para quitarlo, ejecute el siguiente comando en la PMC:</span><span class="sxs-lookup"><span data-stu-id="240d1-197">To remove it, run the following command in the PMC:</span></span>  
        `Uninstall-Package -Id Microsoft-Web-Helpers`
    3. `Microsoft.AspNet.Mvc.FixedDisplayMode`  
   <span data-ttu-id="240d1-198">Este paquete contiene una solución alternativa para un error en MVC 4 que se ha corregido en MVC 5.</span><span class="sxs-lookup"><span data-stu-id="240d1-198">This package contains a work around for a bug in MVC 4 that has been fixed in MVC 5.</span></span> <span data-ttu-id="240d1-199">Para quitarlo, ejecute el siguiente comando en la PMC:</span><span class="sxs-lookup"><span data-stu-id="240d1-199">To remove it, run the following command in the PMC:</span></span>  
        `Uninstall-Package -Id Microsoft.AspNet.Mvc.FixedDisplayModes`
6. <span data-ttu-id="240d1-200">Actualizar todos los paquetes de NuGet de ASP.NET con la PMC.</span><span class="sxs-lookup"><span data-stu-id="240d1-200">Upgrade all the ASP.NET NuGet packages using the PMC.</span></span> <span data-ttu-id="240d1-201">En la PMC, ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="240d1-201">In the PMC, run the following command:</span></span>  
    `Update-Package`  
   <span data-ttu-id="240d1-202">El `Update-Package` comando sin ningún parámetro actualizará todos los paquetes.</span><span class="sxs-lookup"><span data-stu-id="240d1-202">The `Update-Package` command without any parameters will update every package.</span></span> <span data-ttu-id="240d1-203">Puede actualizar los paquetes individualmente mediante el argumento de identificador.</span><span class="sxs-lookup"><span data-stu-id="240d1-203">You can update packages individually by using the ID argument.</span></span> <span data-ttu-id="240d1-204">Para obtener más información acerca del comando de actualización, ejecute `get-help update-package` .</span><span class="sxs-lookup"><span data-stu-id="240d1-204">For more information about the update command, run     `get-help update-package` .</span></span>

## <a name="update-the-application-webconfig-file"></a><span data-ttu-id="240d1-205">Actualizar la aplicación *web.config* archivo</span><span class="sxs-lookup"><span data-stu-id="240d1-205">Update the Application *web.config* File</span></span>

<span data-ttu-id="240d1-206">Asegúrese de realizar estos cambios en la aplicación *web.config* archivo, no el *web.config* de archivos en el *vistas* carpeta.</span><span class="sxs-lookup"><span data-stu-id="240d1-206">Be sure to make these changes in the app *web.config* file, not the *web.config* file in the *Views* folder.</span></span>

<span data-ttu-id="240d1-207">Busque el `<runtime>/<assemblyBinding>` sección y realizar los cambios siguientes:</span><span class="sxs-lookup"><span data-stu-id="240d1-207">Locate the `<runtime>/<assemblyBinding>` section, and make the following changes:</span></span>

1. <span data-ttu-id="240d1-208">En los elementos con el atributo de nombre "System.Web.Mvc", cambie el número de versión de "4.0.0.0" a "5.0.0.0".</span><span class="sxs-lookup"><span data-stu-id="240d1-208">In the elements with the name attribute "System.Web.Mvc", change the version number from "4.0.0.0" to "5.0.0.0".</span></span> <span data-ttu-id="240d1-209">(Dos cambios en ese elemento).</span><span class="sxs-lookup"><span data-stu-id="240d1-209">(Two changes in that element.)</span></span>
2. <span data-ttu-id="240d1-210">En los elementos con el atributo de nombre &quot;System.Web.Helpers "y &quot;System.Web.WebPages&quot; cambiar el número de versión de"2.0.0.0"a"3.0.0.0".</span><span class="sxs-lookup"><span data-stu-id="240d1-210">In elements with the name attribute &quot;System.Web.Helpers" and &quot;System.Web.WebPages&quot; change the version number from "2.0.0.0" to "3.0.0.0".</span></span> <span data-ttu-id="240d1-211">Se producirá cuatro cambios, dos en cada uno de los elementos.</span><span class="sxs-lookup"><span data-stu-id="240d1-211">Four changes will occur, two in each of the elements.</span></span>

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample3.xml?highlight=6,10,14)]
3. <span data-ttu-id="240d1-212">Busque el `<appSettings>` sección y actualizar el webpages:version desde 2.0.0.0.0 a 3.0.0.0, tal como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="240d1-212">Locate the `<appSettings>` section and update the webpages:version from 2.0.0.0.0 to 3.0.0.0 as shown below:</span></span>

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample4.xml?highlight=2)]
4. <span data-ttu-id="240d1-213">Quitar los niveles de confianza que no sea completo.</span><span class="sxs-lookup"><span data-stu-id="240d1-213">Remove any trust levels other than Full.</span></span> <span data-ttu-id="240d1-214">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="240d1-214">For example:</span></span>

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample5.xml?highlight=2)]

## <a name="update-the-webconfig-files-under-the-views-folder"></a><span data-ttu-id="240d1-215">Actualización de la *web.config* archivos bajo la carpeta de vistas</span><span class="sxs-lookup"><span data-stu-id="240d1-215">Update the *web.config* files under the Views folder</span></span>

<span data-ttu-id="240d1-216">Si la aplicación está utilizando áreas, también deberá actualizar cada *web.config* de archivos en el *vistas* subcarpeta de cada carpeta de área.</span><span class="sxs-lookup"><span data-stu-id="240d1-216">If your application is using areas, you will also need to update each *web.config* file in the *Views* sub-folder of each Area folder.</span></span>

1. <span data-ttu-id="240d1-217">Actualizar todos los elementos que contienen "System.Web.Mvc" de la versión "4.0.0.0" a la versión "5.0.0.0".</span><span class="sxs-lookup"><span data-stu-id="240d1-217">Update all elements that contain "System.Web.Mvc" from version "4.0.0.0" to version "5.0.0.0".</span></span>  

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample6.xml?highlight=2)]

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample7.xml?highlight=4-6,8)]
2. <span data-ttu-id="240d1-218">Actualizar todos los elementos que contienen "System.Web.WebPages.Razor" de la versión "2.0.0.0" a la versión "3.0.0.0".</span><span class="sxs-lookup"><span data-stu-id="240d1-218">Update all elements that contain "System.Web.WebPages.Razor" from version "2.0.0.0" to version"3.0.0.0".</span></span> <span data-ttu-id="240d1-219">Si esta sección contiene "System.Web.WebPages", actualizar esos elementos de la versión "2.0.0.0" versión "3.0.0.0"</span><span class="sxs-lookup"><span data-stu-id="240d1-219">If this section contains "System.Web.WebPages", update those elements from version "2.0.0.0" to version"3.0.0.0"</span></span>  

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample8.xml?highlight=3-5)]
3. <span data-ttu-id="240d1-220">Si ha quitado el `Microsoft-Web-Helpers` Instalar paquete NuGet en un paso anterior, `Microsoft.AspNet.WebHelpers` con el siguiente comando en la PMC:</span><span class="sxs-lookup"><span data-stu-id="240d1-220">If you removed the `Microsoft-Web-Helpers` NuGet package in a previous step, install `Microsoft.AspNet.WebHelpers` with the following command in the PMC:</span></span>  
    `Install-Package -Id Microsoft.AspNet.WebHelpers`
4. <span data-ttu-id="240d1-221">Si su aplicación usa el [User.IsInRole()](https://msdn.microsoft.com/en-us/library/system.web.security.roleprincipal.isinrole(v=vs.110).aspx) método, agregue lo siguiente a la *Web.config* archivo.</span><span class="sxs-lookup"><span data-stu-id="240d1-221">If your app uses the [User.IsInRole()](https://msdn.microsoft.com/en-us/library/system.web.security.roleprincipal.isinrole(v=vs.110).aspx) method, add the following to the *Web.config* file.</span></span>

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample9.xml)]

## <a name="final-steps"></a><span data-ttu-id="240d1-222">Pasos finales</span><span class="sxs-lookup"><span data-stu-id="240d1-222">Final Steps</span></span>

<span data-ttu-id="240d1-223">Compilar y probar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="240d1-223">Build and test the application.</span></span>

<span data-ttu-id="240d1-224">Quitar el tipo de proyecto de MVC 4 GUID de los archivos del proyecto.</span><span class="sxs-lookup"><span data-stu-id="240d1-224">Remove the MVC 4 project type GUID from the project files.</span></span>

1. <span data-ttu-id="240d1-225">En el Explorador de soluciones, haga clic en el nombre del proyecto y, a continuación, seleccione **descargar el proyecto**.</span><span class="sxs-lookup"><span data-stu-id="240d1-225">In Solution Explorer, right-click the project name and then select **Unload Project**.</span></span>
2. <span data-ttu-id="240d1-226">Haga clic en el proyecto y seleccione Editar nombredelproyecto.csproj.</span><span class="sxs-lookup"><span data-stu-id="240d1-226">Right-click the project and select Edit ProjectName.csproj.</span></span>
3. <span data-ttu-id="240d1-227">Busque el `ProjectTypeGuids` elemento y, a continuación, quitar el MVC 4 proyecto GUID, `{E3E379DF-F4C6-4180-9B81-6769533ABE47}`.</span><span class="sxs-lookup"><span data-stu-id="240d1-227">Locate the `ProjectTypeGuids` element and then remove the MVC 4 project GUID, `{E3E379DF-F4C6-4180-9B81-6769533ABE47}`.</span></span>
4. <span data-ttu-id="240d1-228">Guarde y cierre el archivo de proyecto abierto.</span><span class="sxs-lookup"><span data-stu-id="240d1-228">Save and close the open project file.</span></span>
5. <span data-ttu-id="240d1-229">Haga clic en el proyecto y seleccione **recargar el proyecto**.</span><span class="sxs-lookup"><span data-stu-id="240d1-229">Right-click the project and select **Reload Project**.</span></span>
