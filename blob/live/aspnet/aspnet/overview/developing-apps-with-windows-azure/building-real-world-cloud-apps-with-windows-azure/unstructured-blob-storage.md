---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
title: "Almacenamiento de blobs no estructurados (creación de aplicaciones de nube reales con Azure) | Documentos de Microsoft"
author: MikeWasson
description: "Las aplicaciones de nube de creación Real World con libros electrónicos Azure se basa en una presentación desarrollada por Scott Guthrie. Se explican 13 patrones y prácticas recomendadas que puede..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/30/2015
ms.topic: article
ms.assetid: 9f05ccb1-2004-4661-ad8b-c370e6c09c8e
ms.technology: 
ms.prod: .net-framework
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
msc.type: authoredcontent
ms.openlocfilehash: 6cb77e8ef301c2eeef7df3e391e14f4e2c0364e9
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/10/2017
---
<a name="unstructured-blob-storage-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="0fe6a-104">Almacenamiento de blobs no estructurados (creación de aplicaciones de nube reales con Azure)</span><span class="sxs-lookup"><span data-stu-id="0fe6a-104">Unstructured Blob Storage (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="0fe6a-105">por [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="0fe6a-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="0fe6a-106">[Descarga corregirlo proyecto](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) o [descargar libros electrónicos](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="0fe6a-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="0fe6a-107">El **compilar aplicaciones de nube de mundo Real con Azure** libros electrónicos se basa en una presentación desarrollada por Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="0fe6a-108">Se explican los 13 patrones y prácticas recomendadas que le permitirá tener éxito el desarrollo de aplicaciones web para la nube.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="0fe6a-109">Para obtener información sobre el libro electrónico, consulte [el primer capítulo](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="0fe6a-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="0fe6a-110">En el capítulo anterior se busca en esquemas de partición y se explica cómo la aplicación repararlo almacena las imágenes en el servicio de almacenamiento de Azure y otros datos de la tarea en la base de datos de SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-110">In the previous chapter we looked at partitioning schemes and explained how the Fix It app stores images in the Azure Storage Blob service, and other task data in Azure SQL Database.</span></span> <span data-ttu-id="0fe6a-111">En este capítulo se profundizar en el servicio Blob y mostrar cómo se implementa en código del proyecto repararlo.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-111">In this chapter we go deeper into the Blob service and show how it's implemented in Fix It project code.</span></span>

## <a name="what-is-blob-storage"></a><span data-ttu-id="0fe6a-112">¿Qué es el almacenamiento de blobs?</span><span class="sxs-lookup"><span data-stu-id="0fe6a-112">What is Blob storage?</span></span>

<span data-ttu-id="0fe6a-113">El servicio de almacenamiento de Azure proporciona una manera de almacenar archivos en la nube.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-113">The Azure Storage Blob service provides a way to store files in the cloud.</span></span> <span data-ttu-id="0fe6a-114">El servicio Blob tiene una serie de ventajas sobre el almacenamiento de archivos en un sistema de archivos de red local:</span><span class="sxs-lookup"><span data-stu-id="0fe6a-114">The Blob service has a number of advantages over storing files in a local network file system:</span></span>

- <span data-ttu-id="0fe6a-115">Es muy escalable.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-115">It's highly scalable.</span></span> <span data-ttu-id="0fe6a-116">Puede almacenar una sola cuenta de almacenamiento [centenares de terabytes](https://msdn.microsoft.com/en-us/library/windowsazure/dn249410.aspx), y puede tener varias cuentas de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-116">A single Storage account can store [hundreds of terabytes](https://msdn.microsoft.com/en-us/library/windowsazure/dn249410.aspx), and you can have multiple Storage accounts.</span></span> <span data-ttu-id="0fe6a-117">Algunos de los principales clientes de Azure almacenan cientos de petabytes.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-117">Some of the biggest Azure customers store hundreds of petabytes.</span></span> <span data-ttu-id="0fe6a-118">Microsoft SkyDrive usa almacenamiento de blobs.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-118">Microsoft SkyDrive uses blob storage.</span></span>
- <span data-ttu-id="0fe6a-119">Es duradera.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-119">It's durable.</span></span> <span data-ttu-id="0fe6a-120">Todos los archivos que se almacenan en el servicio Blob se hacen copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-120">Every file you store in the Blob service is automatically backed up.</span></span>
- <span data-ttu-id="0fe6a-121">Proporciona alta disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-121">It provides high availability.</span></span> <span data-ttu-id="0fe6a-122">El [SLA de almacenamiento](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) promesas 99,9% o 99,99% tiempo de actividad, según la opción de redundancia geográfica que elija.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-122">The [SLA for Storage](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) promises 99.9% or 99.99% uptime, depending on which geo-redundancy option you choose.</span></span>
- <span data-ttu-id="0fe6a-123">Es una característica de plataforma como servicio (PaaS) de Azure, lo que significa que acaba de almacena y recupera archivos, pagar solo por la cantidad real de almacenamiento que use, y Azure automáticamente se encarga de configurar y administrar todas las máquinas virtuales y las unidades de disco necesarias para el servicio.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-123">It's a platform-as-a-service (PaaS) feature of Azure, which means you just store and retrieve files, paying only for the actual amount of storage you use, and Azure automatically takes care of setting up and managing all of the VMs and disk drives required for the service.</span></span>
- <span data-ttu-id="0fe6a-124">Puede acceder al servicio de Blob mediante el uso de una API de REST o mediante un lenguaje de programación API.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-124">You can access the Blob service by using a REST API or by using a programming language API.</span></span> <span data-ttu-id="0fe6a-125">Hay disponibles SDK para. NET, Java, Ruby y otros usuarios.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-125">SDKs are available for .NET, Java, Ruby, and others.</span></span>
- <span data-ttu-id="0fe6a-126">Si almacena un archivo en el servicio Blob, se puede fácilmente hacer públicamente disponible a través de Internet.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-126">When you store a file in the Blob service, you can easily make it publicly available over the Internet.</span></span>
- <span data-ttu-id="0fe6a-127">Puede proteger archivos en el Blob tiene acceso al servicio para que puedan solo por usuarios autorizados, o puede proporcionar tokens de acceso temporal que hace que estén disponibles para un usuario solo durante un período limitado de tiempo.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-127">You can secure files in the Blob service so they can accessed only by authorized users, or you can provide temporary access tokens that makes them available to someone only for a limited period of time.</span></span>

<span data-ttu-id="0fe6a-128">Cada vez que se va a compilar una aplicación de Azure y desea almacenar una gran cantidad de datos que en un entorno local saldría en archivos, como imágenes, vídeos, PDF, hojas de cálculo, etc., tenga en cuenta el servicio Blob.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-128">Anytime you're building an app for Azure and you want to store a lot of data that in an on-premises environment would go in files -- such as images, videos, PDFs, spreadsheets, etc. -- consider the Blob service.</span></span>

## <a name="creating-a-storage-account"></a><span data-ttu-id="0fe6a-129">Crear una cuenta de almacenamiento</span><span class="sxs-lookup"><span data-stu-id="0fe6a-129">Creating a Storage account</span></span>

<span data-ttu-id="0fe6a-130">Para empezar a trabajar con el servicio Blob, creará una cuenta de almacenamiento de Azure.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-130">To get started with the Blob service you create a Storage account in Azure.</span></span> <span data-ttu-id="0fe6a-131">En el portal, haga clic en **New** -- **Data Services** -- **almacenamiento** -- **creación rápida**, y, a continuación, escriba una dirección URL y una ubicación de centro de datos.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-131">In the portal, click **New** -- **Data Services** -- **Storage** -- **Quick Create**, and then enter a URL and a data center location.</span></span> <span data-ttu-id="0fe6a-132">La ubicación de centro de datos debe ser la misma que la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-132">The data center location should be the same as your web app.</span></span>

![Crear una cuenta de almacenamiento](unstructured-blob-storage/_static/image1.png)

<span data-ttu-id="0fe6a-134">Elija la región principal donde desea almacenar el contenido y, si elige la [georreplicación](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) opción, Azure crea réplicas de todos los datos en otro centro de datos en otra región del país.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-134">You pick the primary region where you want to store the content, and if you choose the [geo-replication](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) option, Azure creates replicas of all your data in a different data center in another region of the country.</span></span> <span data-ttu-id="0fe6a-135">Por ejemplo, si elige el centro de datos US occidentales, cuando se almacena un archivo entra en el centro de datos de Estados Unidos occidentales, pero en segundo plano Azure también lo copia en uno de los centros de datos de Estados Unidos.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-135">For example, if you choose the Western US data center, when you store a file it goes to the Western US data center, but in the background Azure also copies it to one of the other US data centers.</span></span> <span data-ttu-id="0fe6a-136">Si ocurre un desastre en una región del país, sus datos están seguros.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-136">If a disaster happens in one region of the country, your data is still safe.</span></span>

<span data-ttu-id="0fe6a-137">Azure no replica datos a través de límites geopolíticos: si la ubicación principal es la zona horaria del Pacífico, los archivos sólo se replican en otra región dentro de los Estados Unidos; Si la ubicación principal es Australia, los archivos sólo se replican en otro centro de datos en Australia.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-137">Azure won't replicate data across geo-political boundaries: if your primary location is in the U.S., your files are only replicated to another region within the U.S.; if your primary location is Australia, your files are only replicated to another data center in Australia.</span></span>

<span data-ttu-id="0fe6a-138">Por supuesto, también puede crear una cuenta de almacenamiento mediante la ejecución de comandos desde una secuencia de comandos, tal y como se ha explicado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-138">Of course, you can also create a Storage account by executing commands from a script, as we saw earlier.</span></span> <span data-ttu-id="0fe6a-139">Este es un comando de Windows PowerShell para crear una cuenta de almacenamiento:</span><span class="sxs-lookup"><span data-stu-id="0fe6a-139">Here's a Windows PowerShell command to create a Storage account:</span></span>

[!code-powershell[Main](unstructured-blob-storage/samples/sample1.ps1)]

<span data-ttu-id="0fe6a-140">Una vez que tenga una cuenta de almacenamiento, puede empezar inmediatamente a almacenar archivos en el servicio Blob.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-140">Once you have a Storage account, you can immediately start storing files in the Blob service.</span></span>

## <a name="using-blob-storage-in-the-fix-it-app"></a><span data-ttu-id="0fe6a-141">Con el almacenamiento de blobs en la aplicación repararlo</span><span class="sxs-lookup"><span data-stu-id="0fe6a-141">Using Blob storage in the Fix It app</span></span>

<span data-ttu-id="0fe6a-142">La aplicación repararlo permite cargar fotos.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-142">The Fix It app enables you to upload photos.</span></span>

![Crear una tarea repararlo](unstructured-blob-storage/_static/image2.png)

<span data-ttu-id="0fe6a-144">Al hacer clic en **crear la FixIt**, la aplicación carga el archivo de imagen especificado y lo almacena en el servicio Blob.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-144">When you click **Create the FixIt**, the application uploads the specified image file and stores it in the Blob service.</span></span>

### <a name="set-up-the-blob-container"></a><span data-ttu-id="0fe6a-145">Configurar el contenedor de blobs</span><span class="sxs-lookup"><span data-stu-id="0fe6a-145">Set up the Blob container</span></span>

<span data-ttu-id="0fe6a-146">Con el fin de almacenar un archivo en el servicio de Blob que necesite un *contenedor* se va a almacenar en.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-146">In order to store a file in the Blob service you need a *container* to store it in.</span></span> <span data-ttu-id="0fe6a-147">Un contenedor de servicios de Blob corresponde a una carpeta de sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-147">A Blob service container corresponds to a file system folder.</span></span> <span data-ttu-id="0fe6a-148">Las secuencias de comandos de creación de entorno que se revisan en el [automatizar todo capítulo](automate-everything.md) crear la cuenta de almacenamiento, pero no crean un contenedor.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-148">The environment creation scripts that we reviewed in the [Automate Everything chapter](automate-everything.md) create the Storage account, but they don't create a container.</span></span> <span data-ttu-id="0fe6a-149">Por lo que el propósito de la `CreateAndConfigure` método de la `PhotoService` clase consiste en crear un contenedor si ya no existe.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-149">So the purpose of the `CreateAndConfigure` method of the `PhotoService` class is to create a container if it doesn't already exist.</span></span> <span data-ttu-id="0fe6a-150">Este método se llama desde el `Application_Start` método *Global.asax*.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-150">This method is called from the `Application_Start` method in *Global.asax*.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample2.cs)]

<span data-ttu-id="0fe6a-151">La clave de acceso y nombre de la cuenta de almacenamiento se almacenan en la `appSettings` colección de la *Web.config* de archivos y el código de la `StorageUtils.StorageAccount` método usa estos valores para generar una cadena de conexión y establecer una conexión:</span><span class="sxs-lookup"><span data-stu-id="0fe6a-151">The storage account name and access key are stored in the `appSettings` collection of the *Web.config* file, and code in the `StorageUtils.StorageAccount` method uses those values to build a connection string and establish a connection:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample3.cs)]

<span data-ttu-id="0fe6a-152">El `CreateAndConfigureAsync` método, a continuación, crea un objeto que representa el servicio Blob, y un objeto que representa un contenedor (carpeta) con el nombre "imágenes" en el servicio Blob:</span><span class="sxs-lookup"><span data-stu-id="0fe6a-152">The `CreateAndConfigureAsync` method then creates an object that represents the Blob service, and an object that represents a container (folder) named "images" in the Blob service:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample4.cs)]

<span data-ttu-id="0fe6a-153">Si un contenedor había denominado "imágenes" no existe todavía, que será true la primera vez que se ejecuta la aplicación en una nueva cuenta de almacenamiento, el código crea el contenedor y establece permisos para que sea público.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-153">If a container named "images" doesn't exist yet -- which will be true the first time you run the app against a new storage account -- the code creates the container and sets permissions to make it public.</span></span> <span data-ttu-id="0fe6a-154">(De forma predeterminada, nuevos contenedores de blob son privados y solo son accesibles a los usuarios que tienen permiso para acceder a su cuenta de almacenamiento.)</span><span class="sxs-lookup"><span data-stu-id="0fe6a-154">(By default, new blob containers are private and are accessible only to users who have permission to access your storage account.)</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample5.cs)]

### <a name="store-the-uploaded-photo-in-blob-storage"></a><span data-ttu-id="0fe6a-155">Almacenar la foto cargada en el almacenamiento de blobs</span><span class="sxs-lookup"><span data-stu-id="0fe6a-155">Store the uploaded photo in Blob storage</span></span>

<span data-ttu-id="0fe6a-156">Para cargar y guardar el archivo de imagen, la aplicación usa un `IPhotoService` interfaz y una implementación de la interfaz en la `PhotoService` clase.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-156">To upload and save the image file, the app uses an `IPhotoService` interface and an implementation of the interface in the `PhotoService` class.</span></span> <span data-ttu-id="0fe6a-157">El *PhotoService.cs* archivo contiene todo el código en la aplicación repararlo que se comunica con el servicio Blob.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-157">The *PhotoService.cs* file contains all of the code in the Fix It app that communicates with the Blob service.</span></span>

<span data-ttu-id="0fe6a-158">El siguiente método de controlador MVC se llama cuando el usuario hace clic en **crear la FixIt**.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-158">The following MVC controller method is called when the user clicks **Create the FixIt**.</span></span> <span data-ttu-id="0fe6a-159">En este código, `photoService` hace referencia a una instancia de la `PhotoService` (clase), y `fixittask` hace referencia a una instancia de la `FixItTask` clase de entidad que almacena los datos para una nueva tarea.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-159">In this code, `photoService` refers to an instance of the `PhotoService` class, and `fixittask` refers to an instance of the `FixItTask` entity class that stores data for a new task.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample6.cs?highlight=8)]

<span data-ttu-id="0fe6a-160">El `UploadPhotoAsync` método en la `PhotoService` clase almacena el archivo cargado en el servicio Blob y devuelve una dirección URL que señala al blob nuevo.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-160">The `UploadPhotoAsync` method in the `PhotoService` class stores the uploaded file in the Blob service and returns a URL that points to the new blob.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample7.cs)]

<span data-ttu-id="0fe6a-161">Como en el `CreateAndConfigure` método, el código se conecta a la cuenta de almacenamiento y crea un objeto que representa el contenedor de blob "imágenes", salvo que aquí se supone que ya existe el contenedor.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-161">As in the `CreateAndConfigure` method, the code connects to the storage account and creates an object that represents the "images" blob container, except here it assumes the container already exists.</span></span>

<span data-ttu-id="0fe6a-162">A continuación, crea un identificador único para la imagen que se va a cargar, al concatenar un valor GUID nueva con la extensión de archivo:</span><span class="sxs-lookup"><span data-stu-id="0fe6a-162">Then it creates a unique identifier for the image about to be uploaded, by concatenating a new GUID value with the file extension:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample8.cs)]

<span data-ttu-id="0fe6a-163">A continuación, el código usa el objeto de contenedor de blob y el nuevo identificador único para crear un objeto blob, establece un atributo en ese objeto que indica qué tipo de archivo lo está y, a continuación, utiliza el objeto blob para almacenar el archivo en el almacenamiento de blobs.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-163">The code then uses the blob container object and the new unique identifier to create a blob object, sets an attribute on that object indicating what kind of file it is, and then uses the blob object to store the file in blob storage.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample9.cs)]

<span data-ttu-id="0fe6a-164">Por último, obtiene una dirección URL que hace referencia el blob.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-164">Finally, it gets a URL that references the blob.</span></span> <span data-ttu-id="0fe6a-165">Esta dirección URL se almacenará en la base de datos y puede usarse en páginas web repararlo para mostrar la imagen cargada.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-165">This URL will be stored in the database and can be used in Fix It web pages to display the uploaded image.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample10.cs)]

<span data-ttu-id="0fe6a-166">Esta dirección URL se almacena en la base de datos como una de las columnas de la tabla FixItTask.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-166">This URL is stored in the database as one of the columns of the FixItTask table.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample11.cs?highlight=10)]

<span data-ttu-id="0fe6a-167">Con solo la dirección URL en la base de datos e imágenes en almacenamiento de blobs, la aplicación repararlo mantiene la base de datos pequeños, escalable y asequible, mientras que las imágenes se almacenan donde almacenamiento es barato y capaz de controlar terabytes o petabytes.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-167">With only the URL in the database, and images in Blob storage, the Fix It app keeps the database small, scalable, and inexpensive, while the images are stored where storage is cheap and capable of handling terabytes or petabytes.</span></span> <span data-ttu-id="0fe6a-168">Una cuenta de almacenamiento puede almacenar cientos de terabytes de fotos repararlo y solo se paga por lo que usa.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-168">One storage account can store hundreds of terabytes of Fix It photos, and you only pay for what you use.</span></span> <span data-ttu-id="0fe6a-169">Para que pueda empezar pequeños centavos 9 pago para el primer gigabyte y agregar más imágenes para céntimos por gigabyte adicional.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-169">So you can start off small paying 9 cents for the first gigabyte, and add more images for pennies per additional gigabyte.</span></span>

### <a name="display-the-uploaded-file"></a><span data-ttu-id="0fe6a-170">Mostrar el archivo cargado</span><span class="sxs-lookup"><span data-stu-id="0fe6a-170">Display the uploaded file</span></span>

<span data-ttu-id="0fe6a-171">La aplicación repararlo muestra el archivo de imagen cargada cuando se muestren los detalles de una tarea.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-171">The Fix It application displays the uploaded image file when it displays details for a task.</span></span>

![Corregir detalles de la tarea con fotografías](unstructured-blob-storage/_static/image3.png)

<span data-ttu-id="0fe6a-173">Para mostrar la imagen, todo la vista MVC tiene que hacer es incluir el `PhotoUrl` valor en el código HTML que se envía al explorador.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-173">To display the image, all the MVC view has to do is include the `PhotoUrl` value in the HTML sent to the browser.</span></span> <span data-ttu-id="0fe6a-174">El servidor web y la base de datos no utiliza ciclos para mostrar la imagen, que solo trabajan de unos pocos bytes a la dirección URL de imagen.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-174">The web server and the database are not using cycles to display the image, they are only serving up a few bytes to the image URL.</span></span> <span data-ttu-id="0fe6a-175">En el siguiente código Razor, `Model` hace referencia a una instancia de la `FixItTask` clase de entidad.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-175">In the following Razor code, `Model` refers to an instance of the `FixItTask` entity class.</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample12.cshtml?highlight=11)]

<span data-ttu-id="0fe6a-176">Si observa el código HTML de la página que muestra, consulte la dirección URL que apunta directamente a la imagen en el almacenamiento de blobs, parecido a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="0fe6a-176">If you look at the HTML of the page that displays, you see the URL pointing directly to the image in blob storage, something like this:</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample13.cshtml?highlight=11)]

## <a name="summary"></a><span data-ttu-id="0fe6a-177">Resumen</span><span class="sxs-lookup"><span data-stu-id="0fe6a-177">Summary</span></span>

<span data-ttu-id="0fe6a-178">Ha visto cómo la aplicación repararlo almacena las imágenes en el servicio de Blob y sólo direcciones URL de imagen en la base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-178">You've seen how the Fix It app stores images in the Blob service and only image URLs in the SQL database.</span></span> <span data-ttu-id="0fe6a-179">Usar el servicio Blob mantiene la base de datos SQL mucho menor que de lo contrario sería, hace posible escalar hasta un número casi ilimitado de tareas y puede realizarse sin tener que escribir una gran cantidad de código.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-179">Using the Blob service keeps the SQL database much smaller than it otherwise would be, makes it possible to scale up to an almost unlimited number of tasks, and can be done without writing a lot of code.</span></span>

<span data-ttu-id="0fe6a-180">Puede tener cientos de terabytes en una cuenta de almacenamiento, y el costo de almacenamiento es mucho más económico que el almacenamiento de base de datos SQL, a partir de unos 3 centavos por gigabyte al mes, más una carga de transacciones pequeño.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-180">You can have hundreds of terabytes in a storage account, and the storage cost is much less expensive than SQL Database storage, starting at about 3 cents per gigabyte per month plus a small transaction charge.</span></span> <span data-ttu-id="0fe6a-181">Y tenga en cuenta que no se presta para la capacidad máxima, pero solo para la cantidad que almacena realmente; por lo que la aplicación esté lista para escalar, pero no se presta capacidad adicional para todas las que.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-181">And keep in mind that you're not paying for the maximum capacity but only for the amount you actually store, so your app is ready to scale but you're not paying for all that extra capacity.</span></span>

<span data-ttu-id="0fe6a-182">En el [siguiente capítulo](design-to-survive-failures.md) hablaremos sobre la importancia de hacer que una aplicación de nube capaz de controlar correctamente los errores.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-182">In the [next chapter](design-to-survive-failures.md) we'll talk about the importance of making a cloud app capable of gracefully handling failures.</span></span>

## <a name="resources"></a><span data-ttu-id="0fe6a-183">Recursos</span><span class="sxs-lookup"><span data-stu-id="0fe6a-183">Resources</span></span>

<span data-ttu-id="0fe6a-184">Para obtener más información, vea los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="0fe6a-184">For more information see the following resources:</span></span>

- <span data-ttu-id="0fe6a-185">[Una introducción al almacenamiento de blobs de Azure](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span><span class="sxs-lookup"><span data-stu-id="0fe6a-185">[An Introduction to Azure BLOB Storage](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span></span> <span data-ttu-id="0fe6a-186">Blog de Mike madera.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-186">Blog by Mike Wood.</span></span>
- <span data-ttu-id="0fe6a-187">[Cómo usar el servicio de almacenamiento de blobs de Azure en .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span><span class="sxs-lookup"><span data-stu-id="0fe6a-187">[How to use the Azure Blob Storage Service in .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span></span> <span data-ttu-id="0fe6a-188">Documentación oficial en el sitio MicrosoftAzure.com.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-188">Official documentation on the MicrosoftAzure.com site.</span></span> <span data-ttu-id="0fe6a-189">Una breve introducción a seguido de los ejemplos de código que muestra cómo conectarse al almacenamiento de blobs, el almacenamiento de blobs crear contenedores, cargar y descargar los blobs, etcetera.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-189">A brief introduction to blob storage followed by code examples showing how to connect to blob storage, create containers, upload and download blobs, etc.</span></span>
- <span data-ttu-id="0fe6a-190">[FailSafe: Creación de servicios en la nube escalables y resistentes](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="0fe6a-190">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="0fe6a-191">Serie de vídeos de nueve partes por Ulrich Homann y Marc Mercuri, Mark Simms.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-191">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="0fe6a-192">Presenta los conceptos y principios de la arquitectura de una manera muy interesante y accesible, con casos extraídos de la experiencia del equipo de asesoramiento al cliente (CAT) de Microsoft con clientes reales.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-192">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="0fe6a-193">Para obtener una descripción de servicio de almacenamiento de Azure y los blobs, vea episodio 5 a partir de 35:13.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-193">For a discussion of Azure Storage service and blobs, see episode 5 starting at 35:13.</span></span>
- <span data-ttu-id="0fe6a-194">[Microsoft patrones y prácticas - Guía de Azure](https://msdn.microsoft.com/en-us/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="0fe6a-194">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/en-us/library/dn568099.aspx).</span></span> <span data-ttu-id="0fe6a-195">Patrón de clave Valet vea.</span><span class="sxs-lookup"><span data-stu-id="0fe6a-195">See Valet Key pattern.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="0fe6a-196">[Anterior](data-partitioning-strategies.md)
[Siguiente](design-to-survive-failures.md)</span><span class="sxs-lookup"><span data-stu-id="0fe6a-196">[Previous](data-partitioning-strategies.md)
[Next](design-to-survive-failures.md)</span></span>
