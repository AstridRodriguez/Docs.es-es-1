---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
title: "Patrón de trabajo centrado en cola (creación de aplicaciones de nube reales con Azure) | Documentos de Microsoft"
author: MikeWasson
description: "Las aplicaciones de nube de creación Real World con libros electrónicos Azure se basa en una presentación desarrollada por Scott Guthrie. Se explican 13 patrones y prácticas recomendadas que puede..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/12/2014
ms.topic: article
ms.assetid: cc1ad51b-40c3-4c68-8620-9aaa0fd1f6cf
ms.technology: 
ms.prod: .net-framework
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
msc.type: authoredcontent
ms.openlocfilehash: 125d555a9e170ef35dd99e0409a2442d5f9ae34a
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/10/2017
---
<a name="queue-centric-work-pattern-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="b8da6-104">Patrón de trabajo centrado en cola (creación de aplicaciones de nube reales con Azure)</span><span class="sxs-lookup"><span data-stu-id="b8da6-104">Queue-Centric Work Pattern (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="b8da6-105">por [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="b8da6-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="b8da6-106">[Descarga corregirlo proyecto](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) o [descargar libros electrónicos](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="b8da6-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="b8da6-107">El **compilar aplicaciones de nube de mundo Real con Azure** libros electrónicos se basa en una presentación desarrollada por Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="b8da6-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="b8da6-108">Se explican los 13 patrones y prácticas recomendadas que le permitirá tener éxito el desarrollo de aplicaciones web para la nube.</span><span class="sxs-lookup"><span data-stu-id="b8da6-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="b8da6-109">Para obtener información sobre el libro electrónico, consulte [el primer capítulo](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="b8da6-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="b8da6-110">Anteriormente, hemos visto que el uso de varios servicios puede producir en un SLA "compuesto", donde es el SLA efectivo de la aplicación la *producto* de los SLA individuales.</span><span class="sxs-lookup"><span data-stu-id="b8da6-110">Earlier, we saw that using multiple services can result in a "composite" SLA, where the app's effective SLA is the *product* of the individual SLAs.</span></span> <span data-ttu-id="b8da6-111">Por ejemplo, la aplicación repararlo utiliza sitios Web, el almacenamiento y la base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="b8da6-111">For example, the Fix It app uses Web Sites, Storage, and SQL Database.</span></span> <span data-ttu-id="b8da6-112">Si se produce un error en cualquiera de estos servicios, la aplicación devolverá un error al usuario.</span><span class="sxs-lookup"><span data-stu-id="b8da6-112">If any one of these services fails, the app will return an error to the user.</span></span>

<span data-ttu-id="b8da6-113">Almacenamiento en caché es una buena forma de controlar los errores transitorios para el contenido de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="b8da6-113">Caching is a good way to handle transient failures for read-only content.</span></span> <span data-ttu-id="b8da6-114">Pero ¿qué ocurre si la aplicación necesita realizar el trabajo?</span><span class="sxs-lookup"><span data-stu-id="b8da6-114">But what if your application needs to do work?</span></span> <span data-ttu-id="b8da6-115">Por ejemplo, cuando el usuario envía una nueva repararlo tarea, la aplicación simplemente no puede poner la tarea en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="b8da6-115">For example, when the user submits a new Fix It task, the app can't just put the task into the cache.</span></span> <span data-ttu-id="b8da6-116">Debe escribir la tarea repararlo en un almacén de datos persistente, por lo que se puede procesar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b8da6-116">The app needs to write the Fix It task into a persistent data store, so it can be processed.</span></span>

<span data-ttu-id="b8da6-117">Que es donde entra en juego el patrón centrada en la cola de trabajo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-117">That's where the queue-centric work pattern comes in.</span></span> <span data-ttu-id="b8da6-118">Este modelo permite acoplamiento flexible entre un nivel de web y un servicio back-end.</span><span class="sxs-lookup"><span data-stu-id="b8da6-118">This pattern enables loose coupling between a web tier and a backend service.</span></span>

<span data-ttu-id="b8da6-119">Le mostramos cómo funciona el patrón.</span><span class="sxs-lookup"><span data-stu-id="b8da6-119">Here's how the pattern works.</span></span> <span data-ttu-id="b8da6-120">Cuando la aplicación recibe una solicitud, se coloca un elemento de trabajo en una cola y devuelve inmediatamente la respuesta.</span><span class="sxs-lookup"><span data-stu-id="b8da6-120">When the application gets a request, it puts a work item onto a queue and immediately returns the response.</span></span> <span data-ttu-id="b8da6-121">A continuación, un proceso independiente de back-end extrae los elementos de trabajo de la cola y realiza el trabajo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-121">Then a separate backend process pulls work items from the queue and does the work.</span></span>

<span data-ttu-id="b8da6-122">El patrón de trabajo centrado en la cola es útil para:</span><span class="sxs-lookup"><span data-stu-id="b8da6-122">The queue-centric work pattern is useful for:</span></span>

- <span data-ttu-id="b8da6-123">Trabajo que requiere mucho tiempo (latencia alta).</span><span class="sxs-lookup"><span data-stu-id="b8da6-123">Work that is time consuming (high latency).</span></span>
- <span data-ttu-id="b8da6-124">Trabajo que necesita un servicio externo que no siempre estén disponible.</span><span class="sxs-lookup"><span data-stu-id="b8da6-124">Work that requires an external service that might not always be available.</span></span>
- <span data-ttu-id="b8da6-125">El trabajo que se requieren muchos recursos (CPU alta).</span><span class="sxs-lookup"><span data-stu-id="b8da6-125">Work that is resource-intensive (high CPU).</span></span>
- <span data-ttu-id="b8da6-126">Trabajo que se beneficiaría de velocidad redistribuir (sujeto a ráfagas de carga repentina).</span><span class="sxs-lookup"><span data-stu-id="b8da6-126">Work that would benefit from rate leveling (subject to sudden load bursts).</span></span>

## <a name="reduced-latency"></a><span data-ttu-id="b8da6-127">Reducir la latencia</span><span class="sxs-lookup"><span data-stu-id="b8da6-127">Reduced Latency</span></span>

<span data-ttu-id="b8da6-128">Las colas son útiles en cualquier momento que se está realizando trabajo que consumen muchos recursos.</span><span class="sxs-lookup"><span data-stu-id="b8da6-128">Queues are useful any time you are doing time-consuming work.</span></span> <span data-ttu-id="b8da6-129">Si una tarea tarda unos segundos o más, en lugar de bloquear al usuario final, coloca el elemento de trabajo en una cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-129">If a task takes a few seconds or longer, instead of blocking the end user, put the work item into a queue.</span></span> <span data-ttu-id="b8da6-130">Indicar al usuario "Estamos trabajando en él" y, a continuación, usar un agente de escucha de cola para procesar la tarea en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="b8da6-130">Tell the user "We're working on it," and then use a queue listener to process the task in the background.</span></span>

<span data-ttu-id="b8da6-131">Por ejemplo, cuando se realiza una compra un comerciante en línea, el sitio web confirma su pedido inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="b8da6-131">For example, when you purchase something at an online retailer, the web site confirms your order immediately.</span></span> <span data-ttu-id="b8da6-132">Pero eso no significa que el material ya está en un camión entregando.</span><span class="sxs-lookup"><span data-stu-id="b8da6-132">But that doesn't mean your stuff is already in a truck being delivered.</span></span> <span data-ttu-id="b8da6-133">Coloca una tarea en una cola, y en segundo plano está realizando la comprobación de crédito, preparación de los elementos para su envío y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="b8da6-133">They put a task in a queue, and in the background they are doing the credit check, preparing your items for shipping, and so forth.</span></span>

<span data-ttu-id="b8da6-134">Para escenarios con latencia cortos, el tiempo total de-to-end puede ser mayor mediante una cola, en comparación con realizar la tarea de forma sincrónica.</span><span class="sxs-lookup"><span data-stu-id="b8da6-134">For scenarios with short latency, the total end-to-end time might be longer using a queue, compared with doing the task synchronously.</span></span> <span data-ttu-id="b8da6-135">Pero aún así, las otras ventajas pueden sobrepasar ese inconveniente.</span><span class="sxs-lookup"><span data-stu-id="b8da6-135">But even then, the other benefits can outweigh that disadvantage.</span></span>

## <a name="increased-reliability"></a><span data-ttu-id="b8da6-136">Aumentar la confiabilidad</span><span class="sxs-lookup"><span data-stu-id="b8da6-136">Increased Reliability</span></span>

<span data-ttu-id="b8da6-137">En la versión de repararlo que nos hemos visto hasta ahora, el front-end web se acopla estrechamente con la base de datos SQL back-end.</span><span class="sxs-lookup"><span data-stu-id="b8da6-137">In the version of Fix It that we've been looking at so far, the web front-end is tightly coupled with the SQL Database back-end.</span></span> <span data-ttu-id="b8da6-138">Si el servicio de base de datos SQL no está disponible, el usuario obtiene un error.</span><span class="sxs-lookup"><span data-stu-id="b8da6-138">If the SQL database service is unavailable, the user gets an error.</span></span> <span data-ttu-id="b8da6-139">Si los reintentos no funcionan (es decir, el error transitorio más de), lo único que puede hacer es mostrar un error y pedir al usuario que intente de nuevo más tarde.</span><span class="sxs-lookup"><span data-stu-id="b8da6-139">If retries don't work (that is, the failure is more than transient), the only thing you can do is show an error and ask the user to try again later.</span></span>

![Diagrama que muestra servidor web cliente errores cuando se produce un error en la base de datos SQL back-end](queue-centric-work-pattern/_static/image1.png)

<span data-ttu-id="b8da6-141">Uso de colas, cuando un usuario envía una tarea repararlo, la aplicación escribe un mensaje a la cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-141">Using queues, when a user submits a Fix It task, the app writes a message to the queue.</span></span> <span data-ttu-id="b8da6-142">La carga del mensaje es una [JSON](http://json.org/) representación de la tarea.</span><span class="sxs-lookup"><span data-stu-id="b8da6-142">The message payload is a [JSON](http://json.org/) representation of the task.</span></span> <span data-ttu-id="b8da6-143">En cuanto el mensaje se escribe en la cola, la aplicación se devuelve y se muestra inmediatamente un mensaje de confirmación al usuario.</span><span class="sxs-lookup"><span data-stu-id="b8da6-143">As soon as the message is written to the queue, the app returns and immediately shows a success message to the user.</span></span>

<span data-ttu-id="b8da6-144">Si cualquiera de los servicios back-end: por ejemplo, la base de datos SQL o el agente de escucha de cola--queden sin conexión, los usuarios todavía pueden enviar nuevas repararlo tareas.</span><span class="sxs-lookup"><span data-stu-id="b8da6-144">If any of the backend services – such as the SQL database or the queue listener -- go offline, users can still submit new Fix It tasks.</span></span> <span data-ttu-id="b8da6-145">Los mensajes sólo se pondrán en cola hasta que vuelven a están disponibles los servicios back-end.</span><span class="sxs-lookup"><span data-stu-id="b8da6-145">The messages will just queue up until the backend services are available again.</span></span> <span data-ttu-id="b8da6-146">En ese momento, los servicios back-end se ponga al día en el trabajo pendiente.</span><span class="sxs-lookup"><span data-stu-id="b8da6-146">At that point, the backend services will catch up on the backlog.</span></span>

![Diagrama que muestra web front-end continuar funcionando cuando se produce un error de base de datos SQL](queue-centric-work-pattern/_static/image2.png)

<span data-ttu-id="b8da6-148">Además, ahora puede agregar más lógica de back-end sin preocuparse por la resistencia de front-end.</span><span class="sxs-lookup"><span data-stu-id="b8da6-148">Moreover, now you can add more backend logic without worrying about the resiliency of the front end.</span></span> <span data-ttu-id="b8da6-149">Por ejemplo, puede enviar un correo electrónico o un mensaje SMS al propietario cada vez que se asigna un nuevo repararlo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-149">For example, you might want to send an email or SMS message to the owner whenever a new Fix It is assigned.</span></span> <span data-ttu-id="b8da6-150">Si el correo electrónico o el servicio SMS deja de estar disponible, puede todo lo demás procesar y, a continuación, se coloca un mensaje en una cola independiente para enviar mensajes de correo electrónico y SMS.</span><span class="sxs-lookup"><span data-stu-id="b8da6-150">If the email or SMS service becomes unavailable, you can process everything else, and then put a message into a separate queue for sending email/SMS messages.</span></span>

<span data-ttu-id="b8da6-151">Anteriormente, nuestro acuerdo eficaz era aplicaciones Web &times; almacenamiento &times; base de datos de SQL = 99,7%.</span><span class="sxs-lookup"><span data-stu-id="b8da6-151">Previously, our effective SLA was Web Apps &times; Storage &times; SQL Database = 99.7%.</span></span> <span data-ttu-id="b8da6-152">(Consulte [diseño sobrevivir a fallas](design-to-survive-failures.md).)</span><span class="sxs-lookup"><span data-stu-id="b8da6-152">(See [Design to Survive Failures](design-to-survive-failures.md).)</span></span>

<span data-ttu-id="b8da6-153">Cuando cambiamos la aplicación para utilizar una cola, el front-end web depende solo de las aplicaciones Web y almacenamiento, para un SLA de 99,8% compuesto.</span><span class="sxs-lookup"><span data-stu-id="b8da6-153">When we change the app to use a queue, the web front end depends only on Web Apps and Storage, for a composite SLA of 99.8%.</span></span> <span data-ttu-id="b8da6-154">(Tenga en cuenta que las colas son parte del servicio de almacenamiento de Azure, por lo que se incluyen en el mismo SLA como almacenamiento de blobs).</span><span class="sxs-lookup"><span data-stu-id="b8da6-154">(Note that queues are part of the Azure storage service, so they are included in the same SLA as blob storage.)</span></span>

<span data-ttu-id="b8da6-155">Si necesita incluso mejor que 99,8%, puede crear dos colas en dos regiones diferentes.</span><span class="sxs-lookup"><span data-stu-id="b8da6-155">If you need even better than 99.8%, you can create two queues in two different regions.</span></span> <span data-ttu-id="b8da6-156">Designar uno como principal y el otro como la base de datos secundaria.</span><span class="sxs-lookup"><span data-stu-id="b8da6-156">Designate one as the primary, and the other as the secondary.</span></span> <span data-ttu-id="b8da6-157">En la aplicación, conmutación por error a la cola secundaria si la cola principal no está disponible.</span><span class="sxs-lookup"><span data-stu-id="b8da6-157">In your app, fail over to the secondary queue if the primary queue is not available.</span></span> <span data-ttu-id="b8da6-158">La posibilidad de que ambos estén disponibles al mismo tiempo es muy pequeña.</span><span class="sxs-lookup"><span data-stu-id="b8da6-158">The chance of both being unavailable at the same time is very small.</span></span>

## <a name="rate-leveling-and-independent-scaling"></a><span data-ttu-id="b8da6-159">Redistribución de velocidad y escalamiento independiente</span><span class="sxs-lookup"><span data-stu-id="b8da6-159">Rate Leveling and Independent Scaling</span></span>

<span data-ttu-id="b8da6-160">Las colas también son útiles para lo que se denomina *velocidad redistribución* o *nivelado de carga*.</span><span class="sxs-lookup"><span data-stu-id="b8da6-160">Queues are also useful for something called *rate leveling* or *load leveling*.</span></span>

<span data-ttu-id="b8da6-161">Las aplicaciones Web a menudo son susceptibles a picos repentinos de tráfico.</span><span class="sxs-lookup"><span data-stu-id="b8da6-161">Web apps are often susceptible to sudden bursts in traffic.</span></span> <span data-ttu-id="b8da6-162">Aunque puede usar el escalado automático para agregar automáticamente servidores web para administrar el tráfico web mayor, escalado automático no pueda reaccionar rápidamente para atender los picos de carga abruptos.</span><span class="sxs-lookup"><span data-stu-id="b8da6-162">While you can use autoscaling to automatically add web servers to handle increased web traffic, autoscaling might not be able to react quickly enough to handle abrupt spikes in load.</span></span> <span data-ttu-id="b8da6-163">Si los servidores web pueden descargar algunas de las tareas que tienen que hacer mediante la escritura de un mensaje a una cola, puede administrar más tráfico.</span><span class="sxs-lookup"><span data-stu-id="b8da6-163">If the web servers can offload some of the work they have to do by writing a message to a queue, they can handle more traffic.</span></span> <span data-ttu-id="b8da6-164">Un servicio back-end, a continuación, puede leer los mensajes de la cola y procesarlos.</span><span class="sxs-lookup"><span data-stu-id="b8da6-164">A backend service can then read messages from the queue and process them.</span></span> <span data-ttu-id="b8da6-165">La profundidad de la cola se aumentar o reducir a medida que varía la carga entrante.</span><span class="sxs-lookup"><span data-stu-id="b8da6-165">The depth of the queue will grow or shrink as the incoming load varies.</span></span>

<span data-ttu-id="b8da6-166">Con la mayor parte de su trabajo que consumen muchos recursos que se descargan a un servicio back-end, el nivel de web más fácilmente puede responder a picos repentinos en tráfico.</span><span class="sxs-lookup"><span data-stu-id="b8da6-166">With much of its time-consuming work off-loaded to a backend service, the web tier can more easily respond to sudden spikes in traffic.</span></span> <span data-ttu-id="b8da6-167">Acciones y ahorrar dinero, porque cualquier transcurrido cierto tráfico pueda ser controlada por menos servidores web.</span><span class="sxs-lookup"><span data-stu-id="b8da6-167">And you save money because any given amount of traffic can be handled by fewer web servers.</span></span>

<span data-ttu-id="b8da6-168">Puede escalar el nivel de web y el servicio de back-end por separado.</span><span class="sxs-lookup"><span data-stu-id="b8da6-168">You can scale the web tier and backend service independently.</span></span> <span data-ttu-id="b8da6-169">Por ejemplo, tendrá que tres servidores web pero solo mensajes de cola de procesamiento de servidor.</span><span class="sxs-lookup"><span data-stu-id="b8da6-169">For example, you might need three web servers but only one server processing queue messages.</span></span> <span data-ttu-id="b8da6-170">O bien, si está ejecutando una tarea de proceso intensivo en segundo plano, puede que tenga más servidores de back-end.</span><span class="sxs-lookup"><span data-stu-id="b8da6-170">Or if you're running a compute-intensive task in the background, you might need more backend servers.</span></span>

![](queue-centric-work-pattern/_static/image3.png)

<span data-ttu-id="b8da6-171">Escala automática funciona con servicios back-end, así como con el nivel de web.</span><span class="sxs-lookup"><span data-stu-id="b8da6-171">Autoscaling works with backend services as well as with the web tier.</span></span> <span data-ttu-id="b8da6-172">Puede aumentar o reducir el número de máquinas virtuales que se están procesando las tareas en la cola, según el uso de CPU del máquinas virtuales de back-end.</span><span class="sxs-lookup"><span data-stu-id="b8da6-172">You can scale up or scale down the number of VMs that are processing the tasks in the queue, based on the CPU usage of the backend VMs.</span></span> <span data-ttu-id="b8da6-173">O bien, puede que el escalado automático en función de cuántos elementos en una cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-173">Or, you can autoscale based on how many items are in a queue.</span></span> <span data-ttu-id="b8da6-174">Por ejemplo, puede indicar el escalado automático para intentar mantener no más de 10 elementos en la cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-174">For example, you can tell autoscale to try to keep no more than 10 items in the queue.</span></span> <span data-ttu-id="b8da6-175">Si la cola tiene más de 10 elementos, escalado automático agregará las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="b8da6-175">If the queue has more than 10 items, autoscale will add VMs.</span></span> <span data-ttu-id="b8da6-176">Cuando ponerse al día, escalado automático hará caer las máquinas virtuales adicionales.</span><span class="sxs-lookup"><span data-stu-id="b8da6-176">When they catch up, autoscale will tear down the extra VMs.</span></span>

## <a name="adding-queues-to-the-fix-it-application"></a><span data-ttu-id="b8da6-177">Agregarlo pone en cola para la corrección de aplicación</span><span class="sxs-lookup"><span data-stu-id="b8da6-177">Adding Queues to the Fix It Application</span></span>

<span data-ttu-id="b8da6-178">Para implementar el patrón de cola, debemos hacer dos cambios en la aplicación repararlo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-178">To implement the queue pattern, we need to make two changes to the Fix It app.</span></span>

- <span data-ttu-id="b8da6-179">Cuando un usuario envía una nueva repararlo tarea, coloque la tarea en la cola, en lugar de escribir en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="b8da6-179">When a user submits a new Fix It task, put the task in the queue, instead of writing it to the database.</span></span>
- <span data-ttu-id="b8da6-180">Crear un servicio back-end que procesa los mensajes en la cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-180">Create a back-end service that processes messages in the queue.</span></span>

<span data-ttu-id="b8da6-181">En la cola, se utilizará el [servicio de almacenamiento de cola de Azure](https://www.windowsazure.com/en-us/develop/net/how-to-guides/queue-service/).</span><span class="sxs-lookup"><span data-stu-id="b8da6-181">For the queue, we'll use the [Azure Queue Storage Service](https://www.windowsazure.com/en-us/develop/net/how-to-guides/queue-service/).</span></span> <span data-ttu-id="b8da6-182">Otra opción consiste en usar [Service Bus de Azure](https://docs.microsoft.com/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="b8da6-182">Another option is to use [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span></span>

<span data-ttu-id="b8da6-183">Para decidir qué servicio de cola que se usará, considere la forma en que la aplicación necesita para enviar y recibir los mensajes en la cola:</span><span class="sxs-lookup"><span data-stu-id="b8da6-183">To decide which queue service to use, consider how your app needs to send and receive the messages in the queue:</span></span>

- <span data-ttu-id="b8da6-184">Si tienes cooperativos productores y consumidores en competencia, considere el uso de servicio de almacenamiento de cola de Azure.</span><span class="sxs-lookup"><span data-stu-id="b8da6-184">If you have cooperating producers and competing consumers, consider using Azure Queue Storage Service.</span></span> <span data-ttu-id="b8da6-185">"Productores cooperar" significa que varios procesos son agregar mensajes a una cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-185">"Cooperating producers" means multiple processes are adding messages to a queue.</span></span> <span data-ttu-id="b8da6-186">"Consumidores en competencia" significa que varios procesos están extrayendo los mensajes de la cola para procesarlos, pero un mensaje determinado solo puede ser procesado por un "consumidor".</span><span class="sxs-lookup"><span data-stu-id="b8da6-186">"Competing consumers" means multiple processes are pulling messages off the queue to process them, but any given message can only be processed by one "consumer."</span></span> <span data-ttu-id="b8da6-187">Si necesita más rendimiento del que se puede obtener con una sola cola, usar colas adicionales o cuentas de almacenamiento adicional.</span><span class="sxs-lookup"><span data-stu-id="b8da6-187">If you need more throughput than you can get with a single queue, use additional queues and/or additional storage accounts.</span></span>
- <span data-ttu-id="b8da6-188">Si necesita un [modelo de publicación/suscripción](http://en.wikipedia.org/wiki/Publish/subscribe), considere el uso de colas de Bus de servicio de Azure.</span><span class="sxs-lookup"><span data-stu-id="b8da6-188">If you need a [publish/subscribe model](http://en.wikipedia.org/wiki/Publish/subscribe), consider using Azure Service Bus Queues.</span></span>

<span data-ttu-id="b8da6-189">La aplicación repararlo se adapta a los productores cooperativos y competencia modelo de los consumidores.</span><span class="sxs-lookup"><span data-stu-id="b8da6-189">The Fix It app fits the cooperating producers and competing consumers model.</span></span>

<span data-ttu-id="b8da6-190">Otra consideración es la disponibilidad de las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="b8da6-190">Another consideration is application availability.</span></span> <span data-ttu-id="b8da6-191">El servicio de almacenamiento de cola es parte del mismo servicio que usamos para el almacenamiento de blobs, para que usarla no tiene ningún efecto en el SLA.</span><span class="sxs-lookup"><span data-stu-id="b8da6-191">The Queue Storage Service is part of the same service that we're using for blob storage, so using it has no effect on our SLA.</span></span> <span data-ttu-id="b8da6-192">Service Bus de Azure es un servicio independiente con su propio SLA.</span><span class="sxs-lookup"><span data-stu-id="b8da6-192">Azure Service Bus is a separate service with its own SLA.</span></span> <span data-ttu-id="b8da6-193">Si se utilizan colas de Bus de servicio, se tendría que tener en cuenta un porcentaje del SLA adicional y nuestro SLA compuesto sería inferior.</span><span class="sxs-lookup"><span data-stu-id="b8da6-193">If we used Service Bus Queues, we would have to factor in an additional SLA percentage, and our composite SLA would be lower.</span></span> <span data-ttu-id="b8da6-194">Elegir un servicio de cola, asegúrese de que conoce el impacto de su elección en la disponibilidad de las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="b8da6-194">When you're choosing a queue service, make sure you understand the impact of your choice on application availability.</span></span> <span data-ttu-id="b8da6-195">Para obtener más información, consulte el [recursos](#resources) sección.</span><span class="sxs-lookup"><span data-stu-id="b8da6-195">For more information, see the [Resources](#resources) section.</span></span>

## <a name="creating-queue-messages"></a><span data-ttu-id="b8da6-196">Creación de cola de mensajes</span><span class="sxs-lookup"><span data-stu-id="b8da6-196">Creating Queue Messages</span></span>

<span data-ttu-id="b8da6-197">Para colocar una tarea repararlo en la cola, el front-end web realiza los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="b8da6-197">To put a Fix It task on the queue, the web front end performs the following steps:</span></span>

1. <span data-ttu-id="b8da6-198">Crear un [CloudQueueClient](https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) instancia.</span><span class="sxs-lookup"><span data-stu-id="b8da6-198">Create a [CloudQueueClient](https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) instance.</span></span> <span data-ttu-id="b8da6-199">El `CloudQueueClient` instancia se utiliza para ejecutar solicitudes en el servicio de cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-199">The `CloudQueueClient` instance is used to execute requests against the Queue Service.</span></span>
2. <span data-ttu-id="b8da6-200">Crear la cola, si no existe todavía.</span><span class="sxs-lookup"><span data-stu-id="b8da6-200">Create the queue, if it doesn't exist yet.</span></span>
3. <span data-ttu-id="b8da6-201">Serializar la tarea repararlo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-201">Serialize the Fix It task.</span></span>
4. <span data-ttu-id="b8da6-202">Llame a [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) para colocar el mensaje en la cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-202">Call [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) to put the message onto the queue.</span></span>

<span data-ttu-id="b8da6-203">Se deberá llevar a cabo este trabajo en el constructor y `SendMessageAsync` método de un nuevo `FixItQueueManager` clase.</span><span class="sxs-lookup"><span data-stu-id="b8da6-203">We'll do this work in the constructor and `SendMessageAsync` method of a new `FixItQueueManager` class.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample1.cs?highlight=11-12,16,18-25)]

<span data-ttu-id="b8da6-204">Aquí usamos la [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) library para serializar el fixit en formato JSON.</span><span class="sxs-lookup"><span data-stu-id="b8da6-204">Here we are using the [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) library to serialize the fixit to JSON format.</span></span> <span data-ttu-id="b8da6-205">Puede usar cualquier método de serialización que prefiera.</span><span class="sxs-lookup"><span data-stu-id="b8da6-205">You can use whatever serialization approach you prefer.</span></span> <span data-ttu-id="b8da6-206">JSON tiene la ventaja de ser legible, pero menos detallados que XML.</span><span class="sxs-lookup"><span data-stu-id="b8da6-206">JSON has the advantage of being human-readable, while being less verbose than XML.</span></span>

<span data-ttu-id="b8da6-207">Código de calidad de producción debería agregar lógica de control de errores, pausar si la base de datos deja de estar disponible, controlar más limpiamente recuperación, crear la cola en el inicio de la aplicación y administrar "[dudosos" mensajes](https://msdn.microsoft.com/en-us/library/ms789028(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="b8da6-207">Production-quality code would add error handling logic, pause if the database became unavailable, handle recovery more cleanly, create the queue on application start-up, and manage "[poison" messages](https://msdn.microsoft.com/en-us/library/ms789028(v=vs.110).aspx).</span></span> <span data-ttu-id="b8da6-208">(Un mensaje dudoso es un mensaje que no se puede procesar por algún motivo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-208">(A poison message is a message that cannot be processed for some reason.</span></span> <span data-ttu-id="b8da6-209">No desea que los mensajes dudosos que se colocan en la cola, donde el rol de trabajo continuamente intentará procesarlos, producirá un error, vuelva a intentarlo, producirá un error y así sucesivamente.)</span><span class="sxs-lookup"><span data-stu-id="b8da6-209">You don't want poison messages to sit in the queue, where the worker role will continually try to process them, fail, try again, fail, and so on.)</span></span>

<span data-ttu-id="b8da6-210">En la aplicación de MVC front-end, deberá actualizar el código que crea una nueva tarea.</span><span class="sxs-lookup"><span data-stu-id="b8da6-210">In the front-end MVC application, we need to update the code that creates a new task.</span></span> <span data-ttu-id="b8da6-211">En lugar de colocar la tarea en el repositorio, llame a la `SendMessageAsync` método mostrado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="b8da6-211">Instead of putting the task into the repository, call the `SendMessageAsync` method shown above.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample2.cs?highlight=10)]

## <a name="processing-queue-messages"></a><span data-ttu-id="b8da6-212">Mensajes de la cola de procesamiento</span><span class="sxs-lookup"><span data-stu-id="b8da6-212">Processing Queue Messages</span></span>

<span data-ttu-id="b8da6-213">Para procesar mensajes de la cola, vamos a crear un servicio back-end.</span><span class="sxs-lookup"><span data-stu-id="b8da6-213">To process messages in the queue, we'll create a backend service.</span></span> <span data-ttu-id="b8da6-214">El servicio back-end ejecutará un bucle infinito que lleva a cabo los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="b8da6-214">The backend service will run an infinite loop that performs the following steps:</span></span>

1. <span data-ttu-id="b8da6-215">Obtener el siguiente mensaje de la cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-215">Get the next message from the queue.</span></span>
2. <span data-ttu-id="b8da6-216">Deserializar el mensaje a una tarea repararlo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-216">Deserialize the message to a Fix It task.</span></span>
3. <span data-ttu-id="b8da6-217">Escribir la tarea repararlo en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="b8da6-217">Write the Fix It task to the database.</span></span>

<span data-ttu-id="b8da6-218">Para hospedar el servicio back-end, vamos a crear un servicio de nube de Azure que contiene un *rol de trabajo*.</span><span class="sxs-lookup"><span data-stu-id="b8da6-218">To host the backend service, we'll create an Azure Cloud Service that contains a *worker role*.</span></span> <span data-ttu-id="b8da6-219">Un rol de trabajo consta de uno o más máquinas virtuales que pueden realizar el procesamiento de back-end.</span><span class="sxs-lookup"><span data-stu-id="b8da6-219">A worker role consists of one or more VMs that can do backend processing.</span></span> <span data-ttu-id="b8da6-220">El código que se ejecuta en estas máquinas virtuales extraerá los mensajes de la cola en cuanto estén disponibles.</span><span class="sxs-lookup"><span data-stu-id="b8da6-220">The code that runs in these VMs will pull messages from the queue as they become available.</span></span> <span data-ttu-id="b8da6-221">Para cada mensaje, comenzaremos deserializar la carga de JSON y escribir una instancia de la entidad de corregir su tarea a la base de datos con el mismo repositorio que hemos usado anteriormente en el nivel de web.</span><span class="sxs-lookup"><span data-stu-id="b8da6-221">For each message, we'll deserialize the JSON payload and write an instance of the Fix It Task entity to the database, using the same repository that we used earlier in the web tier.</span></span>

<span data-ttu-id="b8da6-222">Los pasos siguientes muestran cómo agregar un trabajo de proyecto de rol para una solución que tenga un proyecto web estándar.</span><span class="sxs-lookup"><span data-stu-id="b8da6-222">The following steps show how to add a worker role project to a solution that has a standard web project.</span></span> <span data-ttu-id="b8da6-223">Estos pasos ya se han realizado en el proyecto repararlo que puede descargar.</span><span class="sxs-lookup"><span data-stu-id="b8da6-223">These steps have already been done in the Fix It project that you can download.</span></span>

<span data-ttu-id="b8da6-224">En primer lugar, agregue un proyecto de servicio de nube a la solución de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b8da6-224">First add a Cloud Service project to the Visual Studio solution.</span></span> <span data-ttu-id="b8da6-225">Haga clic en la solución y seleccione **agregar**, a continuación, **nuevo proyecto**.</span><span class="sxs-lookup"><span data-stu-id="b8da6-225">Right-click the solution and select **Add**, then **New Project**.</span></span> <span data-ttu-id="b8da6-226">En el panel izquierdo, expanda **Visual C#** y seleccione **nube**.</span><span class="sxs-lookup"><span data-stu-id="b8da6-226">In the left pane, expand **Visual C#** and select **Cloud**.</span></span>

[![](queue-centric-work-pattern/_static/image5.png)](queue-centric-work-pattern/_static/image4.png)

<span data-ttu-id="b8da6-227">En el **nuevo servicio de nube de Azure** cuadro de diálogo, expanda el **Visual C#** nodo en el panel izquierdo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-227">In the **New Azure Cloud Service** dialog, expand the **Visual C#** node on the left pane.</span></span> <span data-ttu-id="b8da6-228">Seleccione **rol de trabajo** y haga clic en el icono de flecha derecha.</span><span class="sxs-lookup"><span data-stu-id="b8da6-228">Select **Worker Role** and click the right-arrow icon.</span></span>

![](queue-centric-work-pattern/_static/image6.png)

<span data-ttu-id="b8da6-229">(Tenga en cuenta que también puede agregar un *rol web*.</span><span class="sxs-lookup"><span data-stu-id="b8da6-229">(Notice that you can also add a *web role*.</span></span> <span data-ttu-id="b8da6-230">Podríamos ejecutar la repararlo front-end en el mismo servicio de nube en lugar de ejecutarse en un sitio Web de Azure.</span><span class="sxs-lookup"><span data-stu-id="b8da6-230">We could run the Fix It front-end in the same Cloud Service instead of running it in an Azure Web Site.</span></span> <span data-ttu-id="b8da6-231">Que tiene algunas ventajas en lo facilita coordinar las conexiones entre los front-end y back-end.</span><span class="sxs-lookup"><span data-stu-id="b8da6-231">That has some advantages in making connections between front-end and back-end easier to coordinate.</span></span> <span data-ttu-id="b8da6-232">Sin embargo, para simplificar esta demostración, estamos teniendo el front-end en una aplicación de Web de servicio de aplicación de Azure y solo se ejecuta el back-end en un servicio de nube.)</span><span class="sxs-lookup"><span data-stu-id="b8da6-232">However, to keep this demo simple, we're keeping the front-end in an Azure App Service Web App and only running the back-end in a Cloud Service.)</span></span>

<span data-ttu-id="b8da6-233">Se asigna un nombre predeterminado para el rol de trabajo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-233">A default name is assigned to the worker role.</span></span> <span data-ttu-id="b8da6-234">Para cambiar el nombre, mantenga el mouse sobre el rol de trabajo en el panel derecho y, a continuación, haga clic en el icono de lápiz.</span><span class="sxs-lookup"><span data-stu-id="b8da6-234">To change the name, hover the mouse over the worker role in the right pane, then click the pencil icon.</span></span>

![](queue-centric-work-pattern/_static/image7.png)

<span data-ttu-id="b8da6-235">Haga clic en **Aceptar** para completar el cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-235">Click **OK** to complete the dialog.</span></span> <span data-ttu-id="b8da6-236">Esto agrega dos proyectos a la solución de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b8da6-236">This adds two projects to the Visual Studio solution.</span></span>

- <span data-ttu-id="b8da6-237">un proyecto de Azure que define el servicio de nube, incluida la información de configuración.</span><span class="sxs-lookup"><span data-stu-id="b8da6-237">an Azure project that defines the cloud service, including configuration information.</span></span>
- <span data-ttu-id="b8da6-238">Un proyecto de rol de trabajo que define el rol de trabajo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-238">A worker role project that defines the worker role.</span></span>

![](queue-centric-work-pattern/_static/image8.png)

<span data-ttu-id="b8da6-239">Para obtener más información, vea [crear un proyecto de Azure con Visual Studio.](https://msdn.microsoft.com/en-us/library/windowsazure/ee405487.aspx)</span><span class="sxs-lookup"><span data-stu-id="b8da6-239">For more information, see [Creating an Azure Project with Visual Studio.](https://msdn.microsoft.com/en-us/library/windowsazure/ee405487.aspx)</span></span>

<span data-ttu-id="b8da6-240">Dentro de la función de trabajo, se sondear en busca de mensajes mediante una llamada a la `ProcessMessageAsync` método de la `FixItQueueManager` clase que hemos visto antes.</span><span class="sxs-lookup"><span data-stu-id="b8da6-240">Inside the worker role, we poll for messages by calling the `ProcessMessageAsync` method of the `FixItQueueManager` class that we saw earlier.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample3.cs?highlight=25)]

<span data-ttu-id="b8da6-241">El `ProcessMessagesAsync` método comprueba si hay un mensaje en espera.</span><span class="sxs-lookup"><span data-stu-id="b8da6-241">The `ProcessMessagesAsync` method checks if there's a message waiting.</span></span> <span data-ttu-id="b8da6-242">Si lo hay, deserializa el mensaje en una `FixItTask` entidad y guarda la entidad en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="b8da6-242">If there is one, it deserializes the message into a `FixItTask` entity and saves the entity in the database.</span></span> <span data-ttu-id="b8da6-243">Repite hasta que la cola está vacía.</span><span class="sxs-lookup"><span data-stu-id="b8da6-243">It loops until the queue is empty.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample4.cs)]

<span data-ttu-id="b8da6-244">Sondear la cola de mensajes incurre en una transacción pequeña cobran, por lo que cuando no hay ningún mensaje que esperan ser procesados, el rol de trabajo `RunAsync` método espera un segundo antes de sondeo de nuevo mediante una llamada a `Task.Delay(1000)`.</span><span class="sxs-lookup"><span data-stu-id="b8da6-244">Polling for queue messages incurs a small transaction charge, so when there's no message waiting to be processed, the worker role's `RunAsync` method waits a second before polling again by calling `Task.Delay(1000)`.</span></span>

<span data-ttu-id="b8da6-245">En un proyecto web, agregar código asincrónico puede automáticamente mejorar el rendimiento porque IIS administra un grupo de subprocesos limitado.</span><span class="sxs-lookup"><span data-stu-id="b8da6-245">In a web project, adding asynchronous code can automatically improve performance because IIS manages a limited thread pool.</span></span> <span data-ttu-id="b8da6-246">No es el caso de un proyecto de rol de trabajo.</span><span class="sxs-lookup"><span data-stu-id="b8da6-246">That is not the case in a worker role project.</span></span> <span data-ttu-id="b8da6-247">Para mejorar la escalabilidad de la función de trabajo, puede escribir código multiproceso o usar código asincrónico para implementar [la programación paralela](https://msdn.microsoft.com/en-us/library/ff963553.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8da6-247">To improve scalability of the worker role, you can write multi-threaded code or use asynchronous code to implement [parallel programming](https://msdn.microsoft.com/en-us/library/ff963553.aspx).</span></span> <span data-ttu-id="b8da6-248">El ejemplo no implementa la programación en paralelo, pero muestra cómo convertir el código asincrónico, por lo que puede implementar la programación paralela.</span><span class="sxs-lookup"><span data-stu-id="b8da6-248">The sample doesn't implement parallel programming but shows how to make the code asynchronous so you can implement parallel programming.</span></span>

## <a name="summary"></a><span data-ttu-id="b8da6-249">Resumen</span><span class="sxs-lookup"><span data-stu-id="b8da6-249">Summary</span></span>

<span data-ttu-id="b8da6-250">En este capítulo ha visto cómo mejorar la escalabilidad, confiabilidad y capacidad de respuesta de aplicación al implementar el patrón de trabajo centrado en la cola.</span><span class="sxs-lookup"><span data-stu-id="b8da6-250">In this chapter you've seen how to improve application responsiveness, reliability, and scalability by implementing the queue-centric work pattern.</span></span>

<span data-ttu-id="b8da6-251">Esta es la última de las 13 patrones descritos en este libro electrónico, pero por supuesto, existen muchos otros patrones y prácticas recomendadas que pueden ayudarle a crear aplicaciones de nube adecuada.</span><span class="sxs-lookup"><span data-stu-id="b8da6-251">This is the last of the 13 patterns covered in this e-book, but there are of course many other patterns and practices that can help you build successful cloud apps.</span></span> <span data-ttu-id="b8da6-252">El [capítulo final](more-patterns-and-guidance.md) proporciona vínculos a recursos de temas en los que aún no se hayan tratado en estos 13 patrones.</span><span class="sxs-lookup"><span data-stu-id="b8da6-252">The [final chapter](more-patterns-and-guidance.md) provides links to resources for topics that haven't been covered in these 13 patterns.</span></span>

<a id="resources"></a>
## <a name="resources"></a><span data-ttu-id="b8da6-253">Recursos</span><span class="sxs-lookup"><span data-stu-id="b8da6-253">Resources</span></span>

<span data-ttu-id="b8da6-254">Para obtener más información acerca de las colas, vea los siguientes recursos.</span><span class="sxs-lookup"><span data-stu-id="b8da6-254">For more information about queues, see the following resources.</span></span>

<span data-ttu-id="b8da6-255">Documentación:</span><span class="sxs-lookup"><span data-stu-id="b8da6-255">Documentation:</span></span>

- <span data-ttu-id="b8da6-256">[Parte de las colas de almacenamiento de Microsoft Azure 1: Introducción a](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/).</span><span class="sxs-lookup"><span data-stu-id="b8da6-256">[Microsoft Azure Storage Queues Part 1: Getting Started](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/).</span></span> <span data-ttu-id="b8da6-257">Artículo por Schacherl latino.</span><span class="sxs-lookup"><span data-stu-id="b8da6-257">Article by Roman Schacherl.</span></span>
- <span data-ttu-id="b8da6-258">[Ejecutar tareas en segundo plano](https://msdn.microsoft.com/en-us/library/ff803365.aspx), capítulo 5 de [mover aplicaciones a la nube, 3ª edición](https://msdn.microsoft.com/en-us/library/ff728592.aspx) desde Microsoft Patterns and Practices.</span><span class="sxs-lookup"><span data-stu-id="b8da6-258">[Executing Background Tasks](https://msdn.microsoft.com/en-us/library/ff803365.aspx), chapter 5 of [Moving Applications to the Cloud, 3rd Edition](https://msdn.microsoft.com/en-us/library/ff728592.aspx) from Microsoft Patterns and Practices.</span></span> <span data-ttu-id="b8da6-259">(En concreto, la sección ["Uso de las colas de almacenamiento de Azure"](https://msdn.microsoft.com/en-us/library/ff803365.aspx#sec7).)</span><span class="sxs-lookup"><span data-stu-id="b8da6-259">(In particular, the section ["Using Azure Storage Queues"](https://msdn.microsoft.com/en-us/library/ff803365.aspx#sec7).)</span></span>
- <span data-ttu-id="b8da6-260">[Procedimientos recomendados para maximizar la escalabilidad y la rentabilidad de las soluciones de mensajes basadas en cola en Azure](https://msdn.microsoft.com/en-us/library/windowsazure/hh697709.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8da6-260">[Best Practices for Maximizing Scalability and Cost Effectiveness of Queue-Based Messaging Solutions on Azure](https://msdn.microsoft.com/en-us/library/windowsazure/hh697709.aspx).</span></span> <span data-ttu-id="b8da6-261">Notas del producto por Valery Mizonov.</span><span class="sxs-lookup"><span data-stu-id="b8da6-261">White paper by Valery Mizonov.</span></span>
- <span data-ttu-id="b8da6-262">[Comparación de las colas de Azure y colas de Service Bus](https://msdn.microsoft.com/en-us/magazine/jj159884.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8da6-262">[Comparing Azure Queues and Service Bus Queues](https://msdn.microsoft.com/en-us/magazine/jj159884.aspx).</span></span> <span data-ttu-id="b8da6-263">Artículo de MSDN Magazine, proporciona información adicional que puede ayudarle a elegir qué servicio de cola que se usará.</span><span class="sxs-lookup"><span data-stu-id="b8da6-263">MSDN Magazine article, provides additional information that can help you choose which queue service to use.</span></span> <span data-ttu-id="b8da6-264">El artículo menciona que Service Bus es dependiente de ACS para la autenticación, lo que significa que las colas de SB podrían no estar disponibles cuando ACS no está disponible.</span><span class="sxs-lookup"><span data-stu-id="b8da6-264">The article mentions that Service Bus is dependent on ACS for authentication, which means your SB queues would be unavailable when ACS is unavailable.</span></span> <span data-ttu-id="b8da6-265">Sin embargo, puesto que el artículo se escribió, SB se cambió para permitirle utilizar [tokens SAS](https://msdn.microsoft.com/en-us/library/windowsazure/dn170477.aspx) como una alternativa a ACS.</span><span class="sxs-lookup"><span data-stu-id="b8da6-265">However, since the article was written, SB was changed to enable you to use [SAS tokens](https://msdn.microsoft.com/en-us/library/windowsazure/dn170477.aspx) as an alternative to ACS.</span></span>
- <span data-ttu-id="b8da6-266">[Microsoft patrones y prácticas - Guía de Azure](https://msdn.microsoft.com/en-us/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8da6-266">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/en-us/library/dn568099.aspx).</span></span> <span data-ttu-id="b8da6-267">Consulte el manual de mensajería asincrónica, canalizaciones y filtros de modelo, patrón de transacciones de compensación, patrón de consumidores en competencia, patrón CQRS.</span><span class="sxs-lookup"><span data-stu-id="b8da6-267">See Asynchronous Messaging primer, Pipes and Filters pattern, Compensating Transaction pattern, Competing Consumers pattern, CQRS pattern.</span></span>
- <span data-ttu-id="b8da6-268">[Viaje a CQRS](https://msdn.microsoft.com/en-us/library/jj554200).</span><span class="sxs-lookup"><span data-stu-id="b8da6-268">[CQRS Journey](https://msdn.microsoft.com/en-us/library/jj554200).</span></span> <span data-ttu-id="b8da6-269">Libro electrónico sobre CQRS por Microsoft patrones y procedimientos recomendados.</span><span class="sxs-lookup"><span data-stu-id="b8da6-269">E-book about CQRS by Microsoft Patterns and Practices.</span></span>

<span data-ttu-id="b8da6-270">Vídeo:</span><span class="sxs-lookup"><span data-stu-id="b8da6-270">Video:</span></span>

- <span data-ttu-id="b8da6-271">[FailSafe: Creación de servicios en la nube escalables y resistentes](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="b8da6-271">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="b8da6-272">Serie de vídeos de nueve partes por Ulrich Homann y Marc Mercuri, Mark Simms.</span><span class="sxs-lookup"><span data-stu-id="b8da6-272">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="b8da6-273">Presenta los conceptos y principios de la arquitectura de una manera muy interesante y accesible, con casos extraídos de la experiencia del equipo de asesoramiento al cliente (CAT) de Microsoft con clientes reales.</span><span class="sxs-lookup"><span data-stu-id="b8da6-273">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="b8da6-274">Para obtener una introducción a las colas y el servicio de almacenamiento de Azure, vea episodio 5 a partir de 35:13.</span><span class="sxs-lookup"><span data-stu-id="b8da6-274">For an introduction to the Azure Storage service and queues, see episode 5 starting at 35:13.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="b8da6-275">[Anterior](distributed-caching.md)
[Siguiente](more-patterns-and-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="b8da6-275">[Previous](distributed-caching.md)
[Next](more-patterns-and-guidance.md)</span></span>
