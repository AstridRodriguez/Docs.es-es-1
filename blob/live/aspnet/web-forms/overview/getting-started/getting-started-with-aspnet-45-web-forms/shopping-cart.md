---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: Carro de la compra | Documentos de Microsoft
author: Erikre
description: "Esta serie de tutoriales le enseñará los aspectos básicos de la creación de una aplicación de formularios Web Forms de ASP.NET mediante ASP.NET 4.5 y Microsoft Visual Studio Express 2013 para se..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: 5c0e16df7d60b944c96f8d5510225fff321124d1
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/10/2017
---
<a name="shopping-cart"></a><span data-ttu-id="4e909-103">Carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-103">Shopping Cart</span></span>
====================
<span data-ttu-id="4e909-104">Por [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="4e909-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="4e909-105">[Descargar el proyecto de ejemplo de Wingtip Toys (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) o [descargar libros electrónicos (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="4e909-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="4e909-106">Esta serie de tutoriales le enseñará los aspectos básicos de la creación de una aplicación de formularios Web Forms de ASP.NET con ASP.NET 4.5 y Microsoft Visual Studio Express 2013 para Web.</span><span class="sxs-lookup"><span data-stu-id="4e909-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="4e909-107">Un Visual Studio 2013 [proyecto con código fuente de C#](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) está disponible como acompañamiento de esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="4e909-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="4e909-108">Este tutorial describe la lógica comercial necesaria para agregar un carro de la compra a la aplicación de formularios Web Forms de ASP.NET de ejemplo de Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="4e909-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="4e909-109">Este tutorial se basa en el tutorial anterior "Mostrar datos de elementos y detalles" y forma parte de la serie de tutoriales de almacén de Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="4e909-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="4e909-110">Cuando haya completado este tutorial, los usuarios de la aplicación de ejemplo podrá agregar, quitar y modificar los productos del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="4e909-111">Lo que aprenderá:</span><span class="sxs-lookup"><span data-stu-id="4e909-111">What you'll learn:</span></span>

1. <span data-ttu-id="4e909-112">Cómo crear un carro de la compra para la aplicación web.</span><span class="sxs-lookup"><span data-stu-id="4e909-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="4e909-113">Cómo permitir a los usuarios agregar elementos al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="4e909-114">Cómo agregar un [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control para mostrar los detalles de carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="4e909-115">Cómo se calculan y muestran el total del pedido.</span><span class="sxs-lookup"><span data-stu-id="4e909-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="4e909-116">Cómo quitar y actualizar los elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="4e909-117">Cómo incluir un contador de carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="4e909-118">Características de código de este tutorial:</span><span class="sxs-lookup"><span data-stu-id="4e909-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="4e909-119">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="4e909-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="4e909-120">Anotaciones de datos</span><span class="sxs-lookup"><span data-stu-id="4e909-120">Data Annotations</span></span>
3. <span data-ttu-id="4e909-121">Establecimiento inflexible de tipos controles de datos</span><span class="sxs-lookup"><span data-stu-id="4e909-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="4e909-122">Enlace de modelos</span><span class="sxs-lookup"><span data-stu-id="4e909-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="4e909-123">Creación de un carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="4e909-124">Anteriormente en esta serie de tutoriales, agrega las páginas y el código para ver datos de producto de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="4e909-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="4e909-125">En este tutorial, creará un carro de la compra para administrar los productos que los usuarios están interesados en comprar.</span><span class="sxs-lookup"><span data-stu-id="4e909-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="4e909-126">Los usuarios podrán examinar y agregar elementos al carro de la compra incluso si no están registrados o ha iniciado sesión.</span><span class="sxs-lookup"><span data-stu-id="4e909-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="4e909-127">Para administrar el acceso de carro de la compra, se asignará a los usuarios un único `ID` utilizando un identificador único global (GUID) cuando el usuario tiene acceso a la compra carro por primera vez.</span><span class="sxs-lookup"><span data-stu-id="4e909-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="4e909-128">Va a almacenar esto `ID` con el estado de sesión de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4e909-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="4e909-129">El estado de sesión de ASP.NET es un lugar conveniente para almacenar información específica del usuario que expirará después de que el usuario abandona el sitio.</span><span class="sxs-lookup"><span data-stu-id="4e909-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="4e909-130">Mientras un uso incorrecto del estado de sesión puede tener implicaciones de rendimiento en sitios de mayor tamaño, claro el uso de la sesión de estado funciona bien con fines de demostración.</span><span class="sxs-lookup"><span data-stu-id="4e909-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="4e909-131">El proyecto de ejemplo de Wingtip Toys muestra cómo usar el estado de sesión sin un proveedor externo, donde el estado de sesión está almacenado en proceso en el servidor web que hospeda el sitio.</span><span class="sxs-lookup"><span data-stu-id="4e909-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="4e909-132">Para los sitios más grandes que proporcionan varias instancias de una aplicación o para sitios que se ejecutan varias instancias de una aplicación en distintos servidores, considere el uso de **servicio de caché de Windows Azure**.</span><span class="sxs-lookup"><span data-stu-id="4e909-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="4e909-133">Este servicio de caché proporciona un servicio de almacenamiento en caché distribuido que es externo al sitio web y se resuelve el problema de utilizar el estado de sesión en proceso.</span><span class="sxs-lookup"><span data-stu-id="4e909-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="4e909-134">Para obtener más información, vea [el estado de sesión de ASP.NET de uso con sitios Web de Windows Azure](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span><span class="sxs-lookup"><span data-stu-id="4e909-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>


### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="4e909-135">Agregar CartItem como una clase de modelo</span><span class="sxs-lookup"><span data-stu-id="4e909-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="4e909-136">Anteriormente en esta serie de tutoriales, ha definido el esquema para los datos de categoría y producto mediante la creación de la `Category` y `Product` clases en el *modelos* carpeta.</span><span class="sxs-lookup"><span data-stu-id="4e909-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="4e909-137">Ahora, agregue una nueva clase para definir el esquema para el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="4e909-138">Más adelante en este tutorial, agregará una clase para controlar el acceso a los datos del `CartItem` tabla.</span><span class="sxs-lookup"><span data-stu-id="4e909-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="4e909-139">Esta clase proporcionará la lógica de negocios para agregar, quitar y actualizar los elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="4e909-140">Haga clic en el *modelos* carpeta y seleccione **agregar**  - &gt; **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="4e909-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![Carro de la compra - nuevo elemento](shopping-cart/_static/image1.png)
2. <span data-ttu-id="4e909-142">Se abrirá el cuadro de diálogo **Agregar nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="4e909-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="4e909-143">Seleccione **código**y, a continuación, seleccione **clase**.</span><span class="sxs-lookup"><span data-stu-id="4e909-143">Select **Code**, and then select **Class**.</span></span> 

    ![Carro de la compra - Agregar nuevo elemento de cuadro de diálogo](shopping-cart/_static/image2.png)
3. <span data-ttu-id="4e909-145">Esta nueva clase el nombre *CartItem.cs*.</span><span class="sxs-lookup"><span data-stu-id="4e909-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="4e909-146">Haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="4e909-146">Click **Add**.</span></span>  
 <span data-ttu-id="4e909-147">El nuevo archivo de clase se muestra en el editor.</span><span class="sxs-lookup"><span data-stu-id="4e909-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="4e909-148">Reemplace el código predeterminado por el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="4e909-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="4e909-149">La `CartItem` clase contiene el esquema que define cada producto que un usuario agrega al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="4e909-150">Esta clase es similar a las demás clases de esquema que creó anteriormente en esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="4e909-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="4e909-151">Por convención, Entity Framework Code First que así lo exige la clave principal de la `CartItem` tabla será `CartItemId` o `ID`.</span><span class="sxs-lookup"><span data-stu-id="4e909-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="4e909-152">Sin embargo, el código invalida el comportamiento predeterminado mediante la anotación de datos `[Key]` atributo.</span><span class="sxs-lookup"><span data-stu-id="4e909-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="4e909-153">El `Key` atributo de la propiedad ItemId especifica que el `ItemID` propiedad es la clave principal.</span><span class="sxs-lookup"><span data-stu-id="4e909-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="4e909-154">El `CartId` propiedad especifica el `ID` del usuario que está asociado con el artículo que desea adquirir.</span><span class="sxs-lookup"><span data-stu-id="4e909-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="4e909-155">Agregará código para crear este usuario `ID` cuando el usuario tiene acceso a la cesta.</span><span class="sxs-lookup"><span data-stu-id="4e909-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="4e909-156">Esto `ID` también se almacenará como una variable de sesión de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4e909-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="4e909-157">Actualizar el contexto de producto</span><span class="sxs-lookup"><span data-stu-id="4e909-157">Update the Product Context</span></span>

<span data-ttu-id="4e909-158">Además de agregar el `CartItem` (clase), debe actualizar la clase de contexto de base de datos que administra las clases de entidad y que proporciona acceso a datos en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="4e909-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="4e909-159">Para ello, agregará el recién creado `CartItem` clase al modelo el `ProductContext` clase.</span><span class="sxs-lookup"><span data-stu-id="4e909-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="4e909-160">En **el Explorador de soluciones**, busque y abra la *ProductContext.cs* un archivo en el *modelos* carpeta.</span><span class="sxs-lookup"><span data-stu-id="4e909-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="4e909-161">Agregue el código resaltado a la *ProductContext.cs* como sigue:</span><span class="sxs-lookup"><span data-stu-id="4e909-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="4e909-162">Como se mencionó anteriormente en esta serie de tutoriales, el código en el *ProductContext.cs* archivo agrega el `System.Data.Entity` espacio de nombres para que tengan acceso a toda la funcionalidad básica de Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4e909-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="4e909-163">Esta funcionalidad incluye la capacidad de consultar, insertar, actualizar y eliminar datos trabajando con objetos fuertemente tipados.</span><span class="sxs-lookup"><span data-stu-id="4e909-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="4e909-164">El `ProductContext` clase agrega el acceso al recién agregado `CartItem` clase de modelo.</span><span class="sxs-lookup"><span data-stu-id="4e909-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="4e909-165">Administrar la lógica de negocios de carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="4e909-166">A continuación, creará el `ShoppingCart` clase en una nueva *lógica* carpeta.</span><span class="sxs-lookup"><span data-stu-id="4e909-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="4e909-167">El `ShoppingCart` clase controla el acceso a los datos del `CartItem` tabla.</span><span class="sxs-lookup"><span data-stu-id="4e909-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="4e909-168">La clase también incluye la lógica de negocios para agregar, quitar y actualizar los elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="4e909-169">La lógica de carro de la compra que va a agregar contendrá la funcionalidad para administrar las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="4e909-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="4e909-170">Agregar elementos al carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="4e909-171">Quitar elementos de la cesta</span><span class="sxs-lookup"><span data-stu-id="4e909-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="4e909-172">Obtener el identificador de la cesta de compra</span><span class="sxs-lookup"><span data-stu-id="4e909-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="4e909-173">Recuperando elementos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="4e909-174">Un total de la cantidad de todos los elementos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="4e909-175">Actualizar los datos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-175">Updating the shopping cart data</span></span>

<span data-ttu-id="4e909-176">Una página de carro de la compra (*ShoppingCart.aspx*) y la clase de carro de la compra se utilizará juntos para tener acceso a datos del carro de compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="4e909-177">La página de carro de compra mostrará todos los elementos que el usuario agrega al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="4e909-178">Además de los artículos al carro de clase y la página, podrá crear una página (*AddToCart.aspx*) para agregar productos a la cesta.</span><span class="sxs-lookup"><span data-stu-id="4e909-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="4e909-179">También agregará código para el *ProductList.aspx* página y la *ProductDetails.aspx* página que le proporcionará un vínculo a la *AddToCart.aspx* página, por lo que puede agregar el usuario productos del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="4e909-180">El siguiente diagrama muestra el proceso básico que tiene lugar cuando el usuario agrega un producto al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![Carro de la compra - agregar al carro de la compra](shopping-cart/_static/image3.png)

<span data-ttu-id="4e909-182">Cuando el usuario hace clic en el **Add To Cart** vínculo cualquiera el *ProductList.aspx* página o *ProductDetails.aspx* página, la aplicación se le remitirá a la *AddToCart.aspx* página y, a continuación, automáticamente a la *ShoppingCart.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="4e909-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="4e909-183">El *AddToCart.aspx* página agregará el producto seleccione al carro de la compra mediante una llamada a un método en la clase ShoppingCart.</span><span class="sxs-lookup"><span data-stu-id="4e909-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="4e909-184">El *ShoppingCart.aspx* página mostrará los productos que se han agregado al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="4e909-185">Crear la clase de carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="4e909-186">La `ShoppingCart` clase se agregará a una carpeta independiente en la aplicación de modo que será una distinción clara entre el modelo (carpeta Models), las páginas (carpeta raíz) y la lógica (carpeta lógica).</span><span class="sxs-lookup"><span data-stu-id="4e909-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="4e909-187">En **el Explorador de soluciones**, haga clic en el **WingtipToys**de proyecto y seleccione **agregar**-&gt;**nueva carpeta**.</span><span class="sxs-lookup"><span data-stu-id="4e909-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="4e909-188">Nombre de la nueva carpeta *lógica*.</span><span class="sxs-lookup"><span data-stu-id="4e909-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="4e909-189">Haga clic en el *lógica* carpeta y, a continuación, seleccione **agregar**  - &gt; **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="4e909-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="4e909-190">Agregar un nuevo archivo de clase denominado *ShoppingCartActions.cs*.</span><span class="sxs-lookup"><span data-stu-id="4e909-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="4e909-191">Reemplace el código predeterminado por el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="4e909-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="4e909-192">El `AddToCart` método permite que los productos individuales que se incluirá en el carro de la compra según el producto `ID`.</span><span class="sxs-lookup"><span data-stu-id="4e909-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="4e909-193">El producto se agrega al carro de la, o si el carro ya contiene un elemento correspondiente a ese producto, la cantidad se incrementa.</span><span class="sxs-lookup"><span data-stu-id="4e909-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="4e909-194">El `GetCartId` método devuelve el carro `ID` para el usuario.</span><span class="sxs-lookup"><span data-stu-id="4e909-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="4e909-195">El carro `ID` se utiliza para realizar un seguimiento de los elementos que un usuario tiene en su carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="4e909-196">Si el usuario no tiene un carro de la existente `ID`, un carro de la nueva `ID` creadas para ellos.</span><span class="sxs-lookup"><span data-stu-id="4e909-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="4e909-197">Si el usuario ha iniciado sesión como un usuario registrado, el carro `ID` está establecido en su nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="4e909-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="4e909-198">Sin embargo, si el usuario no ha iniciado sesión, el carro `ID` se establece en un valor único (GUID).</span><span class="sxs-lookup"><span data-stu-id="4e909-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="4e909-199">Un GUID se asegura de que solo un carro se crea para cada usuario, basándose en la sesión.</span><span class="sxs-lookup"><span data-stu-id="4e909-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="4e909-200">El `GetCartItems` método devuelve una lista de artículos del carro para el usuario de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="4e909-201">Más adelante en este tutorial, verá que el enlace de modelos se utiliza para mostrar los elementos de carro de la compra carro mediante el `GetCartItems` método.</span><span class="sxs-lookup"><span data-stu-id="4e909-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="4e909-202">Crear la funcionalidad de agregar a la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="4e909-203">Como se mencionó anteriormente, se creará una página de procesamiento denominada *AddToCart.aspx* que se usará para agregar nuevos productos al carro de la compra del usuario.</span><span class="sxs-lookup"><span data-stu-id="4e909-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="4e909-204">Llame esta página la `AddToCart` método en la `ShoppingCart` clase que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="4e909-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="4e909-205">El *AddToCart.aspx* página esperará a que un producto `ID` se pasa a él.</span><span class="sxs-lookup"><span data-stu-id="4e909-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="4e909-206">Este producto `ID` se usará cuando se llama a la `AddToCart` método en la `ShoppingCart` clase.</span><span class="sxs-lookup"><span data-stu-id="4e909-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="4e909-207">Modificará el código subyacente (*AddToCart.aspx.cs*) para esta página, no la página de interfaz de usuario (*AddToCart.aspx*).</span><span class="sxs-lookup"><span data-stu-id="4e909-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>


#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="4e909-208">Para crear el complemento al carro funcionalidad:</span><span class="sxs-lookup"><span data-stu-id="4e909-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="4e909-209">En **el Explorador de soluciones**, haga clic en el **WingtipToys**proyecto de equipo y haga clic en **agregar**  - &gt; **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="4e909-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="4e909-210">Se abrirá el cuadro de diálogo **Agregar nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="4e909-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="4e909-211">Agregar una nueva página estándar (formulario Web Forms) a la aplicación denominada *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="4e909-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![Carro de la compra - Agregar formulario Web Forms](shopping-cart/_static/image4.png)
3. <span data-ttu-id="4e909-213">En **el Explorador de soluciones**, haga clic en el *AddToCart.aspx* página y, a continuación, haga clic en **ver código**.</span><span class="sxs-lookup"><span data-stu-id="4e909-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="4e909-214">El *AddToCart.aspx.cs* se abre el archivo de código subyacente en el editor.</span><span class="sxs-lookup"><span data-stu-id="4e909-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="4e909-215">Reemplace el código existente en el *AddToCart.aspx.cs* código subyacente con lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="4e909-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="4e909-216">Cuando el *AddToCart.aspx* página se carga, el producto `ID` se recupera de la cadena de consulta.</span><span class="sxs-lookup"><span data-stu-id="4e909-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="4e909-217">A continuación, se crea y se utiliza para llamar a una instancia de la clase de carro de la compra el `AddToCart` método que agregó anteriormente en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="4e909-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="4e909-218">El `AddToCart` método, incluido en el *ShoppingCartActions.cs* de archivos, incluye la lógica para agregar el producto seleccionado al carro de la compra o incrementar la cantidad de productos del producto seleccionado.</span><span class="sxs-lookup"><span data-stu-id="4e909-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="4e909-219">Si el producto no se ha agregado al carro de la compra, el producto se agrega a la `CartItem` tabla de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="4e909-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="4e909-220">Si el producto ya se ha agregado al carro de la compra y el usuario agrega un elemento adicional del mismo producto, se incrementa la cantidad de productos en la `CartItem` tabla.</span><span class="sxs-lookup"><span data-stu-id="4e909-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="4e909-221">Por último, la página se redirige a la *ShoppingCart.aspx* página que agregará en el paso siguiente, donde el usuario ve una lista actualizada de los artículos del carro.</span><span class="sxs-lookup"><span data-stu-id="4e909-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="4e909-222">Como se mencionó anteriormente, un usuario `ID` se usa para identificar los productos que están asociados a un usuario específico.</span><span class="sxs-lookup"><span data-stu-id="4e909-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="4e909-223">Esto `ID` se agrega a una fila de la `CartItem` cada vez que el usuario agrega un producto a la cesta de la tabla.</span><span class="sxs-lookup"><span data-stu-id="4e909-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="4e909-224">Creación de la cesta de la interfaz de usuario</span><span class="sxs-lookup"><span data-stu-id="4e909-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="4e909-225">El *ShoppingCart.aspx* página mostrará los productos que el usuario ha agregado a su carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="4e909-226">También ofrecerá la capacidad de agregar, quitar y actualizar los elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="4e909-227">En **el Explorador de soluciones**, haga clic en **WingtipToys**, haga clic en **agregar**  - &gt; **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="4e909-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="4e909-228">Se abrirá el cuadro de diálogo **Agregar nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="4e909-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="4e909-229">Agregue una nueva página (formulario Web Forms) que incluye una página maestra seleccionando **formulario Web con página maestra**.</span><span class="sxs-lookup"><span data-stu-id="4e909-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="4e909-230">Nombre de la nueva página *ShoppingCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="4e909-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="4e909-231">Seleccione **Site.Master** para adjuntar la página maestra a recién creado *.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="4e909-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="4e909-232">En el *ShoppingCart.aspx* página, reemplace el marcado existente con el marcado siguiente:</span><span class="sxs-lookup"><span data-stu-id="4e909-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="4e909-233">El *ShoppingCart.aspx* página incluye una **GridView** control denominado `CartList`.</span><span class="sxs-lookup"><span data-stu-id="4e909-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="4e909-234">Este control usa el enlace de modelos para enlazar los datos del carro de la compra de la base de datos a la **GridView** control.</span><span class="sxs-lookup"><span data-stu-id="4e909-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="4e909-235">Al establecer el `ItemType` propiedad de la **GridView** controlar, la expresión de enlace de datos `Item` está disponible en el marcado del control y el control pasa a ser fuertemente tipado.</span><span class="sxs-lookup"><span data-stu-id="4e909-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="4e909-236">Como se mencionó anteriormente en esta serie de tutoriales, puede seleccionar los detalles de la `Item` objeto mediante IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="4e909-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="4e909-237">Para configurar un control de datos para utilizar el enlace de modelos para seleccionar datos, debe establecer el `SelectMethod` propiedad del control.</span><span class="sxs-lookup"><span data-stu-id="4e909-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="4e909-238">En el marcado, establezca la `SelectMethod` utilizar el método GetShoppingCartItems que devuelve una lista de `CartItem` objetos.</span><span class="sxs-lookup"><span data-stu-id="4e909-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="4e909-239">El **GridView** control de datos llama al método en el momento adecuado en el ciclo de vida de la página y se enlaza automáticamente los datos devueltos.</span><span class="sxs-lookup"><span data-stu-id="4e909-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="4e909-240">El `GetShoppingCartItems` método todavía debe agregarse.</span><span class="sxs-lookup"><span data-stu-id="4e909-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="4e909-241">Recuperar los elementos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="4e909-242">A continuación, agregue código a la *ShoppingCart.aspx.cs* código subyacente para recuperar y rellenar la interfaz de usuario del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="4e909-243">En **el Explorador de soluciones**, haga clic en el *ShoppingCart.aspx* página y, a continuación, haga clic en **ver código**.</span><span class="sxs-lookup"><span data-stu-id="4e909-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="4e909-244">El *ShoppingCart.aspx.cs* se abre el archivo de código subyacente en el editor.</span><span class="sxs-lookup"><span data-stu-id="4e909-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="4e909-245">Reemplace el código existente por el siguiente:</span><span class="sxs-lookup"><span data-stu-id="4e909-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="4e909-246">Como se mencionó anteriormente, el `GridView` llamadas de control de datos el `GetShoppingCartItems` ciclo de método en el momento adecuado en la vida de la página y se enlaza automáticamente los datos devueltos.</span><span class="sxs-lookup"><span data-stu-id="4e909-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="4e909-247">El `GetShoppingCartItems` método crea una instancia de la `ShoppingCartActions` objeto.</span><span class="sxs-lookup"><span data-stu-id="4e909-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="4e909-248">A continuación, el código usa esa instancia para devolver los elementos en el carro mediante una llamada a la `GetCartItems` método.</span><span class="sxs-lookup"><span data-stu-id="4e909-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="4e909-249">Agregar productos al carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="4e909-250">Cuando ambos el *ProductList.aspx* o *ProductDetails.aspx* se muestra la página, el usuario podrá agregar el producto a la cesta de compra utilizando un vínculo.</span><span class="sxs-lookup"><span data-stu-id="4e909-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="4e909-251">Cuando hagan clic en el vínculo, la aplicación navega a la página de procesamiento denominada *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="4e909-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="4e909-252">El *AddToCart.aspx* página llamará el `AddToCart` método en la `ShoppingCart` clase que agregó anteriormente en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="4e909-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="4e909-253">Ahora, agregará un **agregar al carro** vínculo a ambos el *ProductList.aspx* página y la *ProductDetails.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="4e909-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="4e909-254">Este vínculo incluirá el producto `ID` que se recupera de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="4e909-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="4e909-255">En **el Explorador de soluciones**, busque y abra la página denominada *ProductList.aspx*.</span><span class="sxs-lookup"><span data-stu-id="4e909-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="4e909-256">Agregue el marcado que se resalta en amarillo en el *ProductList.aspx* página para que toda la página aparece como sigue:</span><span class="sxs-lookup"><span data-stu-id="4e909-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="4e909-257">Probar el carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="4e909-258">Ejecute la aplicación para ver cómo agregar productos a la cesta.</span><span class="sxs-lookup"><span data-stu-id="4e909-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="4e909-259">Presione **F5** para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4e909-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="4e909-260">Después de que el proyecto vuelve a crear la base de datos, el explorador se abrirá y mostrar el *Default.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="4e909-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="4e909-261">Seleccione **automóviles** en el menú de navegación de la categoría.</span><span class="sxs-lookup"><span data-stu-id="4e909-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="4e909-262">El *ProductList.aspx* página se mostrará solo los productos incluidos en la categoría "Automóvil".</span><span class="sxs-lookup"><span data-stu-id="4e909-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![Carro de la compra - automóviles](shopping-cart/_static/image5.png)
3. <span data-ttu-id="4e909-264">Haga clic en el **agregar al carro** vínculo situado junto a la primera producto aparece (el coche convertible).</span><span class="sxs-lookup"><span data-stu-id="4e909-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="4e909-265">El *ShoppingCart.aspx* aparece la página, que muestra la selección en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![Carro - carro de la compra](shopping-cart/_static/image6.png)
4. <span data-ttu-id="4e909-267">Ver los productos adicionales, seleccione **planos** en el menú de navegación de la categoría.</span><span class="sxs-lookup"><span data-stu-id="4e909-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="4e909-268">Haga clic en el **agregar al carro** vínculo situado junto a la primera producto enumerado.</span><span class="sxs-lookup"><span data-stu-id="4e909-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="4e909-269">El *ShoppingCart.aspx* se muestra la página con el elemento adicional.</span><span class="sxs-lookup"><span data-stu-id="4e909-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="4e909-270">Cierre el explorador.</span><span class="sxs-lookup"><span data-stu-id="4e909-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="4e909-271">Calcular y mostrar el Total del pedido</span><span class="sxs-lookup"><span data-stu-id="4e909-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="4e909-272">Además de agregar productos al carro de la compra, agregará un `GetTotal` método a la `ShoppingCart` clase y mostrar la cantidad total del pedido en la página de carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="4e909-273">En **el Explorador de soluciones**, abra el *ShoppingCartActions.cs* un archivo en el *lógica* carpeta.</span><span class="sxs-lookup"><span data-stu-id="4e909-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="4e909-274">Agregue el siguiente `GetTotal` método aparecen resaltada en amarillo en el `ShoppingCart` de la clase, por lo que la clase aparezca como sigue:</span><span class="sxs-lookup"><span data-stu-id="4e909-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="4e909-275">En primer lugar, el `GetTotal` método obtiene el identificador del carro de la compra del usuario.</span><span class="sxs-lookup"><span data-stu-id="4e909-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="4e909-276">A continuación, el método obtiene el carro de la total multiplicando el precio del producto por la cantidad de productos para cada producto enumerado en el carro.</span><span class="sxs-lookup"><span data-stu-id="4e909-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="4e909-277">El código anterior utiliza el tipo que acepta valores null "`int?`".</span><span class="sxs-lookup"><span data-stu-id="4e909-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="4e909-278">Tipos que aceptan valores null pueden representar todos los valores de un tipo subyacente así como un valor nulo.</span><span class="sxs-lookup"><span data-stu-id="4e909-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="4e909-279">Para obtener más información, vea [utilizar tipos que aceptan valores NULL](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="4e909-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>


### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="4e909-280">Modificar la presentación de carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="4e909-281">A continuación modificará el código para el *ShoppingCart.aspx* página para llamar a la `GetTotal` método y mostrar total en el *ShoppingCart.aspx* página cuando se carga la página.</span><span class="sxs-lookup"><span data-stu-id="4e909-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="4e909-282">En **el Explorador de soluciones**, haga clic en el *ShoppingCart.aspx* página y seleccione **ver código**.</span><span class="sxs-lookup"><span data-stu-id="4e909-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="4e909-283">En el *ShoppingCart.aspx.cs* de archivos, actualice el `Page_Load` controlador agregando el código siguiente se resaltan en amarillo:</span><span class="sxs-lookup"><span data-stu-id="4e909-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="4e909-284">Cuando el *ShoppingCart.aspx* carga de página, se carga el objeto de carro de la compra y, a continuación, recupera el total de carro de la compra mediante una llamada a la `GetTotal` método de la `ShoppingCart` clase.</span><span class="sxs-lookup"><span data-stu-id="4e909-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="4e909-285">Si el carro de la compra está vacío, a tal efecto se muestra un mensaje.</span><span class="sxs-lookup"><span data-stu-id="4e909-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="4e909-286">Probar el Total de carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="4e909-287">Ejecute la aplicación para ver cómo no solo puede agregar un producto al carro de la compra, pero puede ver el total de carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="4e909-288">Presione **F5** para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4e909-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="4e909-289">El explorador se abrirá y mostrar el *Default.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="4e909-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="4e909-290">Seleccione **automóviles** en el menú de navegación de la categoría.</span><span class="sxs-lookup"><span data-stu-id="4e909-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="4e909-291">Haga clic en el **Add To Cart** vínculo situado junto a la primera el producto.</span><span class="sxs-lookup"><span data-stu-id="4e909-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="4e909-292">El *ShoppingCart.aspx* página se muestra con el total del pedido.</span><span class="sxs-lookup"><span data-stu-id="4e909-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![Shopping Cart - Total de carro](shopping-cart/_static/image7.png)
4. <span data-ttu-id="4e909-294">Agregar otros productos (por ejemplo, un plano) al carro.</span><span class="sxs-lookup"><span data-stu-id="4e909-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="4e909-295">El *ShoppingCart.aspx* página se muestra con un total actualizado para todos los productos que ha agregado.</span><span class="sxs-lookup"><span data-stu-id="4e909-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![Carro de la compra - varios productos](shopping-cart/_static/image8.png)
6. <span data-ttu-id="4e909-297">Detener la aplicación en ejecución, el cierre de la ventana del explorador.</span><span class="sxs-lookup"><span data-stu-id="4e909-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="4e909-298">Agregar botones de desprotección y actualización al carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="4e909-299">Para permitir que los usuarios modificar el carro de la compra, agregará un **actualización** botón y un **desprotección** botón hasta la página de carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="4e909-300">El **desprotección** botón no se usa hasta más adelante en esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="4e909-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="4e909-301">En **el Explorador de soluciones**, abra el *ShoppingCart.aspx* página en la raíz del proyecto de aplicación web.</span><span class="sxs-lookup"><span data-stu-id="4e909-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="4e909-302">Para agregar el **actualización** botón y **desprotección** botón a la *ShoppingCart.aspx* página, agregue el marcado que se resalta en amarillo en el marcado existente, como se muestra en el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="4e909-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="4e909-303">Cuando el usuario hace clic en el **actualización** botón, el `UpdateBtn_Click` se llamará el controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="4e909-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="4e909-304">Este controlador de eventos llamará el código que agregará en el paso siguiente.</span><span class="sxs-lookup"><span data-stu-id="4e909-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="4e909-305">A continuación, puede actualizar el código incluido en el *ShoppingCart.aspx.cs* archivo recorrer los elementos de carro y llamada la `RemoveItem` y `UpdateItem` métodos.</span><span class="sxs-lookup"><span data-stu-id="4e909-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="4e909-306">En **el Explorador de soluciones**, abra el *ShoppingCart.aspx.cs* archivo en la raíz del proyecto de aplicación web.</span><span class="sxs-lookup"><span data-stu-id="4e909-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="4e909-307">Agregue las siguientes secciones de código aparecen resaltadas en amarillo en el *ShoppingCart.aspx.cs* archivo:</span><span class="sxs-lookup"><span data-stu-id="4e909-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="4e909-308">Cuando el usuario hace clic en el **actualización** situado en la *ShoppingCart.aspx* página, que se llama al método UpdateCartItems.</span><span class="sxs-lookup"><span data-stu-id="4e909-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="4e909-309">El método UpdateCartItems obtiene los valores actualizados de cada elemento en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="4e909-310">A continuación, llama al método UpdateCartItems el `UpdateShoppingCartDatabase` (método, agrega y explica en el paso siguiente) para agregar o quitar elementos del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="4e909-311">Una vez que la base de datos se ha actualizado para reflejar las actualizaciones al carro de la compra, la **GridView** control se actualiza en la página de carro de compra mediante una llamada a la `DataBind` método para el **GridView**.</span><span class="sxs-lookup"><span data-stu-id="4e909-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="4e909-312">Además, la cantidad total del pedido en la página de carro de la compra se actualiza para reflejar la lista actualizada de elementos.</span><span class="sxs-lookup"><span data-stu-id="4e909-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="4e909-313">Actualización y eliminación de artículos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="4e909-314">En el *ShoppingCart.aspx* página, puede ver los controles se han agregado para la cantidad de un elemento de actualización y eliminación de un elemento.</span><span class="sxs-lookup"><span data-stu-id="4e909-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="4e909-315">Ahora, agregue el código que hará que estos controles de trabajo.</span><span class="sxs-lookup"><span data-stu-id="4e909-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="4e909-316">En **el Explorador de soluciones**, abra el *ShoppingCartActions.cs* un archivo en el *lógica* carpeta.</span><span class="sxs-lookup"><span data-stu-id="4e909-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="4e909-317">Agregue el código siguiente aparecen resaltado en amarillo en el *ShoppingCartActions.cs* archivo de clase:</span><span class="sxs-lookup"><span data-stu-id="4e909-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="4e909-318">El `UpdateShoppingCartDatabase` método, llamado desde el `UpdateCartItems` método en el *ShoppingCart.aspx.cs* página, contiene la lógica para actualizar o quitar elementos de la cesta.</span><span class="sxs-lookup"><span data-stu-id="4e909-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="4e909-319">El `UpdateShoppingCartDatabase` método recorre en iteración todas las filas en la lista de carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="4e909-320">Si un elemento del carro de la compra se ha marcado para quitarse o la cantidad es menor que uno, el `RemoveItem` se llama al método.</span><span class="sxs-lookup"><span data-stu-id="4e909-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="4e909-321">En caso contrario, se comprueba el elemento de carro de la compra se actualiza cuando el `UpdateItem` se llama al método.</span><span class="sxs-lookup"><span data-stu-id="4e909-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="4e909-322">Después de que se ha quitado o actualizar el elemento de carro de la compra, se guardan los cambios de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="4e909-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="4e909-323">El `ShoppingCartUpdates` estructura se usa para contener todos los elementos del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="4e909-324">El `UpdateShoppingCartDatabase` método usa la `ShoppingCartUpdates` estructura para determinar si cualquiera de los elementos necesita se actualizó o se quitó.</span><span class="sxs-lookup"><span data-stu-id="4e909-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="4e909-325">En el siguiente tutorial, utilizará el `EmptyCart` método para borrar la compra carro después de la compra de productos.</span><span class="sxs-lookup"><span data-stu-id="4e909-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="4e909-326">Pero por ahora, va a usar el `GetCount` método que acaba de agregar a la *ShoppingCartActions.cs* archivo para determinar cuántos elementos se encuentran en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="4e909-327">Agregar un contador de carro de la compra</span><span class="sxs-lookup"><span data-stu-id="4e909-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="4e909-328">Para permitir que el usuario pueda ver el número total de elementos en el carro de la compra, va a agregar un contador a la *Site.Master* página.</span><span class="sxs-lookup"><span data-stu-id="4e909-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="4e909-329">Este contador también actuará como un vínculo al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="4e909-330">En **el Explorador de soluciones**, abra el *Site.Master* página.</span><span class="sxs-lookup"><span data-stu-id="4e909-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="4e909-331">Modifique el marcado agregando el vínculo de contador de carro de la compra, como se muestra en amarillo en la sección de navegación, por lo que aparece como sigue:</span><span class="sxs-lookup"><span data-stu-id="4e909-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="4e909-332">A continuación, actualice el código subyacente de la *Site.Master.cs* archivo agregando el código que se resalta en amarillo, como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="4e909-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="4e909-333">Antes de la página se representa como HTML, el `Page_PreRender` evento se desencadena.</span><span class="sxs-lookup"><span data-stu-id="4e909-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="4e909-334">En el `Page_PreRender` controlador, el número total de carro de la compra se determina mediante una llamada a la `GetCount` método.</span><span class="sxs-lookup"><span data-stu-id="4e909-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="4e909-335">El valor devuelto se agrega a la `cartCount` intervalo incluido en el marcado de la *Site.Master* página.</span><span class="sxs-lookup"><span data-stu-id="4e909-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="4e909-336">El `<span>` etiquetas permite a los elementos internos se representen correctamente.</span><span class="sxs-lookup"><span data-stu-id="4e909-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="4e909-337">Cuando se muestra cualquier página del sitio, se mostrará el total de carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="4e909-338">El usuario puede hacer clic en el total de carro de la compra para mostrar el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="4e909-339">Probar el carro de la compra completado</span><span class="sxs-lookup"><span data-stu-id="4e909-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="4e909-340">Puede ejecutar la aplicación ahora para ver cómo se pueden agregar, eliminar y actualiza los artículos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="4e909-341">El total de carro de la compra reflejará el costo total de todos los elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="4e909-342">Presione **F5** para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4e909-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="4e909-343">El explorador se abre y muestra el *Default.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="4e909-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="4e909-344">Seleccione **automóviles** en el menú de navegación de la categoría.</span><span class="sxs-lookup"><span data-stu-id="4e909-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="4e909-345">Haga clic en el **Add To Cart** vínculo situado junto a la primera el producto.</span><span class="sxs-lookup"><span data-stu-id="4e909-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="4e909-346">El *ShoppingCart.aspx* página se muestra con el total del pedido.</span><span class="sxs-lookup"><span data-stu-id="4e909-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="4e909-347">Seleccione **planos** en el menú de navegación de la categoría.</span><span class="sxs-lookup"><span data-stu-id="4e909-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="4e909-348">Haga clic en el **Add To Cart** vínculo situado junto a la primera el producto.</span><span class="sxs-lookup"><span data-stu-id="4e909-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="4e909-349">Establecer la cantidad del primer elemento de la cesta a 3 y seleccione la **quitar elemento** casilla de verificación del segundo elemento.<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="4e909-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="4e909-350">Haga clic en el **actualizar** botón para actualizar la página de carro de la compra y mostrar el nuevo total del pedido.</span><span class="sxs-lookup"><span data-stu-id="4e909-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![Carro de la compra - carro de la actualización](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="4e909-352">Resumen</span><span class="sxs-lookup"><span data-stu-id="4e909-352">Summary</span></span>

<span data-ttu-id="4e909-353">En este tutorial, ha creado un carro de la compra para la aplicación de ejemplo de formularios Web Forms de Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="4e909-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="4e909-354">Durante este tutorial ha utilizado Entity Framework Code First, las anotaciones de datos, los controles de datos fuertemente tipados y enlace de modelos.</span><span class="sxs-lookup"><span data-stu-id="4e909-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="4e909-355">Carro de la compra admite agregar, eliminar y actualizar los elementos que el usuario ha seleccionado para la compra.</span><span class="sxs-lookup"><span data-stu-id="4e909-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="4e909-356">Además de implementar la funcionalidad de carro de la compra, ha aprendido cómo mostrar los elementos de carro de la compra de un **GridView** controlar y calcular el total del pedido.</span><span class="sxs-lookup"><span data-stu-id="4e909-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

## <a name="addition-information"></a><span data-ttu-id="4e909-357">Obtener información adicional</span><span class="sxs-lookup"><span data-stu-id="4e909-357">Addition Information</span></span>

[<span data-ttu-id="4e909-358">Información general del estado de sesión de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="4e909-358">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/en-us/library/ms178581.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="4e909-359">[Anterior](display_data_items_and_details.md)
[Siguiente](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="4e909-359">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
