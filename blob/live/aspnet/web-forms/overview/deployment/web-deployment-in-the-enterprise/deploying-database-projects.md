---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: Implementar proyectos de base de datos | Documentos de Microsoft
author: jrjlee
description: "Nota: En una gran cantidad de escenarios de implementación empresarial, necesita la capacidad para publicar actualizaciones incrementales en una base de datos implementada. La alternativa es volver a..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: aef8229f2920bd026e3dbf063afb57cffb9b21d0
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/10/2017
---
<a name="deploying-database-projects"></a><span data-ttu-id="ee1ab-104">Implementar proyectos de base de datos</span><span class="sxs-lookup"><span data-stu-id="ee1ab-104">Deploying Database Projects</span></span>
====================
<span data-ttu-id="ee1ab-105">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="ee1ab-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="ee1ab-106">Descarga de PDF</span><span class="sxs-lookup"><span data-stu-id="ee1ab-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="ee1ab-107">Una gran cantidad de escenarios de implementación empresarial, necesita la capacidad para publicar actualizaciones incrementales en una base de datos implementada.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="ee1ab-108">La alternativa consiste en volver a crear la base de datos en cada implementación, lo que significa que se perderá ningún dato en la base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="ee1ab-109">Cuando se trabaja con Visual Studio 2010, usando VSDBCMD es el enfoque recomendado para la publicación de bases de datos incrementales.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="ee1ab-110">Sin embargo, la próxima versión de Visual Studio y la canalización de publicación de Web (WPP) incluye herramientas que admite directamente la publicación incremental.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>


<span data-ttu-id="ee1ab-111">Si la solución de ejemplo de administrador de contacto se abre en Visual Studio 2010, verá que el proyecto de base de datos incluye una carpeta de propiedades que contiene cuatro archivos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="ee1ab-112">Junto con el archivo de proyecto (*ContactManager.Database.dbproj* en este caso), estos archivos controlan diversos aspectos del proceso de compilación e implementación:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="ee1ab-113">El *Database.sqlcmdvars* archivo proporciona valores para las variables SQLCMD que utiliza al implementar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="ee1ab-114">Cada configuración de soluciones (por ejemplo, debug y release) puede especificar un archivo .sqlcmdvars diferente.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="ee1ab-115">El *Database.sqldeployment* archivo proporciona la configuración específica de la implementación, como si se utiliza la intercalación definida en el proyecto o la intercalación del servidor de destino, si se debe volver a crear la base de datos de destino cada hora o basta con modificar la base de datos existente para poner al día y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="ee1ab-116">Cada configuración de soluciones puede especificar un archivo .sqldeployment diferentes.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="ee1ab-117">El *Database.sqlpermissions* archivo es un documento XML que puede utilizar para definir los permisos que se va a agregar a la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="ee1ab-118">Todas las configuraciones de solución comparten el mismo archivo .sqlpermissions.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="ee1ab-119">El *Database.sqlsettings* archivo especifica las propiedades de nivel de base de datos que se usará al crear la base de datos, como la intercalación que utiliza, el comportamiento de los operadores de comparación y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="ee1ab-120">Todas las configuraciones de solución comparten el mismo archivo .sqlsettings.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="ee1ab-121">Merece la pena dedicar unos instantes a abrir estos archivos en Visual Studio y familiarizarse con el contenido.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="ee1ab-122">Cuando compila un proyecto de base de datos, el proceso de compilación crea dos archivos:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="ee1ab-123">A *esquema de base de datos* (archivo .dbschema).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="ee1ab-124">Describe el esquema de la base de datos que desea crear en formato XML.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="ee1ab-125">A *manifiesto de implementación* (archivo .deploymanifest).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="ee1ab-126">Contiene toda la información necesaria para crear e implementar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="ee1ab-127">Hace referencia al archivo .dbschema junto con otros recursos, como las instrucciones de implementación (el archivo .sqldeployment) y los scripts SQL anteriores o posteriores a la implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="ee1ab-128">Esto muestra la relación entre estos recursos:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="ee1ab-129">Como puede ver, el archivo .sqlsettings y el archivo .sqlpermissions son entradas para el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="ee1ab-130">Junto con el archivo de proyecto de base de datos, estos archivos se usan para crear el archivo de esquema de base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="ee1ab-131">El archivo .sqldeployment y el archivo .sqlcmdvars pasar a través del proceso de compilación sin cambios.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="ee1ab-132">El manifiesto de implementación indica la ubicación del esquema de base de datos, el archivo .sqldeployment, el archivo .sqlcmdvars y los scripts SQL anteriores o posteriores a la implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="ee1ab-133">¿Por qué usar VSDBCMD para implementar un proyecto de base de datos?</span><span class="sxs-lookup"><span data-stu-id="ee1ab-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="ee1ab-134">Hay varios enfoques diferentes para implementar proyectos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="ee1ab-135">Sin embargo, no todas ellas son adecuados para implementar un proyecto de base de datos en servidores remotos en un entorno empresarial.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="ee1ab-136">Tenga en cuenta que desee de una implementación de proyectos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="ee1ab-137">En escenarios de implementación empresarial, es probable que se desee:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="ee1ab-138">La capacidad de implementar el proyecto de base de datos desde una ubicación remota.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="ee1ab-139">La capacidad de realizar actualizaciones incrementales en una base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="ee1ab-140">La capacidad de incluir secuencias de comandos de implementación previa o posterior a la implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="ee1ab-141">La capacidad para personalizar la implementación en varios entornos de destino.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="ee1ab-142">La capacidad de implementar el proyecto de base de datos como parte de una mayor normalmente genera un script, implementación de la solución de paso a paso.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="ee1ab-143">Hay tres maneras principales para implementar un proyecto de base de datos:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="ee1ab-144">Puede usar la funcionalidad de implementación con el tipo de proyecto de base de datos en Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="ee1ab-145">Al compilar e implementar un proyecto de base de datos en Visual Studio 2010, el proceso de implementación utiliza el manifiesto de implementación para generar un archivo de implementación basado en SQL específico de la configuración de compilación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="ee1ab-146">Si ya no existe o realizar los cambios necesarios en la base de datos si ya existe, se creará la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="ee1ab-147">Puede utilizar SQLCMD.exe para ejecutar este archivo en el servidor de destino, o puede configurar Visual Studio para crear y ejecutar el archivo.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="ee1ab-148">La desventaja de este enfoque es que solo tiene limitados control sobre la configuración de implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="ee1ab-149">A menudo también tendrá que modificar el archivo de implementación de SQL para proporcionar los valores de las variables específicas del entorno.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="ee1ab-150">Solo se puede utilizar este enfoque desde un equipo con Visual Studio 2010 instalado, y el desarrollador tendría que conocer y proporcionar las cadenas de conexión y credenciales para todos los entornos de destino.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="ee1ab-151">Puede usar la herramienta de implementación Web de Internet Information Services (IIS) (Web Deploy) a [implementar una base de datos como parte de un proyecto de aplicación web](https://msdn.microsoft.com/en-us/library/dd465343.aspx).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/en-us/library/dd465343.aspx).</span></span> <span data-ttu-id="ee1ab-152">Sin embargo, este enfoque es mucho más complejo si desea implementar un proyecto de base de datos en lugar de simplemente replicar una base de datos local existente en un servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="ee1ab-153">También puede configurar Web Deploy para ejecutar el script de implementación de SQL que genera el proyecto de base de datos, pero para ello, debe crear un archivo de destinos WPP personalizado para el proyecto de aplicación web.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="ee1ab-154">Esto agrega una cantidad considerable de complejidad al proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="ee1ab-155">Además, Web Deploy no admite directamente las actualizaciones incrementales para bases de datos existentes.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="ee1ab-156">Para obtener más información sobre este enfoque, consulte [extender la canalización de publicación de Web al proyecto de base de datos del paquete implementado archivo SQL](https://go.microsoft.com/?linkid=9805121).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="ee1ab-157">Puede usar la utilidad VSDBCMD para implementar la base de datos mediante el esquema de base de datos o el manifiesto de implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="ee1ab-158">Puede llamar a VSDBCMD.exe desde un destino de MSBuild, que permite la publicación de bases de datos como parte de un proceso de implementación más grandes, con scripts.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="ee1ab-159">Puede invalidar las variables en el archivo .sqlcmdvars y una gran cantidad de otras propiedades de la base de datos de un comando VSDBCMD, que le permite personalizar la implementación para diferentes entornos sin necesidad de crear varias configuraciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="ee1ab-160">VSDBCMD proporciona funcionalidad de diferenciación, lo que significa que pueda realizar únicamente los cambios necesarios para alinear una base de datos de destino con el esquema de base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="ee1ab-161">VSDBCMD también ofrece una amplia gama de opciones de línea de comandos, que le ofrecen un control más preciso sobre el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="ee1ab-162">En esta información general, puede ver que el uso VSDBCMD con MSBuild es el enfoque que mejor se adapte a un escenario de implementación típicos de empresas:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="ee1ab-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="ee1ab-163">Visual Studio 2010</span></span> | <span data-ttu-id="ee1ab-164">Web Deploy 2.0</span><span class="sxs-lookup"><span data-stu-id="ee1ab-164">Web Deploy 2.0</span></span> | <span data-ttu-id="ee1ab-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="ee1ab-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ee1ab-166">¿Admite la implementación remota?</span><span class="sxs-lookup"><span data-stu-id="ee1ab-166">Supports remote deployment?</span></span> | <span data-ttu-id="ee1ab-167">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-167">Yes</span></span> | <span data-ttu-id="ee1ab-168">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-168">Yes</span></span> | <span data-ttu-id="ee1ab-169">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-169">Yes</span></span> |
| <span data-ttu-id="ee1ab-170">¿Admite actualizaciones incrementales?</span><span class="sxs-lookup"><span data-stu-id="ee1ab-170">Supports incremental updates?</span></span> | <span data-ttu-id="ee1ab-171">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-171">Yes</span></span> | <span data-ttu-id="ee1ab-172">No</span><span class="sxs-lookup"><span data-stu-id="ee1ab-172">No</span></span> | <span data-ttu-id="ee1ab-173">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-173">Yes</span></span> |
| <span data-ttu-id="ee1ab-174">¿Admite scripts anteriores o posteriores a la implementación?</span><span class="sxs-lookup"><span data-stu-id="ee1ab-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="ee1ab-175">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-175">Yes</span></span> | <span data-ttu-id="ee1ab-176">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-176">Yes</span></span> | <span data-ttu-id="ee1ab-177">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-177">Yes</span></span> |
| <span data-ttu-id="ee1ab-178">¿Admite la implementación de varios entorno?</span><span class="sxs-lookup"><span data-stu-id="ee1ab-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="ee1ab-179">Limitado</span><span class="sxs-lookup"><span data-stu-id="ee1ab-179">Limited</span></span> | <span data-ttu-id="ee1ab-180">Limitado</span><span class="sxs-lookup"><span data-stu-id="ee1ab-180">Limited</span></span> | <span data-ttu-id="ee1ab-181">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-181">Yes</span></span> |
| <span data-ttu-id="ee1ab-182">¿Admite la implementación con script?</span><span class="sxs-lookup"><span data-stu-id="ee1ab-182">Supports scripted deployment?</span></span> | <span data-ttu-id="ee1ab-183">Limitado</span><span class="sxs-lookup"><span data-stu-id="ee1ab-183">Limited</span></span> | <span data-ttu-id="ee1ab-184">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-184">Yes</span></span> | <span data-ttu-id="ee1ab-185">Sí</span><span class="sxs-lookup"><span data-stu-id="ee1ab-185">Yes</span></span> |

<span data-ttu-id="ee1ab-186">El resto de este tema describe el uso de VSDBCMD con MSBuild para implementar proyectos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="ee1ab-187">Descripción del proceso de implementación</span><span class="sxs-lookup"><span data-stu-id="ee1ab-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="ee1ab-188">La utilidad VSDBCMD le permite implementar una base de datos con el esquema de base de datos (el archivo .dbschema) o el manifiesto de implementación (el archivo .deploymanifest).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="ee1ab-189">En la práctica, casi siempre usará el manifiesto de implementación, como el manifiesto de implementación le permite proporcionar los valores predeterminados para diversas propiedades de implementación e identificar cualquier script SQL anteriores o posteriores a la implementación que desea ejecutar.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="ee1ab-190">Por ejemplo, se usa este comando VSDBCMD para implementar la **ContactManager** base de datos a un servidor de base de datos en un entorno de prueba:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>


[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]


<span data-ttu-id="ee1ab-191">En este caso:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-191">In this case:</span></span>

- <span data-ttu-id="ee1ab-192">El **/a** (o **/Action**) modificador especifica la acción que realizará VSDBCMD hacer.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="ee1ab-193">También puede establecerlo en **importación** o **implementar**.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="ee1ab-194">El **importación** opción se usa para generar un archivo .dbschema desde una base de datos existente y la **implementar** opción se utiliza para implementar un archivo .dbschema en una base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="ee1ab-195">El **/manifest** (o **/MANIFESTFILE**) conmutador identifica el archivo .deploymanifest que desea implementar.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="ee1ab-196">Si desea utilizar el archivo .dbschema en su lugar, utilice la **/modelo** (o **/ModelFile**) cambiar.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="ee1ab-197">El **/cs** (o **bien**) conmutador proporciona la cadena de conexión para el servidor de base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="ee1ab-198">Tenga en cuenta que esto no incluye el nombre de la base de datos & #x 2014; VSDBCMD necesita para conectarse al servidor para crear la base de datos; no es necesario conectarse a una base de datos individual.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="ee1ab-199">Si el archivo .deploymanifest incluye una cadena de conexión, puede omitir este modificador.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="ee1ab-200">Si utiliza el modificador de todos modos, el valor del modificador invalidará el valor .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="ee1ab-201">El **/p: TargetDatabase** propiedad proporciona el nombre que desea asignar a la base de datos de destino durante la creación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-201">The **/p:TargetDatabase** property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="ee1ab-202">Esto reemplaza el valor de la **TargetDatabase** propiedad en el archivo .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-202">This overrides the value of the **TargetDatabase** property in the .deploymanifest file.</span></span> <span data-ttu-id="ee1ab-203">Puede usar el **/p:** *[nombre de la propiedad]*sintaxis para establecer una gran variedad de propiedades de implementación y para invalidar las variables SQLCMD declarados en el archivo .sqlcmdvars.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-203">You can use the **/p:** *[property name]*syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="ee1ab-204">El **/dd+** (o **/DeployToDatabase+**) conmutador indica que desea crear una implementación e implementarlo en el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="ee1ab-205">Si especifica **/dd-**, u omite el modificador, VSDBCMD generará un script de implementación, pero no implementará en el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="ee1ab-206">Este modificador es a menudo el origen de confusión y se explica con más detalle en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="ee1ab-207">El **/script** (o **/DeploymentScriptFile**) modificador especifica dónde desea generar el script de implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="ee1ab-208">Este valor no afecta el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="ee1ab-209">Para obtener más información sobre VSDBCMD, consulte [referencia de línea de comandos de VSDBCMD. EXE (implementación e importación del esquema)](https://msdn.microsoft.com/en-us/library/dd193283.aspx) y [Cómo: preparar una base de datos para la implementación desde un símbolo del sistema mediante VSDBCMD. EXE](https://msdn.microsoft.com/en-us/library/dd193258.aspx).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/en-us/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/en-us/library/dd193258.aspx).</span></span>

<span data-ttu-id="ee1ab-210">Para obtener un ejemplo de cómo puede utilizar VSDBCMD desde un archivo de proyecto de MSBuild, vea [descripción del proceso de compilación](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="ee1ab-211">Para obtener ejemplos de cómo configurar opciones de implementación de base de datos para varios entornos, vea [personalizar implementaciones de base de datos para varios entornos](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="ee1ab-212">Descripción del conmutador DeployToDatabase</span><span class="sxs-lookup"><span data-stu-id="ee1ab-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="ee1ab-213">El comportamiento de la **/dd** o **/DeployToDatabase** conmutador depende de si está usando VSDBCMD con un archivo .dbschema o un archivo .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="ee1ab-214">Si está usando un archivo .dbschema, el comportamiento es bastante sencillo:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="ee1ab-215">Si especifica **/dd+** o **/dd**, VSDBCMD se genera un script de implementación e implementar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="ee1ab-216">Si especifica **/dd-** u omite el modificador, VSDBCMD generará solo un script de implementación.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="ee1ab-217">Si está usando un archivo .deploymanifest, el comportamiento es mucho más complicado.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="ee1ab-218">Esto es porque el archivo .deploymanifest contiene un nombre de propiedad **DeployToDatabase** que también determina si se implementa la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>


[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]


<span data-ttu-id="ee1ab-219">El valor de esta propiedad se establece según las propiedades del proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="ee1ab-220">Si establece la **implementar acción** a **crear un script de implementación (. SQL)**, el valor será **False**.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="ee1ab-221">Si establece la **implementar acción** a **crear un script de implementación (. SQL) e implementar en la base de datos**, el valor será **True**.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="ee1ab-222">Estos valores están asociados con una plataforma y la configuración de compilación concreta.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="ee1ab-223">Por ejemplo, si establece la configuración para la **depurar** configuración y, a continuación, publicar utilizando la **versión** configuración, no se utilizará la configuración.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>


![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="ee1ab-224">En este escenario, el **implementar acción** debe establecerse siempre en **crear un script de implementación (. SQL)**, ya que no desea que Visual Studio 2010 para implementar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="ee1ab-225">En otras palabras, el **DeployToDatabase** propiedad siempre debe ser **False**.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>


<span data-ttu-id="ee1ab-226">Cuando un **DeployToDatabase** propiedad se especifica, el **/dd** conmutador solo invalidará la propiedad si el valor de propiedad es **false**:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="ee1ab-227">Si el **DeployToDatabase** propiedad es **False**, y especificar **/dd+** o **/dd**, VSDBCMD invalidará el  **DeployToDatabase** propiedad e implementar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="ee1ab-228">Si el **DeployToDatabase** propiedad es **False**, y especificar **/dd-** u omite el modificador, VSDBCMD no implementará la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="ee1ab-229">Si el **DeployToDatabase** propiedad es **True**, VSDBCMD omitirá el conmutador e implementar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="ee1ab-230">Se genera un script de implementación en cada caso, independientemente de si va a implementar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="ee1ab-231">Conclusión</span><span class="sxs-lookup"><span data-stu-id="ee1ab-231">Conclusion</span></span>

<span data-ttu-id="ee1ab-232">En este tema se proporciona información general sobre el proceso de compilación e implementación para los proyectos de base de datos en Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="ee1ab-233">También se describe cómo puede usar VSDBCMD.exe con MSBuild para admitir la implementación de la base de datos de escala empresarial.</span><span class="sxs-lookup"><span data-stu-id="ee1ab-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="ee1ab-234">Para obtener más información sobre su funcionamiento en la práctica, consulte [personalizar implementaciones de base de datos para varios entornos](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="ee1ab-235">Información adicional</span><span class="sxs-lookup"><span data-stu-id="ee1ab-235">Further Reading</span></span>

<span data-ttu-id="ee1ab-236">Para obtener información sobre cómo personalizar las implementaciones de la base de datos mediante la creación de un archivo de configuración de implementación independiente para cada entorno, consulte [personalizar implementaciones de base de datos para varios entornos](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="ee1ab-237">Para obtener instrucciones sobre cómo configurar las pertenencias a roles de base de datos ejecutando un script posterior a la implementación, consulte [implementar pertenencias a roles de base de datos a los entornos de prueba](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="ee1ab-238">Para obtener instrucciones sobre la administración de algunos de los desafíos únicos dicha pertenencia imponer bases de datos, vea [implementar bases de datos de pertenencia a los entornos empresariales](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span><span class="sxs-lookup"><span data-stu-id="ee1ab-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="ee1ab-239">Estos temas en MSDN proporcionan instrucciones más amplio y obtener información general sobre los proyectos de base de datos de Visual Studio y el proceso de implementación de base de datos:</span><span class="sxs-lookup"><span data-stu-id="ee1ab-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="ee1ab-240">Proyectos de base de datos de Visual Studio 2010 SQL Server</span><span class="sxs-lookup"><span data-stu-id="ee1ab-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/en-us/library/ff678491.aspx)
- [<span data-ttu-id="ee1ab-241">Administración de cambios de base de datos</span><span class="sxs-lookup"><span data-stu-id="ee1ab-241">Managing Database Change</span></span>](https://msdn.microsoft.com/en-us/library/aa833404.aspx)
- [<span data-ttu-id="ee1ab-242">Cómo: preparar una base de datos para la implementación desde un símbolo del sistema mediante VSDBCMD. EXE</span><span class="sxs-lookup"><span data-stu-id="ee1ab-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/en-us/library/dd193258.aspx)
- [<span data-ttu-id="ee1ab-243">Información general de implementación y compilación de la base de datos</span><span class="sxs-lookup"><span data-stu-id="ee1ab-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/en-us/library/aa833165.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="ee1ab-244">[Anterior](deploying-web-packages.md)
[Siguiente](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="ee1ab-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>
