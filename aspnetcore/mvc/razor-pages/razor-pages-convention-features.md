---
title: "Características de convención de aplicación y de ruta de páginas de Razor en ASP.NET Core"
author: guardrex
description: "Vea cómo las características de convención de proveedor de modelos de aplicación y de ruta sirven para controlar el enrutamiento, la detección y el procesamiento de páginas."
manager: wpickett
ms.author: riande
ms.date: 10/23/2017
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: mvc/razor-pages/razor-pages-convention-features
ms.openlocfilehash: bf1c895fc972310d5541d0098226d58b8183e320
ms.sourcegitcommit: a510f38930abc84c4b302029d019a34dfe76823b
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/30/2018
---
# <a name="razor-pages-route-and-app-convention-features-in-aspnet-core"></a><span data-ttu-id="5ed1a-103">Características de convención de aplicación y de ruta de páginas de Razor en ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="5ed1a-103">Razor Pages route and app convention features in ASP.NET Core</span></span>

<span data-ttu-id="5ed1a-104">Por [Luke Latham](https://github.com/guardrex)</span><span class="sxs-lookup"><span data-stu-id="5ed1a-104">By [Luke Latham](https://github.com/guardrex)</span></span>

<span data-ttu-id="5ed1a-105">Aquí encontrará información para saber cómo usar las características de convención de proveedor de modelos de aplicación y de ruta con objeto de controlar el enrutamiento, la detección y el procesamiento en aplicaciones de páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-105">Learn how to use page route and app model provider convention features to control page routing, discovery, and processing in Razor Pages apps.</span></span> <span data-ttu-id="5ed1a-106">Si necesita configurar rutas de una página personalizadas para páginas concretas, configure el enrutamiento a esas páginas con la [convención AddPageRoute](#configure-a-page-route), descrita más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-106">When you need to configure custom page routes for individual pages, configure routing to pages with the [AddPageRoute convention](#configure-a-page-route) described later in this topic.</span></span>

<span data-ttu-id="5ed1a-107">Use la [aplicación de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/razor-pages/razor-pages-convention-features/sample) ([cómo descargarla](xref:tutorials/index#how-to-download-a-sample)) para explorar las características descritas en este tema.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-107">Use the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/razor-pages/razor-pages-convention-features/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample)) to explore the features described in this topic.</span></span>

| <span data-ttu-id="5ed1a-108">Características</span><span class="sxs-lookup"><span data-stu-id="5ed1a-108">Features</span></span> | <span data-ttu-id="5ed1a-109">El ejemplo explica cómo...</span><span class="sxs-lookup"><span data-stu-id="5ed1a-109">The sample demonstrates ...</span></span> |
| -------- | --------------------------- |
| [<span data-ttu-id="5ed1a-110">Convenciones de modelo de aplicación y ruta</span><span class="sxs-lookup"><span data-stu-id="5ed1a-110">Route and app model conventions</span></span>](#add-route-and-app-model-conventions)<br><br><span data-ttu-id="5ed1a-111">Conventions.Add</span><span class="sxs-lookup"><span data-stu-id="5ed1a-111">Conventions.Add</span></span><ul><li><span data-ttu-id="5ed1a-112">IPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="5ed1a-112">IPageRouteModelConvention</span></span></li><li><span data-ttu-id="5ed1a-113">IPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="5ed1a-113">IPageApplicationModelConvention</span></span></li></ul> | <span data-ttu-id="5ed1a-114">Agregar un encabezado y una plantilla de ruta a las páginas de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-114">Adding a route template and header to an app's pages.</span></span> |
| [<span data-ttu-id="5ed1a-115">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="5ed1a-115">Page route action conventions</span></span>](#page-route-action-conventions)<ul><li><span data-ttu-id="5ed1a-116">AddFolderRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="5ed1a-116">AddFolderRouteModelConvention</span></span></li><li><span data-ttu-id="5ed1a-117">AddPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="5ed1a-117">AddPageRouteModelConvention</span></span></li><li><span data-ttu-id="5ed1a-118">AddPageRoute</span><span class="sxs-lookup"><span data-stu-id="5ed1a-118">AddPageRoute</span></span></li></ul> | <span data-ttu-id="5ed1a-119">Agregar una plantilla de ruta a las páginas de una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-119">Adding a route template to pages in a folder and to a single page.</span></span> |
| [<span data-ttu-id="5ed1a-120">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="5ed1a-120">Page model action conventions</span></span>](#page-model-action-conventions)<ul><li><span data-ttu-id="5ed1a-121">AddFolderApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="5ed1a-121">AddFolderApplicationModelConvention</span></span></li><li><span data-ttu-id="5ed1a-122">AddPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="5ed1a-122">AddPageApplicationModelConvention</span></span></li><li><span data-ttu-id="5ed1a-123">ConfigureFilter (clase de filtro, expresión lambda o fábrica de filtros)</span><span class="sxs-lookup"><span data-stu-id="5ed1a-123">ConfigureFilter (filter class, lambda expression, or filter factory)</span></span></li></ul> | <span data-ttu-id="5ed1a-124">Agregar un encabezado a las páginas de una carpeta, agregar un encabezado a una sola página y configurar una [fábrica de filtros](xref:mvc/controllers/filters#ifilterfactory) para agregar un encabezado a las páginas de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-124">Adding a header to pages in a folder, adding a header to a single page, and configuring a [filter factory](xref:mvc/controllers/filters#ifilterfactory) to add a header to an app's pages.</span></span> |
| [<span data-ttu-id="5ed1a-125">Proveedor de modelos de aplicación de página predeterminado</span><span class="sxs-lookup"><span data-stu-id="5ed1a-125">Default page app model provider</span></span>](#replace-the-default-page-app-model-provider) | <span data-ttu-id="5ed1a-126">Reemplazar el proveedor de modelos de página predeterminado para cambiar las convenciones de nomenclatura de controlador.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-126">Replacing the default page model provider to change the conventions for handler naming.</span></span> |

## <a name="add-route-and-app-model-conventions"></a><span data-ttu-id="5ed1a-127">Agregar convenciones de modelo de aplicación y de ruta</span><span class="sxs-lookup"><span data-stu-id="5ed1a-127">Add route and app model conventions</span></span>

<span data-ttu-id="5ed1a-128">Agregue un delegado de [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) para agregar convenciones de modelo de aplicación y de ruta y aplicarlas a páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-128">Add a delegate for [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) to add route and app model conventions that apply to Razor Pages.</span></span>

<span data-ttu-id="5ed1a-129">**Agregar una convención de modelo de ruta a todas las páginas**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-129">**Add a route model convention to all pages**</span></span>

<span data-ttu-id="5ed1a-130">Use [Conventions](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.razorpagesoptions.conventions) para crear y agregar un [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) a la colección de instancias [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) que se van a aplicar durante la construcción del modelo de página y de ruta.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-130">Use [Conventions](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.razorpagesoptions.conventions) to create and add an [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) to the collection of [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) instances that are applied during route and page model construction.</span></span>

<span data-ttu-id="5ed1a-131">En la aplicación de ejemplo se agrega una plantilla de ruta `{globalTemplate?}` a todas las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-131">The sample app adds a `{globalTemplate?}` route template to all of the pages in the app:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Conventions/GlobalTemplatePageRouteModelConvention.cs?name=snippet1)]

> [!NOTE]
> <span data-ttu-id="5ed1a-132">La propiedad `Order` de `AttributeRouteModel` está establecida en `0` (cero).</span><span class="sxs-lookup"><span data-stu-id="5ed1a-132">The `Order` property for the `AttributeRouteModel` is set to `0` (zero).</span></span> <span data-ttu-id="5ed1a-133">De este modo, se garantiza que esta plantilla tiene prioridad para colocarse en la primera posición de valor de datos de ruta cuando se proporcione un solo valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-133">This ensures that this template is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="5ed1a-134">Por ejemplo, en el ejemplo se agregará una plantilla de ruta `{aboutTemplate?}` más adentrado este tema.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-134">For example, the sample adds an `{aboutTemplate?}` route template later in the topic.</span></span> <span data-ttu-id="5ed1a-135">La plantilla `{aboutTemplate?}` tiene un `Order` con un valor de `1`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-135">The `{aboutTemplate?}` template is given an `Order` of `1`.</span></span> <span data-ttu-id="5ed1a-136">Cuando la página About se solicita en `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 0`) y no `RouteData.Values["aboutTemplate"]` (`Order = 1`), debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-136">When the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 0`) and not `RouteData.Values["aboutTemplate"]` (`Order = 1`) due to setting the `Order` property.</span></span>

<span data-ttu-id="5ed1a-137">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-137">*Startup.cs*:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet1)]

<span data-ttu-id="5ed1a-138">Solicite la página About del ejemplo en `localhost:5000/About/GlobalRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-138">Request the sample's About page at `localhost:5000/About/GlobalRouteValue` and inspect the result:</span></span>

![La página About se solicita con un segmento de ruta de GlobalRouteValue.](razor-pages-convention-features/_static/about-page-global-template.png)

<span data-ttu-id="5ed1a-141">**Agregar una convención de modelo de aplicación a todas las páginas**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-141">**Add an app model convention to all pages**</span></span>

<span data-ttu-id="5ed1a-142">Use [Conventions](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.razorpagesoptions.conventions) para crear y agregar un [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) a la colección de instancias [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) que se van a aplicar durante la construcción del modelo de página y de ruta.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-142">Use [Conventions](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.razorpagesoptions.conventions) to create and add an [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) to the collection of [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) instances that are applied during route and page model construction.</span></span>

<span data-ttu-id="5ed1a-143">Para demostrar esta y otras convenciones más adelante en este tema, la aplicación de ejemplo incluye una clase `AddHeaderAttribute`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-143">To demonstrate this and other conventions later in the topic, the sample app includes an `AddHeaderAttribute` class.</span></span> <span data-ttu-id="5ed1a-144">El constructor de esta clase acepta una cadena `name` y una matriz de cadenas `values`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-144">The class constructor accepts a `name` string and a `values` string array.</span></span> <span data-ttu-id="5ed1a-145">Estos valores se usan en su método `OnResultExecuting` para establecer un encabezado de respuesta.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-145">These values are used in its `OnResultExecuting` method to set a response header.</span></span> <span data-ttu-id="5ed1a-146">La clase completa se muestra en la sección [Convenciones de acción del modelo de página](#page-model-action-conventions) más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-146">The full class is shown in the [Page model action conventions](#page-model-action-conventions) section later in the topic.</span></span>

<span data-ttu-id="5ed1a-147">En la aplicación de ejemplo se usa la clase `AddHeaderAttribute` para agregar un encabezado (`GlobalHeader`) a todas las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-147">The sample app uses the `AddHeaderAttribute` class to add a header, `GlobalHeader`, to all of the pages in the app:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Conventions/GlobalHeaderPageApplicationModelConvention.cs?name=snippet1)]

<span data-ttu-id="5ed1a-148">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-148">*Startup.cs*:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet2)]

<span data-ttu-id="5ed1a-149">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-149">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que GlobalHeader se ha agregado.](razor-pages-convention-features/_static/about-page-global-header.png)

## <a name="page-route-action-conventions"></a><span data-ttu-id="5ed1a-151">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="5ed1a-151">Page route action conventions</span></span>

<span data-ttu-id="5ed1a-152">El proveedor de modelos de ruta predeterminado que se deriva de [IPageRouteModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelprovider) invoca convenciones diseñadas para proporcionar puntos de extensibilidad que permitan configurar rutas de página.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-152">The default route model provider that derives from [IPageRouteModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelprovider) invokes conventions which are designed to provide extensibility points for configuring page routes.</span></span>

<span data-ttu-id="5ed1a-153">**Convención de modelo de ruta de carpeta**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-153">**Folder route model convention**</span></span>

<span data-ttu-id="5ed1a-154">Use [AddFolderRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addfolderroutemodelconvention) para crear y agregar un [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) que invoque una acción en el modelo [PageRouteModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageroutemodel) de todas las páginas contenidas en la carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-154">Use [AddFolderRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addfolderroutemodelconvention) to create and add an [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) that invokes an action on the [PageRouteModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageroutemodel) for all of the pages under the specified folder.</span></span>

<span data-ttu-id="5ed1a-155">En la aplicación de ejemplo se usa `AddFolderRouteModelConvention` para agregar una plantilla de ruta `{otherPagesTemplate?}` a las páginas de la carpeta *OtherPages*:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-155">The sample app uses `AddFolderRouteModelConvention` to add an `{otherPagesTemplate?}` route template to the pages in the *OtherPages* folder:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet3)]

> [!NOTE]
> <span data-ttu-id="5ed1a-156">La propiedad `Order` de `AttributeRouteModel` está establecida en `1`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-156">The `Order` property for the `AttributeRouteModel` is set to `1`.</span></span> <span data-ttu-id="5ed1a-157">Esto garantiza que la plantilla de `{globalTemplate?}` (configurada anteriormente en este tema) tiene prioridad para colocarse en la primera posición de valor de datos de ruta cuando se proporcione un solo valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-157">This ensures that the template for `{globalTemplate?}` (set earlier in the topic) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="5ed1a-158">Si la página Page1 se solicita en `/OtherPages/Page1/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 0`) y no `RouteData.Values["otherPagesTemplate"]` (`Order = 1`), debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-158">If the Page1 page is requested at `/OtherPages/Page1/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 0`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 1`) due to setting the `Order` property.</span></span>

<span data-ttu-id="5ed1a-159">Solicite la página Page1 del ejemplo en `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-159">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` and inspect the result:</span></span>

![Page1 en la carpeta OtherPages solicitada con un segmento de ruta de GlobalRouteValue y OtherPagesRouteValue](razor-pages-convention-features/_static/otherpages-page1-global-and-otherpages-templates.png)

<span data-ttu-id="5ed1a-162">**Convención de modelo de ruta de página**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-162">**Page route model convention**</span></span>

<span data-ttu-id="5ed1a-163">Use [AddPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addpageroutemodelconvention) para crear y agregar un [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) que invoque una acción en el modelo [PageRouteModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageroutemodel) de la página con el nombre especificado.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-163">Use [AddPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addpageroutemodelconvention) to create and add an [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) that invokes an action on the [PageRouteModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageroutemodel) for the page with the specified name.</span></span>

<span data-ttu-id="5ed1a-164">En la aplicación de ejemplo se usa `AddPageRouteModelConvention` para agregar una plantilla de ruta `{aboutTemplate?}` a la página About:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-164">The sample app uses `AddPageRouteModelConvention` to add an `{aboutTemplate?}` route template to the About page:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet4)]

> [!NOTE]
> <span data-ttu-id="5ed1a-165">La propiedad `Order` de `AttributeRouteModel` está establecida en `1`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-165">The `Order` property for the `AttributeRouteModel` is set to `1`.</span></span> <span data-ttu-id="5ed1a-166">Esto garantiza que la plantilla de `{globalTemplate?}` (configurada anteriormente en este tema) tiene prioridad para colocarse en la primera posición de valor de datos de ruta cuando se proporcione un solo valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-166">This ensures that the template for `{globalTemplate?}` (set earlier in the topic) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="5ed1a-167">Si la página About se solicita en `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 0`) y no `RouteData.Values["aboutTemplate"]` (`Order = 1`), debido a la configuración de la propiedad `Order`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-167">If the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 0`) and not `RouteData.Values["aboutTemplate"]` (`Order = 1`) due to setting the `Order` property.</span></span>

<span data-ttu-id="5ed1a-168">Solicite la página About del ejemplo en `localhost:5000/About/GlobalRouteValue/AboutRouteValue` y revise el resultado:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-168">Request the sample's About page at `localhost:5000/About/GlobalRouteValue/AboutRouteValue` and inspect the result:</span></span>

![La página About se solicita con los segmentos de ruta de GlobalRouteValue y AboutRouteValue.](razor-pages-convention-features/_static/about-page-global-and-about-templates.png)

## <a name="configure-a-page-route"></a><span data-ttu-id="5ed1a-171">Configurar una ruta de página</span><span class="sxs-lookup"><span data-stu-id="5ed1a-171">Configure a page route</span></span>

<span data-ttu-id="5ed1a-172">Use [AddPageRoute](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.addpageroute) para configurar una ruta a una página en la ruta de acceso de página especificada.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-172">Use [AddPageRoute](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.addpageroute) to configure a route to a page at the specified page path.</span></span> <span data-ttu-id="5ed1a-173">Los vínculos generados que apuntan a esa página usan la ruta especificada.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-173">Generated links to the page use your specified route.</span></span> <span data-ttu-id="5ed1a-174">`AddPageRoute` usa `AddPageRouteModelConvention` para establecer la ruta.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-174">`AddPageRoute` uses `AddPageRouteModelConvention` to establish the route.</span></span>

<span data-ttu-id="5ed1a-175">En la aplicación de ejemplo se crea una ruta a `/TheContactPage` para *Contact.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-175">The sample app creates a route to `/TheContactPage` for *Contact.cshtml*:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet5)]

<span data-ttu-id="5ed1a-176">A la página Contact también se puede llegar en `/Contact` a través de su ruta predeterminada.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-176">The Contact page can also be reached at `/Contact` via its default route.</span></span>

<span data-ttu-id="5ed1a-177">La ruta personalizada de la aplicación de ejemplo que lleva a la página Contact tiene cabida para un segmento de ruta `text` opcional (`{text?}`).</span><span class="sxs-lookup"><span data-stu-id="5ed1a-177">The sample app's custom route to the Contact page allows for an optional `text` route segment (`{text?}`).</span></span> <span data-ttu-id="5ed1a-178">La página también incluye este segmento opcional en su directiva `@page` por si el usuario que la visita tiene acceso a la página en su ruta `/Contact`:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-178">The page also includes this optional segment in its `@page` directive in case the visitor accesses the page at its `/Contact` route:</span></span>

[!code-cshtml[Main](razor-pages-convention-features/sample/Pages/Contact.cshtml?highlight=1)]

<span data-ttu-id="5ed1a-179">Observe que la dirección URL generada para el vínculo **Contact** en la página presentada refleja la ruta actualizada:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-179">Note that the URL generated for the **Contact** link in the rendered page reflects the updated route:</span></span>

![Vínculo Contact de la aplicación de ejemplo en la barra de navegación](razor-pages-convention-features/_static/contact-link.png)

![Si revisamos el vínculo Contact en el HTML presentado, vemos que href está establecido en "/TheContactPage".](razor-pages-convention-features/_static/contact-link-source.png)

<span data-ttu-id="5ed1a-182">Visite la página Contact a través de su ruta normal, `/Contact`, o de la ruta personalizada, `/TheContactPage`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-182">Visit the Contact page at either its ordinary route, `/Contact`, or the custom route, `/TheContactPage`.</span></span> <span data-ttu-id="5ed1a-183">Si se proporciona un segmento de ruta `text` adicional, la página muestra el segmento codificado en HTML que se ha proporcionado:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-183">If you supply an additional `text` route segment, the page shows the HTML-encoded segment that you provide:</span></span>

![Ejemplo del explorador Edge en el que se proporciona un segmento de ruta opcional "text" de "TextValue" en la dirección URL](razor-pages-convention-features/_static/route-segment-with-custom-route.png)

## <a name="page-model-action-conventions"></a><span data-ttu-id="5ed1a-186">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="5ed1a-186">Page model action conventions</span></span>

<span data-ttu-id="5ed1a-187">El proveedor de modelos de página predeterminado que implementa [IPageApplicationModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelprovider) invoca convenciones que están diseñadas para proporcionar puntos de extensibilidad que permitan configurar modelos de página.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-187">The default page model provider that implements [IPageApplicationModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelprovider) invokes conventions which are designed to provide extensibility points for configuring page models.</span></span> <span data-ttu-id="5ed1a-188">Estas convenciones son útiles al crear y modificar características de detección y procesamiento de páginas.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-188">These conventions are useful when building and modifying page discovery and processing features.</span></span>

<span data-ttu-id="5ed1a-189">En los ejemplos de esta sección, la aplicación de ejemplo usa una clase `AddHeaderAttribute` (que es un atributo [ResultFilterAttribute](/dotnet/api/microsoft.aspnetcore.mvc.filters.resultfilterattribute)) que se aplica un encabezado de respuesta:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-189">For the examples in this section, the sample app uses an `AddHeaderAttribute` class, which is a [ResultFilterAttribute](/dotnet/api/microsoft.aspnetcore.mvc.filters.resultfilterattribute), that applies a response header:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Filters/AddHeader.cs?name=snippet1)]

<span data-ttu-id="5ed1a-190">Si empleamos convenciones, el ejemplo indica cómo aplicar el atributo a todas las páginas de una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-190">Using conventions, the sample demonstrates how to apply the attribute to all of the pages in a folder and to a single page.</span></span>

<span data-ttu-id="5ed1a-191">**Convención de modelo de aplicación de carpeta**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-191">**Folder app model convention**</span></span>

<span data-ttu-id="5ed1a-192">Use [AddFolderApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addfolderapplicationmodelconvention) para crear y agregar un [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) que invoque una acción en las instancias de [PageApplicationModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageapplicationmodel) de todas las páginas contenidas en la carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-192">Use [AddFolderApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addfolderapplicationmodelconvention) to create and add an [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) that invokes an action on [PageApplicationModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageapplicationmodel) instances for all pages under the specified folder.</span></span>

<span data-ttu-id="5ed1a-193">En el ejemplo se demuestra el uso de `AddFolderApplicationModelConvention` agregando un encabezado (`OtherPagesHeader`) a las páginas de la carpeta *OtherPages* de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-193">The sample demonstrates the use of `AddFolderApplicationModelConvention` by adding a header, `OtherPagesHeader`, to the pages inside the *OtherPages* folder of the app:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet6)]

<span data-ttu-id="5ed1a-194">Solicite la página Page1 del ejemplo en `localhost:5000/OtherPages/Page1` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-194">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página OtherPages/Page1 ponen de manifiesto que OtherPagesHeader se ha agregado.](razor-pages-convention-features/_static/page1-otherpages-header.png)

<span data-ttu-id="5ed1a-196">**Convención de modelo de aplicación de página**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-196">**Page app model convention**</span></span>

<span data-ttu-id="5ed1a-197">Use [AddPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addpageapplicationmodelconvention) para crear y agregar un [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) que invoque una acción en el modelo [PageApplicationModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageapplicationmodel) de la página con el nombre especificado.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-197">Use [AddPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addpageapplicationmodelconvention) to create and add an [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) that invokes an action on the [PageApplicationModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageapplicationmodel) for the page with the speciifed name.</span></span>

<span data-ttu-id="5ed1a-198">En el ejemplo se demuestra el uso de `AddPageApplicationModelConvention` agregando un encabezado (`AboutHeader`) a la página About:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-198">The sample demonstrates the use of `AddPageApplicationModelConvention` by adding a header, `AboutHeader`, to the About page:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet7)]

<span data-ttu-id="5ed1a-199">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-199">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que AboutHeader se ha agregado.](razor-pages-convention-features/_static/about-page-about-header.png)

<span data-ttu-id="5ed1a-201">**Configurar un filtro**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-201">**Configure a filter**</span></span>

<span data-ttu-id="5ed1a-202">[ConfigureFilter](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.configurefilter) permite configurar el filtro que se quiere aplicar.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-202">[ConfigureFilter](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.configurefilter) configures the specified filter to apply.</span></span> <span data-ttu-id="5ed1a-203">Se puede implementar una clase de filtro, pero en la aplicación de ejemplo se muestra cómo implementar un filtro en una expresión lambda, cosa que sucede en segundo plano como una fábrica que devuelve un filtro:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-203">You can implement a filter class, but the sample app shows how to implement a filter in a lambda expression, which is implemented behind-the-scenes as a factory that returns a filter:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet8)]

<span data-ttu-id="5ed1a-204">El modelo de páginas de aplicación se usa para comprobar la ruta de acceso relativa de los segmentos que conducen a la página Page2 en la carpeta *OtherPages*.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-204">The page app model is used to check the relative path for segments that lead to the Page2 page in the *OtherPages* folder.</span></span> <span data-ttu-id="5ed1a-205">Si la condición se supera, se agrega un encabezado.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-205">If the condition passes, a header is added.</span></span> <span data-ttu-id="5ed1a-206">Si no, se aplica `EmptyFilter`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-206">If not, the `EmptyFilter` is applied.</span></span>

<span data-ttu-id="5ed1a-207">`EmptyFilter` es un [filtro de acciones](xref:mvc/controllers/filters#action-filters).</span><span class="sxs-lookup"><span data-stu-id="5ed1a-207">`EmptyFilter` is an [Action filter](xref:mvc/controllers/filters#action-filters).</span></span> <span data-ttu-id="5ed1a-208">Las páginas de Razor pasan por alto los filtros de acción, así que `EmptyFilter` no funciona del modo previsto si la ruta de acceso no contiene `OtherPages/Page2`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-208">Since Action filters are ignored by Razor Pages, the `EmptyFilter` no-ops as intended if the path doesn't contain `OtherPages/Page2`.</span></span>

<span data-ttu-id="5ed1a-209">Solicite la página Page2 del ejemplo en `localhost:5000/OtherPages/Page2` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-209">Request the sample's Page2 page at `localhost:5000/OtherPages/Page2` and inspect the headers to view the result:</span></span>

![OtherPagesPage2Header se agrega a la respuesta de Page2.](razor-pages-convention-features/_static/page2-filter-header.png)

<span data-ttu-id="5ed1a-211">**Configurar una fábrica de filtros**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-211">**Configure a filter factory**</span></span>

<span data-ttu-id="5ed1a-212">[ConfigureFilter](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.configurefilter?view=aspnetcore-2.0#Microsoft_Extensions_DependencyInjection_PageConventionCollectionExtensions_ConfigureFilter_Microsoft_AspNetCore_Mvc_ApplicationModels_PageConventionCollection_System_Func_Microsoft_AspNetCore_Mvc_ApplicationModels_PageApplicationModel_Microsoft_AspNetCore_Mvc_Filters_IFilterMetadata__) configura la fábrica especificada para aplicar [filtros](xref:mvc/controllers/filters) a todas las páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-212">[ConfigureFilter](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.configurefilter?view=aspnetcore-2.0#Microsoft_Extensions_DependencyInjection_PageConventionCollectionExtensions_ConfigureFilter_Microsoft_AspNetCore_Mvc_ApplicationModels_PageConventionCollection_System_Func_Microsoft_AspNetCore_Mvc_ApplicationModels_PageApplicationModel_Microsoft_AspNetCore_Mvc_Filters_IFilterMetadata__) configures the specified factory to apply [filters](xref:mvc/controllers/filters) to all Razor Pages.</span></span>

<span data-ttu-id="5ed1a-213">En la aplicación de ejemplo se proporciona un ejemplo del uso de una [fábrica de filtros](xref:mvc/controllers/filters#ifilterfactory), para lo cual se agrega un encabezado (`FilterFactoryHeader`) con dos valores a las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-213">The sample app provides an example of using a [filter factory](xref:mvc/controllers/filters#ifilterfactory) by adding a header, `FilterFactoryHeader`, with two values to the app's pages:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet9)]

<span data-ttu-id="5ed1a-214">*AddHeaderWithFactory.cs*:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-214">*AddHeaderWithFactory.cs*:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Factories/AddHeaderWithFactory.cs?name=snippet1)]

<span data-ttu-id="5ed1a-215">Solicite la página About del ejemplo en `localhost:5000/About` y revise los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-215">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Los encabezados de respuesta de la página About ponen de manifiesto que se han agregado dos encabezados FilterFactoryHeader.](razor-pages-convention-features/_static/about-page-filter-factory-header.png)

## <a name="replace-the-default-page-app-model-provider"></a><span data-ttu-id="5ed1a-217">Reemplazar el proveedor de modelo de aplicación de página predeterminado</span><span class="sxs-lookup"><span data-stu-id="5ed1a-217">Replace the default page app model provider</span></span>

<span data-ttu-id="5ed1a-218">Las páginas de Razor usan la interfaz `IPageApplicationModelProvider` para crear un [DefaultPageApplicationModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.internal.defaultpageapplicationmodelprovider).</span><span class="sxs-lookup"><span data-stu-id="5ed1a-218">Razor Pages uses the `IPageApplicationModelProvider` interface to create a [DefaultPageApplicationModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.internal.defaultpageapplicationmodelprovider).</span></span> <span data-ttu-id="5ed1a-219">Puede hacer uso del proveedor de modelo predeterminado para proporcionar su propia lógica de implementación de detección y procesamiento de controladores.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-219">You can inherit from the default model provider to provide your own implementation logic for handler discovery and processing.</span></span> <span data-ttu-id="5ed1a-220">La implementación predeterminada ([origen de referencia](https://github.com/aspnet/Mvc/blob/rel/2.0.1/src/Microsoft.AspNetCore.Mvc.RazorPages/Internal/DefaultPageApplicationModelProvider.cs)) establece convenciones para la nomenclatura de métodos de control *sin nombre* y *con nombre*, descrita más abajo.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-220">The default implementation ([reference source](https://github.com/aspnet/Mvc/blob/rel/2.0.1/src/Microsoft.AspNetCore.Mvc.RazorPages/Internal/DefaultPageApplicationModelProvider.cs)) establishes conventions for *unnamed* and *named* handler naming, which is described below.</span></span>

<span data-ttu-id="5ed1a-221">**Métodos de control sin nombre predeterminados**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-221">**Default unnamed handler methods**</span></span>

<span data-ttu-id="5ed1a-222">Los métodos de control de verbos HTTP (métodos de controlador "sin nombre") siguen la convención: `On<HTTP verb>[Async]` (anexar `Async` es opcional, pero recomendable en los métodos asincrónicos).</span><span class="sxs-lookup"><span data-stu-id="5ed1a-222">Handler methods for HTTP verbs ("unnamed" handler methods) follow a convention: `On<HTTP verb>[Async]` (appending `Async` is optional but recommended for async methods).</span></span>

| <span data-ttu-id="5ed1a-223">Método de control sin nombre</span><span class="sxs-lookup"><span data-stu-id="5ed1a-223">Unnamed handler method</span></span>     | <span data-ttu-id="5ed1a-224">Operación</span><span class="sxs-lookup"><span data-stu-id="5ed1a-224">Operation</span></span>                      |
| -------------------------- | ------------------------------ |
| `OnGet`/`OnGetAsync`       | <span data-ttu-id="5ed1a-225">Inicializar el estado de la página</span><span class="sxs-lookup"><span data-stu-id="5ed1a-225">Initialize the page state.</span></span>     |
| `OnPost`/`OnPostAsync`     | <span data-ttu-id="5ed1a-226">Controlar las solicitudes POST</span><span class="sxs-lookup"><span data-stu-id="5ed1a-226">Handle POST requests.</span></span>          |
| `OnDelete`/`OnDeleteAsync` | <span data-ttu-id="5ed1a-227">Controlar las solicitudes DELETE&#8224;</span><span class="sxs-lookup"><span data-stu-id="5ed1a-227">Handle DELETE requests&#8224;.</span></span> |
| `OnPut`/`OnPutAsync`       | <span data-ttu-id="5ed1a-228">Controlar las solicitudes PUT&#8224;</span><span class="sxs-lookup"><span data-stu-id="5ed1a-228">Handle PUT requests&#8224;.</span></span>    |
| `OnPatch`/`OnPatchAsync`   | <span data-ttu-id="5ed1a-229">Controlar las solicitudes PATCH&#8224;</span><span class="sxs-lookup"><span data-stu-id="5ed1a-229">Handle PATCH requests&#8224;.</span></span>  |

<span data-ttu-id="5ed1a-230">&#8224;Usadas para realizar llamadas API a la página.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-230">&#8224;Used for making API calls to the page.</span></span>

<span data-ttu-id="5ed1a-231">**Métodos de control con nombre predeterminados**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-231">**Default named handler methods**</span></span>

<span data-ttu-id="5ed1a-232">Los métodos de control proporcionados por el desarrollador (métodos de control "con nombre") siguen una convención similar.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-232">Handler methods provided by the developer ("named" handler methods) follow a similar convention.</span></span> <span data-ttu-id="5ed1a-233">El nombre del método de control aparece tras el verbo HTTP o entre el verbo HTTP y `Async`: `On<HTTP verb><handler name>[Async]` (anexar `Async` es opcional, pero recomendable en los métodos asincrónicos).</span><span class="sxs-lookup"><span data-stu-id="5ed1a-233">The handler name appears after the HTTP verb or between the HTTP verb and `Async`: `On<HTTP verb><handler name>[Async]` (appending `Async` is optional but recommended for async methods).</span></span> <span data-ttu-id="5ed1a-234">Por ejemplo, los métodos que procesan mensajes pueden asimilar la nomenclatura se muestra en la siguiente tabla.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-234">For example, methods that process messages might take the naming shown in the table below.</span></span>

| <span data-ttu-id="5ed1a-235">Ejemplo de método de control con nombre</span><span class="sxs-lookup"><span data-stu-id="5ed1a-235">Example named handler method</span></span>             | <span data-ttu-id="5ed1a-236">Operación de ejemplo</span><span class="sxs-lookup"><span data-stu-id="5ed1a-236">Example operation</span></span>        |
| ---------------------------------------- | ------------------------ |
| `OnGetMessage`/`OnGetMessageAsync`       | <span data-ttu-id="5ed1a-237">Obtener un mensaje</span><span class="sxs-lookup"><span data-stu-id="5ed1a-237">Obtain a message.</span></span>        |
| `OnPostMessage`/`OnPostMessageAsync`     | <span data-ttu-id="5ed1a-238">Publicar un mensaje (POST)</span><span class="sxs-lookup"><span data-stu-id="5ed1a-238">POST a message.</span></span>          |
| `OnDeleteMessage`/`OnDeleteMessageAsync` | <span data-ttu-id="5ed1a-239">Eliminar un mensaje (DELETE)&#8224;</span><span class="sxs-lookup"><span data-stu-id="5ed1a-239">DELETE a message&#8224;.</span></span> |
| `OnPutMessage`/`OnPutMessageAsync`       | <span data-ttu-id="5ed1a-240">Colocar un mensaje (PUT)&#8224;</span><span class="sxs-lookup"><span data-stu-id="5ed1a-240">PUT a message&#8224;.</span></span>    |
| `OnPatchMessage`/`OnPatchMessageAsync`   | <span data-ttu-id="5ed1a-241">Aplicar una revisión a un mensaje (PATCH)#8224;</span><span class="sxs-lookup"><span data-stu-id="5ed1a-241">PATCH a message&#8224;.</span></span>  |

<span data-ttu-id="5ed1a-242">&#8224;Usadas para realizar llamadas API a la página.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-242">&#8224;Used for making API calls to the page.</span></span>

<span data-ttu-id="5ed1a-243">**Personalizar los nombres de los métodos de control**</span><span class="sxs-lookup"><span data-stu-id="5ed1a-243">**Customize handler method names**</span></span>

<span data-ttu-id="5ed1a-244">Imaginemos que quiere cambiar la forma en que se denominan los métodos de control con y sin nombre.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-244">Assume that you prefer to change the way unnamed and named handler methods are named.</span></span> <span data-ttu-id="5ed1a-245">Un esquema de nomenclatura alternativo consiste en evitar que los nombres de método comiencen por "On" y usar el primer segmento de palabra para establecer el verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-245">An alternative naming scheme is to avoid starting the method names with "On" and use the first word segment to determine the HTTP verb.</span></span> <span data-ttu-id="5ed1a-246">Puede realizar otros cambios, como convertir los verbos DELETE, PUT y PATCH en POST.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-246">You can make other changes, such as converting the verbs for DELETE, PUT, and PATCH to POST.</span></span> <span data-ttu-id="5ed1a-247">Un esquema de este tipo proporcionaría los nombres de método mostrados en la siguiente tabla.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-247">Such a scheme provides the method names shown in the following table.</span></span>

| <span data-ttu-id="5ed1a-248">Método de control</span><span class="sxs-lookup"><span data-stu-id="5ed1a-248">Handler method</span></span>                       | <span data-ttu-id="5ed1a-249">Operación</span><span class="sxs-lookup"><span data-stu-id="5ed1a-249">Operation</span></span>                      |
| ------------------------------------ | ------------------------------ |
| `Get`                                | <span data-ttu-id="5ed1a-250">Inicializar el estado de la página</span><span class="sxs-lookup"><span data-stu-id="5ed1a-250">Initialize the page state.</span></span>     |
| `Post`/`PostAsync`                   | <span data-ttu-id="5ed1a-251">Controlar las solicitudes POST</span><span class="sxs-lookup"><span data-stu-id="5ed1a-251">Handle POST requests.</span></span>          |
| `Delete`/`DeleteAsync`               | <span data-ttu-id="5ed1a-252">Controlar las solicitudes DELETE&#8224;</span><span class="sxs-lookup"><span data-stu-id="5ed1a-252">Handle DELETE requests&#8224;.</span></span> |
| `Put`/`PutAsync`                     | <span data-ttu-id="5ed1a-253">Controlar las solicitudes PUT&#8224;</span><span class="sxs-lookup"><span data-stu-id="5ed1a-253">Handle PUT requests&#8224;.</span></span>    |
| `Patch`/`PatchAsync`                 | <span data-ttu-id="5ed1a-254">Controlar las solicitudes PATCH&#8224;</span><span class="sxs-lookup"><span data-stu-id="5ed1a-254">Handle PATCH requests&#8224;.</span></span>  |
| `GetMessage`                         | <span data-ttu-id="5ed1a-255">Obtener un mensaje</span><span class="sxs-lookup"><span data-stu-id="5ed1a-255">Obtain a message.</span></span>              |
| `PostMessage`/`PostMessageAsync`     | <span data-ttu-id="5ed1a-256">Publicar un mensaje (POST)</span><span class="sxs-lookup"><span data-stu-id="5ed1a-256">POST a message.</span></span>                |
| `DeleteMessage`/`DeleteMessageAsync` | <span data-ttu-id="5ed1a-257">Publicar (POST) un mensaje para eliminarlo</span><span class="sxs-lookup"><span data-stu-id="5ed1a-257">POST a message to delete.</span></span>      |
| `PutMessage`/`PutMessageAsync`       | <span data-ttu-id="5ed1a-258">Publicar (POST) un mensaje para colocarlo</span><span class="sxs-lookup"><span data-stu-id="5ed1a-258">POST a message to put.</span></span>         |
| `PatchMessage`/`PatchMessageAsync`   | <span data-ttu-id="5ed1a-259">Publicar (POST) un mensaje para aplicarle una revisión</span><span class="sxs-lookup"><span data-stu-id="5ed1a-259">POST a message to patch.</span></span>       |

<span data-ttu-id="5ed1a-260">&#8224;Usadas para realizar llamadas API a la página.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-260">&#8224;Used for making API calls to the page.</span></span>

<span data-ttu-id="5ed1a-261">Para establecer este esquema, haga uso de la clase `DefaultPageApplicationModelProvider` e invalide el método [CreateHandlerModel](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.internal.defaultpageapplicationmodelprovider.createhandlermodel) para proporcionar lógica personalizada que resuelva nombres de controlador de [PageModel](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.pagemodel).</span><span class="sxs-lookup"><span data-stu-id="5ed1a-261">To establish this scheme, inherit from the `DefaultPageApplicationModelProvider` class and override the [CreateHandlerModel](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.internal.defaultpageapplicationmodelprovider.createhandlermodel) method to supply custom logic for resolving [PageModel](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.pagemodel) handler names.</span></span> <span data-ttu-id="5ed1a-262">En la aplicación de ejemplo se muestra cómo llevar esto a cabo en su propia clase `CustomPageApplicationModelProvider`:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-262">The sample app shows you how this is done in its `CustomPageApplicationModelProvider` class:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/CustomPageApplicationModelProvider.cs?name=snippet1&highlight=1-2,45-46,64-68,78-85,87,92,106)]

<span data-ttu-id="5ed1a-263">Esta clase de caracteriza por lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-263">Highlights of the class include:</span></span>

* <span data-ttu-id="5ed1a-264">Hereda de `DefaultPageApplicationModelProvider`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-264">The class inherits from `DefaultPageApplicationModelProvider`.</span></span>
* <span data-ttu-id="5ed1a-265">`TryParseHandlerMethod` procesa un método de control para averiguar el verbo HTTP (`httpMethod`) y el nombre del método de control con nombre (`handlerName`) al crear la `PageHandlerModel`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-265">The `TryParseHandlerMethod` processes a handler to determine the HTTP verb (`httpMethod`) and named handler name (`handlerName`) when creating the `PageHandlerModel`.</span></span>
  * <span data-ttu-id="5ed1a-266">Si lo hay, el postfijo `Async` se omite.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-266">An `Async` postfix is ignored, if present.</span></span>
  * <span data-ttu-id="5ed1a-267">Se distingue entre mayúsculas y minúsculas al analizar el verbo HTTP desde el nombre del método.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-267">Casing is used to parse the HTTP verb from the method name.</span></span>
  * <span data-ttu-id="5ed1a-268">Cuando el nombre del método (sin `Async`) es igual que el nombre del verbo HTTP, no hay ningún método de control con nombre.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-268">When the method name (without `Async`) is equal to the HTTP verb name, there's no named handler.</span></span> <span data-ttu-id="5ed1a-269">`handlerName` está establecido en `null` y el nombre del método es `Get`, `Post`, `Delete`, `Put` o `Patch`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-269">The `handlerName` is set to `null`, and the method name is `Get`, `Post`, `Delete`, `Put`, or `Patch`.</span></span>
  * <span data-ttu-id="5ed1a-270">Cuando el nombre del método (sin `Async`) es más largo que el nombre del verbo HTTP, sí hay un método de control con nombre.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-270">When the method name (without `Async`) is longer than the HTTP verb name, there's a named handler.</span></span> <span data-ttu-id="5ed1a-271">La propiedad `handlerName` se establece como `<method name (less 'Async', if present)>`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-271">The `handlerName` is set to `<method name (less 'Async', if present)>`.</span></span> <span data-ttu-id="5ed1a-272">Por ejemplo, tanto "GetMessage" como "GetMessageAsync" producen el nombre de método de control "GetMessage".</span><span class="sxs-lookup"><span data-stu-id="5ed1a-272">For example, both "GetMessage" and "GetMessageAsync" yield a handler name of "GetMessage".</span></span>
  * <span data-ttu-id="5ed1a-273">Los verbos HTTP DELETE, PUT y PATCH se convierten en POST.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-273">DELETE, PUT, and PATCH HTTP verbs are converted to POST.</span></span>

<span data-ttu-id="5ed1a-274">Registre `CustomPageApplicationModelProvider` en la clase `Startup`:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-274">Register the `CustomPageApplicationModelProvider` in the `Startup` class:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet10)]

<span data-ttu-id="5ed1a-275">El modelo de página en *Index.cshtml.cs* muestra cómo se cambian las convenciones de nomenclatura de métodos de control habituales de las páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-275">The page model in *Index.cshtml.cs* shows how the ordinary handler method naming conventions are changed for pages in the app.</span></span> <span data-ttu-id="5ed1a-276">La nomenclatura con el prefijo "On" típicamente usado en páginas de Razor se quita.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-276">The ordinary "On" prefix naming used with Razor Pages is removed.</span></span> <span data-ttu-id="5ed1a-277">El método que inicializa el estado de página ahora se denomina `Get`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-277">The method that initializes the page state is now named `Get`.</span></span> <span data-ttu-id="5ed1a-278">Esta convención, usada a lo largo de la aplicación, se puede ver si se abre un modelo de página de cualquiera de las páginas.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-278">You can see this convention used throughout the app if you open any page model for any of the pages.</span></span>

<span data-ttu-id="5ed1a-279">El resto de métodos comienzan por el verbo HTTP, que describe su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-279">Each of the other methods start with the HTTP verb that describes its processing.</span></span> <span data-ttu-id="5ed1a-280">Los dos métodos que empiezan por `Delete` se tratarían normalmente como verbos HTTP DELETE, pero la lógica de `TryParseHandlerMethod` establece explícitamente el verbo POST para ambos métodos de control.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-280">The two methods that start with `Delete` would normally be treated as DELETE HTTP verbs, but the logic in `TryParseHandlerMethod` explicitly sets the verb to POST for both handlers.</span></span>

<span data-ttu-id="5ed1a-281">Recuerde que `Async` es opcional entre `DeleteAllMessages` y `DeleteMessageAsync`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-281">Note that `Async` is optional between `DeleteAllMessages` and `DeleteMessageAsync`.</span></span> <span data-ttu-id="5ed1a-282">Ambos son métodos asincrónicos, pero puede optar entre usar el postfijo `Async` o no. Le recomendamos que lo haga.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-282">They're both asynchronous methods, but you can choose to use the `Async` postfix or not; we recommend that you do.</span></span> <span data-ttu-id="5ed1a-283">`DeleteAllMessages` se usa aquí con fines de demostración, pero se recomienda denominar este método `DeleteAllMessagesAsync`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-283">`DeleteAllMessages` is used here for demonstration purposes, but we recommend that you name such a method `DeleteAllMessagesAsync`.</span></span> <span data-ttu-id="5ed1a-284">Aunque no afecta al procesamiento de la implementación de ejemplo, usar el postfijo `Async` resalta el hecho de que es un método asincrónico.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-284">It doesn't affect the processing of the sample's implementation, but using the `Async` postfix calls out the fact that it's an asynchronous method.</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Pages/Index.cshtml.cs?name=snippet1&highlight=1,6,16,29)]

<span data-ttu-id="5ed1a-285">Fíjese en que los nombres de control proporcionados en *Index.cshtml* coinciden con los métodos de control `DeleteAllMessages` y `DeleteMessageAsync`:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-285">Note the handler names provided in *Index.cshtml* match the `DeleteAllMessages` and `DeleteMessageAsync` handler methods:</span></span>

[!code-cshtml[Main](razor-pages-convention-features/sample/Pages/Index.cshtml?range=29-60&highlight=7-8,24-25)]

<span data-ttu-id="5ed1a-286">`Async` en el nombre del método de control `DeleteMessageAsync` se descarta por medio de `TryParseHandlerMethod` para que coincida con la solicitud POST al método.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-286">`Async` in the handler method name `DeleteMessageAsync` is factored out by the `TryParseHandlerMethod` for handler matching of POST request to method.</span></span> <span data-ttu-id="5ed1a-287">El nombre `asp-page-handler` de `DeleteMessage` coincide con el método de control `DeleteMessageAsync`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-287">The `asp-page-handler` name of `DeleteMessage` is matched to the handler method `DeleteMessageAsync`.</span></span>

## <a name="mvc-filters-and-the-page-filter-ipagefilter"></a><span data-ttu-id="5ed1a-288">Filtros de MVC y filtro de página (IPageFilter)</span><span class="sxs-lookup"><span data-stu-id="5ed1a-288">MVC Filters and the Page filter (IPageFilter)</span></span>

<span data-ttu-id="5ed1a-289">Las páginas de Razor no tienen en cuenta los [filtros de acciones](xref:mvc/controllers/filters#action-filters) de MVC, porque en este tipo de páginas se usan métodos de control.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-289">MVC [Action filters](xref:mvc/controllers/filters#action-filters) are ignored by Razor Pages, since Razor Pages use handler methods.</span></span> <span data-ttu-id="5ed1a-290">Hay disponibles otros tipos de filtro de MVC que puede usar: [Authorization](xref:mvc/controllers/filters#authorization-filters), [Exception](xref:mvc/controllers/filters#exception-filters), [Resource](xref:mvc/controllers/filters#resource-filters) y [Result](xref:mvc/controllers/filters#result-filters).</span><span class="sxs-lookup"><span data-stu-id="5ed1a-290">Other types of MVC filters are available for you to use: [Authorization](xref:mvc/controllers/filters#authorization-filters), [Exception](xref:mvc/controllers/filters#exception-filters), [Resource](xref:mvc/controllers/filters#resource-filters), and [Result](xref:mvc/controllers/filters#result-filters).</span></span> <span data-ttu-id="5ed1a-291">Para más información, vea el tema [Filters](xref:mvc/controllers/filters) (Filtros).</span><span class="sxs-lookup"><span data-stu-id="5ed1a-291">For more information, see the [Filters](xref:mvc/controllers/filters) topic.</span></span>

<span data-ttu-id="5ed1a-292">El filtro de página ([IPageFilter](/dotnet/api/microsoft.aspnetcore.mvc.filters.ipagefilter)) es un filtro que se aplica a las páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-292">The Page filter ([IPageFilter](/dotnet/api/microsoft.aspnetcore.mvc.filters.ipagefilter)) is a filter that applies to Razor Pages.</span></span> <span data-ttu-id="5ed1a-293">Rodea la ejecución de un método de control de la página.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-293">It surrounds the execution of a page handler method.</span></span> <span data-ttu-id="5ed1a-294">Permite procesar código personalizado en las fases de ejecución del método de control de página.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-294">It allows you to process custom code at stages of page handler method execution.</span></span> <span data-ttu-id="5ed1a-295">Este es un ejemplo de la aplicación de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-295">Here's an example from the sample app:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Filters/ReplaceRouteValueFilterAttribute.cs?name=snippet1)]

<span data-ttu-id="5ed1a-296">Este filtro busca un valor de ruta de `globalTemplate` de "TriggerValue" y lo intercambia por "ReplacementValue".</span><span class="sxs-lookup"><span data-stu-id="5ed1a-296">This filter checks for a `globalTemplate` route value of "TriggerValue" and swaps in "ReplacementValue".</span></span>

<span data-ttu-id="5ed1a-297">El atributo `ReplaceRouteValueFilter` se puede aplicar directamente a un `PageModel`:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-297">The `ReplaceRouteValueFilter` attribute can be applied directly to a `PageModel`:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Pages/OtherPages/Page3.cshtml.cs?range=10-12&highlight=1)]

<span data-ttu-id="5ed1a-298">Solicite la página Page3 de la aplicación de ejemplo en `localhost:5000/OtherPages/Page3/TriggerValue`.</span><span class="sxs-lookup"><span data-stu-id="5ed1a-298">Request the Page3 page from the sample app with at `localhost:5000/OtherPages/Page3/TriggerValue`.</span></span> <span data-ttu-id="5ed1a-299">Observe cómo el filtro reemplaza el valor de ruta:</span><span class="sxs-lookup"><span data-stu-id="5ed1a-299">Notice how the filter replaces the route value:</span></span>

![La solicitud a OtherPages/Page3 con un segmento de ruta TriggerValue tiene como resultado que el filtro reemplaza el valor de ruta por ReplacementValue.](razor-pages-convention-features/_static/otherpages-page3-filter-replacement-value.png)

## <a name="see-also"></a><span data-ttu-id="5ed1a-301">Vea también</span><span class="sxs-lookup"><span data-stu-id="5ed1a-301">See also</span></span>

* [<span data-ttu-id="5ed1a-302">Convenciones de autorización de las páginas de Razor</span><span class="sxs-lookup"><span data-stu-id="5ed1a-302">Razor Pages authorization conventions</span></span>](xref:security/authorization/razor-pages-authorization)
