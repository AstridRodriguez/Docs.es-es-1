---
title: "Razor páginas ruta y la aplicación convención características de ASP.NET Core"
author: guardrex
description: "Descubra cómo enrutar y aplicación características convención del modelo proveedor ayudar a procesamiento, detección y control página enrutamiento."
ms.author: riande
manager: wpickett
ms.date: 10/23/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/razor-pages/razor-pages-convention-features
ms.openlocfilehash: 69475ca9abd4e732dc704ad6a8a2fffe219984f7
ms.sourcegitcommit: 3e303620a125325bb9abd4b2d315c106fb8c47fd
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/19/2018
---
# <a name="razor-pages-route-and-app-convention-features-in-aspnet-core"></a><span data-ttu-id="6c3a3-103">Razor páginas ruta y la aplicación convención características de ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="6c3a3-103">Razor Pages route and app convention features in ASP.NET Core</span></span>

<span data-ttu-id="6c3a3-104">Por [Luke Latham](https://github.com/guardrex)</span><span class="sxs-lookup"><span data-stu-id="6c3a3-104">By [Luke Latham](https://github.com/guardrex)</span></span>

<span data-ttu-id="6c3a3-105">Aprenda a usar página ruta y la aplicación de proveedor convención características del modelo para controlar el enrutamiento de la página, la detección y el procesamiento en las aplicaciones de las páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-105">Learn how to use page route and app model provider convention features to control page routing, discovery, and processing in Razor Pages apps.</span></span> <span data-ttu-id="6c3a3-106">Cuando necesite configurar rutas de una página personalizada para páginas individuales, configurar el enrutamiento a las páginas con la [AddPageRoute convención](#configure-a-page-route) se describe más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-106">When you need to configure custom page routes for individual pages, configure routing to pages with the [AddPageRoute convention](#configure-a-page-route) described later in this topic.</span></span>

<span data-ttu-id="6c3a3-107">Use la [aplicación de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/razor-pages/razor-pages-convention-features/sample) ([cómo descargar](xref:tutorials/index#how-to-download-a-sample)) para explorar las características descritas en este tema.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-107">Use the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/razor-pages/razor-pages-convention-features/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample)) to explore the features described in this topic.</span></span>

| <span data-ttu-id="6c3a3-108">Características</span><span class="sxs-lookup"><span data-stu-id="6c3a3-108">Features</span></span> | <span data-ttu-id="6c3a3-109">El ejemplo muestra cómo...</span><span class="sxs-lookup"><span data-stu-id="6c3a3-109">The sample demonstrates ...</span></span> |
| -------- | --------------------------- |
| [<span data-ttu-id="6c3a3-110">Convenciones de modelo de ruta y la aplicación</span><span class="sxs-lookup"><span data-stu-id="6c3a3-110">Route and app model conventions</span></span>](#add-route-and-app-model-conventions)<br><br><span data-ttu-id="6c3a3-111">Conventions.Add</span><span class="sxs-lookup"><span data-stu-id="6c3a3-111">Conventions.Add</span></span><ul><li><span data-ttu-id="6c3a3-112">IPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="6c3a3-112">IPageRouteModelConvention</span></span></li><li><span data-ttu-id="6c3a3-113">IPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="6c3a3-113">IPageApplicationModelConvention</span></span></li></ul> | <span data-ttu-id="6c3a3-114">Agregar una plantilla de ruta y un encabezado para las páginas de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-114">Adding a route template and header to an app's pages.</span></span> |
| [<span data-ttu-id="6c3a3-115">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="6c3a3-115">Page route action conventions</span></span>](#page-route-action-conventions)<ul><li><span data-ttu-id="6c3a3-116">AddFolderRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="6c3a3-116">AddFolderRouteModelConvention</span></span></li><li><span data-ttu-id="6c3a3-117">AddPageRouteModelConvention</span><span class="sxs-lookup"><span data-stu-id="6c3a3-117">AddPageRouteModelConvention</span></span></li><li><span data-ttu-id="6c3a3-118">AddPageRoute</span><span class="sxs-lookup"><span data-stu-id="6c3a3-118">AddPageRoute</span></span></li></ul> | <span data-ttu-id="6c3a3-119">Adición de una plantilla de ruta a las páginas en una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-119">Adding a route template to pages in a folder and to a single page.</span></span> |
| [<span data-ttu-id="6c3a3-120">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="6c3a3-120">Page model action conventions</span></span>](#page-model-action-conventions)<ul><li><span data-ttu-id="6c3a3-121">AddFolderApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="6c3a3-121">AddFolderApplicationModelConvention</span></span></li><li><span data-ttu-id="6c3a3-122">AddPageApplicationModelConvention</span><span class="sxs-lookup"><span data-stu-id="6c3a3-122">AddPageApplicationModelConvention</span></span></li><li><span data-ttu-id="6c3a3-123">ConfigureFilter (clase de filtro, expresión lambda o fábrica de filtro)</span><span class="sxs-lookup"><span data-stu-id="6c3a3-123">ConfigureFilter (filter class, lambda expression, or filter factory)</span></span></li></ul> | <span data-ttu-id="6c3a3-124">Agregar un encabezado a páginas en una carpeta, agregar un encabezado a una sola página y configurar un [la fábrica del filtro](xref:mvc/controllers/filters#ifilterfactory) para agregar un encabezado a las páginas de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-124">Adding a header to pages in a folder, adding a header to a single page, and configuring a [filter factory](xref:mvc/controllers/filters#ifilterfactory) to add a header to an app's pages.</span></span> |
| [<span data-ttu-id="6c3a3-125">Proveedor de modelo de aplicación de página predeterminado</span><span class="sxs-lookup"><span data-stu-id="6c3a3-125">Default page app model provider</span></span>](#replace-the-default-page-app-model-provider) | <span data-ttu-id="6c3a3-126">Reemplazar el proveedor del modelo de página predeterminado para cambiar las convenciones de nomenclatura de controlador.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-126">Replacing the default page model provider to change the conventions for handler naming.</span></span> |

## <a name="add-route-and-app-model-conventions"></a><span data-ttu-id="6c3a3-127">Agregar la ruta y la aplicación convenciones de modelo</span><span class="sxs-lookup"><span data-stu-id="6c3a3-127">Add route and app model conventions</span></span>

<span data-ttu-id="6c3a3-128">Agregue un delegado para [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) para agregar la ruta y la aplicación convenciones de modelo que se aplican a las páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-128">Add a delegate for [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) to add route and app model conventions that apply to Razor Pages.</span></span>

<span data-ttu-id="6c3a3-129">**Agregar una convención de modelo de ruta a todas las páginas**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-129">**Add a route model convention to all pages**</span></span>

<span data-ttu-id="6c3a3-130">Use [convenciones](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.razorpagesoptions.conventions) para crear y agregar un [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) a la colección de [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) instancias que se aplican durante el modelo de ruta y la página construcción.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-130">Use [Conventions](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.razorpagesoptions.conventions) to create and add an [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) to the collection of [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) instances that are applied during route and page model construction.</span></span>

<span data-ttu-id="6c3a3-131">La aplicación de ejemplo agrega un `{globalTemplate?}` plantilla de ruta para todas las páginas en la aplicación:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-131">The sample app adds a `{globalTemplate?}` route template to all of the pages in the app:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Conventions/GlobalTemplatePageRouteModelConvention.cs?name=snippet1)]

> [!NOTE]
> <span data-ttu-id="6c3a3-132">El `Order` propiedad para la `AttributeRouteModel` se establece en `0` (cero).</span><span class="sxs-lookup"><span data-stu-id="6c3a3-132">The `Order` property for the `AttributeRouteModel` is set to `0` (zero).</span></span> <span data-ttu-id="6c3a3-133">Esto garantiza que esta plantilla se dan prioridad para la primera posición del valor de datos de ruta cuando se proporciona un valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-133">This ensures that this template is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="6c3a3-134">Por ejemplo, el ejemplo agrega un `{aboutTemplate?}` plantilla de ruta posteriormente en este tema.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-134">For example, the sample adds an `{aboutTemplate?}` route template later in the topic.</span></span> <span data-ttu-id="6c3a3-135">El `{aboutTemplate?}` plantilla tiene un `Order` de `1`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-135">The `{aboutTemplate?}` template is given an `Order` of `1`.</span></span> <span data-ttu-id="6c3a3-136">Cuando se solicita la página About `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 0`) y no `RouteData.Values["aboutTemplate"]` (`Order = 1`) debido a la configuración del `Order` propiedad.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-136">When the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 0`) and not `RouteData.Values["aboutTemplate"]` (`Order = 1`) due to setting the `Order` property.</span></span>

<span data-ttu-id="6c3a3-137">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-137">*Startup.cs*:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet1)]

<span data-ttu-id="6c3a3-138">Página de información acerca del ejemplo en solicitud `localhost:5000/About/GlobalRouteValue` e inspeccionar el resultado:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-138">Request the sample's About page at `localhost:5000/About/GlobalRouteValue` and inspect the result:</span></span>

![Se solicitó la página acerca con un segmento de ruta de GlobalRouteValue.](razor-pages-convention-features/_static/about-page-global-template.png)

<span data-ttu-id="6c3a3-141">**Agregar una convención de modelo de aplicación a todas las páginas**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-141">**Add an app model convention to all pages**</span></span>

<span data-ttu-id="6c3a3-142">Use [convenciones](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.razorpagesoptions.conventions) para crear y agregar un [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) a la colección de [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) instancias que se aplican durante la ruta y la página construcción de modelo.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-142">Use [Conventions](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.razorpagesoptions.conventions) to create and add an [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) to the collection of [IPageConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageconvention) instances that are applied during route and page model construction.</span></span>

<span data-ttu-id="6c3a3-143">Para demostrar esta y otras convenciones posteriormente en este tema, la aplicación de ejemplo incluye una `AddHeaderAttribute` clase.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-143">To demonstrate this and other conventions later in the topic, the sample app includes an `AddHeaderAttribute` class.</span></span> <span data-ttu-id="6c3a3-144">El constructor de clase acepta un `name` cadena y un `values` matriz de cadenas.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-144">The class constructor accepts a `name` string and a `values` string array.</span></span> <span data-ttu-id="6c3a3-145">Estos valores se usan en su `OnResultExecuting` método para establecer un encabezado de respuesta.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-145">These values are used in its `OnResultExecuting` method to set a response header.</span></span> <span data-ttu-id="6c3a3-146">La clase completa se muestra en el [página convenciones de acción de modelo](#page-model-action-conventions) sección posteriormente en este tema.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-146">The full class is shown in the [Page model action conventions](#page-model-action-conventions) section later in the topic.</span></span>

<span data-ttu-id="6c3a3-147">La aplicación de ejemplo se usa el `AddHeaderAttribute` clase para agregar un encabezado, `GlobalHeader`, para todas las páginas en la aplicación:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-147">The sample app uses the `AddHeaderAttribute` class to add a header, `GlobalHeader`, to all of the pages in the app:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Conventions/GlobalHeaderPageApplicationModelConvention.cs?name=snippet1)]

<span data-ttu-id="6c3a3-148">*Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-148">*Startup.cs*:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet2)]

<span data-ttu-id="6c3a3-149">Página de información acerca del ejemplo en solicitud `localhost:5000/About` e inspeccionar los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-149">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Encabezados de respuesta de la página acerca de muestran que se ha agregado el GlobalHeader.](razor-pages-convention-features/_static/about-page-global-header.png)

## <a name="page-route-action-conventions"></a><span data-ttu-id="6c3a3-151">Convenciones de acción de ruta de página</span><span class="sxs-lookup"><span data-stu-id="6c3a3-151">Page route action conventions</span></span>

<span data-ttu-id="6c3a3-152">El proveedor de modelo de ruta predeterminado que se deriva de [IPageRouteModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelprovider) convenciones que están diseñadas para proporcionar puntos de extensibilidad para configurar las rutas de la página, se invoca.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-152">The default route model provider that derives from [IPageRouteModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelprovider) invokes conventions which are designed to provide extensibility points for configuring page routes.</span></span>

<span data-ttu-id="6c3a3-153">**Convención de modelo de ruta de carpeta**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-153">**Folder route model convention**</span></span>

<span data-ttu-id="6c3a3-154">Use [AddFolderRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addfolderroutemodelconvention) para crear y agregar un [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) que invoca una acción en el [PageRouteModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageroutemodel) para todas las páginas en el carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-154">Use [AddFolderRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addfolderroutemodelconvention) to create and add an [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) that invokes an action on the [PageRouteModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageroutemodel) for all of the pages under the specified folder.</span></span>

<span data-ttu-id="6c3a3-155">Los usos de la aplicación de ejemplo `AddFolderRouteModelConvention` para agregar una `{otherPagesTemplate?}` plantilla de ruta para las páginas en el *OtherPages* carpeta:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-155">The sample app uses `AddFolderRouteModelConvention` to add an `{otherPagesTemplate?}` route template to the pages in the *OtherPages* folder:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet3)]

> [!NOTE]
> <span data-ttu-id="6c3a3-156">El `Order` propiedad para la `AttributeRouteModel` está establecido en `1`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-156">The `Order` property for the `AttributeRouteModel` is set to `1`.</span></span> <span data-ttu-id="6c3a3-157">Esto garantiza que la plantilla para `{globalTemplate?}` (configurada anteriormente en el tema) tiene prioridad para los datos de ruta primer valor posición cuando se proporciona un valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-157">This ensures that the template for `{globalTemplate?}` (set earlier in the topic) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="6c3a3-158">Si se solicita la página Page1 `/OtherPages/Page1/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 0`) y no `RouteData.Values["otherPagesTemplate"]` (`Order = 1`) debido a la configuración del `Order` propiedad.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-158">If the Page1 page is requested at `/OtherPages/Page1/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 0`) and not `RouteData.Values["otherPagesTemplate"]` (`Order = 1`) due to setting the `Order` property.</span></span>

<span data-ttu-id="6c3a3-159">Solicitud Page1 subpágina del ejemplo `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` e inspeccionar el resultado:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-159">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1/GlobalRouteValue/OtherPagesRouteValue` and inspect the result:</span></span>

![Se solicitó Page1 en la carpeta OtherPages con un segmento de ruta de GlobalRouteValue y OtherPagesRouteValue.](razor-pages-convention-features/_static/otherpages-page1-global-and-otherpages-templates.png)

<span data-ttu-id="6c3a3-162">**Convención de modelo de ruta de página**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-162">**Page route model convention**</span></span>

<span data-ttu-id="6c3a3-163">Use [AddPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addpageroutemodelconvention) para crear y agregar un [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) que invoca una acción en el [PageRouteModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageroutemodel) para la página con los valores especificados nombre.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-163">Use [AddPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addpageroutemodelconvention) to create and add an [IPageRouteModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageroutemodelconvention) that invokes an action on the [PageRouteModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageroutemodel) for the page with the specified name.</span></span>

<span data-ttu-id="6c3a3-164">Los usos de la aplicación de ejemplo `AddPageRouteModelConvention` para agregar una `{aboutTemplate?}` plantilla de ruta en la página acerca de:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-164">The sample app uses `AddPageRouteModelConvention` to add an `{aboutTemplate?}` route template to the About page:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet4)]

> [!NOTE]
> <span data-ttu-id="6c3a3-165">El `Order` propiedad para la `AttributeRouteModel` está establecido en `1`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-165">The `Order` property for the `AttributeRouteModel` is set to `1`.</span></span> <span data-ttu-id="6c3a3-166">Esto garantiza que la plantilla para `{globalTemplate?}` (configurada anteriormente en el tema) tiene prioridad para los datos de ruta primer valor posición cuando se proporciona un valor de ruta.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-166">This ensures that the template for `{globalTemplate?}` (set earlier in the topic) is given priority for the first route data value position when a single route value is provided.</span></span> <span data-ttu-id="6c3a3-167">Si se solicita la página About `/About/RouteDataValue`, "RouteDataValue" se carga en `RouteData.Values["globalTemplate"]` (`Order = 0`) y no `RouteData.Values["aboutTemplate"]` (`Order = 1`) debido a la configuración del `Order` propiedad.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-167">If the About page is requested at `/About/RouteDataValue`, "RouteDataValue" is loaded into `RouteData.Values["globalTemplate"]` (`Order = 0`) and not `RouteData.Values["aboutTemplate"]` (`Order = 1`) due to setting the `Order` property.</span></span>

<span data-ttu-id="6c3a3-168">Página de información acerca del ejemplo en solicitud `localhost:5000/About/GlobalRouteValue/AboutRouteValue` e inspeccionar el resultado:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-168">Request the sample's About page at `localhost:5000/About/GlobalRouteValue/AboutRouteValue` and inspect the result:</span></span>

![Acerca de la página se solicitó con segmentos de ruta para GlobalRouteValue y AboutRouteValue.](razor-pages-convention-features/_static/about-page-global-and-about-templates.png)

## <a name="configure-a-page-route"></a><span data-ttu-id="6c3a3-171">Configurar una ruta de la página</span><span class="sxs-lookup"><span data-stu-id="6c3a3-171">Configure a page route</span></span>

<span data-ttu-id="6c3a3-172">Use [AddPageRoute](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.addpageroute) para configurar una ruta a una página en la ruta de acceso de la página especificada.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-172">Use [AddPageRoute](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.addpageroute) to configure a route to a page at the specified page path.</span></span> <span data-ttu-id="6c3a3-173">Vínculos generados a la página de utilizar la ruta especificada.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-173">Generated links to the page use your specified route.</span></span> <span data-ttu-id="6c3a3-174">`AddPageRoute`utiliza `AddPageRouteModelConvention` para establecer la ruta.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-174">`AddPageRoute` uses `AddPageRouteModelConvention` to establish the route.</span></span>

<span data-ttu-id="6c3a3-175">La aplicación de ejemplo crea una ruta al `/TheContactPage` para *Contact.cshtml*:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-175">The sample app creates a route to `/TheContactPage` for *Contact.cshtml*:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet5)]

<span data-ttu-id="6c3a3-176">También puede alcanzar la página de contacto en `/Contact` a través de su ruta predeterminada.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-176">The Contact page can also be reached at `/Contact` via its default route.</span></span>

<span data-ttu-id="6c3a3-177">Ruta personalizada de la aplicación de ejemplo a la página de contacto permite opcional `text` segmento de ruta (`{text?}`).</span><span class="sxs-lookup"><span data-stu-id="6c3a3-177">The sample app's custom route to the Contact page allows for an optional `text` route segment (`{text?}`).</span></span> <span data-ttu-id="6c3a3-178">La página también incluye este segmento opcional en su `@page` directiva en caso de que el visitante tiene acceso a la página en su `/Contact` ruta:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-178">The page also includes this optional segment in its `@page` directive in case the visitor accesses the page at its `/Contact` route:</span></span>

[!code-cshtml[Main](razor-pages-convention-features/sample/Pages/Contact.cshtml?highlight=1)]

<span data-ttu-id="6c3a3-179">Tenga en cuenta que la dirección URL se genera para la **póngase en contacto con** vínculo en la página presentada refleja la ruta actualizada:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-179">Note that the URL generated for the **Contact** link in the rendered page reflects the updated route:</span></span>

![Vínculo de contacto de aplicación de ejemplo en la barra de navegación](razor-pages-convention-features/_static/contact-link.png)

![Inspeccionar el vínculo Póngase en contacto con en el HTML representado indica que el href está establecido en ' / TheContactPage'](razor-pages-convention-features/_static/contact-link-source.png)

<span data-ttu-id="6c3a3-182">Visite la página de contacto en cualquiera de su ruta normal, `/Contact`, o la ruta personalizada, `/TheContactPage`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-182">Visit the Contact page at either its ordinary route, `/Contact`, or the custom route, `/TheContactPage`.</span></span> <span data-ttu-id="6c3a3-183">Si se proporcionan más `text` segmento de ruta, la página muestra el segmento codificada en HTML que proporcionan:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-183">If you supply an additional `text` route segment, the page shows the HTML-encoded segment that you provide:</span></span>

![Ejemplo de explorador del borde de proporcionar un segmento de ruta opcional 'text' de 'Texto' en la dirección URL.](razor-pages-convention-features/_static/route-segment-with-custom-route.png)

## <a name="page-model-action-conventions"></a><span data-ttu-id="6c3a3-186">Convenciones de acción del modelo de página</span><span class="sxs-lookup"><span data-stu-id="6c3a3-186">Page model action conventions</span></span>

<span data-ttu-id="6c3a3-187">El proveedor de modelo de página predeterminado que implementa [IPageApplicationModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelprovider) convenciones que están diseñadas para proporcionar puntos de extensibilidad para la configuración de modelos de página, se invoca.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-187">The default page model provider that implements [IPageApplicationModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelprovider) invokes conventions which are designed to provide extensibility points for configuring page models.</span></span> <span data-ttu-id="6c3a3-188">Estas convenciones son útiles cuando la creación y modificación de detección de página y las características de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-188">These conventions are useful when building and modifying page discovery and processing features.</span></span>

<span data-ttu-id="6c3a3-189">Los ejemplos de esta sección, la aplicación de ejemplo usa un `AddHeaderAttribute` (clase), que es un [ResultFilterAttribute](/dotnet/api/microsoft.aspnetcore.mvc.filters.resultfilterattribute), que aplica un encabezado de respuesta:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-189">For the examples in this section, the sample app uses an `AddHeaderAttribute` class, which is a [ResultFilterAttribute](/dotnet/api/microsoft.aspnetcore.mvc.filters.resultfilterattribute), that applies a response header:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Filters/AddHeader.cs?name=snippet1)]

<span data-ttu-id="6c3a3-190">Usa las convenciones, el ejemplo muestra cómo aplicar el atributo a todas las páginas en una carpeta y a una sola página.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-190">Using conventions, the sample demonstrates how to apply the attribute to all of the pages in a folder and to a single page.</span></span>

<span data-ttu-id="6c3a3-191">**Convención de modelo de aplicación de carpeta**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-191">**Folder app model convention**</span></span>

<span data-ttu-id="6c3a3-192">Use [AddFolderApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addfolderapplicationmodelconvention) para crear y agregar un [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) que invoca una acción en [PageApplicationModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageapplicationmodel) instancias todas las páginas en la carpeta especificada.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-192">Use [AddFolderApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addfolderapplicationmodelconvention) to create and add an [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) that invokes an action on [PageApplicationModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageapplicationmodel) instances for all pages under the specified folder.</span></span>

<span data-ttu-id="6c3a3-193">El ejemplo muestra el uso de `AddFolderApplicationModelConvention` mediante la adición de un encabezado, `OtherPagesHeader`, a las páginas dentro de la *OtherPages* carpeta de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-193">The sample demonstrates the use of `AddFolderApplicationModelConvention` by adding a header, `OtherPagesHeader`, to the pages inside the *OtherPages* folder of the app:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet6)]

<span data-ttu-id="6c3a3-194">Solicitud Page1 subpágina del ejemplo `localhost:5000/OtherPages/Page1` e inspeccionar los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-194">Request the sample's Page1 page at `localhost:5000/OtherPages/Page1` and inspect the headers to view the result:</span></span>

![Encabezados de respuesta de la página de OtherPages/Page1 mostrar que se ha agregado el OtherPagesHeader.](razor-pages-convention-features/_static/page1-otherpages-header.png)

<span data-ttu-id="6c3a3-196">**Convención de modelo de aplicación de página**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-196">**Page app model convention**</span></span>

<span data-ttu-id="6c3a3-197">Use [AddPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addpageapplicationmodelconvention) para crear y agregar un [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) que invoca una acción en el [PageApplicationModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageapplicationmodel) para la página con el nombre speciifed.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-197">Use [AddPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageconventioncollection.addpageapplicationmodelconvention) to create and add an [IPageApplicationModelConvention](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.ipageapplicationmodelconvention) that invokes an action on the [PageApplicationModel](/dotnet/api/microsoft.aspnetcore.mvc.applicationmodels.pageapplicationmodel) for the page with the speciifed name.</span></span>

<span data-ttu-id="6c3a3-198">El ejemplo muestra el uso de `AddPageApplicationModelConvention` mediante la adición de un encabezado, `AboutHeader`, a la página acerca de:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-198">The sample demonstrates the use of `AddPageApplicationModelConvention` by adding a header, `AboutHeader`, to the About page:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet7)]

<span data-ttu-id="6c3a3-199">Página de información acerca del ejemplo en solicitud `localhost:5000/About` e inspeccionar los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-199">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Encabezados de respuesta de la página acerca de muestran que se ha agregado el AboutHeader.](razor-pages-convention-features/_static/about-page-about-header.png)

<span data-ttu-id="6c3a3-201">**Configurar un filtro**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-201">**Configure a filter**</span></span>

<span data-ttu-id="6c3a3-202">[ConfigureFilter](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.configurefilter) configura aplicar el filtro especificado.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-202">[ConfigureFilter](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.configurefilter) configures the specified filter to apply.</span></span> <span data-ttu-id="6c3a3-203">Puede implementar una clase de filtro, pero la aplicación de ejemplo muestra cómo implementar un filtro en una expresión lambda, que se implementa en segundo plano como un generador que devuelva un filtro:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-203">You can implement a filter class, but the sample app shows how to implement a filter in a lambda expression, which is implemented behind-the-scenes as a factory that returns a filter:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet8)]

<span data-ttu-id="6c3a3-204">El modelo de páginas de aplicación se usa para comprobar la ruta de acceso relativa para los segmentos que conducen a la página de Page2 en el *OtherPages* carpeta.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-204">The page app model is used to check the relative path for segments that lead to the Page2 page in the *OtherPages* folder.</span></span> <span data-ttu-id="6c3a3-205">Si pasa la condición, se agrega un encabezado.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-205">If the condition passes, a header is added.</span></span> <span data-ttu-id="6c3a3-206">Si no es así, el `EmptyFilter` se aplica.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-206">If not, the `EmptyFilter` is applied.</span></span>

<span data-ttu-id="6c3a3-207">`EmptyFilter`es un [filtro de acción](xref:mvc/controllers/filters#action-filters).</span><span class="sxs-lookup"><span data-stu-id="6c3a3-207">`EmptyFilter` is an [Action filter](xref:mvc/controllers/filters#action-filters).</span></span> <span data-ttu-id="6c3a3-208">Puesto que las páginas de Razor, omite los filtros de acción el `EmptyFilter` no ops según lo previsto si no contiene la ruta de acceso `OtherPages/Page2`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-208">Since Action filters are ignored by Razor Pages, the `EmptyFilter` no-ops as intended if the path doesn't contain `OtherPages/Page2`.</span></span>

<span data-ttu-id="6c3a3-209">Página de Page2 del ejemplo en solicitud `localhost:5000/OtherPages/Page2` e inspeccionar los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-209">Request the sample's Page2 page at `localhost:5000/OtherPages/Page2` and inspect the headers to view the result:</span></span>

![El OtherPagesPage2Header se agrega a la respuesta para Page2.](razor-pages-convention-features/_static/page2-filter-header.png)

<span data-ttu-id="6c3a3-211">**Configurar una fábrica de filtro**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-211">**Configure a filter factory**</span></span>

<span data-ttu-id="6c3a3-212">[ConfigureFilter](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.configurefilter?view=aspnetcore-2.0#Microsoft_Extensions_DependencyInjection_PageConventionCollectionExtensions_ConfigureFilter_Microsoft_AspNetCore_Mvc_ApplicationModels_PageConventionCollection_System_Func_Microsoft_AspNetCore_Mvc_ApplicationModels_PageApplicationModel_Microsoft_AspNetCore_Mvc_Filters_IFilterMetadata__) configura el generador especificado para aplicar [filtros](xref:mvc/controllers/filters) a todas las páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-212">[ConfigureFilter](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.configurefilter?view=aspnetcore-2.0#Microsoft_Extensions_DependencyInjection_PageConventionCollectionExtensions_ConfigureFilter_Microsoft_AspNetCore_Mvc_ApplicationModels_PageConventionCollection_System_Func_Microsoft_AspNetCore_Mvc_ApplicationModels_PageApplicationModel_Microsoft_AspNetCore_Mvc_Filters_IFilterMetadata__) configures the specified factory to apply [filters](xref:mvc/controllers/filters) to all Razor Pages.</span></span>

<span data-ttu-id="6c3a3-213">La aplicación de ejemplo muestra un ejemplo del uso de un [la fábrica del filtro](xref:mvc/controllers/filters#ifilterfactory) mediante la adición de un encabezado, `FilterFactoryHeader`, con dos valores a las páginas de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-213">The sample app provides an example of using a [filter factory](xref:mvc/controllers/filters#ifilterfactory) by adding a header, `FilterFactoryHeader`, with two values to the app's pages:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet9)]

<span data-ttu-id="6c3a3-214">*AddHeaderWithFactory.cs*:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-214">*AddHeaderWithFactory.cs*:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Factories/AddHeaderWithFactory.cs?name=snippet1)]

<span data-ttu-id="6c3a3-215">Página de información acerca del ejemplo en solicitud `localhost:5000/About` e inspeccionar los encabezados para ver el resultado:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-215">Request the sample's About page at `localhost:5000/About` and inspect the headers to view the result:</span></span>

![Encabezados de respuesta de la página acerca de muestran que se han agregado dos encabezados FilterFactoryHeader.](razor-pages-convention-features/_static/about-page-filter-factory-header.png)

## <a name="replace-the-default-page-app-model-provider"></a><span data-ttu-id="6c3a3-217">Reemplace el proveedor de modelo de aplicación de página predeterminado</span><span class="sxs-lookup"><span data-stu-id="6c3a3-217">Replace the default page app model provider</span></span>

<span data-ttu-id="6c3a3-218">Las páginas de Razor usa el `IPageApplicationModelProvider` interfaz para crear un [DefaultPageApplicationModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.internal.defaultpageapplicationmodelprovider).</span><span class="sxs-lookup"><span data-stu-id="6c3a3-218">Razor Pages uses the `IPageApplicationModelProvider` interface to create a [DefaultPageApplicationModelProvider](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.internal.defaultpageapplicationmodelprovider).</span></span> <span data-ttu-id="6c3a3-219">Puede heredar del proveedor de modelo predeterminado para proporcionar su propia lógica de implementación para el procesamiento y detección de controlador.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-219">You can inherit from the default model provider to provide your own implementation logic for handler discovery and processing.</span></span> <span data-ttu-id="6c3a3-220">La implementación predeterminada ([origen de referencia](https://github.com/aspnet/Mvc/blob/rel/2.0.1/src/Microsoft.AspNetCore.Mvc.RazorPages/Internal/DefaultPageApplicationModelProvider.cs)) establece convenciones para *sin nombre* y *denominado* controlador nombres, que se describe a continuación.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-220">The default implementation ([reference source](https://github.com/aspnet/Mvc/blob/rel/2.0.1/src/Microsoft.AspNetCore.Mvc.RazorPages/Internal/DefaultPageApplicationModelProvider.cs)) establishes conventions for *unnamed* and *named* handler naming, which is described below.</span></span>

<span data-ttu-id="6c3a3-221">**Métodos de controlador sin nombre predeterminados**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-221">**Default unnamed handler methods**</span></span>

<span data-ttu-id="6c3a3-222">Los métodos de control para los verbos HTTP (métodos de controlador "sin nombre") siguen una convención: `On<HTTP verb>[Async]` (anexar `Async` es opcional pero recomendado para los métodos asincrónicos).</span><span class="sxs-lookup"><span data-stu-id="6c3a3-222">Handler methods for HTTP verbs ("unnamed" handler methods) follow a convention: `On<HTTP verb>[Async]` (appending `Async` is optional but recommended for async methods).</span></span>

| <span data-ttu-id="6c3a3-223">Método de controlador sin nombre</span><span class="sxs-lookup"><span data-stu-id="6c3a3-223">Unnamed handler method</span></span>     | <span data-ttu-id="6c3a3-224">Operación</span><span class="sxs-lookup"><span data-stu-id="6c3a3-224">Operation</span></span>                      |
| -------------------------- | ------------------------------ |
| `OnGet`/`OnGetAsync`       | <span data-ttu-id="6c3a3-225">Inicializar el estado de la página.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-225">Initialize the page state.</span></span>     |
| `OnPost`/`OnPostAsync`     | <span data-ttu-id="6c3a3-226">Controlar las solicitudes POST.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-226">Handle POST requests.</span></span>          |
| `OnDelete`/`OnDeleteAsync` | <span data-ttu-id="6c3a3-227">Controlar las solicitudes de eliminación &#8224;.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-227">Handle DELETE requests&#8224;.</span></span> |
| `OnPut`/`OnPutAsync`       | <span data-ttu-id="6c3a3-228">Controlar las solicitudes PUT &#8224;.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-228">Handle PUT requests&#8224;.</span></span>    |
| `OnPatch`/`OnPatchAsync`   | <span data-ttu-id="6c3a3-229">Controlar las solicitudes de revisión &#8224;.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-229">Handle PATCH requests&#8224;.</span></span>  |

<span data-ttu-id="6c3a3-230">&#8224; Se utiliza para realizar llamadas a la API a la página.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-230">&#8224;Used for making API calls to the page.</span></span>

<span data-ttu-id="6c3a3-231">**Con el nombre de los métodos de control predeterminada**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-231">**Default named handler methods**</span></span>

<span data-ttu-id="6c3a3-232">Métodos de controlador proporcionados por el programador ("denominado" métodos de controlador) siguen una convención similar.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-232">Handler methods provided by the developer ("named" handler methods) follow a similar convention.</span></span> <span data-ttu-id="6c3a3-233">El nombre del controlador aparece tras el verbo HTTP o entre el verbo HTTP y `Async`: `On<HTTP verb><handler name>[Async]` (anexar `Async` es opcional pero recomendado para los métodos asincrónicos).</span><span class="sxs-lookup"><span data-stu-id="6c3a3-233">The handler name appears after the HTTP verb or between the HTTP verb and `Async`: `On<HTTP verb><handler name>[Async]` (appending `Async` is optional but recommended for async methods).</span></span> <span data-ttu-id="6c3a3-234">Por ejemplo, los métodos que procesan los mensajes pueden tardar la nomenclatura se muestra en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-234">For example, methods that process messages might take the naming shown in the table below.</span></span>

| <span data-ttu-id="6c3a3-235">En el ejemplo se denomina método de controlador</span><span class="sxs-lookup"><span data-stu-id="6c3a3-235">Example named handler method</span></span>             | <span data-ttu-id="6c3a3-236">Operación del ejemplo</span><span class="sxs-lookup"><span data-stu-id="6c3a3-236">Example operation</span></span>        |
| ---------------------------------------- | ------------------------ |
| `OnGetMessage`/`OnGetMessageAsync`       | <span data-ttu-id="6c3a3-237">Obtener un mensaje.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-237">Obtain a message.</span></span>        |
| `OnPostMessage`/`OnPostMessageAsync`     | <span data-ttu-id="6c3a3-238">EXPONER un mensaje.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-238">POST a message.</span></span>          |
| `OnDeleteMessage`/`OnDeleteMessageAsync` | <span data-ttu-id="6c3a3-239">ELIMINAR un mensaje &#8224;.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-239">DELETE a message&#8224;.</span></span> |
| `OnPutMessage`/`OnPutMessageAsync`       | <span data-ttu-id="6c3a3-240">Coloque un mensaje &#8224;.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-240">PUT a message&#8224;.</span></span>    |
| `OnPatchMessage`/`OnPatchMessageAsync`   | <span data-ttu-id="6c3a3-241">Aplicar la revisión de un mensaje &#8224;.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-241">PATCH a message&#8224;.</span></span>  |

<span data-ttu-id="6c3a3-242">&#8224; Se utiliza para realizar llamadas a la API a la página.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-242">&#8224;Used for making API calls to the page.</span></span>

<span data-ttu-id="6c3a3-243">**Personalizar los nombres de método de controlador**</span><span class="sxs-lookup"><span data-stu-id="6c3a3-243">**Customize handler method names**</span></span>

<span data-ttu-id="6c3a3-244">Suponga que desea cambiar la forma en que se denominan métodos de controlador con nombre y.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-244">Assume that you prefer to change the way unnamed and named handler methods are named.</span></span> <span data-ttu-id="6c3a3-245">Un esquema de nomenclatura alternativo consiste en evitar a partir de los nombres de método con "On" y usar el primer segmento de word para determinar el verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-245">An alternative naming scheme is to avoid starting the method names with "On" and use the first word segment to determine the HTTP verb.</span></span> <span data-ttu-id="6c3a3-246">Puede realizar otros cambios, como la conversión de los verbos para DELETE, colocar y aplicar la revisión a POST.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-246">You can make other changes, such as converting the verbs for DELETE, PUT, and PATCH to POST.</span></span> <span data-ttu-id="6c3a3-247">Un esquema de este tipo proporciona los nombres de método se muestra en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-247">Such a scheme provides the method names shown in the following table.</span></span>

| <span data-ttu-id="6c3a3-248">Método de controlador</span><span class="sxs-lookup"><span data-stu-id="6c3a3-248">Handler method</span></span>                       | <span data-ttu-id="6c3a3-249">Operación</span><span class="sxs-lookup"><span data-stu-id="6c3a3-249">Operation</span></span>                      |
| ------------------------------------ | ------------------------------ |
| `Get`                                | <span data-ttu-id="6c3a3-250">Inicializar el estado de la página.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-250">Initialize the page state.</span></span>     |
| `Post`/`PostAsync`                   | <span data-ttu-id="6c3a3-251">Controlar las solicitudes POST.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-251">Handle POST requests.</span></span>          |
| `Delete`/`DeleteAsync`               | <span data-ttu-id="6c3a3-252">Controlar las solicitudes de eliminación &#8224;.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-252">Handle DELETE requests&#8224;.</span></span> |
| `Put`/`PutAsync`                     | <span data-ttu-id="6c3a3-253">Controlar las solicitudes PUT &#8224;.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-253">Handle PUT requests&#8224;.</span></span>    |
| `Patch`/`PatchAsync`                 | <span data-ttu-id="6c3a3-254">Controlar las solicitudes de revisión &#8224;.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-254">Handle PATCH requests&#8224;.</span></span>  |
| `GetMessage`                         | <span data-ttu-id="6c3a3-255">Obtener un mensaje.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-255">Obtain a message.</span></span>              |
| `PostMessage`/`PostMessageAsync`     | <span data-ttu-id="6c3a3-256">EXPONER un mensaje.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-256">POST a message.</span></span>                |
| `DeleteMessage`/`DeleteMessageAsync` | <span data-ttu-id="6c3a3-257">EXPONER un mensaje para eliminar.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-257">POST a message to delete.</span></span>      |
| `PutMessage`/`PutMessageAsync`       | <span data-ttu-id="6c3a3-258">EXPONER un mensaje para colocar.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-258">POST a message to put.</span></span>         |
| `PatchMessage`/`PatchMessageAsync`   | <span data-ttu-id="6c3a3-259">EXPONER un mensaje en la revisión.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-259">POST a message to patch.</span></span>       |

<span data-ttu-id="6c3a3-260">&#8224; Se utiliza para realizar llamadas a la API a la página.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-260">&#8224;Used for making API calls to the page.</span></span>

<span data-ttu-id="6c3a3-261">Para establecer este esquema, heredan de la `DefaultPageApplicationModelProvider` clase e invalidar el [CreateHandlerModel](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.internal.defaultpageapplicationmodelprovider.createhandlermodel) método para proporcionar lógica personalizada para resolver [PageModel](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.pagemodel) nombres de controlador.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-261">To establish this scheme, inherit from the `DefaultPageApplicationModelProvider` class and override the [CreateHandlerModel](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.internal.defaultpageapplicationmodelprovider.createhandlermodel) method to supply custom logic for resolving [PageModel](/dotnet/api/microsoft.aspnetcore.mvc.razorpages.pagemodel) handler names.</span></span> <span data-ttu-id="6c3a3-262">La aplicación de ejemplo muestra cómo se hace su `CustomPageApplicationModelProvider` clase:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-262">The sample app shows you how this is done in its `CustomPageApplicationModelProvider` class:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/CustomPageApplicationModelProvider.cs?name=snippet1&highlight=1-2,45-46,64-68,78-85,87,92,106)]

<span data-ttu-id="6c3a3-263">Aspectos destacados de la clase se incluyen:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-263">Highlights of the class include:</span></span>

* <span data-ttu-id="6c3a3-264">La clase hereda de `DefaultPageApplicationModelProvider`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-264">The class inherits from `DefaultPageApplicationModelProvider`.</span></span>
* <span data-ttu-id="6c3a3-265">El `TryParseHandlerMethod` procesa un controlador para determinar el verbo HTTP (`httpMethod`) y el nombre de controlador con nombre (`handlerName`) al crear la `PageHandlerModel`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-265">The `TryParseHandlerMethod` processes a handler to determine the HTTP verb (`httpMethod`) and named handler name (`handlerName`) when creating the `PageHandlerModel`.</span></span>
  * <span data-ttu-id="6c3a3-266">Un `Async` postfijo se omite, si está presente.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-266">An `Async` postfix is ignored, if present.</span></span>
  * <span data-ttu-id="6c3a3-267">Mayúsculas y minúsculas se utilizan para analizar el verbo HTTP desde el nombre del método.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-267">Casing is used to parse the HTTP verb from the method name.</span></span>
  * <span data-ttu-id="6c3a3-268">Cuando el nombre del método (sin `Async`) es igual que el nombre del verbo HTTP, no hay ningún controlador con nombre.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-268">When the method name (without `Async`) is equal to the HTTP verb name, there's no named handler.</span></span> <span data-ttu-id="6c3a3-269">El `handlerName` está establecido en `null`, y es el nombre del método `Get`, `Post`, `Delete`, `Put`, o `Patch`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-269">The `handlerName` is set to `null`, and the method name is `Get`, `Post`, `Delete`, `Put`, or `Patch`.</span></span>
  * <span data-ttu-id="6c3a3-270">Cuando el nombre del método (sin `Async`) es mayor que el nombre del verbo HTTP, hay un controlador con nombre.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-270">When the method name (without `Async`) is longer than the HTTP verb name, there's a named handler.</span></span> <span data-ttu-id="6c3a3-271">La propiedad `handlerName` se establece como `<method name (less 'Async', if present)>`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-271">The `handlerName` is set to `<method name (less 'Async', if present)>`.</span></span> <span data-ttu-id="6c3a3-272">Por ejemplo, "GetMessage" y "GetMessageAsync" producen un nombre de controlador de "GetMessage".</span><span class="sxs-lookup"><span data-stu-id="6c3a3-272">For example, both "GetMessage" and "GetMessageAsync" yield a handler name of "GetMessage".</span></span>
  * <span data-ttu-id="6c3a3-273">Verbos HTTP PATCH, PUT y DELETE se convierten en POST.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-273">DELETE, PUT, and PATCH HTTP verbs are converted to POST.</span></span>

<span data-ttu-id="6c3a3-274">Registrar el `CustomPageApplicationModelProvider` en la `Startup` clase:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-274">Register the `CustomPageApplicationModelProvider` in the `Startup` class:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Startup.cs?name=snippet10)]

<span data-ttu-id="6c3a3-275">El archivo de código subyacente *Index.cshtml.cs* muestra cómo se cambian las convenciones de nomenclatura de método de controlador normal de las páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-275">The code-behind file *Index.cshtml.cs* shows how the ordinary handler method naming conventions are changed for pages in the app.</span></span> <span data-ttu-id="6c3a3-276">Se quita la normal "En" prefijo nomenclatura usarla con páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-276">The ordinary "On" prefix naming used with Razor Pages is removed.</span></span> <span data-ttu-id="6c3a3-277">El método que inicializa el estado de página ahora se denomina `Get`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-277">The method that initializes the page state is now named `Get`.</span></span> <span data-ttu-id="6c3a3-278">Puede ver esta convención utiliza a lo largo de la aplicación si abrir cualquier archivo de código subyacente para cualquiera de las páginas.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-278">You can see this convention used throughout the app if you open any code-behind file for any of the pages.</span></span>

<span data-ttu-id="6c3a3-279">Cada uno de los otros métodos de inicio con el verbo HTTP que describe su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-279">Each of the other methods start with the HTTP verb that describes its processing.</span></span> <span data-ttu-id="6c3a3-280">Los dos métodos que empiezan por `Delete` normalmente se trataría como verbos HTTP DELETE, pero la lógica de `TryParseHandlerMethod` se establece explícitamente el verbo POST para ambos controladores.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-280">The two methods that start with `Delete` would normally be treated as DELETE HTTP verbs, but the logic in `TryParseHandlerMethod` explicitly sets the verb to POST for both handlers.</span></span>

<span data-ttu-id="6c3a3-281">Tenga en cuenta que `Async` es opcional entre `DeleteAllMessages` y `DeleteMessageAsync`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-281">Note that `Async` is optional between `DeleteAllMessages` and `DeleteMessageAsync`.</span></span> <span data-ttu-id="6c3a3-282">Son ambos métodos asincrónicos, pero se puede usar el `Async` de postfijo o no; se recomienda que realice.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-282">They're both asynchronous methods, but you can choose to use the `Async` postfix or not; we recommend that you do.</span></span> <span data-ttu-id="6c3a3-283">`DeleteAllMessages`se usa aquí para fines de demostración, pero se recomienda que asigne nombre a este tipo de método `DeleteAllMessagesAsync`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-283">`DeleteAllMessages` is used here for demonstration purposes, but we recommend that you name such a method `DeleteAllMessagesAsync`.</span></span> <span data-ttu-id="6c3a3-284">No se ve afectada el procesamiento de la muestra de la implementación, pero su uso la `Async` postfijo llamadas el hecho de que es un método asincrónico.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-284">It doesn't affect the processing of the sample's implementation, but using the `Async` postfix calls out the fact that it's an asynchronous method.</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Pages/Index.cshtml.cs?name=snippet1&highlight=1,6,16,29)]

<span data-ttu-id="6c3a3-285">Tenga en cuenta los nombres de controlador proporcionados en *Index.cshtml* coincide con la `DeleteAllMessages` y `DeleteMessageAsync` los métodos de control:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-285">Note the handler names provided in *Index.cshtml* match the `DeleteAllMessages` and `DeleteMessageAsync` handler methods:</span></span>

[!code-cshtml[Main](razor-pages-convention-features/sample/Pages/Index.cshtml?range=29-60&highlight=7-8,24-25)]

<span data-ttu-id="6c3a3-286">`Async`en el nombre del método de controlador `DeleteMessageAsync` incluir alejar por la `TryParseHandlerMethod` para la coincidencia de controlador de la solicitud POST al método.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-286">`Async` in the handler method name `DeleteMessageAsync` is factored out by the `TryParseHandlerMethod` for handler matching of POST request to method.</span></span> <span data-ttu-id="6c3a3-287">El `asp-page-handler` nombre de `DeleteMessage` coincide con el método de controlador `DeleteMessageAsync`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-287">The `asp-page-handler` name of `DeleteMessage` is matched to the handler method `DeleteMessageAsync`.</span></span>

## <a name="mvc-filters-and-the-page-filter-ipagefilter"></a><span data-ttu-id="6c3a3-288">Filtros de MVC y el filtro de página (IPageFilter)</span><span class="sxs-lookup"><span data-stu-id="6c3a3-288">MVC Filters and the Page filter (IPageFilter)</span></span>

<span data-ttu-id="6c3a3-289">MVC [filtros de acción](xref:mvc/controllers/filters#action-filters) hace caso omiso de las páginas de Razor, dado que las páginas de Razor usa los métodos de control.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-289">MVC [Action filters](xref:mvc/controllers/filters#action-filters) are ignored by Razor Pages, since Razor Pages use handler methods.</span></span> <span data-ttu-id="6c3a3-290">Otros tipos de filtros MVC están disponibles para su uso: [autorización](xref:mvc/controllers/filters#authorization-filters), [excepción](xref:mvc/controllers/filters#exception-filters), [recursos](xref:mvc/controllers/filters#resource-filters), y [resultado](xref:mvc/controllers/filters#result-filters).</span><span class="sxs-lookup"><span data-stu-id="6c3a3-290">Other types of MVC filters are available for you to use: [Authorization](xref:mvc/controllers/filters#authorization-filters), [Exception](xref:mvc/controllers/filters#exception-filters), [Resource](xref:mvc/controllers/filters#resource-filters), and [Result](xref:mvc/controllers/filters#result-filters).</span></span> <span data-ttu-id="6c3a3-291">Para obtener más información, consulte el [filtros](xref:mvc/controllers/filters) tema.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-291">For more information, see the [Filters](xref:mvc/controllers/filters) topic.</span></span>

<span data-ttu-id="6c3a3-292">El filtro de página ([IPageFilter](/dotnet/api/microsoft.aspnetcore.mvc.filters.ipagefilter)) es un filtro que se aplica a las páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-292">The Page filter ([IPageFilter](/dotnet/api/microsoft.aspnetcore.mvc.filters.ipagefilter)) is a filter that applies to Razor Pages.</span></span> <span data-ttu-id="6c3a3-293">Que rodea la ejecución de un método de controlador de la página.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-293">It surrounds the execution of a page handler method.</span></span> <span data-ttu-id="6c3a3-294">Permite procesar código personalizado en fases de ejecución del método de controlador de página.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-294">It allows you to process custom code at stages of page handler method execution.</span></span> <span data-ttu-id="6c3a3-295">Este es un ejemplo de la aplicación de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-295">Here's an example from the sample app:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Filters/ReplaceRouteValueFilterAttribute.cs?name=snippet1)]

<span data-ttu-id="6c3a3-296">Este filtro busca un `globalTemplate` enrutar el valor de "TriggerValue" e intercambios en "Valordereemplazo".</span><span class="sxs-lookup"><span data-stu-id="6c3a3-296">This filter checks for a `globalTemplate` route value of "TriggerValue" and swaps in "ReplacementValue".</span></span>

<span data-ttu-id="6c3a3-297">El `ReplaceRouteValueFilter` atributo se puede aplicar directamente a un `PageModel` en el código subyacente:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-297">The `ReplaceRouteValueFilter` attribute can be applied directly to a `PageModel` in code-behind:</span></span>

[!code-csharp[Main](razor-pages-convention-features/sample/Pages/OtherPages/Page3.cshtml.cs?range=10-12&highlight=1)]

<span data-ttu-id="6c3a3-298">Solicite la página McAfee3 desde la aplicación de ejemplo con en `localhost:5000/OtherPages/Page3/TriggerValue`.</span><span class="sxs-lookup"><span data-stu-id="6c3a3-298">Request the Page3 page from the sample app with at `localhost:5000/OtherPages/Page3/TriggerValue`.</span></span> <span data-ttu-id="6c3a3-299">Tenga en cuenta cómo el filtro reemplaza el valor de ruta:</span><span class="sxs-lookup"><span data-stu-id="6c3a3-299">Notice how the filter replaces the route value:</span></span>

![La solicitud para OtherPages/página3 con un resultado del segmento de ruta TriggerValue en el filtro reemplazando el valor de ruta con un valor de reemplazo.](razor-pages-convention-features/_static/otherpages-page3-filter-replacement-value.png)

## <a name="see-also"></a><span data-ttu-id="6c3a3-301">Vea también</span><span class="sxs-lookup"><span data-stu-id="6c3a3-301">See also</span></span>

* [<span data-ttu-id="6c3a3-302">Convenciones de autorización de las páginas de Razor</span><span class="sxs-lookup"><span data-stu-id="6c3a3-302">Razor Pages authorization conventions</span></span>](xref:security/authorization/razor-pages-authorization)
