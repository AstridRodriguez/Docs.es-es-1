---
title: "Validación del modelo en MVC de ASP.NET Core"
author: rick-anderson
description: "Presenta la validación del modelo en MVC de ASP.NET Core."
keywords: "Validación de ASP.NET Core, MVC,"
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: 3a8676dd-7ed8-4a05-bca2-44e288ab99ee
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/models/validation
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 0874d3b677cee2859da9eb85b0573811abbed12a
ms.sourcegitcommit: 78d28178345a0eea91556e4cd1adad98b1446db8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/22/2017
---
# <a name="introduction-to-model-validation-in-aspnet-core-mvc"></a><span data-ttu-id="b4fe2-104">Introducción a la validación del modelo en MVC de ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="b4fe2-104">Introduction to model validation in ASP.NET Core MVC</span></span>

<span data-ttu-id="b4fe2-105">Por [Rachel Appel](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="b4fe2-105">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-validation"></a><span data-ttu-id="b4fe2-106">Introducción a la validación del modelo</span><span class="sxs-lookup"><span data-stu-id="b4fe2-106">Introduction to model validation</span></span>

<span data-ttu-id="b4fe2-107">Antes de que una aplicación almacena datos en una base de datos, la aplicación debe validar los datos.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-107">Before an app stores data in a database, the app must validate the data.</span></span> <span data-ttu-id="b4fe2-108">Datos se deben proteger de posibles amenazas de seguridad, comprobadas que formatearlo correctamente por tipo y tamaño, y debe ajustarse a las reglas.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-108">Data must be checked for potential security threats, verified that it is appropriately formatted by type and size, and it must conform to your rules.</span></span> <span data-ttu-id="b4fe2-109">La validación es necesaria aunque puede ser tediosa y redundantes.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-109">Validation is necessary although it can be redundant and tedious to implement.</span></span> <span data-ttu-id="b4fe2-110">En MVC, la validación se produce en el cliente y el servidor.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-110">In MVC, validation happens on both the client and server.</span></span>

<span data-ttu-id="b4fe2-111">Afortunadamente, .NET se abstrae la validación en los atributos de validación.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-111">Fortunately, .NET has abstracted validation into validation attributes.</span></span> <span data-ttu-id="b4fe2-112">Estos atributos contienen el código de validación, lo que reduce la cantidad de código que debe escribirse.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-112">These attributes contain validation code, thereby reducing the amount of code you must write.</span></span>

<span data-ttu-id="b4fe2-113">[Ver o descargar el ejemplo desde GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span><span class="sxs-lookup"><span data-stu-id="b4fe2-113">[View or download sample from GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span></span>

## <a name="validation-attributes"></a><span data-ttu-id="b4fe2-114">Atributos de validación</span><span class="sxs-lookup"><span data-stu-id="b4fe2-114">Validation Attributes</span></span>

<span data-ttu-id="b4fe2-115">Atributos de validación son una forma de configurar la validación del modelo por lo que es similar conceptualmente a la validación en los campos de tablas de base de datos.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-115">Validation attributes are a way to configure model validation so it's similar conceptually to validation on fields in database tables.</span></span> <span data-ttu-id="b4fe2-116">Esto incluye las restricciones como la asignación de tipos de datos o campos obligatorios.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-116">This includes constraints such as assigning data types or required fields.</span></span> <span data-ttu-id="b4fe2-117">Otros tipos de validación son aplicar patrones a datos para aplicar las reglas de negocios, como una tarjeta de crédito, número de teléfono o dirección de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-117">Other types of validation include applying patterns to data to enforce business rules, such as a credit card, phone number, or email address.</span></span> <span data-ttu-id="b4fe2-118">Atributos de validación Asegúrese de aplicar estos requisitos mucho más sencillas y más fáciles de usar.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-118">Validation attributes make enforcing these requirements much simpler and easier to use.</span></span>

<span data-ttu-id="b4fe2-119">A continuación se muestra un anotado `Movie` modelo desde una aplicación que almacena información acerca de películas y programas de TV.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-119">Below is an annotated `Movie` model from an app that stores information about movies and TV shows.</span></span> <span data-ttu-id="b4fe2-120">La mayoría de las propiedades es necesaria y varias propiedades de cadena tienen requisitos de longitud.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-120">Most of the properties are required and several string properties have length requirements.</span></span> <span data-ttu-id="b4fe2-121">Además, hay una restricción de rango numérico en su lugar para la `Price` propiedad de 0 a 999,99 pesos, junto con un atributo de validación personalizado.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-121">Additionally, there is a numeric range restriction in place for the `Price` property from 0 to $999.99, along with a custom validation attribute.</span></span>

[!code-csharp[Main](validation/sample/Movie.cs?range=6-31)]

<span data-ttu-id="b4fe2-122">Simplemente leer a través del modelo revela las reglas sobre los datos para esta aplicación, lo que facilita mantener el código.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-122">Simply reading through the model reveals the rules about data for this app, making it easier to maintain the code.</span></span> <span data-ttu-id="b4fe2-123">A continuación se muestran varios atributos de validación integradas populares:</span><span class="sxs-lookup"><span data-stu-id="b4fe2-123">Below are several popular built-in validation attributes:</span></span>

* <span data-ttu-id="b4fe2-124">`[CreditCard]`: Valida la propiedad tiene un formato de tarjeta de crédito.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-124">`[CreditCard]`: Validates the property has a credit card format.</span></span>

* <span data-ttu-id="b4fe2-125">`[Compare]`: Valida dos propiedades en una coincidencia de modelos.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-125">`[Compare]`: Validates two properties in a model match.</span></span>

* <span data-ttu-id="b4fe2-126">`[EmailAddress]`: Valida la propiedad tiene un formato de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-126">`[EmailAddress]`: Validates the property has an email format.</span></span>

* <span data-ttu-id="b4fe2-127">`[Phone]`: Valida la propiedad tiene un formato de teléfono.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-127">`[Phone]`: Validates the property has a telephone format.</span></span>

* <span data-ttu-id="b4fe2-128">`[Range]`: Valida el valor de propiedad se encuentra dentro del intervalo especificado.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-128">`[Range]`: Validates the property value falls within the given range.</span></span>

* <span data-ttu-id="b4fe2-129">`[RegularExpression]`: Valida que los datos coincide con la expresión regular especificada.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-129">`[RegularExpression]`: Validates that the data matches the specified regular expression.</span></span>

* <span data-ttu-id="b4fe2-130">`[Required]`: Hace que una propiedad necesaria.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-130">`[Required]`: Makes a property required.</span></span>

* <span data-ttu-id="b4fe2-131">`[StringLength]`: Valida que una propiedad de cadena a lo sumo tiene la longitud máxima determinada.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-131">`[StringLength]`: Validates that a string property has at most the given maximum length.</span></span>

* <span data-ttu-id="b4fe2-132">`[Url]`: Valida la propiedad tiene un formato de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-132">`[Url]`: Validates the property has a URL format.</span></span>

<span data-ttu-id="b4fe2-133">MVC admite cualquier atributo que se deriva de `ValidationAttribute` para la validación.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-133">MVC supports any attribute that derives from `ValidationAttribute` for validation purposes.</span></span> <span data-ttu-id="b4fe2-134">Muchos de los atributos de validación útil pueden encontrarse en el [System.ComponentModel.DataAnnotations](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations) espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-134">Many useful validation attributes can be found in the [System.ComponentModel.DataAnnotations](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations) namespace.</span></span>

<span data-ttu-id="b4fe2-135">Puede haber instancias donde necesita más características que proporcionan atributos integrados.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-135">There may be instances where you need more features than built-in attributes provide.</span></span> <span data-ttu-id="b4fe2-136">En esas ocasiones, puede crear atributos de validación personalizado derivando de `ValidationAttribute` o cambiar el modelo para implementar `IValidatableObject`.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-136">For those times, you can create custom validation attributes by deriving from `ValidationAttribute` or changing your model to implement `IValidatableObject`.</span></span>

## <a name="model-state"></a><span data-ttu-id="b4fe2-137">Estado del modelo</span><span class="sxs-lookup"><span data-stu-id="b4fe2-137">Model State</span></span>

<span data-ttu-id="b4fe2-138">Estado del modelo representa los errores de validación en valores de formulario HTML enviados.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-138">Model state represents validation errors in submitted HTML form values.</span></span>

<span data-ttu-id="b4fe2-139">MVC continuará validando campos hasta que alcanza el número máximo de errores (200 de forma predeterminada).</span><span class="sxs-lookup"><span data-stu-id="b4fe2-139">MVC will continue validating fields until reaches the maximum number of errors (200 by default).</span></span> <span data-ttu-id="b4fe2-140">Puede configurar este número insertando el código siguiente en el `ConfigureServices` método en el *Startup.cs* archivo:</span><span class="sxs-lookup"><span data-stu-id="b4fe2-140">You can configure this number by inserting the following code into the `ConfigureServices` method in the *Startup.cs* file:</span></span>

[!code-csharp[Main](validation/sample/Startup.cs?range=27)]

## <a name="handling-model-state-errors"></a><span data-ttu-id="b4fe2-141">Estado del modelo de control de errores</span><span class="sxs-lookup"><span data-stu-id="b4fe2-141">Handling Model State Errors</span></span>

<span data-ttu-id="b4fe2-142">Validación del modelo se produce antes de cada acción de controlador que se invoca y es responsabilidad del método de acción para inspeccionar `ModelState.IsValid` y reaccionar de manera apropiada.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-142">Model validation occurs prior to each controller action being invoked, and it is the action method’s responsibility to inspect `ModelState.IsValid` and react appropriately.</span></span> <span data-ttu-id="b4fe2-143">En muchos casos, la reacción adecuada es devolver algún tipo de respuesta de error, lo ideal sería que detalla el motivo por el motivo del error de validación del modelo.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-143">In many cases, the appropriate reaction is to return some kind of error response, ideally detailing the reason why model validation failed.</span></span>

<span data-ttu-id="b4fe2-144">Algunas aplicaciones se elegirá seguir una convención estándar para tratar los errores de validación del modelo, en cuyo caso un filtro puede ser un lugar adecuado para implementar esta directiva.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-144">Some apps will choose to follow a standard convention for dealing with model validation errors, in which case a filter may be an appropriate place to implement such a policy.</span></span> <span data-ttu-id="b4fe2-145">Debe probar cómo se comportan las acciones con los Estados del modelo válidos y no válidos.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-145">You should test how your actions behave with valid and invalid model states.</span></span>

## <a name="manual-validation"></a><span data-ttu-id="b4fe2-146">Validación manual</span><span class="sxs-lookup"><span data-stu-id="b4fe2-146">Manual validation</span></span>

<span data-ttu-id="b4fe2-147">Cuando se completen la validación y el enlace de modelos, puede que desee repetir partes de él.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-147">After model binding and validation are complete, you may want to repeat parts of it.</span></span> <span data-ttu-id="b4fe2-148">Por ejemplo, un usuario ha escrito texto en un campo que se esperaba un entero, o puede que necesite calcular el valor de propiedad del modelo.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-148">For example, a user may have entered text in a field expecting an integer, or you may need to compute a value for a model's property.</span></span>

<span data-ttu-id="b4fe2-149">Debe ejecutar manualmente la validación.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-149">You may need to run validation manually.</span></span> <span data-ttu-id="b4fe2-150">Para ello, llame a la `TryValidateModel` método, como se muestra aquí:</span><span class="sxs-lookup"><span data-stu-id="b4fe2-150">To do so, call the `TryValidateModel` method, as shown here:</span></span>

[!code-csharp[Main](validation/sample/MoviesController.cs?range=52)]

## <a name="custom-validation"></a><span data-ttu-id="b4fe2-151">Validación personalizada</span><span class="sxs-lookup"><span data-stu-id="b4fe2-151">Custom validation</span></span>

<span data-ttu-id="b4fe2-152">Funcionan los atributos de validación para la mayoría de las necesidades validación.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-152">Validation attributes work for most validation needs.</span></span> <span data-ttu-id="b4fe2-153">Sin embargo, algunas reglas de validación son específicos para su negocio, como se convierten en no solo se requiere validación de datos genéricos como asegurarse de un campo o que se ajusta a un intervalo de valores.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-153">However, some validation rules are specific to your business, as they're not just generic data validation such as ensuring a field is required or that it conforms to a range of values.</span></span> <span data-ttu-id="b4fe2-154">Para estos escenarios, atributos de validación personalizados son una excelente solución.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-154">For these scenarios, custom validation attributes are a great solution.</span></span> <span data-ttu-id="b4fe2-155">Es fácil crear sus propios atributos de validación personalizada en MVC.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-155">Creating your own custom validation attributes in MVC is easy.</span></span> <span data-ttu-id="b4fe2-156">Solo se heredan de la `ValidationAttribute`e invalidar el `IsValid` método.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-156">Just inherit from the `ValidationAttribute`, and override the `IsValid` method.</span></span> <span data-ttu-id="b4fe2-157">El `IsValid` método acepta dos parámetros: el primero es un objeto denominado *valor* y el segundo es un `ValidationContext` objeto denominado *validationContext*.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-157">The `IsValid` method accepts two parameters, the first is an object named *value* and the second is a `ValidationContext` object named *validationContext*.</span></span> <span data-ttu-id="b4fe2-158">*Valor* hace referencia al valor real del campo que se está validando el validador personalizado.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-158">*Value* refers to the actual value from the field that your custom validator is validating.</span></span>

<span data-ttu-id="b4fe2-159">En el ejemplo siguiente, una regla de negocios indica que los usuarios no pueden establecer el género como *clásico* a una película publicada después de 1960.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-159">In the following sample, a business rule states that users may not set the genre to *Classic* for a movie released after 1960.</span></span> <span data-ttu-id="b4fe2-160">El `[ClassicMovie]` atributo comprueba en primer lugar el género y, si es un estándar, a continuación, comprueba la fecha de lanzamiento que es posterior a 1960.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-160">The `[ClassicMovie]` attribute checks the genre first, and if it is a classic, then it checks the release date to see that it is later than 1960.</span></span> <span data-ttu-id="b4fe2-161">Si se libera después de 1960, se produce un error de validación.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-161">If it is released after 1960, validation fails.</span></span> <span data-ttu-id="b4fe2-162">El atributo acepta un parámetro de número entero que representa el año que puede usar para validar los datos.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-162">The attribute accepts an integer parameter representing the year that you can use to validate data.</span></span> <span data-ttu-id="b4fe2-163">Puede capturar el valor del parámetro en el constructor del atributo, como se muestra aquí:</span><span class="sxs-lookup"><span data-stu-id="b4fe2-163">You can capture the value of the parameter in the attribute's constructor, as shown here:</span></span>

[!code-csharp[Main](validation/sample/ClassicMovieAttribute.cs?range=9-28)]

<span data-ttu-id="b4fe2-164">El `movie` variable anteriormente representa un `Movie` objeto que contiene los datos desde el envío del formulario para validar.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-164">The `movie` variable above represents a `Movie` object that contains the data from the form submission to validate.</span></span> <span data-ttu-id="b4fe2-165">En este caso, el código de validación comprueba la fecha y el género en el `IsValid` método de la `ClassicMovieAttribute` clase según las reglas.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-165">In this case, the validation code checks the date and genre in the `IsValid` method of the `ClassicMovieAttribute` class as per the rules.</span></span> <span data-ttu-id="b4fe2-166">Después de validar correctamente `IsValid` devuelve un `ValidationResult.Success` código, y cuando se produce un error en la validación, un `ValidationResult` con un mensaje de error.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-166">Upon successful validation `IsValid` returns a `ValidationResult.Success` code, and when validation fails, a `ValidationResult` with an error message.</span></span> <span data-ttu-id="b4fe2-167">Cuando un usuario modifica el `Genre` campo y envía el formulario, el `IsValid` método de la `ClassicMovieAttribute` comprobará si la película es un clásico.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-167">When a user modifies the `Genre` field and submits the form, the `IsValid` method of the `ClassicMovieAttribute` will verify whether the movie is a classic.</span></span> <span data-ttu-id="b4fe2-168">Al igual que cualquier atributo integrado, aplicar el `ClassicMovieAttribute` a una propiedad como `ReleaseDate` para garantizar que se produce la validación, tal como se muestra en el ejemplo de código anterior.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-168">Like any built-in attribute, apply the `ClassicMovieAttribute` to a property such as `ReleaseDate` to ensure validation happens, as shown in the previous code sample.</span></span> <span data-ttu-id="b4fe2-169">Puesto que el ejemplo solo funciona con `Movie` tipos, una mejor opción es usar `IValidatableObject` tal y como se muestra en el párrafo siguiente.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-169">Since the example works only with `Movie` types, a better option is to use `IValidatableObject` as shown in the following paragraph.</span></span>

<span data-ttu-id="b4fe2-170">Como alternativa, podría colocarse este mismo código en el modelo mediante la implementación de la `Validate` método en el `IValidatableObject` interfaz.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-170">Alternatively, this same code could be placed in the model by implementing the `Validate` method on the `IValidatableObject` interface.</span></span> <span data-ttu-id="b4fe2-171">Mientras que los atributos de validación personalizada funcionan bien para validar las propiedades individuales, implementar `IValidatableObject` puede usarse para implementar la validación de nivel de clase como se ve aquí.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-171">While custom validation attributes work well for validating individual properties, implementing `IValidatableObject` can be used to implement class-level validation as seen here.</span></span>

[!code-csharp[Main](validation/sample/MovieIValidatable.cs?range=33-41)]

## <a name="client-side-validation"></a><span data-ttu-id="b4fe2-172">Validación del lado cliente</span><span class="sxs-lookup"><span data-stu-id="b4fe2-172">Client side validation</span></span>

<span data-ttu-id="b4fe2-173">Validación del lado cliente es una gran ventaja para los usuarios.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-173">Client side validation is a great convenience for users.</span></span> <span data-ttu-id="b4fe2-174">Ahorra tiempo en caso contrario, se gastan esperando de ida y vuelta al servidor.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-174">It saves time they would otherwise spend waiting for a round trip to the server.</span></span> <span data-ttu-id="b4fe2-175">En términos comerciales, incluso unos fracciones de segundos multiplicados cientos de veces al día hasta agrega una gran cantidad de tiempo y gastos, frustración.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-175">In business terms, even a few fractions of seconds multiplied hundreds of times each day adds up to be a lot of time, expense, and frustration.</span></span> <span data-ttu-id="b4fe2-176">La validación inmediata y sencilla permite a los usuarios trabajar de forma más eficiente y generar una mejor calidad de entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-176">Straightforward and immediate validation enables users to work more efficiently and produce better quality input and output.</span></span>

<span data-ttu-id="b4fe2-177">Debe tener una vista con las referencias de script de JavaScript adecuadas en su lugar para la validación del lado cliente para que funcione como ve aquí.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-177">You must have a view with the proper JavaScript script references in place for client side validation to work as you see here.</span></span>

[!code-html[Main](validation/sample/Views/Shared/_Layout.cshtml?range=37)]

[!code-html[Main](validation/sample/Views/Shared/_ValidationScriptsPartial.cshtml)]

<span data-ttu-id="b4fe2-178">MVC usa los atributos de validación además de los metadatos de tipo de las propiedades del modelo para validar los datos y mostrar los mensajes de error con JavaScript.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-178">MVC uses validation attributes in addition to type metadata from model properties to validate data and display any error messages using JavaScript.</span></span> <span data-ttu-id="b4fe2-179">Cuando usas MVC para representar los elementos de formulario de un modelo con [aplicaciones auxiliares de etiquetas](xref:mvc/views/tag-helpers/intro) o [aplicaciones auxiliares HTML](xref:mvc/views/overview) agregará HTML 5 [atributos de datos](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) en los elementos de formulario que necesitan validación, como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-179">When you use MVC to render form elements from a model using [Tag Helpers](xref:mvc/views/tag-helpers/intro) or [HTML helpers](xref:mvc/views/overview) it will add HTML 5 [data- attributes](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) in the form elements that need validation, as shown below.</span></span> <span data-ttu-id="b4fe2-180">MVC se genera el `data-` atributos para los atributos integrados y personalizados.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-180">MVC generates the `data-` attributes for both built-in and custom attributes.</span></span> <span data-ttu-id="b4fe2-181">Puede mostrar errores de validación en el cliente mediante las aplicaciones auxiliares de etiqueta relevantes como se muestra aquí:</span><span class="sxs-lookup"><span data-stu-id="b4fe2-181">You can display validation errors on the client using the relevant tag helpers as shown here:</span></span>

[!code-html[Main](validation/sample/Views/Movies/Create.cshtml?highlight=4,5&range=19-25)]

<span data-ttu-id="b4fe2-182">Las aplicaciones auxiliares de etiqueta anteriores representan el código HTML siguiente.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-182">The tag helpers above render the HTML below.</span></span> <span data-ttu-id="b4fe2-183">Tenga en cuenta que la `data-` atributos en el código HTML de salida se corresponden con los atributos de validación para el `ReleaseDate` propiedad.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-183">Notice that the `data-` attributes in the HTML output correspond to the validation attributes for the `ReleaseDate` property.</span></span> <span data-ttu-id="b4fe2-184">El `data-val-required` atributo siguiente contiene un mensaje de error para mostrar si el usuario no rellene el campo de fecha de lanzamiento, y ese mensaje se muestra en el que lo acompaña `<span>` elemento.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-184">The `data-val-required` attribute below contains an error message to display if the user doesn't fill in the release date field, and that message displays in the accompanying `<span>` element.</span></span>

```html
<form action="/Movies/Create" method="post">
    <div class="form-horizontal">
        <h4>Movie</h4>
        <div class="text-danger"></div>
        <div class="form-group">
            <label class="col-md-2 control-label" for="ReleaseDate">ReleaseDate</label>
            <div class="col-md-10">
                <input class="form-control" type="datetime"
                data-val="true" data-val-required="The ReleaseDate field is required."
                id="ReleaseDate" name="ReleaseDate" value="" />
                <span class="text-danger field-validation-valid"
                data-valmsg-for="ReleaseDate" data-valmsg-replace="true"></span>
            </div>
        </div>
    </div>
</form>
```

<span data-ttu-id="b4fe2-185">Validación del lado cliente impide el envío hasta el formulario es válido.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-185">Client-side validation prevents submission until the form is valid.</span></span> <span data-ttu-id="b4fe2-186">El botón Enviar ejecuta JavaScript que envía el formulario o muestra mensajes de error.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-186">The Submit button runs JavaScript that either submits the form or displays error messages.</span></span>

<span data-ttu-id="b4fe2-187">MVC determina los valores de atributo de tipo según el tipo de datos de .NET de una propiedad, posiblemente se invalide utilizando `[DataType]` atributos.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-187">MVC determines type attribute values based on the .NET data type of a property, possibly overridden using `[DataType]` attributes.</span></span> <span data-ttu-id="b4fe2-188">La base de `[DataType]` atributo no realiza ninguna validación de servidor real.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-188">The base `[DataType]` attribute does no real server-side validation.</span></span> <span data-ttu-id="b4fe2-189">Exploradores elegir sus propios mensajes de error y mostrar los errores pero que deseen, sin embargo el paquete discreto de validación de jQuery puede invalidar los mensajes y mostrarlos de forma coherente con otros usuarios.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-189">Browsers choose their own error messages and display those errors however they wish, however the jQuery Validation Unobtrusive package can override the messages and display them consistently with others.</span></span> <span data-ttu-id="b4fe2-190">Esto sucede más evidente cuando los usuarios aplicar `[DataType]` subclases como `[EmailAddress]`.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-190">This happens most obviously when users apply `[DataType]` subclasses such as `[EmailAddress]`.</span></span>

## <a name="iclientmodelvalidator"></a><span data-ttu-id="b4fe2-191">IClientModelValidator</span><span class="sxs-lookup"><span data-stu-id="b4fe2-191">IClientModelValidator</span></span>

<span data-ttu-id="b4fe2-192">Puede crear lógica del lado cliente para el atributo personalizado, y [validación discreto](http://jqueryvalidation.org/documentation/) ejecutará en el cliente para que automáticamente como parte de la validación.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-192">You may create client side logic for your custom attribute, and [unobtrusive validation](http://jqueryvalidation.org/documentation/) will execute it on the client for you automatically as part of validation.</span></span> <span data-ttu-id="b4fe2-193">El primer paso consiste en controlar qué atributos de datos se agregan mediante la implementación de la `IClientModelValidator` interfaz tal y como se muestra aquí:</span><span class="sxs-lookup"><span data-stu-id="b4fe2-193">The first step is to control what data- attributes are added by implementing the `IClientModelValidator` interface as shown here:</span></span>

[!code-csharp[Main](validation/sample/ClassicMovieAttribute.cs?range=30-42)]

<span data-ttu-id="b4fe2-194">Atributos que implementan esta interfaz pueden agregar atributos HTML a los campos generados.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-194">Attributes that implement this interface can add HTML attributes to generated fields.</span></span> <span data-ttu-id="b4fe2-195">Examinar la salida de la `ReleaseDate` elemento revela HTML que es similar al ejemplo anterior, excepto que ahora hay un `data-val-classicmovie` atributo que se definió en el `AddValidation` método `IClientModelValidator`.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-195">Examining the output for the `ReleaseDate` element reveals HTML that is similar to the previous example, except now there is a `data-val-classicmovie` attribute that was defined in the `AddValidation` method of `IClientModelValidator`.</span></span>

```html
<input class="form-control" type="datetime"
data-val="true"
data-val-classicmovie="Classic movies must have a release year earlier than 1960."
data-val-classicmovie-year="1960"
data-val-required="The ReleaseDate field is required."
id="ReleaseDate" name="ReleaseDate" value="" />
```

<span data-ttu-id="b4fe2-196">Validación discreto utiliza los datos en el `data-` atributos para mostrar mensajes de error.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-196">Unobtrusive validation uses the data in the `data-` attributes to display error messages.</span></span> <span data-ttu-id="b4fe2-197">Sin embargo, jQuery no sabe acerca de las reglas o los mensajes hasta que se agregan a los de jQuery `validator` objeto.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-197">However, jQuery doesn't know about rules or messages until you add them to jQuery's `validator` object.</span></span> <span data-ttu-id="b4fe2-198">Esto se muestra en el ejemplo siguiente que agrega un método denominado `classicmovie` que contienen código de validación de cliente personalizada para jQuery `validator` objeto.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-198">This is shown in the example below that adds a method named `classicmovie` containing custom client validation code to the jQuery `validator` object.</span></span>

[!code-javascript[Main](validation/sample/Views/Movies/Create.cshtml?range=71-93)]

<span data-ttu-id="b4fe2-199">JQuery tiene ahora la información que se va a ejecutar la validación personalizada de JavaScript, así como el mensaje de error que se mostrará si ese código de validación devuelve false.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-199">Now jQuery has the information to execute the custom JavaScript validation as well as the error message to display if that validation code returns false.</span></span>

## <a name="remote-validation"></a><span data-ttu-id="b4fe2-200">Validación remota</span><span class="sxs-lookup"><span data-stu-id="b4fe2-200">Remote validation</span></span>

<span data-ttu-id="b4fe2-201">Validación remota es una característica excelente que se usará cuando se necesita validar los datos en el cliente con datos en el servidor.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-201">Remote validation is a great feature to use when you need to validate data on the client against data on the server.</span></span> <span data-ttu-id="b4fe2-202">Por ejemplo, la aplicación necesite comprobar si un nombre de usuario o de correo electrónico ya está en uso, y debe consultar una gran cantidad de datos que se va a hacerlo.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-202">For example, your app may need to verify whether an email or user name is already in use, and it must query a large amount of data to do so.</span></span> <span data-ttu-id="b4fe2-203">Descargar grandes conjuntos de datos para validar uno o algunos campos consume demasiados recursos.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-203">Downloading large sets of data for validating one or a few fields consumes too many resources.</span></span> <span data-ttu-id="b4fe2-204">También puede exponer información confidencial.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-204">It may also expose sensitive information.</span></span> <span data-ttu-id="b4fe2-205">Una alternativa consiste en realizar una solicitud de ida y vuelta para validar un campo.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-205">An alternative is to make a round-trip request to validate a field.</span></span>

<span data-ttu-id="b4fe2-206">Puede implementar la validación remota en un proceso de dos pasos.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-206">You can implement remote validation in a two step process.</span></span> <span data-ttu-id="b4fe2-207">En primer lugar, debe anotar el modelo con el `[Remote]` atributo.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-207">First, you must annotate your model with the `[Remote]` attribute.</span></span> <span data-ttu-id="b4fe2-208">El `[Remote]` atributo acepta varias sobrecargas que puede usar para dirigir el JavaScript del lado cliente para el código adecuado para llamar a.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-208">The `[Remote]` attribute accepts multiple overloads you can use to direct client side JavaScript to the appropriate code to call.</span></span> <span data-ttu-id="b4fe2-209">En el ejemplo se apunta a la `VerifyEmail` método de acción de la `Users` controlador.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-209">The example points to the `VerifyEmail` action method of the `Users` controller.</span></span>

[!code-csharp[Main](validation/sample/User.cs?range=5-9)]

<span data-ttu-id="b4fe2-210">El segundo paso es colocar el código de validación en el método de acción correspondiente, tal como se define en el `[Remote]` atributo.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-210">The second step is putting the validation code in the corresponding action method as defined in the `[Remote]` attribute.</span></span> <span data-ttu-id="b4fe2-211">Devuelve un `JsonResult` que el cliente puede utilizar para continuar o pause y muestre un error si es necesario.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-211">It returns a `JsonResult` that the client side can use to proceed or pause and display an error if needed.</span></span>

[!code-none[Main](validation/sample/UsersController.cs?range=19-28)]

<span data-ttu-id="b4fe2-212">Ahora cuando los usuarios escriben un correo electrónico, JavaScript en la vista realiza una llamada remota para ver si se ha hecho que correo electrónico y si es así, a continuación, muestra el mensaje de error.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-212">Now when users enter an email, JavaScript in the view makes a remote call to see if that email has been taken, and if so, then displays the error message.</span></span> <span data-ttu-id="b4fe2-213">En caso contrario, el usuario puede enviar el formulario como de costumbre.</span><span class="sxs-lookup"><span data-stu-id="b4fe2-213">Otherwise, the user can submit the form as usual.</span></span>
