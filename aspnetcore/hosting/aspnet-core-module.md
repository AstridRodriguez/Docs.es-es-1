---
title: "Referencia de configuración del módulo principal ASP.NET"
author: guardrex
description: "Cómo configurar el módulo principal de ASP.NET para hospedar aplicaciones ASP.NET Core."
keywords: "Núcleo de ASP.NET, ancm, módulo core, iis, stdout como registro, variable de entorno, env var, subapplication, subapp, appoffline, app_offline, 502, esquema"
ms.author: riande
manager: wpickett
ms.date: 03/07/2017
ms.topic: article
ms.assetid: 5de0c8f7-50ce-4e2c-b3d4-a1bd9fdfcff5
ms.technology: aspnet
ms.prod: asp.net-core
uid: hosting/aspnet-core-module
ms.openlocfilehash: 44fc8bd647ad869dd029d8ca4ced782962d71020
ms.sourcegitcommit: 9cdbfd0d670d70b9c354216aabee260c52dad5ee
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/12/2017
---
# <a name="aspnet-core-module-configuration-reference"></a><span data-ttu-id="79d34-104">Referencia de configuración del módulo principal ASP.NET</span><span class="sxs-lookup"><span data-stu-id="79d34-104">ASP.NET Core Module configuration reference</span></span>

<span data-ttu-id="79d34-105">Por [Luke Latham](https://github.com/GuardRex), [Rick Anderson](https://twitter.com/RickAndMSFT), y [Sourabh Shirhatti](https://twitter.com/sshirhatti)</span><span class="sxs-lookup"><span data-stu-id="79d34-105">By [Luke Latham](https://github.com/GuardRex), [Rick Anderson](https://twitter.com/RickAndMSFT), and [Sourabh Shirhatti](https://twitter.com/sshirhatti)</span></span>

<span data-ttu-id="79d34-106">Este documento proporciona información sobre cómo configurar el módulo de núcleo de ASP.NET para hospedar aplicaciones ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="79d34-106">This document provides details on how to configure the ASP.NET Core Module for hosting ASP.NET Core applications.</span></span> <span data-ttu-id="79d34-107">Para obtener una introducción para el módulo principal de ASP.NET y las instrucciones de instalación, consulte el [información general del módulo de ASP.NET Core](xref:fundamentals/servers/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="79d34-107">For an introduction to the ASP.NET Core Module and installation instructions, see the [ASP.NET Core Module overview](xref:fundamentals/servers/aspnet-core-module).</span></span>

## <a name="configuration-via-webconfig"></a><span data-ttu-id="79d34-108">Configuración a través de web.config</span><span class="sxs-lookup"><span data-stu-id="79d34-108">Configuration via web.config</span></span>

<span data-ttu-id="79d34-109">El módulo principal de ASP.NET se configura a través de una aplicación o sitio *web.config* de archivos y tiene su propio `aspNetCore` sección de configuración dentro de `system.webServer`.</span><span class="sxs-lookup"><span data-stu-id="79d34-109">The ASP.NET Core Module is configured via a site or application *web.config* file and has its own `aspNetCore` configuration section within `system.webServer`.</span></span> <span data-ttu-id="79d34-110">Este es un ejemplo *web.config* de archivos que la `Microsoft.NET.Sdk.Web` SDK se proporcionará cuando se publica el proyecto para un [framework dependiente implementación](https://docs.microsoft.com/dotnet/articles/core/deploying/#framework-dependent-deployments-fdd) con marcadores de posición para el `processPath` y `arguments`:</span><span class="sxs-lookup"><span data-stu-id="79d34-110">Here's an example *web.config* file that the `Microsoft.NET.Sdk.Web` SDK will provide when the project is published for a [framework-dependent deployment](https://docs.microsoft.com/dotnet/articles/core/deploying/#framework-dependent-deployments-fdd) with placeholders for the `processPath` and `arguments`:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModule" resourceType="Unspecified" />
    </handlers>
    <aspNetCore processPath="%LAUNCHER_PATH%" 
        arguments="%LAUNCHER_ARGS%" 
        stdoutLogEnabled="false" 
        stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="79d34-111">El *web.config* ejemplo siguiente es para un [implementación independiente](https://docs.microsoft.com/dotnet/articles/core/deploying/#self-contained-deployments-scd) a la [servicio de aplicaciones de Azure](https://azure.microsoft.com/services/app-service/).</span><span class="sxs-lookup"><span data-stu-id="79d34-111">The *web.config* example below is for a [self-contained deployment](https://docs.microsoft.com/dotnet/articles/core/deploying/#self-contained-deployments-scd) to the [Azure App Service](https://azure.microsoft.com/services/app-service/).</span></span> <span data-ttu-id="79d34-112">Para obtener más información, consulte [publicar en IIS](xref:publishing/iis).</span><span class="sxs-lookup"><span data-stu-id="79d34-112">For more information, see [Publishing to IIS](xref:publishing/iis).</span></span> <span data-ttu-id="79d34-113">Vea [configuración de aplicaciones del subelemento](xref:publishing/iis#configuration-of-sub-applications) para una nota importante relacionada con la configuración de *web.config* archivos en subcarpetas de las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="79d34-113">See [Configuration of sub-applications](xref:publishing/iis#configuration-of-sub-applications) for an important note pertaining to the configuration of *web.config* files in sub-applications.</span></span>

```xml
<configuration>
  <system.webServer>
    <handlers>
      <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModule" resourceType="Unspecified" />
    </handlers>
    <aspNetCore processPath=".\MyApp.exe" 
        stdoutLogEnabled="false" 
        stdoutLogFile="\\?\%home%\LogFiles\stdout" />
  </system.webServer>
</configuration>
```

### <a name="attributes-of-the-aspnetcore-element"></a><span data-ttu-id="79d34-114">Atributos del elemento aspNetCore</span><span class="sxs-lookup"><span data-stu-id="79d34-114">Attributes of the aspNetCore element</span></span>

| <span data-ttu-id="79d34-115">Atributo</span><span class="sxs-lookup"><span data-stu-id="79d34-115">Attribute</span></span> | <span data-ttu-id="79d34-116">Descripción</span><span class="sxs-lookup"><span data-stu-id="79d34-116">Description</span></span> |
| --- | --- |
| <span data-ttu-id="79d34-117">processPath</span><span class="sxs-lookup"><span data-stu-id="79d34-117">processPath</span></span> | <p><span data-ttu-id="79d34-118">Atributo de cadena necesario.</span><span class="sxs-lookup"><span data-stu-id="79d34-118">Required string attribute.</span></span></p><p><span data-ttu-id="79d34-119">Ruta de acceso al archivo ejecutable que se iniciará un proceso de escucha las solicitudes HTTP.</span><span class="sxs-lookup"><span data-stu-id="79d34-119">Path to the executable that will launch a process listening for HTTP requests.</span></span> <span data-ttu-id="79d34-120">Se admiten rutas de acceso relativas.</span><span class="sxs-lookup"><span data-stu-id="79d34-120">Relative paths are supported.</span></span> <span data-ttu-id="79d34-121">Si la ruta de acceso comienza con '.', la ruta de acceso se considera que son relativas a la raíz del sitio.</span><span class="sxs-lookup"><span data-stu-id="79d34-121">If the path begins with '.', the path is considered to be relative to the site root.</span></span></p><p><span data-ttu-id="79d34-122">No existe ningún valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="79d34-122">There is no default value.</span></span></p> |
| <span data-ttu-id="79d34-123">argumentos</span><span class="sxs-lookup"><span data-stu-id="79d34-123">arguments</span></span> | <p><span data-ttu-id="79d34-124">Atributo de cadena opcional.</span><span class="sxs-lookup"><span data-stu-id="79d34-124">Optional string attribute.</span></span></p><p><span data-ttu-id="79d34-125">Argumentos para el ejecutable especificado en **processPath**.</span><span class="sxs-lookup"><span data-stu-id="79d34-125">Arguments to the executable specified in **processPath**.</span></span></p><p><span data-ttu-id="79d34-126">El valor predeterminado es una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="79d34-126">The default value is an empty string.</span></span></p> |
| <span data-ttu-id="79d34-127">startupTimeLimit</span><span class="sxs-lookup"><span data-stu-id="79d34-127">startupTimeLimit</span></span> | <p><span data-ttu-id="79d34-128">Atributo de entero opcional.</span><span class="sxs-lookup"><span data-stu-id="79d34-128">Optional integer attribute.</span></span></p><p><span data-ttu-id="79d34-129">Duración en segundos que esperará el módulo para que el ejecutable iniciar un proceso escuchando en el puerto.</span><span class="sxs-lookup"><span data-stu-id="79d34-129">Duration in seconds that the module will wait for the executable to start a process listening on the port.</span></span> <span data-ttu-id="79d34-130">Si se supera este límite de tiempo, el módulo terminará el proceso.</span><span class="sxs-lookup"><span data-stu-id="79d34-130">If this time limit is exceeded, the module will kill the process.</span></span> <span data-ttu-id="79d34-131">El módulo intentará iniciar el proceso de nuevo cuando recibe una nueva solicitud y continuará intentar reiniciar el proceso en las posteriores solicitudes entrantes a menos que la aplicación no se puede iniciar **rapidFailsPerMinute** número de veces en el último minuto gradual.</span><span class="sxs-lookup"><span data-stu-id="79d34-131">The module will attempt to launch the process again when it receives a new request and will continue to attempt to restart the process on subsequent incoming requests unless the application fails to start **rapidFailsPerMinute** number of times in the last rolling minute.</span></span></p><p><span data-ttu-id="79d34-132">El valor predeterminado es 120.</span><span class="sxs-lookup"><span data-stu-id="79d34-132">The default value is 120.</span></span></p> |
| <span data-ttu-id="79d34-133">shutdownTimeLimit</span><span class="sxs-lookup"><span data-stu-id="79d34-133">shutdownTimeLimit</span></span> | <p><span data-ttu-id="79d34-134">Atributo de entero opcional.</span><span class="sxs-lookup"><span data-stu-id="79d34-134">Optional integer attribute.</span></span></p><p><span data-ttu-id="79d34-135">Duración en segundos para que el módulo esperará a que el ejecutable que se debe apagar normalmente cuando la *app_offline.htm* se detecta que el archivo.</span><span class="sxs-lookup"><span data-stu-id="79d34-135">Duration in seconds for which the module will wait for the executable to gracefully shutdown when the *app_offline.htm* file is detected.</span></span></p><p><span data-ttu-id="79d34-136">El valor predeterminado es 10.</span><span class="sxs-lookup"><span data-stu-id="79d34-136">The default value is 10.</span></span></p> |
| <span data-ttu-id="79d34-137">rapidFailsPerMinute</span><span class="sxs-lookup"><span data-stu-id="79d34-137">rapidFailsPerMinute</span></span> | <p><span data-ttu-id="79d34-138">Atributo de entero opcional.</span><span class="sxs-lookup"><span data-stu-id="79d34-138">Optional integer attribute.</span></span></p><p><span data-ttu-id="79d34-139">Especifica el número de veces especificado por el proceso de **processPath** se permite el bloqueo por minuto.</span><span class="sxs-lookup"><span data-stu-id="79d34-139">Specifies the number of times the process specified in **processPath** is allowed to crash per minute.</span></span> <span data-ttu-id="79d34-140">Si se supera este límite, el módulo dejará de iniciar el proceso para el resto del minuto.</span><span class="sxs-lookup"><span data-stu-id="79d34-140">If this limit is exceeded, the module will stop launching the process for the remainder of the minute.</span></span></p><p><span data-ttu-id="79d34-141">El valor predeterminado es 10.</span><span class="sxs-lookup"><span data-stu-id="79d34-141">The default value is 10.</span></span></p> |
| <span data-ttu-id="79d34-142">requestTimeout</span><span class="sxs-lookup"><span data-stu-id="79d34-142">requestTimeout</span></span> | <p><span data-ttu-id="79d34-143">Atributo timespan opcional.</span><span class="sxs-lookup"><span data-stu-id="79d34-143">Optional timespan attribute.</span></span></p><p><span data-ttu-id="79d34-144">Especifica la duración para la que el módulo principal de ASP.NET esperará una respuesta del proceso escucha en % ASPNETCORE_PORT %.</span><span class="sxs-lookup"><span data-stu-id="79d34-144">Specifies the duration for which the ASP.NET Core Module will wait for a response from the process listening on %ASPNETCORE_PORT%.</span></span></p><p><span data-ttu-id="79d34-145">El valor predeterminado es "00:02:00".</span><span class="sxs-lookup"><span data-stu-id="79d34-145">The default value is "00:02:00".</span></span></p> |
| <span data-ttu-id="79d34-146">stdoutLogEnabled</span><span class="sxs-lookup"><span data-stu-id="79d34-146">stdoutLogEnabled</span></span> | <p><span data-ttu-id="79d34-147">Atributo Boolean opcional.</span><span class="sxs-lookup"><span data-stu-id="79d34-147">Optional Boolean attribute.</span></span></p><p><span data-ttu-id="79d34-148">Si es true, **stdout** y **stderr** para el proceso especificado en **processPath** se redirigirán al archivo especificado en **stdoutLogFile**.</span><span class="sxs-lookup"><span data-stu-id="79d34-148">If true, **stdout** and **stderr** for the process specified in **processPath** will be redirected to the file specified in **stdoutLogFile**.</span></span></p><p><span data-ttu-id="79d34-149">El valor predeterminado es false.</span><span class="sxs-lookup"><span data-stu-id="79d34-149">The default value is false.</span></span></p> |
| <span data-ttu-id="79d34-150">stdoutLogFile</span><span class="sxs-lookup"><span data-stu-id="79d34-150">stdoutLogFile</span></span> | <p><span data-ttu-id="79d34-151">Atributo de cadena opcional.</span><span class="sxs-lookup"><span data-stu-id="79d34-151">Optional string attribute.</span></span></p><p><span data-ttu-id="79d34-152">Especifica la ruta de acceso relativa o absoluta para el que **stdout** y **stderr** desde el proceso especificado en **processPath** se registrarán.</span><span class="sxs-lookup"><span data-stu-id="79d34-152">Specifies the relative or absolute file path for which **stdout** and **stderr** from the process specified in **processPath** will be logged.</span></span> <span data-ttu-id="79d34-153">Rutas de acceso relativas son relativas a la raíz del sitio.</span><span class="sxs-lookup"><span data-stu-id="79d34-153">Relative paths are relative to the root of the site.</span></span> <span data-ttu-id="79d34-154">Cualquier ruta de acceso a partir de '.' será relativa a la raíz del sitio y todas las demás rutas de acceso se deben tratar como rutas de acceso absolutas.</span><span class="sxs-lookup"><span data-stu-id="79d34-154">Any path starting with '.' will be relative to the site root and all other paths will be treated as absolute paths.</span></span> <span data-ttu-id="79d34-155">Las carpetas que se proporcionan en la ruta de acceso deben existir en orden para el módulo crear el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="79d34-155">Any folders provided in the path must exist in order for the module to create the log file.</span></span> <span data-ttu-id="79d34-156">El identificador de proceso, marca de tiempo (*yyyyMdhms*) y la extensión de archivo (*.log*) con el carácter de subrayado delimitadores se agregan al último segmento de la **stdoutLogFile** proporcionado.</span><span class="sxs-lookup"><span data-stu-id="79d34-156">The process ID, timestamp (*yyyyMdhms*), and file extension (*.log*) with underscore delimiters are added to the last segment of the **stdoutLogFile** provided.</span></span></p><p><span data-ttu-id="79d34-157">El valor predeterminado es `aspnetcore-stdout`.</span><span class="sxs-lookup"><span data-stu-id="79d34-157">The default value is `aspnetcore-stdout`.</span></span></p> |
| <span data-ttu-id="79d34-158">forwardWindowsAuthToken</span><span class="sxs-lookup"><span data-stu-id="79d34-158">forwardWindowsAuthToken</span></span> | <span data-ttu-id="79d34-159">true o false</span><span class="sxs-lookup"><span data-stu-id="79d34-159">true or false.</span></span></p><p><span data-ttu-id="79d34-160">Si es true, el token se reenviarán al proceso secundario escucha en % ASPNETCORE_PORT % como un encabezado 'MS-ASPNETCORE-WINAUTHTOKEN' por solicitud.</span><span class="sxs-lookup"><span data-stu-id="79d34-160">If true, the token will be forwarded to the child process listening on %ASPNETCORE_PORT% as a header 'MS-ASPNETCORE-WINAUTHTOKEN' per request.</span></span> <span data-ttu-id="79d34-161">Es responsabilidad de dicho proceso para llamar a CloseHandle en este token por solicitud.</span><span class="sxs-lookup"><span data-stu-id="79d34-161">It is the responsibility of that process to call CloseHandle on this token per request.</span></span></p><p><span data-ttu-id="79d34-162">El valor predeterminado es true.</span><span class="sxs-lookup"><span data-stu-id="79d34-162">The default value is true.</span></span></p> |
| <span data-ttu-id="79d34-163">disableStartUpErrorPage</span><span class="sxs-lookup"><span data-stu-id="79d34-163">disableStartUpErrorPage</span></span> | <span data-ttu-id="79d34-164">true o false</span><span class="sxs-lookup"><span data-stu-id="79d34-164">true or false.</span></span></p><p><span data-ttu-id="79d34-165">Si es true, el **502.5 - Error de proceso** página que se van a eliminar, y la página de códigos de 502 estado configurado en su *web.config* tendrá prioridad.</span><span class="sxs-lookup"><span data-stu-id="79d34-165">If true, the **502.5 - Process Failure** page will be suppressed, and the 502 status code page configured in your *web.config* will take precedence.</span></span></p><p><span data-ttu-id="79d34-166">El valor predeterminado es false.</span><span class="sxs-lookup"><span data-stu-id="79d34-166">The default value is false.</span></span></p> |

### <a name="setting-environment-variables"></a><span data-ttu-id="79d34-167">Establecer variables de entorno</span><span class="sxs-lookup"><span data-stu-id="79d34-167">Setting environment variables</span></span>

<span data-ttu-id="79d34-168">El módulo principal de ASP.NET le permite especificar las variables de entorno del proceso especificado en el `processPath` atributo especificándolas en uno o varios `environmentVariable` elementos secundarios de un `environmentVariables` elemento de la colección en el `aspNetCore` elemento.</span><span class="sxs-lookup"><span data-stu-id="79d34-168">The ASP.NET Core Module allows you specify environment variables for the process specified in the `processPath` attribute by specifying them in one or more `environmentVariable` child elements of an `environmentVariables` collection element under the `aspNetCore` element.</span></span> <span data-ttu-id="79d34-169">Las variables de entorno establecidas en esta sección tienen prioridad sobre el sistema las variables de entorno para el proceso.</span><span class="sxs-lookup"><span data-stu-id="79d34-169">Environment variables set in this section take precedence over system environment variables for the process.</span></span>

<span data-ttu-id="79d34-170">En el ejemplo siguiente establece dos variables de entorno.</span><span class="sxs-lookup"><span data-stu-id="79d34-170">The example below sets two environment variables.</span></span> <span data-ttu-id="79d34-171">`ASPNETCORE_ENVIRONMENT`va a configurar el entorno de la aplicación para `Development`.</span><span class="sxs-lookup"><span data-stu-id="79d34-171">`ASPNETCORE_ENVIRONMENT` will configure the application's environment to `Development`.</span></span> <span data-ttu-id="79d34-172">Un programador puede establecer temporalmente este valor el *web.config* archivo con el fin de forzar la [página de excepción para desarrolladores](xref:fundamentals/error-handling) cargar al depurar una excepción de aplicación.</span><span class="sxs-lookup"><span data-stu-id="79d34-172">A developer may temporarily set this value in the *web.config* file in order to force the [developer exception page](xref:fundamentals/error-handling) to load when debugging an app exception.</span></span> <span data-ttu-id="79d34-173">`CONFIG_DIR`es un ejemplo de una variable de entorno definida por el usuario, donde el desarrollador ha escrito el código que va a leer el valor de inicio para formar una ruta de acceso para cargar el archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="79d34-173">`CONFIG_DIR` is an example of a user-defined environment variable, where the developer has written code that will read the value on startup to form a path in order to load the app's configuration file.</span></span>

```xml
<aspNetCore processPath="dotnet"
      arguments=".\MyApp.dll"
      stdoutLogEnabled="false"
      stdoutLogFile="\\?\%home%\LogFiles\stdout">
  <environmentVariables>
    <environmentVariable name="ASPNETCORE_ENVIRONMENT" value="Development" />
    <environmentVariable name="CONFIG_DIR" value="f:\application_config" />
  </environmentVariables>
</aspNetCore>
```

## <a name="appofflinehtm"></a><span data-ttu-id="79d34-174">App_offline.htm</span><span class="sxs-lookup"><span data-stu-id="79d34-174">app_offline.htm</span></span>

<span data-ttu-id="79d34-175">Si se coloca un archivo con el nombre *app_offline.htm* en la raíz de un directorio de aplicación web, el módulo de núcleo de ASP.NET se intenta correctamente, cierre la aplicación y detener el procesamiento de las solicitudes entrantes.</span><span class="sxs-lookup"><span data-stu-id="79d34-175">If you place a file with the name *app_offline.htm* at the root of a web application directory, the ASP.NET Core Module will attempt to gracefully shutdown the app and stop processing incoming requests.</span></span> <span data-ttu-id="79d34-176">Si la aplicación sigue ejecutándose después de `shutdownTimeLimit` número de segundos, el módulo principal de ASP.NET terminará el proceso de ejecución.</span><span class="sxs-lookup"><span data-stu-id="79d34-176">If the app is still running after `shutdownTimeLimit` number of seconds, the ASP.NET Core Module will kill the running process.</span></span>

<span data-ttu-id="79d34-177">Mientras el *app_offline.htm* archivo está presente, el módulo principal de ASP.NET responderá a las solicitudes mediante el envío de nuevo el contenido de la *app_offline.htm* archivo.</span><span class="sxs-lookup"><span data-stu-id="79d34-177">While the *app_offline.htm* file is present, the ASP.NET Core Module will respond to requests by sending back the contents of the *app_offline.htm* file.</span></span> <span data-ttu-id="79d34-178">Una vez el *app_offline.htm* se quita el archivo, la siguiente solicitud de carga de la aplicación, que, a continuación, responde a las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="79d34-178">Once the *app_offline.htm* file is removed, the next request loads the application, which then responds to requests.</span></span>

## <a name="start-up-error-page"></a><span data-ttu-id="79d34-179">Página de error de inicio</span><span class="sxs-lookup"><span data-stu-id="79d34-179">Start-up error page</span></span>

<span data-ttu-id="79d34-180">Si se produce un error en el módulo principal de ASP.NET iniciar el proceso de back-end o el proceso de back-end comienza pero no puede escuchar en el puerto configurado, verá una página de códigos de estado HTTP 502.5.</span><span class="sxs-lookup"><span data-stu-id="79d34-180">If the ASP.NET Core Module fails to launch the backend process or the backend process starts but fails to listen on the configured port, you will see an HTTP 502.5 status code page.</span></span> <span data-ttu-id="79d34-181">Para suprimir esta página y volver a la página de códigos de estado de IIS 502 predeterminado, utilice el `disableStartUpErrorPage` atributo.</span><span class="sxs-lookup"><span data-stu-id="79d34-181">To suppress this page and revert to the default IIS 502 status code page, use the `disableStartUpErrorPage` attribute.</span></span> <span data-ttu-id="79d34-182">Para obtener más información acerca de cómo configurar mensajes de error personalizados, vea [errores HTTP `<httpErrors>` ](https://docs.microsoft.com/iis/configuration/system.webServer/httpErrors/).</span><span class="sxs-lookup"><span data-stu-id="79d34-182">For more information on configuring custom error messages, see [HTTP Errors `<httpErrors>`](https://docs.microsoft.com/iis/configuration/system.webServer/httpErrors/).</span></span>

![Página de estado 502](aspnet-core-module/_static/ANCM-502_5.png)

## <a name="log-creation-and-redirection"></a><span data-ttu-id="79d34-184">Creación de registro y de redirección</span><span class="sxs-lookup"><span data-stu-id="79d34-184">Log creation and redirection</span></span>

<span data-ttu-id="79d34-185">El módulo principal de ASP.NET redirige `stdout` y `stderr` registros en el disco si se establece la `stdoutLogEnabled` y `stdoutLogFile` atributos de la `aspNetCore` elemento.</span><span class="sxs-lookup"><span data-stu-id="79d34-185">The ASP.NET Core Module redirects `stdout` and `stderr` logs to disk if you set the `stdoutLogEnabled` and `stdoutLogFile` attributes of the `aspNetCore` element.</span></span> <span data-ttu-id="79d34-186">Las carpetas en el `stdoutLogFile` ruta debe existir en orden para el módulo crear el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="79d34-186">Any folders in the `stdoutLogFile` path must exist in order for the module to create the log file.</span></span> <span data-ttu-id="79d34-187">Una marca de tiempo y extensión de archivo se agregará automáticamente cuando se crea el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="79d34-187">A timestamp and file extension will be added automatically when the log file is created.</span></span> <span data-ttu-id="79d34-188">Los registros no se giran, salvo que se produzca el reinicio/reciclaje del proceso.</span><span class="sxs-lookup"><span data-stu-id="79d34-188">Logs are not rotated, unless process recycling/restart occurs.</span></span> <span data-ttu-id="79d34-189">Es responsabilidad del proveedor de hospedaje para limitar los registros de consumen el espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="79d34-189">It is the responsibility of the hoster to limit the disk space the logs consume.</span></span> <span data-ttu-id="79d34-190">Mediante el `stdout` registro sólo se recomienda para solucionar problemas de inicio de la aplicación y no para fines de registro de aplicación general.</span><span class="sxs-lookup"><span data-stu-id="79d34-190">Using the `stdout` log is only recommended for troubleshooting application startup issues and not for general application logging purposes.</span></span>

<span data-ttu-id="79d34-191">El nombre de archivo de registro se crea anexando el identificador de proceso (PID), marca de tiempo (*yyyyMdhms*) y la extensión de archivo (*.log*) para el último segmento de la `stdoutLogFile` ruta de acceso (normalmente *stdout *) delimitados por caracteres de subrayado.</span><span class="sxs-lookup"><span data-stu-id="79d34-191">The log file name is composed by appending the process ID (PID), timestamp (*yyyyMdhms*), and file extension (*.log*) to the last segment of the `stdoutLogFile` path (typically *stdout*) delimited by underscores.</span></span> <span data-ttu-id="79d34-192">Por ejemplo si el `stdoutLogFile` ruta de acceso finaliza con *stdout*, un registro de una aplicación con un PID de 10652 8/10/2017 creada a las 12:05:02 tiene el nombre de archivo *stdout_10652_20178101252.log*.</span><span class="sxs-lookup"><span data-stu-id="79d34-192">For example if the `stdoutLogFile` path ends with *stdout*, a log for an app with a PID of 10652 created on 8/10/2017 at 12:05:02 has the file name *stdout_10652_20178101252.log*.</span></span>

<span data-ttu-id="79d34-193">Este es un ejemplo `aspNetCore` elemento que configura `stdout` registro.</span><span class="sxs-lookup"><span data-stu-id="79d34-193">Here's a sample `aspNetCore` element that configures `stdout` logging.</span></span> <span data-ttu-id="79d34-194">El `stdoutLogFile` se muestra en el ejemplo de la ruta de acceso es adecuado para el servicio de aplicaciones de Azure.</span><span class="sxs-lookup"><span data-stu-id="79d34-194">The `stdoutLogFile` path shown in the example is appropriate for the Azure App Service.</span></span> <span data-ttu-id="79d34-195">Una ruta de acceso local o una ruta de acceso de recurso compartido de red es aceptable para el registro local.</span><span class="sxs-lookup"><span data-stu-id="79d34-195">A local path or network share path is acceptable for local logging.</span></span> <span data-ttu-id="79d34-196">Confirme que la identidad del usuario AppPool tiene permiso para escribir en la ruta de acceso proporcionada.</span><span class="sxs-lookup"><span data-stu-id="79d34-196">Confirm that the AppPool user identity has permission to write to the path provided.</span></span>

```xml
<aspNetCore processPath="dotnet"
    arguments=".\MyApp.dll"
    stdoutLogEnabled="true"
    stdoutLogFile="\\?\%home%\LogFiles\stdout">
</aspNetCore>
```

## <a name="aspnet-core-module-with-an-iis-shared-configuration"></a><span data-ttu-id="79d34-197">Configuración compartida de módulo de núcleo de ASP.NET con un servicio de IIS</span><span class="sxs-lookup"><span data-stu-id="79d34-197">ASP.NET Core Module with an IIS Shared Configuration</span></span>

<span data-ttu-id="79d34-198">El instalador del módulo de núcleo de ASP.NET se ejecuta con los privilegios de la **SYSTEM** cuenta.</span><span class="sxs-lookup"><span data-stu-id="79d34-198">The ASP.NET Core Module installer runs with the privileges of the **SYSTEM** account.</span></span> <span data-ttu-id="79d34-199">Dado que la cuenta de sistema local no tiene permiso para modificar la ruta de acceso de recurso compartido que es utilizado por la configuración de IIS compartido, el programa de instalación llegará a un error de acceso denegado al intentar configurar los ajustes del módulo de * applicationHost.config* en el recurso compartido.</span><span class="sxs-lookup"><span data-stu-id="79d34-199">Because the local system account does not have modify permission for the share path which is used by the IIS Shared Configuration, the installer will hit an access denied error when attempting to configure the module settings in *applicationHost.config* on the share.</span></span>

<span data-ttu-id="79d34-200">La solución no compatible consiste en deshabilitar la configuración de IIS compartido, ejecute el programa de instalación o exportar actualizado *applicationHost.config* al recurso compartido de archivos y vuelva a habilitar la configuración de IIS compartido.</span><span class="sxs-lookup"><span data-stu-id="79d34-200">The unsupported workaround is to disable the IIS Shared Configuration, run the installer, export the updated *applicationHost.config* file to the share, and re-enable the IIS Shared Configuration.</span></span>

## <a name="module-schema-and-configuration-file-locations"></a><span data-ttu-id="79d34-201">Ubicaciones de archivo de módulo, esquema y configuración</span><span class="sxs-lookup"><span data-stu-id="79d34-201">Module, schema, and configuration file locations</span></span>

### <a name="module"></a><span data-ttu-id="79d34-202">Módulo</span><span class="sxs-lookup"><span data-stu-id="79d34-202">Module</span></span>

<span data-ttu-id="79d34-203">**IIS (x86/amd64):**</span><span class="sxs-lookup"><span data-stu-id="79d34-203">**IIS (x86/amd64):**</span></span>

   * <span data-ttu-id="79d34-204">%windir%\System32\inetsrv\aspnetcore.dll</span><span class="sxs-lookup"><span data-stu-id="79d34-204">%windir%\System32\inetsrv\aspnetcore.dll</span></span>

   * <span data-ttu-id="79d34-205">%windir%\SysWOW64\inetsrv\aspnetcore.dll</span><span class="sxs-lookup"><span data-stu-id="79d34-205">%windir%\SysWOW64\inetsrv\aspnetcore.dll</span></span>

<span data-ttu-id="79d34-206">**IIS Express (x86/amd64):**</span><span class="sxs-lookup"><span data-stu-id="79d34-206">**IIS Express (x86/amd64):**</span></span>

   * <span data-ttu-id="79d34-207">%ProgramFiles%\IIS Express\aspnetcore.dll</span><span class="sxs-lookup"><span data-stu-id="79d34-207">%ProgramFiles%\IIS Express\aspnetcore.dll</span></span>

   * <span data-ttu-id="79d34-208">% ProgramFiles (x86) %\IIS Express\aspnetcore.dll</span><span class="sxs-lookup"><span data-stu-id="79d34-208">%ProgramFiles(x86)%\IIS Express\aspnetcore.dll</span></span>

### <a name="schema"></a><span data-ttu-id="79d34-209">Schema</span><span class="sxs-lookup"><span data-stu-id="79d34-209">Schema</span></span>

<span data-ttu-id="79d34-210">**IIS**</span><span class="sxs-lookup"><span data-stu-id="79d34-210">**IIS**</span></span>

   * <span data-ttu-id="79d34-211">%windir%\System32\inetsrv\config\schema\aspnetcore_schema.Xml</span><span class="sxs-lookup"><span data-stu-id="79d34-211">%windir%\System32\inetsrv\config\schema\aspnetcore_schema.xml</span></span>

<span data-ttu-id="79d34-212">**IIS Express**</span><span class="sxs-lookup"><span data-stu-id="79d34-212">**IIS Express**</span></span>

   * <span data-ttu-id="79d34-213">%ProgramFiles%\IIS Express\config\schema\aspnetcore_schema.xml</span><span class="sxs-lookup"><span data-stu-id="79d34-213">%ProgramFiles%\IIS Express\config\schema\aspnetcore_schema.xml</span></span>

### <a name="configuration"></a><span data-ttu-id="79d34-214">Configuración</span><span class="sxs-lookup"><span data-stu-id="79d34-214">Configuration</span></span>

<span data-ttu-id="79d34-215">**IIS**</span><span class="sxs-lookup"><span data-stu-id="79d34-215">**IIS**</span></span>

   * <span data-ttu-id="79d34-216">%windir%\System32\inetsrv\config\applicationHost.config</span><span class="sxs-lookup"><span data-stu-id="79d34-216">%windir%\System32\inetsrv\config\applicationHost.config</span></span>

<span data-ttu-id="79d34-217">**IIS Express**</span><span class="sxs-lookup"><span data-stu-id="79d34-217">**IIS Express**</span></span>

   * <span data-ttu-id="79d34-218">.vs\config\applicationHost.config</span><span class="sxs-lookup"><span data-stu-id="79d34-218">.vs\config\applicationHost.config</span></span>

<span data-ttu-id="79d34-219">Puede buscar *aspnetcore.dll* en el *applicationHost.config* archivo.</span><span class="sxs-lookup"><span data-stu-id="79d34-219">You can search for *aspnetcore.dll* in the *applicationHost.config* file.</span></span> <span data-ttu-id="79d34-220">Para IIS Express, la *applicationHost.config* el archivo no existe de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="79d34-220">For IIS Express, the *applicationHost.config* file won't exist by default.</span></span> <span data-ttu-id="79d34-221">El archivo se crea en *{raíz de la aplicación}\.vs\config* cuando se inicia ningún proyecto de aplicación web en la solución de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="79d34-221">The file is created at *{application root}\.vs\config* when you start any web application project in the Visual Studio solution.</span></span>
