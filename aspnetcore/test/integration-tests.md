---
title: Pruebas de integración de ASP.NET Core
author: guardrex
description: Obtenga información sobre cómo las pruebas de integración garantizan que los componentes de una aplicación, como la base de datos, el sistema de archivos y la red, funcionen correctamente en la infraestructura.
ms.author: riande
ms.custom: mvc
ms.date: 05/30/2018
uid: test/integration-tests
ms.openlocfilehash: 1895b06f1af9a9eb66c14aa5c7834497fc95d583
ms.sourcegitcommit: a1afd04758e663d7062a5bfa8a0d4dca38f42afc
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/20/2018
ms.locfileid: "36277701"
---
# <a name="integration-tests-in-aspnet-core"></a><span data-ttu-id="d6390-103">Pruebas de integración de ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="d6390-103">Integration tests in ASP.NET Core</span></span>

<span data-ttu-id="d6390-104">Por [Luke Latham](https://github.com/guardrex) y [Steve Smith](https://ardalis.com/)</span><span class="sxs-lookup"><span data-stu-id="d6390-104">By [Luke Latham](https://github.com/guardrex) and [Steve Smith](https://ardalis.com/)</span></span>

<span data-ttu-id="d6390-105">Pruebas de integración aseguran de que los componentes de una aplicación funcionen correctamente en un nivel que incluye la infraestructura de soporte de la aplicación, como la base de datos, el sistema de archivos y la red.</span><span class="sxs-lookup"><span data-stu-id="d6390-105">Integration tests ensure that an app's components function correctly at a level that includes the app's supporting infrastructure, such as the database, file system, and network.</span></span> <span data-ttu-id="d6390-106">ASP.NET Core es compatible con las pruebas de integración con un marco de pruebas unitarias con un host de web de prueba y un servidor de prueba en memoria.</span><span class="sxs-lookup"><span data-stu-id="d6390-106">ASP.NET Core supports integration tests using a unit test framework with a test web host and an in-memory test server.</span></span>

<span data-ttu-id="d6390-107">Este tema supone un conocimiento básico de las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="d6390-107">This topic assumes a basic understanding of unit tests.</span></span> <span data-ttu-id="d6390-108">Si familiarizado con conceptos de prueba, consulte el [pruebas unitarias en .NET Core y estándar de .NET](/dotnet/core/testing/) tema y su contenido vinculado.</span><span class="sxs-lookup"><span data-stu-id="d6390-108">If unfamiliar with test concepts, see the [Unit Testing in .NET Core and .NET Standard](/dotnet/core/testing/) topic and its linked content.</span></span>

<span data-ttu-id="d6390-109">[Vea o descargue el código de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) ([cómo descargarlo](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="d6390-109">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

<span data-ttu-id="d6390-110">La aplicación de ejemplo es una aplicación de páginas de Razor y asume un conocimiento básico de las páginas de Razor.</span><span class="sxs-lookup"><span data-stu-id="d6390-110">The sample app is a Razor Pages app and assumes a basic understanding of Razor Pages.</span></span> <span data-ttu-id="d6390-111">Si no conoce las páginas de Razor, vea los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="d6390-111">If unfamiliar with Razor Pages, see the following topics:</span></span>

* [<span data-ttu-id="d6390-112">Introducción a las páginas de Razor</span><span class="sxs-lookup"><span data-stu-id="d6390-112">Introduction to Razor Pages</span></span>](xref:razor-pages/index)
* [<span data-ttu-id="d6390-113">Introducción a las páginas de Razor</span><span class="sxs-lookup"><span data-stu-id="d6390-113">Get started with Razor Pages</span></span>](xref:tutorials/razor-pages/razor-pages-start)
* [<span data-ttu-id="d6390-114">Pruebas unitarias de páginas de Razor</span><span class="sxs-lookup"><span data-stu-id="d6390-114">Razor Pages unit tests</span></span>](xref:test/razor-pages-tests)

## <a name="introduction-to-integration-tests"></a><span data-ttu-id="d6390-115">Introducción a las pruebas de integración</span><span class="sxs-lookup"><span data-stu-id="d6390-115">Introduction to integration tests</span></span>

<span data-ttu-id="d6390-116">Pruebas de integración evaluación componentes de una aplicación en un nivel más amplio que [pruebas unitarias](/dotnet/core/testing/).</span><span class="sxs-lookup"><span data-stu-id="d6390-116">Integration tests evaluate an app's components on a broader level than [unit tests](/dotnet/core/testing/).</span></span> <span data-ttu-id="d6390-117">Pruebas unitarias se usan para probar los componentes de software independiente, como métodos de clase individuales.</span><span class="sxs-lookup"><span data-stu-id="d6390-117">Unit tests are used to test isolated software components, such as individual class methods.</span></span> <span data-ttu-id="d6390-118">Pruebas de integración confirmación que dos o más componentes de aplicación funcionan conjuntamente para generar un resultado esperado, posiblemente incluyen todos los componentes necesarios para procesar completamente una solicitud.</span><span class="sxs-lookup"><span data-stu-id="d6390-118">Integration tests confirm that two or more app components work together to produce an expected result, possibly including every component required to fully process a request.</span></span>

<span data-ttu-id="d6390-119">Estas pruebas más amplias se usan para probar la aplicación en la infraestructura y todo framework, a menudo incluye los siguientes componentes:</span><span class="sxs-lookup"><span data-stu-id="d6390-119">These broader tests are used to test the app's infrastructure and whole framework, often including the following components:</span></span>

* <span data-ttu-id="d6390-120">Base de datos</span><span class="sxs-lookup"><span data-stu-id="d6390-120">Database</span></span>
* <span data-ttu-id="d6390-121">Sistema de archivos</span><span class="sxs-lookup"><span data-stu-id="d6390-121">File system</span></span>
* <span data-ttu-id="d6390-122">Dispositivos de red</span><span class="sxs-lookup"><span data-stu-id="d6390-122">Network appliances</span></span>
* <span data-ttu-id="d6390-123">Canalización de solicitudes y respuestas</span><span class="sxs-lookup"><span data-stu-id="d6390-123">Request-response pipeline</span></span>

<span data-ttu-id="d6390-124">Pruebas unitarias uso fabricado componentes, denominados *fakes* o *simular objetos*, en lugar de los componentes de infraestructura.</span><span class="sxs-lookup"><span data-stu-id="d6390-124">Unit tests use fabricated components, known as *fakes* or *mock objects*, in place of infrastructure components.</span></span>

<span data-ttu-id="d6390-125">A diferencia de pruebas unitarias, pruebas de integración:</span><span class="sxs-lookup"><span data-stu-id="d6390-125">In contrast to unit tests, integration tests:</span></span>

* <span data-ttu-id="d6390-126">Utilice los componentes reales que usa la aplicación en producción.</span><span class="sxs-lookup"><span data-stu-id="d6390-126">Use the actual components that the app uses in production.</span></span>
* <span data-ttu-id="d6390-127">Se requieren más código y procesamiento de datos.</span><span class="sxs-lookup"><span data-stu-id="d6390-127">Require more code and data processing.</span></span>
* <span data-ttu-id="d6390-128">Tardar más tiempo en ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="d6390-128">Take longer to run.</span></span>

<span data-ttu-id="d6390-129">Por lo tanto, limite el uso de pruebas de integración para los escenarios más importantes de la infraestructura.</span><span class="sxs-lookup"><span data-stu-id="d6390-129">Therefore, limit the use of integration tests to the most important infrastructure scenarios.</span></span> <span data-ttu-id="d6390-130">Si un comportamiento se puede probar con una prueba unitaria o una prueba de integración, elija la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="d6390-130">If a behavior can be tested using either a unit test or an integration test, choose the unit test.</span></span>

> [!TIP]
> <span data-ttu-id="d6390-131">No escriba pruebas de integración para cada permutación posibles de acceso de archivos y datos con sistemas de archivos y bases de datos.</span><span class="sxs-lookup"><span data-stu-id="d6390-131">Don't write integration tests for every possible permutation of data and file access with databases and file systems.</span></span> <span data-ttu-id="d6390-132">Independientemente de cuántos lugares a través de una aplicación interactuar con bases de datos y sistemas de archivos, un conjunto de lectura, escritura, actualización y eliminación integración pruebas son normalmente capaces de base de datos de prueba adecuadamente y componentes del sistema de archivos tiene el foco.</span><span class="sxs-lookup"><span data-stu-id="d6390-132">Regardless of how many places across an app interact with databases and file systems, a focused set of read, write, update, and delete integration tests are usually capable of adequately testing database and file system components.</span></span> <span data-ttu-id="d6390-133">Usar unidad de pruebas para pruebas de rutina de la lógica del método que interactúan con estos componentes.</span><span class="sxs-lookup"><span data-stu-id="d6390-133">Use unit tests for routine tests of method logic that interact with these components.</span></span> <span data-ttu-id="d6390-134">En pruebas unitarias, el uso de la infraestructura de fakes/simulacros resultado en una ejecución de pruebas más rápida.</span><span class="sxs-lookup"><span data-stu-id="d6390-134">In unit tests, the use of infrastructure fakes/mocks result in faster test execution.</span></span>

> [!NOTE]
> <span data-ttu-id="d6390-135">En las discusiones de pruebas de integración, el proyecto probado se suele denominar la *sistema sometido a prueba*, o "SUT" para abreviar.</span><span class="sxs-lookup"><span data-stu-id="d6390-135">In discussions of integration tests, the tested project is frequently called the *system under test*, or "SUT" for short.</span></span>

## <a name="aspnet-core-integration-tests"></a><span data-ttu-id="d6390-136">Pruebas de integración de ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="d6390-136">ASP.NET Core integration tests</span></span>

<span data-ttu-id="d6390-137">Pruebas de integración de ASP.NET Core requieren lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d6390-137">Integration tests in ASP.NET Core require the following:</span></span>

* <span data-ttu-id="d6390-138">Un proyecto de prueba se usa para contener y ejecutar las pruebas.</span><span class="sxs-lookup"><span data-stu-id="d6390-138">A test project is used to contain and execute the tests.</span></span> <span data-ttu-id="d6390-139">El proyecto de prueba tiene una referencia al proyecto de ASP.NET Core probado, denominado el *sistema sometido a prueba* (SUT).</span><span class="sxs-lookup"><span data-stu-id="d6390-139">The test project has a reference to the tested ASP.NET Core project, called the *system under test* (SUT).</span></span> <span data-ttu-id="d6390-140">_"SUT" se utiliza a lo largo de este tema para hacer referencia a la aplicación probada._</span><span class="sxs-lookup"><span data-stu-id="d6390-140">_"SUT" is used throughout this topic to refer to the tested app._</span></span>
* <span data-ttu-id="d6390-141">El proyecto de prueba crea un host de web de prueba para el SUT y usa a un cliente de servidor de prueba para controlar las solicitudes y respuestas para el SUT.</span><span class="sxs-lookup"><span data-stu-id="d6390-141">The test project creates a test web host for the SUT and uses a test server client to handle requests and responses to the SUT.</span></span>
* <span data-ttu-id="d6390-142">Se utiliza un ejecutor de pruebas para ejecutar las pruebas y los informes de los resultados de pruebas.</span><span class="sxs-lookup"><span data-stu-id="d6390-142">A test runner is used to execute the tests and report the test results.</span></span>

<span data-ttu-id="d6390-143">Pruebas de integración siguen una secuencia de eventos que incluyen el habitual *organizar*, *Act*, y *Assert* pasos de prueba:</span><span class="sxs-lookup"><span data-stu-id="d6390-143">Integration tests follow a sequence of events that include the usual *Arrange*, *Act*, and *Assert* test steps:</span></span>

1. <span data-ttu-id="d6390-144">Host de web de SUT está configurado.</span><span class="sxs-lookup"><span data-stu-id="d6390-144">The SUT's web host is configured.</span></span>
1. <span data-ttu-id="d6390-145">Se crea un cliente de servidor de prueba para enviar solicitudes a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d6390-145">A test server client is created to submit requests to the app.</span></span>
1. <span data-ttu-id="d6390-146">El *organizar* se ejecuta el paso de prueba: la aplicación de prueba prepara una solicitud.</span><span class="sxs-lookup"><span data-stu-id="d6390-146">The *Arrange* test step is executed: The test app prepares a request.</span></span>
1. <span data-ttu-id="d6390-147">El *Act* se ejecuta el paso de prueba: el cliente envía la solicitud y recibe la respuesta.</span><span class="sxs-lookup"><span data-stu-id="d6390-147">The *Act* test step is executed: The client submits the request and receives the response.</span></span>
1. <span data-ttu-id="d6390-148">El *Assert* se ejecuta el paso de prueba: el *real* respuesta se valida como un *pasar* o *producirá un error* tomando como base un *esperado*  respuesta.</span><span class="sxs-lookup"><span data-stu-id="d6390-148">The *Assert* test step is executed: The *actual* response is validated as a *pass* or *fail* based on an *expected* response.</span></span>
1. <span data-ttu-id="d6390-149">El proceso continúa hasta que todas las pruebas se ejecutan.</span><span class="sxs-lookup"><span data-stu-id="d6390-149">The process continues until all of the tests are executed.</span></span>
1. <span data-ttu-id="d6390-150">Se informa de los resultados de pruebas.</span><span class="sxs-lookup"><span data-stu-id="d6390-150">The test results are reported.</span></span>

<span data-ttu-id="d6390-151">Normalmente, el host de prueba web está configurado de forma diferente de host de la aplicación web normal para la prueba se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="d6390-151">Usually, the test web host is configured differently than the app's normal web host for the test runs.</span></span> <span data-ttu-id="d6390-152">Por ejemplo, podría utilizarse para las pruebas de otra base de datos o la configuración de aplicación distinta.</span><span class="sxs-lookup"><span data-stu-id="d6390-152">For example, a different database or different app settings might be used for the tests.</span></span>

<span data-ttu-id="d6390-153">Componentes de infraestructura, como el host de prueba web y el servidor de prueba en memoria ([TestServer](/dotnet/api/microsoft.aspnetcore.testhost.testserver)), se proporciona o administrados por el [Microsoft.AspNetCore.Mvc.Testing](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Testing) paquete.</span><span class="sxs-lookup"><span data-stu-id="d6390-153">Infrastructure components, such as the test web host and in-memory test server ([TestServer](/dotnet/api/microsoft.aspnetcore.testhost.testserver)), are provided or managed by the [Microsoft.AspNetCore.Mvc.Testing](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Testing) package.</span></span> <span data-ttu-id="d6390-154">Uso de este paquete simplifica la creación de la prueba y ejecución.</span><span class="sxs-lookup"><span data-stu-id="d6390-154">Use of this package streamlines test creation and execution.</span></span>

<span data-ttu-id="d6390-155">El `Microsoft.AspNetCore.Mvc.Testing` paquete controla las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="d6390-155">The `Microsoft.AspNetCore.Mvc.Testing` package handles the following tasks:</span></span>

* <span data-ttu-id="d6390-156">Copia el archivo de dependencias (*\*.deps*) desde el SUT en el proyecto de prueba *bin* carpeta.</span><span class="sxs-lookup"><span data-stu-id="d6390-156">Copies the dependencies file (*\*.deps*) from the SUT into the test project's *bin* folder.</span></span>
* <span data-ttu-id="d6390-157">Establece la raíz de contenido en la raíz del proyecto de SUT para que se encuentran archivos estáticos como páginas o vistas cuando se ejecutan las pruebas.</span><span class="sxs-lookup"><span data-stu-id="d6390-157">Sets the content root to the SUT's project root so that static files and pages/views are found when the tests are executed.</span></span>
* <span data-ttu-id="d6390-158">Proporciona el [WebApplicationFactory](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1) clase simplificar arrancar el SUT con `TestServer`.</span><span class="sxs-lookup"><span data-stu-id="d6390-158">Provides the [WebApplicationFactory](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1) class to streamline bootstrapping the SUT with `TestServer`.</span></span>

<span data-ttu-id="d6390-159">El [pruebas unitarias](/dotnet/articles/core/testing/unit-testing-with-dotnet-test) documentación describe cómo configurar un proyecto y probar el ejecutor de pruebas, así como instrucciones detalladas sobre cómo ejecutar pruebas y recomendaciones sobre cómo para comprobaciones de nombres y clases de prueba.</span><span class="sxs-lookup"><span data-stu-id="d6390-159">The [unit tests](/dotnet/articles/core/testing/unit-testing-with-dotnet-test) documentation describes how to set up a test project and test runner, along with detailed instructions on how to run tests and recommendations for how to name tests and test classes.</span></span>

> [!NOTE]
> <span data-ttu-id="d6390-160">Al crear un proyecto de prueba para una aplicación, separe las pruebas unitarias de las pruebas de integración en proyectos diferentes.</span><span class="sxs-lookup"><span data-stu-id="d6390-160">When creating a test project for an app, separate the unit tests from the integration tests into different projects.</span></span> <span data-ttu-id="d6390-161">Esto ayuda a asegurarse de que accidentalmente componentes de infraestructura de pruebas no incluidos en las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="d6390-161">This helps ensure that infrastructure testing components aren't accidently included in the unit tests.</span></span> <span data-ttu-id="d6390-162">La separación de las pruebas de unidades y de integración también permite controlar en qué conjunto de pruebas se ejecutan.</span><span class="sxs-lookup"><span data-stu-id="d6390-162">Separation of unit and integration tests also allows control over which set of tests are run.</span></span>

<span data-ttu-id="d6390-163">No hay prácticamente ninguna diferencia entre la configuración de pruebas de las aplicaciones de las páginas de Razor y las aplicaciones MVC.</span><span class="sxs-lookup"><span data-stu-id="d6390-163">There's virtually no difference between the configuration for tests of Razor Pages apps and MVC apps.</span></span> <span data-ttu-id="d6390-164">La única diferencia está en cómo se denominan las pruebas.</span><span class="sxs-lookup"><span data-stu-id="d6390-164">The only difference is in how the tests are named.</span></span> <span data-ttu-id="d6390-165">En una aplicación de páginas de Razor, suelen denominarse pruebas de los puntos de conexión de la página después de la clase de modelo de página (por ejemplo, `IndexPageTests` para probar la integración del componente de la página de índice).</span><span class="sxs-lookup"><span data-stu-id="d6390-165">In a Razor Pages app, tests of page endpoints are usually named after the page model class (for example, `IndexPageTests` to test component integration for the Index page).</span></span> <span data-ttu-id="d6390-166">En una aplicación MVC, pruebas normalmente están organizadas por las clases de controlador y los controladores que se someten a prueba con el nombre (por ejemplo, `HomeControllerTests` para probar la integración del componente para el controlador Home).</span><span class="sxs-lookup"><span data-stu-id="d6390-166">In an MVC app, tests are usually organized by controller classes and named after the controllers they test (for example, `HomeControllerTests` to test component integration for the Home controller).</span></span>

## <a name="test-app-prerequisites"></a><span data-ttu-id="d6390-167">Requisitos previos de la aplicación de prueba</span><span class="sxs-lookup"><span data-stu-id="d6390-167">Test app prerequisites</span></span>

<span data-ttu-id="d6390-168">El proyecto de prueba debe:</span><span class="sxs-lookup"><span data-stu-id="d6390-168">The test project must:</span></span>

* <span data-ttu-id="d6390-169">Tiene una referencia de paquete para [Microsoft.AspNetCore.App](https://www.nuget.org/packages/Microsoft.AspNetCore.App/).</span><span class="sxs-lookup"><span data-stu-id="d6390-169">Have a package reference for [Microsoft.AspNetCore.App](https://www.nuget.org/packages/Microsoft.AspNetCore.App/).</span></span>
* <span data-ttu-id="d6390-170">Use el SDK de Web en el archivo de proyecto (`<Project Sdk="Microsoft.NET.Sdk.Web">`).</span><span class="sxs-lookup"><span data-stu-id="d6390-170">Use the Web SDK in the project file (`<Project Sdk="Microsoft.NET.Sdk.Web">`).</span></span>

<span data-ttu-id="d6390-171">Estos prerequesities puede verse en la [aplicación de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples/).</span><span class="sxs-lookup"><span data-stu-id="d6390-171">These prerequesities can be seen in the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples/).</span></span> <span data-ttu-id="d6390-172">Inspeccionar el *tests/RazorPagesProject.Tests/RazorPagesProject.Tests.csproj* archivo.</span><span class="sxs-lookup"><span data-stu-id="d6390-172">Inspect the *tests/RazorPagesProject.Tests/RazorPagesProject.Tests.csproj* file.</span></span>

## <a name="basic-tests-with-the-default-webapplicationfactory"></a><span data-ttu-id="d6390-173">Pruebas básicas con el valor predeterminado WebApplicationFactory</span><span class="sxs-lookup"><span data-stu-id="d6390-173">Basic tests with the default WebApplicationFactory</span></span>

<span data-ttu-id="d6390-174">[WebApplicationFactory&lt;TEntryPoint&gt; ](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1) se utiliza para crear un [TestServer](/dotnet/api/microsoft.aspnetcore.testhost.testserver) para las pruebas de integración.</span><span class="sxs-lookup"><span data-stu-id="d6390-174">[WebApplicationFactory&lt;TEntryPoint&gt;](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1) is used to create a [TestServer](/dotnet/api/microsoft.aspnetcore.testhost.testserver) for the integration tests.</span></span> <span data-ttu-id="d6390-175">`TEntryPoint` Normalmente es la clase de punto de entrada de la SUT la `Startup` clase.</span><span class="sxs-lookup"><span data-stu-id="d6390-175">`TEntryPoint` is the entry point class of the SUT, usually the `Startup` class.</span></span>

<span data-ttu-id="d6390-176">Implementar clases de prueba un *accesorio de clase* interfaz (`IClassFixture`) para indicar la clase contiene pruebas y proporciona instancias de objetos compartidos a través de las pruebas de la clase.</span><span class="sxs-lookup"><span data-stu-id="d6390-176">Test classes implement a *class fixture* interface (`IClassFixture`) to indicate the class contains tests and provide shared object instances across the tests in the class.</span></span>

### <a name="basic-test-of-app-endpoints"></a><span data-ttu-id="d6390-177">Prueba básica de extremos de la aplicación</span><span class="sxs-lookup"><span data-stu-id="d6390-177">Basic test of app endpoints</span></span>

<span data-ttu-id="d6390-178">La siguiente prueba (clase), `BasicTests`, usa el `WebApplicationFactory` para arrancar el SUT y proporcionar un [HttpClient](/dotnet/api/system.net.http.httpclient) a un método de prueba, `Get_EndpointsReturnSuccessAndCorrectContentType`.</span><span class="sxs-lookup"><span data-stu-id="d6390-178">The following test class, `BasicTests`, uses the `WebApplicationFactory` to bootstrap the SUT and provide an [HttpClient](/dotnet/api/system.net.http.httpclient) to a test method, `Get_EndpointsReturnSuccessAndCorrectContentType`.</span></span> <span data-ttu-id="d6390-179">El método comprueba si el código de estado de respuesta es correcto (códigos de estado en el intervalo de 200-299) y la `Content-Type` encabezado es `text/html; charset=utf-8` para varias páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d6390-179">The method checks if the response status code is successful (status codes in the range 200-299) and the `Content-Type` header is `text/html; charset=utf-8` for several app pages.</span></span>

<span data-ttu-id="d6390-180">[CreateClient](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.createclient) crea una instancia de `HttpClient` que sigue redirecciones y controla las cookies automáticamente.</span><span class="sxs-lookup"><span data-stu-id="d6390-180">[CreateClient](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.createclient) creates an instance of `HttpClient` that automatically follows redirects and handles cookies.</span></span>

[!code-csharp[](integration-tests/samples/2.x/IntegrationTestsSample/tests/RazorPagesProject.Tests/IntegrationTests/BasicTests.cs?name=snippet1)]

### <a name="test-a-secure-endpoint"></a><span data-ttu-id="d6390-181">Probar un extremo seguro</span><span class="sxs-lookup"><span data-stu-id="d6390-181">Test a secure endpoint</span></span>

<span data-ttu-id="d6390-182">Otra prueba en el `BasicTests` clase comprueba que un punto de conexión seguro redirige un usuario no autenticado a la página de inicio de sesión de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d6390-182">Another test in the `BasicTests` class checks that a secure endpoint redirects an unauthenticated user to the app's Login page.</span></span>

<span data-ttu-id="d6390-183">En el SUT el `/SecurePage` página usa un [AuthorizePage](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.authorizepage) convención para aplicar un [AuthorizeFilter](/dotnet/api/microsoft.aspnetcore.mvc.authorization.authorizefilter) a la página.</span><span class="sxs-lookup"><span data-stu-id="d6390-183">In the SUT, the `/SecurePage` page uses an [AuthorizePage](/dotnet/api/microsoft.extensions.dependencyinjection.pageconventioncollectionextensions.authorizepage) convention to apply an [AuthorizeFilter](/dotnet/api/microsoft.aspnetcore.mvc.authorization.authorizefilter) to the page.</span></span> <span data-ttu-id="d6390-184">Para obtener más información, consulte [convenciones de autorización de las páginas de Razor](xref:security/authorization/razor-pages-authorization#require-authorization-to-access-a-page).</span><span class="sxs-lookup"><span data-stu-id="d6390-184">For more information, see [Razor Pages authorization conventions](xref:security/authorization/razor-pages-authorization#require-authorization-to-access-a-page).</span></span>

[!code-csharp[](integration-tests/samples/2.x/IntegrationTestsSample/src/RazorPagesProject/Startup.cs?name=snippet1)]

<span data-ttu-id="d6390-185">En el `Get_SecurePageRequiresAnAuthenticatedUser` probar, un [WebApplicationFactoryClientOptions](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions) está establecido en no permitir redirecciones estableciendo [AllowAutoRedirect](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions.allowautoredirect) a `false`:</span><span class="sxs-lookup"><span data-stu-id="d6390-185">In the `Get_SecurePageRequiresAnAuthenticatedUser` test, a [WebApplicationFactoryClientOptions](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions) is set to disallow redirects by setting [AllowAutoRedirect](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions.allowautoredirect) to `false`:</span></span>

[!code-csharp[](integration-tests/samples/2.x/IntegrationTestsSample/tests/RazorPagesProject.Tests/IntegrationTests/BasicTests.cs?name=snippet2)]

<span data-ttu-id="d6390-186">Al no permitir el cliente sigue la redirección, se pueden realizar las siguientes comprobaciones:</span><span class="sxs-lookup"><span data-stu-id="d6390-186">By disallowing the client to follow the redirect, the following checks can be made:</span></span>

* <span data-ttu-id="d6390-187">Se puede comprobar el código de estado devuelto por el SUT con el esperado [HttpStatusCode.Redirect](/dotnet/api/system.net.httpstatuscode) resultado, no el código de estado final después de la redirección a la página de inicio de sesión, que sería [HttpStatusCode.OK](/dotnet/api/system.net.httpstatuscode).</span><span class="sxs-lookup"><span data-stu-id="d6390-187">The status code returned by the SUT can be checked against the expected [HttpStatusCode.Redirect](/dotnet/api/system.net.httpstatuscode) result, not the final status code after the redirect to the Login page, which would be [HttpStatusCode.OK](/dotnet/api/system.net.httpstatuscode).</span></span>
* <span data-ttu-id="d6390-188">El `Location` se comprueba el valor del encabezado de los encabezados de respuesta para confirmar que inicia con `http://localhost/Identity/Account/Login`, no el inicio de sesión página respuesta final, donde el `Location` encabezado no estar presente.</span><span class="sxs-lookup"><span data-stu-id="d6390-188">The `Location` header value in the response headers is checked to confirm that it starts with `http://localhost/Identity/Account/Login`, not the final Login page response, where the `Location` header wouldn't be present.</span></span>

<span data-ttu-id="d6390-189">Para obtener más información sobre `WebApplicationFactoryClientOptions`, consulte el [opciones de cliente](#client-options) sección.</span><span class="sxs-lookup"><span data-stu-id="d6390-189">For more information on `WebApplicationFactoryClientOptions`, see the [Client options](#client-options) section.</span></span>

## <a name="customize-webapplicationfactory"></a><span data-ttu-id="d6390-190">Personalizar WebApplicationFactory</span><span class="sxs-lookup"><span data-stu-id="d6390-190">Customize WebApplicationFactory</span></span>

<span data-ttu-id="d6390-191">Configuración del host Web puede crearse independientemente de las clases de prueba mediante la adquisición de `WebApplicationFactory` para crear uno o varios generadores personalizados:</span><span class="sxs-lookup"><span data-stu-id="d6390-191">Web host configuration can be created independently of the test classes by inheriting from `WebApplicationFactory` to create one or more custom factories:</span></span>

1. <span data-ttu-id="d6390-192">Heredar de `WebApplicationFactory` e invalide [ConfigureWebHost](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.configurewebhost).</span><span class="sxs-lookup"><span data-stu-id="d6390-192">Inherit from `WebApplicationFactory` and override [ConfigureWebHost](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.configurewebhost).</span></span> <span data-ttu-id="d6390-193">El [IWebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.iwebhostbuilder) permite la configuración de la colección de servicio con [ConfigureServices](/dotnet/api/microsoft.aspnetcore.hosting.istartup.configureservices):</span><span class="sxs-lookup"><span data-stu-id="d6390-193">The [IWebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.iwebhostbuilder) allows the configuration of the service collection with [ConfigureServices](/dotnet/api/microsoft.aspnetcore.hosting.istartup.configureservices):</span></span>

   [!code-csharp[](integration-tests/samples/2.x/IntegrationTestsSample/tests/RazorPagesProject.Tests/CustomWebApplicationFactory.cs?name=snippet1)]

   <span data-ttu-id="d6390-194">En la propagación de la base de datos la [aplicación de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) realiza el `InitializeDbForTests` método.</span><span class="sxs-lookup"><span data-stu-id="d6390-194">Database seeding in the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) is performed by the `InitializeDbForTests` method.</span></span> <span data-ttu-id="d6390-195">El método se describe en el [ejemplo de pruebas de integración: organización de la aplicación de prueba](#test-app-organization) sección.</span><span class="sxs-lookup"><span data-stu-id="d6390-195">The method is described in the [Integration tests sample: Test app organization](#test-app-organization) section.</span></span>

2. <span data-ttu-id="d6390-196">Utilice la opción de instalación `CustomWebApplicationFactory` en las clases de prueba.</span><span class="sxs-lookup"><span data-stu-id="d6390-196">Use the custom `CustomWebApplicationFactory` in test classes.</span></span> <span data-ttu-id="d6390-197">En el ejemplo siguiente se utiliza el generador en el `IndexPageTests` clase:</span><span class="sxs-lookup"><span data-stu-id="d6390-197">The following example uses the factory in the `IndexPageTests` class:</span></span>

   [!code-csharp[](integration-tests/samples/2.x/IntegrationTestsSample/tests/RazorPagesProject.Tests/IntegrationTests/IndexPageTests.cs?name=snippet1)]

   <span data-ttu-id="d6390-198">Cliente de la aplicación de ejemplo está configurado para impedir la `HttpClient` de redirecciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="d6390-198">The sample app's client is configured to prevent the `HttpClient` from following redirects.</span></span> <span data-ttu-id="d6390-199">Como se explica en la [probar un extremo seguro](#test-a-secure-endpoint) sección, esto permite a pruebas para comprobar el resultado de la primera respuesta de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d6390-199">As explained in the [Test a secure endpoint](#test-a-secure-endpoint) section, this permits tests to check the result of the app's first response.</span></span> <span data-ttu-id="d6390-200">La primera respuesta es un redireccionamiento en muchas de estas pruebas con un `Location` encabezado.</span><span class="sxs-lookup"><span data-stu-id="d6390-200">The first response is a redirect in many of these tests with a `Location` header.</span></span>

3. <span data-ttu-id="d6390-201">Utiliza una prueba normal el `HttpClient` y métodos auxiliares para procesar la solicitud y la respuesta:</span><span class="sxs-lookup"><span data-stu-id="d6390-201">A typical test uses the `HttpClient` and helper methods to process the request and the response:</span></span>

   [!code-csharp[](integration-tests/samples/2.x/IntegrationTestsSample/tests/RazorPagesProject.Tests/IntegrationTests/IndexPageTests.cs?name=snippet2)]

<span data-ttu-id="d6390-202">Cualquier solicitud POST a la SUT debe cumplir la comprobación de antiforgery que se convierte automáticamente en la aplicación [antiforgery sistema de protección de datos](xref:security/data-protection/introduction).</span><span class="sxs-lookup"><span data-stu-id="d6390-202">Any POST request to the SUT must satisfy the antiforgery check that's automatically made by the app's [data protection antiforgery system](xref:security/data-protection/introduction).</span></span> <span data-ttu-id="d6390-203">Para organizar de solicitud POST de una prueba, la aplicación de prueba debe:</span><span class="sxs-lookup"><span data-stu-id="d6390-203">In order to arrange for a test's POST request, the test app must:</span></span>

1. <span data-ttu-id="d6390-204">Realice una solicitud de la página.</span><span class="sxs-lookup"><span data-stu-id="d6390-204">Make a request for the page.</span></span>
1. <span data-ttu-id="d6390-205">Analizar la cookie antiforgery y el token de validación de solicitud de la respuesta.</span><span class="sxs-lookup"><span data-stu-id="d6390-205">Parse the antiforgery cookie and request validation token from the response.</span></span>
1. <span data-ttu-id="d6390-206">Asegúrese de la solicitud POST con la validación de solicitud y cookie antiforgery símbolo (token) en su lugar.</span><span class="sxs-lookup"><span data-stu-id="d6390-206">Make the POST request with the antiforgery cookie and request validation token in place.</span></span>

<span data-ttu-id="d6390-207">El `SendAsync` métodos de extensión de aplicación auxiliar (*Helpers/HttpClientExtensions.cs*) y la `GetDocumentAsync` método auxiliar (*Helpers/HtmlHelpers.cs*) en el [deaplicacióndeejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples/) usar la [AngleSharp](https://anglesharp.github.io/) analizador para controlar la comprobación de antiforgery con los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="d6390-207">The `SendAsync` helper extension methods (*Helpers/HttpClientExtensions.cs*) and the `GetDocumentAsync` helper method (*Helpers/HtmlHelpers.cs*) in the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples/) use the [AngleSharp](https://anglesharp.github.io/) parser to handle the antiforgery check with the following methods:</span></span>

* <span data-ttu-id="d6390-208">`GetDocumentAsync` &ndash; Recibe la [HttpResponseMessage](/dotnet/api/system.net.http.httpresponsemessage) y devuelve un `IHtmlDocument`.</span><span class="sxs-lookup"><span data-stu-id="d6390-208">`GetDocumentAsync` &ndash; Receives the [HttpResponseMessage](/dotnet/api/system.net.http.httpresponsemessage) and returns an `IHtmlDocument`.</span></span> <span data-ttu-id="d6390-209">`GetDocumentAsync` usa un generador que prepara un *respuesta virtual* basado en el original `HttpResponseMessage`.</span><span class="sxs-lookup"><span data-stu-id="d6390-209">`GetDocumentAsync` uses a factory that prepares a *virtual response* based on the original `HttpResponseMessage`.</span></span> <span data-ttu-id="d6390-210">Para obtener más información, consulte el [AngleSharp documentación](https://github.com/AngleSharp/AngleSharp#documentation).</span><span class="sxs-lookup"><span data-stu-id="d6390-210">For more information, see the [AngleSharp documentation](https://github.com/AngleSharp/AngleSharp#documentation).</span></span>
* <span data-ttu-id="d6390-211">`SendAsync` métodos de extensión para la `HttpClient` redactar una [HttpRequestMessage](/dotnet/api/system.net.http.httprequestmessage) y llame a [SendAsync(HttpRequestMessage)](/dotnet/api/system.net.http.httpclient.sendasync#System_Net_Http_HttpClient_SendAsync_System_Net_Http_HttpRequestMessage_) para enviar solicitudes a la SUT.</span><span class="sxs-lookup"><span data-stu-id="d6390-211">`SendAsync` extension methods for the `HttpClient` compose an [HttpRequestMessage](/dotnet/api/system.net.http.httprequestmessage) and call [SendAsync(HttpRequestMessage)](/dotnet/api/system.net.http.httpclient.sendasync#System_Net_Http_HttpClient_SendAsync_System_Net_Http_HttpRequestMessage_) to submit requests to the SUT.</span></span> <span data-ttu-id="d6390-212">Sobrecargas de `SendAsync` acepte el formulario HTML (`IHtmlFormElement`) y los siguientes:</span><span class="sxs-lookup"><span data-stu-id="d6390-212">Overloads for `SendAsync` accept the HTML form (`IHtmlFormElement`) and the following:</span></span>
  - <span data-ttu-id="d6390-213">Botón del formulario de envío (`IHtmlElement`)</span><span class="sxs-lookup"><span data-stu-id="d6390-213">Submit button of the form (`IHtmlElement`)</span></span>
  - <span data-ttu-id="d6390-214">Colección de valores de formulario (`IEnumerable<KeyValuePair<string, string>>`)</span><span class="sxs-lookup"><span data-stu-id="d6390-214">Form values collection (`IEnumerable<KeyValuePair<string, string>>`)</span></span>
  - <span data-ttu-id="d6390-215">Botón de envío (`IHtmlElement`) y valores del formulario (`IEnumerable<KeyValuePair<string, string>>`)</span><span class="sxs-lookup"><span data-stu-id="d6390-215">Submit button (`IHtmlElement`) and form values (`IEnumerable<KeyValuePair<string, string>>`)</span></span>

> [!NOTE]
> <span data-ttu-id="d6390-216">[AngleSharp](https://anglesharp.github.io/) se utiliza con fines de demostración, en este tema y la aplicación de ejemplo de biblioteca de análisis de un tercero.</span><span class="sxs-lookup"><span data-stu-id="d6390-216">[AngleSharp](https://anglesharp.github.io/) is a third-party parsing library used for demonstration purposes in this topic and the sample app.</span></span> <span data-ttu-id="d6390-217">AngleSharp no es compatible o requerida para las pruebas de integración de aplicaciones de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="d6390-217">AngleSharp isn't supported or required for integration testing of ASP.NET Core apps.</span></span> <span data-ttu-id="d6390-218">Pueden utilizar otros analizadores, como el [Html agilidad Pack (GRACIA)](http://html-agility-pack.net/).</span><span class="sxs-lookup"><span data-stu-id="d6390-218">Other parsers can be used, such as the [Html Agility Pack (HAP)](http://html-agility-pack.net/).</span></span> <span data-ttu-id="d6390-219">Otro enfoque es escribir código para controlar el sistema antiforgery token de comprobación de solicitud y cookie antiforgery directamente.</span><span class="sxs-lookup"><span data-stu-id="d6390-219">Another approach is to write code to handle the antiforgery system's request verification token and antiforgery cookie directly.</span></span>

## <a name="customize-the-client-with-withwebhostbuilder"></a><span data-ttu-id="d6390-220">Personalizar al cliente con WithWebHostBuilder</span><span class="sxs-lookup"><span data-stu-id="d6390-220">Customize the client with WithWebHostBuilder</span></span>

<span data-ttu-id="d6390-221">Cuando se requiere un método de prueba, configuración adicional [WithWebHostBuilder](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.withwebhostbuilder) crea un nuevo `WebApplicationFactory` con una [IWebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.iwebhostbuilder) que más se personaliza mediante configuración.</span><span class="sxs-lookup"><span data-stu-id="d6390-221">When additional configuration is required within a test method, [WithWebHostBuilder](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.withwebhostbuilder) creates a new `WebApplicationFactory` with an [IWebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.iwebhostbuilder) that is further customized by configuration.</span></span>

<span data-ttu-id="d6390-222">El `Post_DeleteMessageHandler_ReturnsRedirectToRoot` probar el método de la [aplicación de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) muestra el uso de `WithWebHostBuilder`.</span><span class="sxs-lookup"><span data-stu-id="d6390-222">The `Post_DeleteMessageHandler_ReturnsRedirectToRoot` test method of the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) demonstrates the use of `WithWebHostBuilder`.</span></span> <span data-ttu-id="d6390-223">Esta prueba realiza una eliminación de registro en la base de datos mediante la activación de un envío de formulario en el SUT.</span><span class="sxs-lookup"><span data-stu-id="d6390-223">This test performs a record delete in the database by triggering a form submission in the SUT.</span></span>

<span data-ttu-id="d6390-224">Porque otra prueba en el `IndexPageTests` clase realiza una operación que eliminará todos los registros en la base de datos y se puede ejecutar antes de la `Post_DeleteMessageHandler_ReturnsRedirectToRoot` (método), la base de datos es visible en este método de prueba para asegurarse de que está presente para el SUT eliminar un registro.</span><span class="sxs-lookup"><span data-stu-id="d6390-224">Because another test in the `IndexPageTests` class performs an operation that deletes all of the records in the database and may run before the `Post_DeleteMessageHandler_ReturnsRedirectToRoot` method, the database is seeded in this test method to ensure that a record is present for the SUT to delete.</span></span> <span data-ttu-id="d6390-225">Al seleccionar la `deleteBtn1` botón de la `messages` se simula el formulario en el SUT en la solicitud a la SUT:</span><span class="sxs-lookup"><span data-stu-id="d6390-225">Selecting the `deleteBtn1` button of the `messages` form in the SUT is simulated in the request to the SUT:</span></span>

[!code-csharp[](integration-tests/samples/2.x/IntegrationTestsSample/tests/RazorPagesProject.Tests/IntegrationTests/IndexPageTests.cs?name=snippet3)]

## <a name="client-options"></a><span data-ttu-id="d6390-226">Opciones de cliente</span><span class="sxs-lookup"><span data-stu-id="d6390-226">Client options</span></span>

<span data-ttu-id="d6390-227">En la tabla siguiente se muestra el valor predeterminado [WebApplicationFactoryClientOptions](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions) disponibles al crear `HttpClient` instancias.</span><span class="sxs-lookup"><span data-stu-id="d6390-227">The following table shows the default [WebApplicationFactoryClientOptions](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions) available when creating `HttpClient` instances.</span></span>

| <span data-ttu-id="d6390-228">Opción</span><span class="sxs-lookup"><span data-stu-id="d6390-228">Option</span></span> | <span data-ttu-id="d6390-229">Descripción</span><span class="sxs-lookup"><span data-stu-id="d6390-229">Description</span></span> | <span data-ttu-id="d6390-230">Default</span><span class="sxs-lookup"><span data-stu-id="d6390-230">Default</span></span> |
| ------ | ----------- | ------- |
| [<span data-ttu-id="d6390-231">AllowAutoRedirect</span><span class="sxs-lookup"><span data-stu-id="d6390-231">AllowAutoRedirect</span></span>](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions.allowautoredirect) | <span data-ttu-id="d6390-232">Obtiene o establece si `HttpClient` instancias deben seguir automáticamente las respuestas de redirección.</span><span class="sxs-lookup"><span data-stu-id="d6390-232">Gets or sets whether or not `HttpClient` instances should automatically follow redirect responses.</span></span> | `true` |
| [<span data-ttu-id="d6390-233">BaseAddress</span><span class="sxs-lookup"><span data-stu-id="d6390-233">BaseAddress</span></span>](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions.baseaddress) | <span data-ttu-id="d6390-234">Obtiene o establece la dirección base del `HttpClient` instancias.</span><span class="sxs-lookup"><span data-stu-id="d6390-234">Gets or sets the base address of `HttpClient` instances.</span></span> | `http://localhost` |
| [<span data-ttu-id="d6390-235">HandleCookies</span><span class="sxs-lookup"><span data-stu-id="d6390-235">HandleCookies</span></span>](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions.handlecookies) | <span data-ttu-id="d6390-236">Obtiene o establece si `HttpClient` instancias deben controlar las cookies.</span><span class="sxs-lookup"><span data-stu-id="d6390-236">Gets or sets whether `HttpClient` instances should handle cookies.</span></span> | `true` |
| [<span data-ttu-id="d6390-237">MaxAutomaticRedirections</span><span class="sxs-lookup"><span data-stu-id="d6390-237">MaxAutomaticRedirections</span></span>](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactoryclientoptions.maxautomaticredirections) | <span data-ttu-id="d6390-238">Obtiene o establece el número máximo de respuestas de redirección que `HttpClient` las instancias deben seguir.</span><span class="sxs-lookup"><span data-stu-id="d6390-238">Gets or sets the maximum number of redirect responses that `HttpClient` instances should follow.</span></span> | <span data-ttu-id="d6390-239">7</span><span class="sxs-lookup"><span data-stu-id="d6390-239">7</span></span> |

<span data-ttu-id="d6390-240">Crear el `WebApplicationFactoryClientOptions` clase y lo pasa a la [CreateClient](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.createclient) (método) (valor predeterminado en el ejemplo de código se muestran los valores):</span><span class="sxs-lookup"><span data-stu-id="d6390-240">Create the `WebApplicationFactoryClientOptions` class and pass it to the [CreateClient](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.createclient) method (default values are shown in the code example):</span></span>

```csharp
// Default client option values are shown
var clientOptions = new WebApplicationFactoryClientOptions();
clientOptions.AllowAutoRedirect = true;
clientOptions.BaseAddress = new Uri("http://localhost");
clientOptions.HandleCookies = true;
clientOptions.MaxAutomaticRedirections = 7;

_client = _factory.CreateClient(clientOptions);
```

## <a name="how-the-test-infrastructure-infers-the-app-content-root-path"></a><span data-ttu-id="d6390-241">Cómo la infraestructura de prueba deduce la ruta de acceso de contenido raíz de aplicación</span><span class="sxs-lookup"><span data-stu-id="d6390-241">How the test infrastructure infers the app content root path</span></span>

<span data-ttu-id="d6390-242">El `WebApplicationFactory` constructor deduce la ruta de acceso de contenido raíz de aplicación mediante la búsqueda de un [WebApplicationFactoryContentRootAttribute](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactorycontentrootattribute) en el ensamblado que contiene las pruebas de integración con una clave igual a la `TEntryPoint` ensamblado `System.Reflection.Assembly.FullName`.</span><span class="sxs-lookup"><span data-stu-id="d6390-242">The `WebApplicationFactory` constructor infers the app content root path by searching for a [WebApplicationFactoryContentRootAttribute](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactorycontentrootattribute) on the assembly containing the integration tests with a key equal to the `TEntryPoint` assembly `System.Reflection.Assembly.FullName`.</span></span> <span data-ttu-id="d6390-243">En caso de que no se encuentra un atributo con la clave correcta, `WebApplicationFactory` vuelve a buscar un archivo de solución (*\*.sln*) y anexa el `TEntryPoint` nombre del ensamblado para el directorio de la solución.</span><span class="sxs-lookup"><span data-stu-id="d6390-243">In case an attribute with the correct key isn't found, `WebApplicationFactory` falls back to searching for a solution file (*\*.sln*) and appends the `TEntryPoint` assembly name to the solution directory.</span></span> <span data-ttu-id="d6390-244">El directorio raíz de aplicación (la ruta de acceso raíz del contenido) se usa para detectar las vistas y los archivos de contenido.</span><span class="sxs-lookup"><span data-stu-id="d6390-244">The app root directory (the content root path) is used to discover views and content files.</span></span>

<span data-ttu-id="d6390-245">En la mayoría de los casos, no será necesario establecer explícitamente la raíz de contenido de la aplicación, como la lógica de búsqueda normalmente busca la raíz de contenido correcta en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="d6390-245">In most cases, it isn't necessary to explicitly set the app content root, as the search logic usually finds the correct content root at runtime.</span></span> <span data-ttu-id="d6390-246">En casos especiales que no se encuentra la raíz de contenido mediante el algoritmo de búsqueda integradas, la aplicación de contenido raíz se puede especificar explícitamente o mediante el uso de una lógica personalizada.</span><span class="sxs-lookup"><span data-stu-id="d6390-246">In special scenarios where the content root isn't found using the built-in search algorithm, the app content root can be specified explicitly or by using custom logic.</span></span> <span data-ttu-id="d6390-247">Para establecer la raíz de contenido de aplicación en esos escenarios, llame a la `UseSolutionRelativeContentRoot` método de extensión de la [Microsoft.AspNetCore.TestHost](https://www.nuget.org/packages/Microsoft.AspNetCore.TestHost) paquete.</span><span class="sxs-lookup"><span data-stu-id="d6390-247">To set the app content root in those scenarios, call the `UseSolutionRelativeContentRoot` extension method from the [Microsoft.AspNetCore.TestHost](https://www.nuget.org/packages/Microsoft.AspNetCore.TestHost) package.</span></span> <span data-ttu-id="d6390-248">Proporcione la ruta de acceso relativa de la solución y el patrón de nombre o glob del archivo de solución opcional (valor predeterminado = `*.sln`).</span><span class="sxs-lookup"><span data-stu-id="d6390-248">Supply the solution's relative path and optional solution file name or glob pattern (default = `*.sln`).</span></span>

<span data-ttu-id="d6390-249">Llame a la [UseSolutionRelativeContentRoot](/dotnet/api/microsoft.aspnetcore.testhost.webhostbuilderextensions.usesolutionrelativecontentroot) método de extensión mediante *una* de los métodos siguientes:</span><span class="sxs-lookup"><span data-stu-id="d6390-249">Call the [UseSolutionRelativeContentRoot](/dotnet/api/microsoft.aspnetcore.testhost.webhostbuilderextensions.usesolutionrelativecontentroot) extension method using *ONE* of the following approaches:</span></span>

* <span data-ttu-id="d6390-250">Al configurar las clases de prueba con `WebApplicationFactory`, proporcione una configuración personalizada con el [IWebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.iwebhostbuilder):</span><span class="sxs-lookup"><span data-stu-id="d6390-250">When configuring test classes with `WebApplicationFactory`, provide a custom configuration with the [IWebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.iwebhostbuilder):</span></span>

   ```csharp
   public IndexPageTests(
       WebApplicationFactory<RazorPagesProject.Startup> factory)
   {
       var _factory = factory.WithWebHostBuilder(builder =>
       {
           builder.UseSolutionRelativeContentRoot("<SOLUTION-RELATIVE-PATH>");

           ...
       });
   }
   ```

* <span data-ttu-id="d6390-251">Al configurar las clases de prueba con un personalizado `WebApplicationFactory`, heredar de `WebApplicationFactory` e invalide [ConfigureWebHost](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.configurewebhost):</span><span class="sxs-lookup"><span data-stu-id="d6390-251">When configuring test classes with a custom `WebApplicationFactory`, inherit from `WebApplicationFactory` and override [ConfigureWebHost](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.configurewebhost):</span></span>

   ```csharp
   public class CustomWebApplicationFactory<TStartup>
       : WebApplicationFactory<RazorPagesProject.Startup>
   {
       protected override void ConfigureWebHost(IWebHostBuilder builder)
       {
           builder.ConfigureServices(services =>
           {
               builder.UseSolutionRelativeContentRoot("<SOLUTION-RELATIVE-PATH>");

               ...
           });
       }
   }
   ```

## <a name="disable-shadow-copying"></a><span data-ttu-id="d6390-252">Deshabilitar las copias sombra</span><span class="sxs-lookup"><span data-stu-id="d6390-252">Disable shadow copying</span></span>

<span data-ttu-id="d6390-253">Instantáneas hace que las pruebas se ejecutan en una carpeta diferente a la carpeta de salida.</span><span class="sxs-lookup"><span data-stu-id="d6390-253">Shadow copying causes the tests to execute in a different folder than the output folder.</span></span> <span data-ttu-id="d6390-254">Para que las pruebas para que funcione correctamente, debe deshabilitarse la operación de instantánea.</span><span class="sxs-lookup"><span data-stu-id="d6390-254">For tests to work properly, shadow copying must be disabled.</span></span> <span data-ttu-id="d6390-255">El [aplicación de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) utiliza xUnit y deshabilita la operación de copia sombra para xUnit mediante la inclusión de un *xunit.runner.json* archivo con la opción de configuración correcto.</span><span class="sxs-lookup"><span data-stu-id="d6390-255">The [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) uses xUnit and disables shadow copying for xUnit by including an *xunit.runner.json* file with the correct configuration setting.</span></span> <span data-ttu-id="d6390-256">Para obtener más información, consulte [configurar xUnit.net con JSON](https://xunit.github.io/docs/configuring-with-json.html).</span><span class="sxs-lookup"><span data-stu-id="d6390-256">For more information, see [Configuring xUnit.net with JSON](https://xunit.github.io/docs/configuring-with-json.html).</span></span>

<span data-ttu-id="d6390-257">Agregar el *xunit.runner.json* archivo al nodo raíz del proyecto de prueba con el siguiente contenido:</span><span class="sxs-lookup"><span data-stu-id="d6390-257">Add the *xunit.runner.json* file to root of the test project with the following content:</span></span>

```json
{
  "shadowCopy": false
}
```

## <a name="integration-tests-sample"></a><span data-ttu-id="d6390-258">Ejemplo de pruebas de integración</span><span class="sxs-lookup"><span data-stu-id="d6390-258">Integration tests sample</span></span>

<span data-ttu-id="d6390-259">El [aplicación de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) se compone de dos aplicaciones:</span><span class="sxs-lookup"><span data-stu-id="d6390-259">The [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/test/integration-tests/samples) is composed of two apps:</span></span>

| <span data-ttu-id="d6390-260">Aplicación</span><span class="sxs-lookup"><span data-stu-id="d6390-260">App</span></span> | <span data-ttu-id="d6390-261">Carpeta de proyecto</span><span class="sxs-lookup"><span data-stu-id="d6390-261">Project folder</span></span> | <span data-ttu-id="d6390-262">Descripción</span><span class="sxs-lookup"><span data-stu-id="d6390-262">Description</span></span> |
| --- | -------------- | ----------- |
| <span data-ttu-id="d6390-263">Aplicación de mensaje (el SUT)</span><span class="sxs-lookup"><span data-stu-id="d6390-263">Message app (the SUT)</span></span> | <span data-ttu-id="d6390-264">*src/RazorPagesProject*</span><span class="sxs-lookup"><span data-stu-id="d6390-264">*src/RazorPagesProject*</span></span> | <span data-ttu-id="d6390-265">Permite a un usuario agregar, eliminar uno, elimine todos y analizar los mensajes.</span><span class="sxs-lookup"><span data-stu-id="d6390-265">Allows a user to add, delete one, delete all, and analyze messages.</span></span> |
| <span data-ttu-id="d6390-266">Aplicación de prueba</span><span class="sxs-lookup"><span data-stu-id="d6390-266">Test app</span></span> | <span data-ttu-id="d6390-267">*tests/RazorPagesProject.Tests*</span><span class="sxs-lookup"><span data-stu-id="d6390-267">*tests/RazorPagesProject.Tests*</span></span> | <span data-ttu-id="d6390-268">Utilizado para la prueba de integración de la SUT.</span><span class="sxs-lookup"><span data-stu-id="d6390-268">Used to integration test the SUT.</span></span> |

<span data-ttu-id="d6390-269">Se pueden ejecutar las pruebas con las características integradas de prueba de un IDE, como [Visual Studio](https://www.visualstudio.com/vs/).</span><span class="sxs-lookup"><span data-stu-id="d6390-269">The tests can be run using the built-in test features of an IDE, such as [Visual Studio](https://www.visualstudio.com/vs/).</span></span> <span data-ttu-id="d6390-270">Si usa [código de Visual Studio](https://code.visualstudio.com/) o la línea de comandos, ejecute el siguiente comando en un símbolo del sistema en el *tests/RazorPagesProject.Tests* carpeta:</span><span class="sxs-lookup"><span data-stu-id="d6390-270">If using [Visual Studio Code](https://code.visualstudio.com/) or the command line, execute the following command at a command prompt in the *tests/RazorPagesProject.Tests* folder:</span></span>

```console
dotnet test
```

### <a name="message-app-sut-organization"></a><span data-ttu-id="d6390-271">Organización de la aplicación (SUT) de mensaje</span><span class="sxs-lookup"><span data-stu-id="d6390-271">Message app (SUT) organization</span></span>

<span data-ttu-id="d6390-272">El SUT es un sistema de mensajes de las páginas de Razor con las siguientes características:</span><span class="sxs-lookup"><span data-stu-id="d6390-272">The SUT is a Razor Pages message system with the following characteristics:</span></span>

* <span data-ttu-id="d6390-273">La página de índice de la aplicación (*Pages/Index.cshtml* y *Pages/Index.cshtml.cs*) proporciona una interfaz de usuario y la página métodos del modelo para controlar la adición, eliminación y análisis de mensajes (palabras medios por mensaje) .</span><span class="sxs-lookup"><span data-stu-id="d6390-273">The Index page of the app (*Pages/Index.cshtml* and *Pages/Index.cshtml.cs*) provides a UI and page model methods to control the addition, deletion, and analysis of messages (average words per message).</span></span>
* <span data-ttu-id="d6390-274">Describe un mensaje de la `Message` clase (*Data/Message.cs*) con dos propiedades: `Id` (clave) y `Text` (mensaje).</span><span class="sxs-lookup"><span data-stu-id="d6390-274">A message is described by the `Message` class (*Data/Message.cs*) with two properties: `Id` (key) and `Text` (message).</span></span> <span data-ttu-id="d6390-275">El `Text` propiedad es necesaria y se limita a 200 caracteres.</span><span class="sxs-lookup"><span data-stu-id="d6390-275">The `Text` property is required and limited to 200 characters.</span></span>
* <span data-ttu-id="d6390-276">Los mensajes se almacenan con [base de datos de Entity Framework en memoria](/ef/core/providers/in-memory/)&#8224;.</span><span class="sxs-lookup"><span data-stu-id="d6390-276">Messages are stored using [Entity Framework's in-memory database](/ef/core/providers/in-memory/)&#8224;.</span></span>
* <span data-ttu-id="d6390-277">La aplicación contiene una capa de acceso a datos (DAL) en su clase de contexto de base de datos, `AppDbContext` (*Data/AppDbContext.cs*).</span><span class="sxs-lookup"><span data-stu-id="d6390-277">The app contains a data access layer (DAL) in its database context class, `AppDbContext` (*Data/AppDbContext.cs*).</span></span>
* <span data-ttu-id="d6390-278">Si la base de datos está vacía en el inicio de la aplicación, el almacén de mensajes se inicializa con tres mensajes.</span><span class="sxs-lookup"><span data-stu-id="d6390-278">If the database is empty on app startup, the message store is initialized with three messages.</span></span>
* <span data-ttu-id="d6390-279">La aplicación incluye un `/SecurePage` que sólo pueda tener acceso un usuario autenticado.</span><span class="sxs-lookup"><span data-stu-id="d6390-279">The app includes a `/SecurePage` that can only be accessed by an authenticated user.</span></span>

<span data-ttu-id="d6390-280">&#8224;El tema EF [prueba con InMemory](/ef/core/miscellaneous/testing/in-memory), explica cómo utilizar una base de datos en memoria para las pruebas con MSTest.</span><span class="sxs-lookup"><span data-stu-id="d6390-280">&#8224;The EF topic, [Test with InMemory](/ef/core/miscellaneous/testing/in-memory), explains how to use an in-memory database for tests with MSTest.</span></span> <span data-ttu-id="d6390-281">Este tema se usa el [xUnit](https://xunit.github.io/) marco de pruebas.</span><span class="sxs-lookup"><span data-stu-id="d6390-281">This topic uses the [xUnit](https://xunit.github.io/) test framework.</span></span> <span data-ttu-id="d6390-282">Las implementaciones de prueba a través de los marcos de pruebas diferente y conceptos de prueba son similares pero no idénticos.</span><span class="sxs-lookup"><span data-stu-id="d6390-282">Test concepts and test implementations across different test frameworks are similar but not identical.</span></span>

<span data-ttu-id="d6390-283">Aunque la aplicación no usa el [modelo de repositorio](http://martinfowler.com/eaaCatalog/repository.html) y no es un ejemplo efectivo de la [patrón de la unidad de trabajo (UoW)](https://martinfowler.com/eaaCatalog/unitOfWork.html), las páginas de Razor admite estos patrones de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="d6390-283">Although the app doesn't use the [repository pattern](http://martinfowler.com/eaaCatalog/repository.html) and isn't an effective example of the [Unit of Work (UoW) pattern](https://martinfowler.com/eaaCatalog/unitOfWork.html), Razor Pages supports these patterns of development.</span></span> <span data-ttu-id="d6390-284">Para obtener más información, consulte [diseñar la capa de persistencia de infraestructura](/dotnet/standard/microservices-architecture/microservice-ddd-cqrs-patterns/infrastructure-persistence-layer-design), [implementación del repositorio y patrones de unidad de trabajo en una aplicación de MVC de ASP.NET](/aspnet/mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application), y [controlador de pruebas lógica de](/aspnet/core/mvc/controllers/testing) (el ejemplo implementa el modelo de repositorio).</span><span class="sxs-lookup"><span data-stu-id="d6390-284">For more information, see [Designing the infrastructure persistence layer](/dotnet/standard/microservices-architecture/microservice-ddd-cqrs-patterns/infrastructure-persistence-layer-design), [Implementing the Repository and Unit of Work Patterns in an ASP.NET MVC Application](/aspnet/mvc/overview/older-versions/getting-started-with-ef-5-using-mvc-4/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application), and [Test controller logic](/aspnet/core/mvc/controllers/testing) (the sample implements the repository pattern).</span></span>

### <a name="test-app-organization"></a><span data-ttu-id="d6390-285">Organización de la aplicación de prueba</span><span class="sxs-lookup"><span data-stu-id="d6390-285">Test app organization</span></span>

<span data-ttu-id="d6390-286">La aplicación de prueba es una aplicación de consola en el *tests/RazorPagesProject.Tests* carpeta.</span><span class="sxs-lookup"><span data-stu-id="d6390-286">The test app is a console app inside the *tests/RazorPagesProject.Tests* folder.</span></span>

| <span data-ttu-id="d6390-287">Carpeta de la aplicación de prueba</span><span class="sxs-lookup"><span data-stu-id="d6390-287">Test app folder</span></span> | <span data-ttu-id="d6390-288">Descripción</span><span class="sxs-lookup"><span data-stu-id="d6390-288">Description</span></span> |
| --------------- | ----------- |
| <span data-ttu-id="d6390-289">*BasicTests*</span><span class="sxs-lookup"><span data-stu-id="d6390-289">*BasicTests*</span></span> | <span data-ttu-id="d6390-290">*BasicTests.cs* contiene métodos de prueba para el enrutamiento, obtener acceso a una página segura por un usuario no autenticado y obtener un perfil de usuario de GitHub y comprobación de inicio de sesión de usuario del perfil.</span><span class="sxs-lookup"><span data-stu-id="d6390-290">*BasicTests.cs* contains test methods for routing, accessing a secure page by an unauthenticated user, and obtaining a GitHub user profile and checking the profile's user login.</span></span> |
| <span data-ttu-id="d6390-291">*IntegrationTests*</span><span class="sxs-lookup"><span data-stu-id="d6390-291">*IntegrationTests*</span></span> | <span data-ttu-id="d6390-292">*IndexPageTests.cs* contiene las pruebas de integración de la página de índice mediante personalizado `WebApplicationFactory` clase.</span><span class="sxs-lookup"><span data-stu-id="d6390-292">*IndexPageTests.cs* contains the integration tests for the Index page using custom `WebApplicationFactory` class.</span></span> |
| <span data-ttu-id="d6390-293">*Aplicaciones auxiliares/utilidades*</span><span class="sxs-lookup"><span data-stu-id="d6390-293">*Helpers/Utilities*</span></span> | <ul><li><span data-ttu-id="d6390-294">*Utilities.cs* contiene el `InitializeDbForTests` método utilizado para inicializar la base de datos con datos de prueba.</span><span class="sxs-lookup"><span data-stu-id="d6390-294">*Utilities.cs* contains the `InitializeDbForTests` method used to seed the database with test data.</span></span></li><li><span data-ttu-id="d6390-295">*HtmlHelpers.cs* proporciona un método para devolver un AngleSharp `IHtmlDocument` para su uso por los métodos de prueba.</span><span class="sxs-lookup"><span data-stu-id="d6390-295">*HtmlHelpers.cs* provides a method to return an AngleSharp `IHtmlDocument` for use by the test methods.</span></span></li><li><span data-ttu-id="d6390-296">*HttpClientExtensions.cs* proporcionan sobrecargas para `SendAsync` para enviar solicitudes a la SUT.</span><span class="sxs-lookup"><span data-stu-id="d6390-296">*HttpClientExtensions.cs* provide overloads for `SendAsync` to submit requests to the SUT.</span></span></li></ul> |

<span data-ttu-id="d6390-297">El marco de pruebas es [xUnit](https://xunit.github.io/).</span><span class="sxs-lookup"><span data-stu-id="d6390-297">The test framework is [xUnit](https://xunit.github.io/).</span></span> <span data-ttu-id="d6390-298">Pruebas de integración se realizan empleando el [Microsoft.AspNetCore.TestHost](/dotnet/api/microsoft.aspnetcore.testhost), que incluye el [TestServer](/dotnet/api/microsoft.aspnetcore.testhost.testserver).</span><span class="sxs-lookup"><span data-stu-id="d6390-298">Integration tests are conducted using the [Microsoft.AspNetCore.TestHost](/dotnet/api/microsoft.aspnetcore.testhost), which includes the [TestServer](/dotnet/api/microsoft.aspnetcore.testhost.testserver).</span></span> <span data-ttu-id="d6390-299">Dado que la [Microsoft.AspNetCore.Mvc.Testing](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Testing) paquete se utiliza para configurar el servidor de prueba y el host de prueba, el `TestHost` y `TestServer` paquetes no requieren referencias del paquete directa en el archivo de proyecto de la aplicación de prueba o configuración de desarrollador de la aplicación de prueba.</span><span class="sxs-lookup"><span data-stu-id="d6390-299">Because the [Microsoft.AspNetCore.Mvc.Testing](https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Testing) package is used to configure the test host and test server, the `TestHost` and `TestServer` packages don't require direct package references in the test app's project file or developer configuration in the test app.</span></span>

<span data-ttu-id="d6390-300">**La propagación de la base de datos para las pruebas**</span><span class="sxs-lookup"><span data-stu-id="d6390-300">**Seeding the database for testing**</span></span>

<span data-ttu-id="d6390-301">Pruebas de integración suelen requieran un pequeño conjunto de datos en la base de datos antes de la ejecución de prueba.</span><span class="sxs-lookup"><span data-stu-id="d6390-301">Integration tests usually require a small dataset in the database prior to the test execution.</span></span> <span data-ttu-id="d6390-302">Por ejemplo, una eliminación pruebas llamadas en busca de una eliminación de registros de base de datos, de modo que la base de datos debe tener al menos un registro para la solicitud de eliminación tenga éxito.</span><span class="sxs-lookup"><span data-stu-id="d6390-302">For example, a delete test calls for a database record deletion, so the database must have at least one record for the delete request to succeed.</span></span>

<span data-ttu-id="d6390-303">Valores de inicialización de la aplicación de ejemplo con tres mensajes en la base de datos *Utilities.cs* que las pruebas se pueden usar cuando ejecuta:</span><span class="sxs-lookup"><span data-stu-id="d6390-303">The sample app seeds the database with three messages in *Utilities.cs* that tests can use when they execute:</span></span>

[!code-csharp[](integration-tests/samples/2.x/IntegrationTestsSample/tests/RazorPagesProject.Tests/Helpers/Utilities.cs?name=snippet1)]

## <a name="additional-resources"></a><span data-ttu-id="d6390-304">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="d6390-304">Additional resources</span></span>

* [<span data-ttu-id="d6390-305">Pruebas unitarias</span><span class="sxs-lookup"><span data-stu-id="d6390-305">Unit tests</span></span>](/dotnet/articles/core/testing/unit-testing-with-dotnet-test)
* [<span data-ttu-id="d6390-306">Pruebas unitarias de páginas de Razor</span><span class="sxs-lookup"><span data-stu-id="d6390-306">Razor Pages unit tests</span></span>](xref:test/razor-pages-tests)
* [<span data-ttu-id="d6390-307">Middleware</span><span class="sxs-lookup"><span data-stu-id="d6390-307">Middleware</span></span>](xref:fundamentals/middleware/index)
* [<span data-ttu-id="d6390-308">Controladores de pruebas</span><span class="sxs-lookup"><span data-stu-id="d6390-308">Test controllers</span></span>](xref:mvc/controllers/testing)
