---
title: Enrutamiento en ASP.NET Core
author: ardalis
description: Descubra la manera en que la funcionalidad de enrutamiento de ASP.NET Core se encarga de asignar una solicitud entrante a un controlador de ruta.
manager: wpickett
ms.author: riande
ms.date: 10/14/2016
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: fundamentals/routing
ms.openlocfilehash: d35c24347e8e06ed85e2af8addcc1f8cf28dc47a
ms.sourcegitcommit: f2a11a89037471a77ad68a67533754b7bb8303e2
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/01/2018
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="ec4d4-103">Enrutamiento en ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="ec4d4-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="ec4d4-104">De [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/) y [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="ec4d4-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="ec4d4-105">La funcionalidad de enrutamiento de ASP.NET Core se encarga de asignar una solicitud entrante a un controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="ec4d4-106">Las rutas se definen en la aplicación ASP.NET y se configuran cuando se inicia la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-106">Routes are defined in the ASP.NET app and configured when the app starts up.</span></span> <span data-ttu-id="ec4d4-107">Una ruta puede extraer opcionalmente valores de la dirección URL contenida en la solicitud, que se pueden usar para procesar las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="ec4d4-108">Con la información de ruta de la aplicación ASP.NET, la funcionalidad de enrutamiento también puede generar direcciones URL que se asignan a controladores de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-108">Using route information from the ASP.NET app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="ec4d4-109">Por tanto, el enrutamiento puede buscar un controlador de ruta basado en una dirección URL o la dirección URL correspondiente a un controlador de ruta determinado en función de la información del controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-109">Therefore, routing can find a route handler based on a URL, or the URL corresponding to a given route handler based on route handler information.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="ec4d4-110">En este documento se describe el enrutamiento de nivel bajo de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-110">This document covers the low level ASP.NET Core routing.</span></span> <span data-ttu-id="ec4d4-111">Para el enrutamiento de ASP.NET Core MVC, vea [Enrutamiento a las acciones de controlador](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-111">For ASP.NET Core MVC routing, see [Routing to Controller Actions](../mvc/controllers/routing.md)</span></span>

<span data-ttu-id="ec4d4-112">[Vea o descargue el código de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([cómo descargarlo](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="ec4d4-112">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="ec4d4-113">Fundamentos del enrutamiento</span><span class="sxs-lookup"><span data-stu-id="ec4d4-113">Routing basics</span></span>

<span data-ttu-id="ec4d4-114">El enrutamiento usa *rutas* (implementaciones de [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) para:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-114">Routing uses *routes* (implementations of [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) to:</span></span>

* <span data-ttu-id="ec4d4-115">asignar las solicitudes entrantes a *controladores de ruta*</span><span class="sxs-lookup"><span data-stu-id="ec4d4-115">map incoming requests to *route handlers*</span></span>

* <span data-ttu-id="ec4d4-116">generar direcciones URL que se usan en las respuestas</span><span class="sxs-lookup"><span data-stu-id="ec4d4-116">generate URLs used in responses</span></span>

<span data-ttu-id="ec4d4-117">Por lo general, una aplicación tiene una sola colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-117">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="ec4d4-118">Cuando llega una solicitud, la colección de rutas se procesa en orden.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-118">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="ec4d4-119">La solicitud entrante busca una ruta que coincida con la dirección URL de la solicitud. Para ello, llama al método `RouteAsync` en cada ruta disponible de la colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-119">The incoming request looks for a route that matches the request URL by calling the `RouteAsync` method on each available route in the route collection.</span></span> <span data-ttu-id="ec4d4-120">En cambio, una respuesta puede usar el enrutamiento para generar direcciones URL (por ejemplo, para el redireccionamiento o los vínculos) en función de la información de ruta. De este modo, evita tener que codificar de forma rígida las direcciones URL, lo que facilita el mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-120">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information, and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="ec4d4-121">La clase `RouterMiddleware` conecta el enrutamiento a la canalización de [software intermedio](xref:fundamentals/middleware/index).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-121">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the `RouterMiddleware` class.</span></span> <span data-ttu-id="ec4d4-122">[ASP.NET Core MVC](xref:mvc/overview) agrega enrutamiento a la canalización de software intermedio como parte de su configuración.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-122">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="ec4d4-123">Para obtener información sobre el uso del enrutamiento como componente independiente, vea [Uso de software intermedio de enrutamiento](#using-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-123">To learn about using routing as a standalone component, see [Using routing middleware](#using-routing-middleware).</span></span>

<a name="url-matching-ref"></a>

### <a name="url-matching"></a><span data-ttu-id="ec4d4-124">Coincidencia de dirección URL</span><span class="sxs-lookup"><span data-stu-id="ec4d4-124">URL matching</span></span>

<span data-ttu-id="ec4d4-125">La coincidencia de dirección URL es el proceso por el cual el enrutamiento envía una solicitud entrante a un *controlador*.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-125">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="ec4d4-126">Este proceso suele basarse en datos de la ruta de dirección URL, pero se puede ampliar para tener en cuenta los datos de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-126">This process is generally based on data in the URL path, but can be extended to consider any data in the request.</span></span> <span data-ttu-id="ec4d4-127">La capacidad de enviar solicitudes a controladores independientes es clave para escalar el tamaño y la complejidad de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-127">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an application.</span></span>

<span data-ttu-id="ec4d4-128">Las solicitudes entrantes especifican la clase `RouterMiddleware`, que llama al método `RouteAsync` en cada ruta de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-128">Incoming requests enter the `RouterMiddleware`, which calls the `RouteAsync` method on each route in sequence.</span></span> <span data-ttu-id="ec4d4-129">La instancia de `IRouter` decide si *controla* la solicitud mediante el establecimiento de `RouteContext.Handler` en un `RequestDelegate` no nulo.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-129">The `IRouter` instance chooses whether to *handle* the request by setting the `RouteContext.Handler` to a non-null `RequestDelegate`.</span></span> <span data-ttu-id="ec4d4-130">Si una ruta establece un controlador para la solicitud, el procesamiento de rutas se detiene y se invoca el controlador para procesar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-130">If a route sets a handler for the request, route processing stops and the handler will be invoked to process the request.</span></span> <span data-ttu-id="ec4d4-131">Si se prueban todas las rutas y no se encuentra ningún controlador para la solicitud, el software intermedio llama al *siguiente* y se invoca el siguiente software intermedio de la canalización de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-131">If all routes are tried and no handler is found for the request, the middleware calls *next* and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="ec4d4-132">La entrada principal a `RouteAsync` es el `RouteContext.HttpContext` asociado a la solicitud actual.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-132">The primary input to `RouteAsync` is the `RouteContext.HttpContext` associated with the current request.</span></span> <span data-ttu-id="ec4d4-133">`RouteContext.Handler` y `RouteContext.RouteData` son salidas que se establecerán cuando una ruta coincida.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-133">The `RouteContext.Handler` and `RouteContext.RouteData` are outputs that will be set after a route matches.</span></span>

<span data-ttu-id="ec4d4-134">Una coincidencia durante `RouteAsync` también establecerá las propiedades de `RouteContext.RouteData` en los valores adecuados en función del procesamiento de solicitudes realizado hasta el momento.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-134">A match during `RouteAsync` will also set the properties of the `RouteContext.RouteData` to appropriate values based on the request processing done so far.</span></span> <span data-ttu-id="ec4d4-135">Si una ruta coincide con una solicitud, `RouteContext.RouteData` contendrá información de estado importante sobre el *resultado*.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-135">If a route matches a request, the `RouteContext.RouteData` will contain important state information about the *result*.</span></span>

<span data-ttu-id="ec4d4-136">`RouteData.Values` es un diccionario con los *valores de ruta* generados desde la ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-136">`RouteData.Values` is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="ec4d4-137">Estos valores suelen determinarse mediante la conversión en tokens de la dirección URL, y pueden usarse para aceptar la entrada del usuario o para tomar otras decisiones sobre el envío dentro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-137">These values are usually determined by tokenizing the URL, and can be used to accept user input, or to make further dispatching decisions inside the application.</span></span>

<span data-ttu-id="ec4d4-138">`RouteData.DataTokens` es un contenedor de propiedades de datos adicionales relacionados con la ruta coincidente.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-138">`RouteData.DataTokens`  is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="ec4d4-139">Se proporcionan `DataTokens` para permitir la asociación de datos de estado con cada ruta, de modo que la aplicación pueda tomar decisiones más adelante en función de las rutas que han coincidido.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-139">`DataTokens` are provided to support associating state data with each route so the application can make decisions later based on which route matched.</span></span> <span data-ttu-id="ec4d4-140">Estos valores los define el desarrollador y **no** afectan de ninguna manera al comportamiento del enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-140">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="ec4d4-141">Además, los valores que se guardan provisionalmente en tokens de datos pueden ser de cualquier tipo, a diferencia de los valores de ruta, que deben poder convertirse fácilmente en cadenas y a partir de estas.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-141">Additionally, values stashed in data tokens can be of any type, in contrast to route values, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="ec4d4-142">`RouteData.Routers` es una lista de las rutas que han participado en encontrar una coincidencia correcta con la solicitud.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-142">`RouteData.Routers` is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="ec4d4-143">Las rutas se pueden anidar unas dentro de otras y la propiedad `Routers` refleja la ruta de acceso del árbol lógico de rutas que han tenido como resultado una coincidencia.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-143">Routes can be nested inside one another, and the `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="ec4d4-144">Por lo general, el primer elemento de `Routers` es la colección de rutas y se debe usar para la generación de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-144">Generally the first item in `Routers` is the route collection, and should be used for URL generation.</span></span> <span data-ttu-id="ec4d4-145">El último elemento de `Routers` es el controlador de ruta que ha coincidido.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-145">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="ec4d4-146">Generación de dirección URL</span><span class="sxs-lookup"><span data-stu-id="ec4d4-146">URL generation</span></span>

<span data-ttu-id="ec4d4-147">La generación de dirección URL es el proceso por el cual el enrutamiento puede crear una ruta de dirección URL basada en un conjunto de valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-147">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="ec4d4-148">Esto permite una separación lógica entre los controladores y las direcciones URL que tienen acceso a ellos.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-148">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="ec4d4-149">La generación de dirección URL sigue un proceso iterativo similar, pero se inicia cuando el código de usuario o de marco de trabajo llama al método `GetVirtualPath` de la colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-149">URL generation follows a similar iterative process, but starts with user or framework code calling into the `GetVirtualPath` method of the route collection.</span></span> <span data-ttu-id="ec4d4-150">Se llamará en secuencia al método `GetVirtualPath` de cada *ruta* hasta que se devuelva un valor `VirtualPathData` no nulo.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-150">Each *route* will then have its `GetVirtualPath` method called in sequence until a non-null `VirtualPathData` is returned.</span></span>

<span data-ttu-id="ec4d4-151">La principal entradas de `GetVirtualPath` son:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-151">The primary inputs to `GetVirtualPath` are:</span></span>

* `VirtualPathContext.HttpContext`

* `VirtualPathContext.Values`

* `VirtualPathContext.AmbientValues`

<span data-ttu-id="ec4d4-152">Las rutas usan principalmente los valores de ruta proporcionados por `Values` y `AmbientValues` para decidir dónde se puede generar una dirección URL y qué valores se deben incluir.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-152">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide where it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="ec4d4-153">`AmbientValues` son el conjunto de valores de ruta producidos cuando la solicitud actual coincide con el sistema de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-153">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="ec4d4-154">En cambio, `Values` son los valores de ruta que especifican cómo se genera la dirección URL deseada para la operación actual.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-154">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="ec4d4-155">Se proporciona `HttpContext` por si una ruta necesita obtener servicios o datos adicionales asociados con el contexto actual.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-155">The `HttpContext` is provided in case a route needs to get services or additional data associated with the current context.</span></span>

<span data-ttu-id="ec4d4-156">Sugerencia: Considere `Values` como un conjunto de invalidaciones de `AmbientValues`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-156">Tip: Think of `Values` as being a set of overrides for the `AmbientValues`.</span></span> <span data-ttu-id="ec4d4-157">La generación de dirección URL intenta reutilizar los valores de ruta de la solicitud actual para que sea más fácil generar direcciones URL para los vínculos con la misma ruta o valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-157">URL generation tries to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="ec4d4-158">La salida de `GetVirtualPath` es `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-158">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="ec4d4-159">`VirtualPathData` es un valor paralelo de `RouteData`; contiene el valor `VirtualPath` de la dirección URL de salida, así como algunas propiedades adicionales que la ruta debe establecer.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-159">`VirtualPathData` is a parallel of `RouteData`; it contains the `VirtualPath` for the output URL as well as the some additional properties that should be set by the route.</span></span>

<span data-ttu-id="ec4d4-160">La propiedad `VirtualPathData.VirtualPath` contiene la *ruta de acceso virtual* generada por la ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-160">The `VirtualPathData.VirtualPath` property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="ec4d4-161">Es posible que deba procesar aún más la ruta de acceso, según sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-161">Depending on your needs you may need to process the path further.</span></span> <span data-ttu-id="ec4d4-162">Por ejemplo, si quiere representar la dirección URL generada en HTML debe anteponer la ruta de acceso base de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-162">For instance, if you want to render the generated URL in HTML you need to prepend the base path of the application.</span></span>

<span data-ttu-id="ec4d4-163">`VirtualPathData.Router` es una referencia a la ruta que ha generado correctamente la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-163">The `VirtualPathData.Router` is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="ec4d4-164">La propiedad `VirtualPathData.DataTokens` es un diccionario de datos adicionales relacionados con la ruta que ha generado la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-164">The `VirtualPathData.DataTokens` properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="ec4d4-165">Se trata del valor paralelo de `RouteData.DataTokens`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-165">This is the parallel of `RouteData.DataTokens`.</span></span>

### <a name="creating-routes"></a><span data-ttu-id="ec4d4-166">Creación de rutas</span><span class="sxs-lookup"><span data-stu-id="ec4d4-166">Creating routes</span></span>

<span data-ttu-id="ec4d4-167">El enrutamiento proporciona la clase `Route` como implementación estándar de `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-167">Routing provides the `Route` class as the standard implementation of `IRouter`.</span></span> <span data-ttu-id="ec4d4-168">`Route` usa la sintaxis de *plantilla de ruta* para definir los patrones que se harán coincidir con la ruta de dirección URL cuando se llame a `RouteAsync`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-168">`Route` uses the *route template* syntax to define patterns that will match against the URL path when `RouteAsync` is called.</span></span> <span data-ttu-id="ec4d4-169">`Route` usará la misma plantilla de ruta para generar una dirección URL cuando se llame a `GetVirtualPath`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-169">`Route` will use the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="ec4d4-170">La mayoría de las aplicaciones creará rutas mediante una llamada a `MapRoute` o a uno de los métodos de extensión similares definidos en `IRouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-170">Most applications will create routes by calling `MapRoute` or one of the similar extension methods defined on `IRouteBuilder`.</span></span> <span data-ttu-id="ec4d4-171">Todos estos métodos crearán una instancia de `Route` y la agregarán a la colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-171">All of these methods will create an instance of `Route` and add it to the route collection.</span></span>

<span data-ttu-id="ec4d4-172">Nota: `MapRoute` no toma ningún parámetro de controlador de ruta, solo agrega las rutas que procesará `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-172">Note: `MapRoute` doesn't take a route handler parameter - it only adds routes that will be handled by the `DefaultHandler`.</span></span> <span data-ttu-id="ec4d4-173">Dado que el controlador predeterminado es `IRouter`, es posible que decida no controlar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-173">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="ec4d4-174">Por ejemplo, ASP.NET MVC suele configurarse como un controlador predeterminado que solo controla las solicitudes que coinciden con un controlador y una acción disponibles.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-174">For example, ASP.NET MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="ec4d4-175">Para más información sobre el enrutamiento a MVC, vea [Enrutamiento a las acciones de controlador](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-175">To learn more about routing to MVC, see [Routing to Controller Actions](../mvc/controllers/routing.md).</span></span>

<span data-ttu-id="ec4d4-176">Este es un ejemplo de una llamada a `MapRoute` usada por una definición de ruta típica de ASP.NET MVC:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-176">This is an example of a `MapRoute` call used by a typical ASP.NET MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="ec4d4-177">Esta plantilla coincidirá con una ruta de dirección URL como `/Products/Details/17` y extraerá los valores de ruta `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-177">This template will match a URL path like `/Products/Details/17` and extract the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="ec4d4-178">Los valores de ruta se determinan al dividir la ruta de dirección URL en segmentos y hacer coincidir cada segmento con el nombre del *parámetro de ruta* de la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-178">The route values are determined by splitting the URL path into segments, and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="ec4d4-179">Los parámetros de ruta tienen un nombre asignado.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-179">Route parameters are named.</span></span> <span data-ttu-id="ec4d4-180">Para definirlos, el nombre del parámetro se incluye entre llaves `{ }`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-180">They're defined by enclosing the parameter name in braces `{ }`.</span></span>

<span data-ttu-id="ec4d4-181">La plantilla anterior también podría coincidir con la ruta de dirección URL `/` y generaría los valores `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-181">The template above could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="ec4d4-182">Esto se debe a que los parámetros de ruta `{controller}` y `{action}` tienen valores predeterminados y el parámetro de ruta `id` es opcional.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-182">This happens because the `{controller}` and `{action}` route parameters have default values, and the `id` route parameter is optional.</span></span> <span data-ttu-id="ec4d4-183">Un signo igual `=` seguido de un valor después del nombre del parámetro de ruta define un valor predeterminado para el parámetro.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-183">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="ec4d4-184">Un signo de interrogación `?` después del nombre del parámetro de ruta define el parámetro como opcional.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-184">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="ec4d4-185">Los parámetros de ruta con un valor predeterminado *siempre* generan un valor de ruta cuando la ruta coincide, mientras que los parámetros opcionales no generarán un valor de ruta si no hay ningún segmento de ruta de dirección URL correspondiente.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-185">Route parameters with a default value *always* produce a route value when the route matches - optional parameters won't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="ec4d4-186">Vea en [Referencia de plantilla de ruta](#route-template-reference) una descripción detallada de las características y la sintaxis de la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-186">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="ec4d4-187">En este ejemplo se incluye una *restricción de ruta*:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-187">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="ec4d4-188">Esta plantilla coincidirá con una ruta de dirección URL como `/Products/Details/17`, pero no con `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-188">This template will match a URL path like `/Products/Details/17`, but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="ec4d4-189">La definición de parámetro de ruta `{id:int}` define una *restricción de ruta* para el parámetro de ruta `id`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-189">The route parameter definition `{id:int}` defines a *route constraint* for the `id` route parameter.</span></span> <span data-ttu-id="ec4d4-190">Las restricciones de ruta implementan `IRouteConstraint` e inspeccionan los valores de ruta para comprobarlos.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-190">Route constraints implement `IRouteConstraint` and inspect route values to verify them.</span></span> <span data-ttu-id="ec4d4-191">En este ejemplo, el valor de ruta `id` debe poder convertirse en un entero.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-191">In this example the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="ec4d4-192">Vea en [Referencia de restricción de ruta](#route-constraint-reference) una explicación más detallada de las restricciones de ruta que se proporcionan con el marco de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-192">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="ec4d4-193">Las sobrecargas adicionales de `MapRoute` aceptan valores para `constraints`, `dataTokens` y `defaults`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-193">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="ec4d4-194">Estos parámetros adicionales de `MapRoute` se definen como un tipo `object`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-194">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="ec4d4-195">Estos parámetros suelen usarse para pasar un objeto de tipo anónimo, donde los nombres de propiedad del tipo anónimo coinciden con los nombres de los parámetros de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-195">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="ec4d4-196">En los dos ejemplos siguientes se crean rutas equivalentes:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-196">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="ec4d4-197">Sugerencia: La sintaxis insertada para definir las restricciones y los valores predeterminados puede ser más conveniente para rutas simples,</span><span class="sxs-lookup"><span data-stu-id="ec4d4-197">Tip: The inline syntax for defining constraints and defaults can be more convenient for simple routes.</span></span> <span data-ttu-id="ec4d4-198">pero hay algunas características como los tokens de datos que no son compatibles con esta sintaxis.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-198">However, there are features such as data tokens which are not supported by inline syntax.</span></span>

<span data-ttu-id="ec4d4-199">En este ejemplo se muestran otras características:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-199">This example demonstrates a few more features:</span></span>

```csharp
routes.MapRoute(
  name: "blog",
  template: "Blog/{*article}",
  defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="ec4d4-200">Esta plantilla coincidirá con una ruta de dirección URL como `/Blog/All-About-Routing/Introduction` y extraerá los valores `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-200">This template will match a URL path like `/Blog/All-About-Routing/Introduction` and will extract the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="ec4d4-201">La ruta genera los valores de ruta predeterminados para `controller` y `action`, incluso si no hay parámetros de ruta correspondientes en la plantilla.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-201">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="ec4d4-202">Los valores predeterminados pueden especificarse en la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-202">Default values can be specified in the route template.</span></span> <span data-ttu-id="ec4d4-203">El parámetro de ruta `article` se define como un *comodín* por la aparición de un asterisco `*` antes del nombre del parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-203">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="ec4d4-204">Los parámetros de ruta comodín capturan el resto de la ruta de dirección URL y también pueden coincidir con la cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-204">Catch-all route parameters capture the remainder of the URL path, and can also match the empty string.</span></span>

<span data-ttu-id="ec4d4-205">En este ejemplo se agregan restricciones de ruta y tokens de datos:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-205">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="ec4d4-206">Esta plantilla coincidirá con una ruta de dirección URL como `/Products/5` y extraerá los valores `{ controller = Products, action = Details, id = 5 }` y los tokens de datos `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-206">This template will match a URL path like `/Products/5` and will extract the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokens de Windows de variables locales](routing/_static/tokens.png)

<a name="id1"></a>

### <a name="url-generation"></a><span data-ttu-id="ec4d4-208">Generación de dirección URL</span><span class="sxs-lookup"><span data-stu-id="ec4d4-208">URL generation</span></span>

<span data-ttu-id="ec4d4-209">La clase `Route` también puede llevar a cabo la generación de dirección URL mediante la combinación de un conjunto de valores de ruta con su plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-209">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="ec4d4-210">Se trata lógicamente del proceso inverso de hacer coincidir la ruta de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-210">This is logically the reverse process of matching the URL path.</span></span>

<span data-ttu-id="ec4d4-211">Sugerencia: Para entender mejor la generación de dirección URL, imagine qué dirección URL quiere generar y, después, piense cómo coincidiría una plantilla de ruta con esa dirección URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-211">Tip: To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="ec4d4-212">¿Qué valores se generarían?</span><span class="sxs-lookup"><span data-stu-id="ec4d4-212">What values would be produced?</span></span> <span data-ttu-id="ec4d4-213">Este es un equivalente aproximado de cómo funciona la generación de dirección URL en la clase `Route`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-213">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="ec4d4-214">En este ejemplo se usa una ruta de estilo básica de ASP.NET MVC:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-214">This example uses a basic ASP.NET MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="ec4d4-215">Con los valores de ruta `{ controller = Products, action = List }`, esta ruta generará la dirección URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-215">With the route values `{ controller = Products, action = List }`, this route will generate the URL `/Products/List`.</span></span> <span data-ttu-id="ec4d4-216">Los valores de ruta se sustituyen por los parámetros de ruta correspondientes para formar la ruta de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-216">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="ec4d4-217">Dado que `id` es un parámetro de ruta opcional, no supone ningún problema que no tenga un valor.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-217">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="ec4d4-218">Con los valores de ruta `{ controller = Home, action = Index }`, esta ruta generará la dirección URL `/`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-218">With the route values `{ controller = Home, action = Index }`, this route will generate the URL `/`.</span></span> <span data-ttu-id="ec4d4-219">Los valores de ruta proporcionados coinciden con los valores predeterminados, por lo que los segmentos correspondientes con esos valores se pueden omitir sin ningún riesgo.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-219">The route values that were provided match the default values so the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="ec4d4-220">Tenga en cuenta que ambas direcciones URL generadas harían un recorrido de ida y vuelta con esta definición de ruta y generarían los mismos valores de ruta que se han usado para generar la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-220">Note that both URLs generated would round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

<span data-ttu-id="ec4d4-221">Sugerencia: Las aplicaciones con ASP.NET MVC deben usar `UrlHelper` para generar direcciones URL en lugar de llamar al enrutamiento directamente.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-221">Tip: An app using ASP.NET MVC should use `UrlHelper` to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="ec4d4-222">Para obtener más detalles sobre el proceso de generación de dirección URL, vea [Referencia de generación de dirección URL](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-222">For more details about the URL generation process, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="using-routing-middleware"></a><span data-ttu-id="ec4d4-223">Uso de software intermedio de enrutamiento</span><span class="sxs-lookup"><span data-stu-id="ec4d4-223">Using Routing Middleware</span></span>

<span data-ttu-id="ec4d4-224">Agregue el paquete NuGet "Microsoft.AspNetCore.Routing".</span><span class="sxs-lookup"><span data-stu-id="ec4d4-224">Add the NuGet package "Microsoft.AspNetCore.Routing".</span></span>

<span data-ttu-id="ec4d4-225">Agregue enrutamiento al contenedor de servicios en *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-225">Add routing to the service container in *Startup.cs*:</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?highlight=3&start=11&end=14)]

<span data-ttu-id="ec4d4-226">Las rutas deben configurarse en el método `Configure` en la clase `Startup`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-226">Routes must be configured in the `Configure` method in the `Startup` class.</span></span> <span data-ttu-id="ec4d4-227">En el ejemplo siguiente se usan estas API:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-227">The sample below uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="ec4d4-228">`MapGet` coincide solamente con solicitudes HTTP GET</span><span class="sxs-lookup"><span data-stu-id="ec4d4-228">`MapGet`  Matches only HTTP GET requests</span></span>
* `UseRouter`

```csharp
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
    var trackPackageRouteHandler = new RouteHandler(context =>
    {
        var routeValues = context.GetRouteData().Values;
        return context.Response.WriteAsync(
            $"Hello! Route values: {string.Join(", ", routeValues)}");
    });

    var routeBuilder = new RouteBuilder(app, trackPackageRouteHandler);

    routeBuilder.MapRoute(
        "Track Package Route",
        "package/{operation:regex(^(track|create|detonate)$)}/{id:int}");

    routeBuilder.MapGet("hello/{name}", context =>
    {
        var name = context.GetRouteValue("name");
        // This is the route handler when HTTP GET "hello/<anything>"  matches
        // To match HTTP GET "hello/<anything>/<anything>,
        // use routeBuilder.MapGet("hello/{*name}"
        return context.Response.WriteAsync($"Hi, {name}!");
    });

    var routes = routeBuilder.Build();
    app.UseRouter(routes);
}
```

<span data-ttu-id="ec4d4-229">En la tabla siguiente se muestran las respuestas con los URI especificados.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-229">The table below shows the responses with the given URIs.</span></span>

| <span data-ttu-id="ec4d4-230">Identificador URI</span><span class="sxs-lookup"><span data-stu-id="ec4d4-230">URI</span></span> | <span data-ttu-id="ec4d4-231">Respuesta</span><span class="sxs-lookup"><span data-stu-id="ec4d4-231">Response</span></span>  |
| ------- | -------- |
| <span data-ttu-id="ec4d4-232">/package/create/3</span><span class="sxs-lookup"><span data-stu-id="ec4d4-232">/package/create/3</span></span>  | <span data-ttu-id="ec4d4-233">Hello!</span><span class="sxs-lookup"><span data-stu-id="ec4d4-233">Hello!</span></span> <span data-ttu-id="ec4d4-234">Valores de ruta: [operation, create], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="ec4d4-234">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="ec4d4-235">/package/track/-3</span><span class="sxs-lookup"><span data-stu-id="ec4d4-235">/package/track/-3</span></span>  | <span data-ttu-id="ec4d4-236">Hello!</span><span class="sxs-lookup"><span data-stu-id="ec4d4-236">Hello!</span></span> <span data-ttu-id="ec4d4-237">Valores de ruta: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="ec4d4-237">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="ec4d4-238">/package/track/-3/</span><span class="sxs-lookup"><span data-stu-id="ec4d4-238">/package/track/-3/</span></span> | <span data-ttu-id="ec4d4-239">Hello!</span><span class="sxs-lookup"><span data-stu-id="ec4d4-239">Hello!</span></span> <span data-ttu-id="ec4d4-240">Valores de ruta: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="ec4d4-240">Route values: [operation, track], [id, -3]</span></span>  |
| <span data-ttu-id="ec4d4-241">/package/track/</span><span class="sxs-lookup"><span data-stu-id="ec4d4-241">/package/track/</span></span> | <span data-ttu-id="ec4d4-242">\<Pasar explícitamente, ninguna coincidencia></span><span class="sxs-lookup"><span data-stu-id="ec4d4-242">\<Fall through, no match></span></span> |
| <span data-ttu-id="ec4d4-243">GET /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="ec4d4-243">GET /hello/Joe</span></span> | <span data-ttu-id="ec4d4-244">Hi, Joe!</span><span class="sxs-lookup"><span data-stu-id="ec4d4-244">Hi, Joe!</span></span> |
| <span data-ttu-id="ec4d4-245">POST /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="ec4d4-245">POST /hello/Joe</span></span> | <span data-ttu-id="ec4d4-246">\<Pasar explícitamente, solo coincide con HTTP GET></span><span class="sxs-lookup"><span data-stu-id="ec4d4-246">\<Fall through, matches HTTP GET only></span></span> |
| <span data-ttu-id="ec4d4-247">GET /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="ec4d4-247">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="ec4d4-248">\<Pasar explícitamente, ninguna coincidencia></span><span class="sxs-lookup"><span data-stu-id="ec4d4-248">\<Fall through, no match></span></span> |

<span data-ttu-id="ec4d4-249">Si va a configurar una única ruta, pase una instancia de `IRouter` para llamar a `app.UseRouter`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-249">If you are configuring a single route, call `app.UseRouter` passing in an `IRouter` instance.</span></span> <span data-ttu-id="ec4d4-250">No tendrá que llamar a `RouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-250">You won't need to call `RouteBuilder`.</span></span>

<span data-ttu-id="ec4d4-251">El marco de trabajo proporciona un conjunto de métodos de extensión para crear rutas, como los siguientes:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-251">The framework provides a set of extension methods for creating routes such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="ec4d4-252">Algunos de estos métodos, como `MapGet`, requieren que se proporcione un valor `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-252">Some of these methods such as `MapGet` require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="ec4d4-253">El valor `RequestDelegate` se usará como *controlador de ruta* cuando la ruta coincida.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-253">The `RequestDelegate` will be used as the *route handler* when the route matches.</span></span> <span data-ttu-id="ec4d4-254">Otros métodos de esta familia permiten configurar una canalización de software intermedio que se usará como controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-254">Other methods in this family allow configuring a middleware pipeline which will be used as the route handler.</span></span> <span data-ttu-id="ec4d4-255">Si el método *Map* no acepta un controlador, como `MapRoute`, usará `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-255">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it will use the `DefaultHandler`.</span></span>

<span data-ttu-id="ec4d4-256">Los métodos `Map[Verb]` usan restricciones para limitar la ruta al verbo HTTP en el nombre del método.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-256">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="ec4d4-257">Por ejemplo, vea [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) y [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-257">For example, see [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) and [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="ec4d4-258">Referencia de plantilla de ruta</span><span class="sxs-lookup"><span data-stu-id="ec4d4-258">Route Template Reference</span></span>

<span data-ttu-id="ec4d4-259">Los tokens entre llaves (`{ }`) definen *parámetros de ruta* que se enlazarán si se encuentran coincidencias con la ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-259">Tokens within curly braces (`{ }`) define *route parameters* which will be bound if the route is matched.</span></span> <span data-ttu-id="ec4d4-260">Puede definir más de un parámetro de ruta en un segmento de ruta, pero deben estar separados por un valor literal.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-260">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="ec4d4-261">Por ejemplo, `{controller=Home}{action=Index}` no sería una ruta válida, ya que no hay ningún valor literal entre `{controller}` y `{action}`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-261">For example `{controller=Home}{action=Index}` wouldn't be a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="ec4d4-262">Estos parámetros de ruta deben tener un nombre y, opcionalmente, atributos adicionales especificados.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-262">These route parameters must have a name, and may have additional attributes specified.</span></span>

<span data-ttu-id="ec4d4-263">El texto literal diferente de los parámetros de ruta (por ejemplo, `{id}`) y el separador de ruta `/` deben coincidir con el texto de la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-263">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="ec4d4-264">La coincidencia de texto no distingue mayúsculas de minúsculas y se basa en la representación descodificada de la ruta de las direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-264">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="ec4d4-265">Para que el delimitador de parámetro de ruta literal `{` o `}` coincida, repita el carácter (`{{` o `}}`) para usarlo como secuencia de escape.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-265">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="ec4d4-266">Es necesario tener en cuenta otras consideraciones en el caso de los patrones de dirección URL que intentan capturar un nombre de archivo con una extensión de archivo opcional.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-266">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="ec4d4-267">Por ejemplo, cuando se usa la plantilla `files/{filename}.{ext?}`, si existen `filename` y `ext` se rellenarán ambos valores.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-267">For example, using the template `files/{filename}.{ext?}` - When both `filename` and `ext` exist, both values will be populated.</span></span> <span data-ttu-id="ec4d4-268">Si solo existe `filename` en la dirección URL, la ruta coincide porque el punto final `.` es opcional.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-268">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="ec4d4-269">Las direcciones URL siguientes coincidirían con esta ruta:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-269">The following URLs would match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile.`
* `/files/myFile`

<span data-ttu-id="ec4d4-270">Puede usar el carácter `*` como prefijo de un parámetro de ruta para enlazar con el resto del URI; es lo que se denomina un parámetro *comodín*.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-270">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI - this is called a *catch-all* parameter.</span></span> <span data-ttu-id="ec4d4-271">Por ejemplo, `blog/{*slug}` coincidirá con cualquier URI que empiece por `/blog` y que vaya seguido por cualquier valor (que se asignaría al valor de ruta `slug`).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-271">For example, `blog/{*slug}` would match any URI that started with `/blog` and had any value following it (which would be assigned to the `slug` route value).</span></span> <span data-ttu-id="ec4d4-272">Los parámetros comodín también pueden coincidir con una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-272">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="ec4d4-273">Los parámetros de ruta pueden tener *valores predeterminados*. Para designar un valor predeterminado, se especifica después del nombre de parámetro, separado por un signo `=`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-273">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an `=`.</span></span> <span data-ttu-id="ec4d4-274">Por ejemplo, `{controller=Home}` definiría `Home` como el valor predeterminado de `controller`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-274">For example, `{controller=Home}` would define `Home` as the default value for `controller`.</span></span> <span data-ttu-id="ec4d4-275">El valor predeterminado se usa si no hay ningún valor en la dirección URL para el parámetro.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-275">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="ec4d4-276">Además de los valores predeterminados, los parámetros de ruta pueden ser opcionales (para especificarlos, se anexa un signo `?` al final del nombre del parámetro, como en `id?`).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-276">In addition to default values, route parameters may be optional (specified by appending a `?` to the end of the parameter name, as in `id?`).</span></span> <span data-ttu-id="ec4d4-277">La diferencia entre ser opcional y tener un valor predeterminado es que un parámetro de ruta con un valor predeterminado siempre genera un valor, mientras que un parámetro opcional tiene un valor solo cuando se proporciona uno.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-277">The difference between optional and "has default" is that a route parameter with a default value always produces a value; an optional parameter has a value only when one is provided.</span></span>

<span data-ttu-id="ec4d4-278">Los parámetros de ruta también pueden tener restricciones, que deben coincidir con el valor de ruta enlazado desde la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-278">Route parameters may also have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="ec4d4-279">Si se agrega un carácter de dos puntos `:` y un nombre de restricción después del nombre del parámetro de ruta se especifica una *restricción insertada* en un parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-279">Adding a colon `:` and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="ec4d4-280">Si la restricción requiere argumentos, se proporcionan entre paréntesis `( )` después del nombre de restricción.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-280">If the constraint requires arguments those are provided enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="ec4d4-281">Se pueden especificar varias restricciones insertadas si se anexa otro carácter de dos puntos `:` y un nombre de restricción.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-281">Multiple inline constraints can be specified by appending another colon `:` and constraint name.</span></span> <span data-ttu-id="ec4d4-282">El nombre de restricción se pasa al servicio `IInlineConstraintResolver` para crear una instancia de `IRouteConstraint` para su uso en el procesamiento de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-282">The constraint name is passed to the `IInlineConstraintResolver` service to create an instance of `IRouteConstraint` to use in URL processing.</span></span> <span data-ttu-id="ec4d4-283">Por ejemplo, la plantilla de ruta `blog/{article:minlength(10)}` especifica la restricción `minlength` con el argumento `10`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-283">For example, the route template `blog/{article:minlength(10)}` specifies the `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="ec4d4-284">Para obtener una descripción más detalladas de las restricciones de ruta y una lista de las restricciones proporcionadas por el marco de trabajo, vea [Referencia de restricción de ruta](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-284">For more description route constraints, and a listing of the constraints provided by the framework, see [route-constraint-reference](#route-constraint-reference).</span></span>

<span data-ttu-id="ec4d4-285">En la tabla siguiente se muestran algunas plantillas de ruta y su comportamiento.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-285">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="ec4d4-286">Plantilla de ruta</span><span class="sxs-lookup"><span data-stu-id="ec4d4-286">Route Template</span></span> | <span data-ttu-id="ec4d4-287">Dirección URL coincidente de ejemplo</span><span class="sxs-lookup"><span data-stu-id="ec4d4-287">Example Matching URL</span></span> | <span data-ttu-id="ec4d4-288">Notas</span><span class="sxs-lookup"><span data-stu-id="ec4d4-288">Notes</span></span> |
| -------- | -------- | ------- |
| <span data-ttu-id="ec4d4-289">hello</span><span class="sxs-lookup"><span data-stu-id="ec4d4-289">hello</span></span>  | <span data-ttu-id="ec4d4-290">/hello</span><span class="sxs-lookup"><span data-stu-id="ec4d4-290">/hello</span></span>  | <span data-ttu-id="ec4d4-291">Solo coincide con la ruta de acceso única `/hello`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-291">Only matches the single path `/hello`</span></span> |
| <span data-ttu-id="ec4d4-292">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="ec4d4-292">{Page=Home}</span></span> | / | <span data-ttu-id="ec4d4-293">Coincide y establece `Page` en `Home`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-293">Matches and sets `Page` to `Home`</span></span> |
| <span data-ttu-id="ec4d4-294">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="ec4d4-294">{Page=Home}</span></span>  | <span data-ttu-id="ec4d4-295">/Contact</span><span class="sxs-lookup"><span data-stu-id="ec4d4-295">/Contact</span></span>  | <span data-ttu-id="ec4d4-296">Coincide y establece `Page` en `Contact`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-296">Matches and sets `Page` to `Contact`</span></span> |
| <span data-ttu-id="ec4d4-297">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="ec4d4-297">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="ec4d4-298">/Products/List</span><span class="sxs-lookup"><span data-stu-id="ec4d4-298">/Products/List</span></span> | <span data-ttu-id="ec4d4-299">Se asigna al controlador `Products` y la acción `List`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-299">Maps to `Products` controller and `List`  action</span></span> |
| <span data-ttu-id="ec4d4-300">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="ec4d4-300">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="ec4d4-301">/Products/Details/123</span><span class="sxs-lookup"><span data-stu-id="ec4d4-301">/Products/Details/123</span></span>  |  <span data-ttu-id="ec4d4-302">Se asigna al controlador `Products` y la acción `Details`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-302">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="ec4d4-303">`id` se establece en 123</span><span class="sxs-lookup"><span data-stu-id="ec4d4-303">`id` set to 123</span></span> |
| <span data-ttu-id="ec4d4-304">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="ec4d4-304">{controller=Home}/{action=Index}/{id?}</span></span> | /  |  <span data-ttu-id="ec4d4-305">Se asigna al controlador `Home` y el método `Index`; `id` se omite</span><span class="sxs-lookup"><span data-stu-id="ec4d4-305">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span> |

<span data-ttu-id="ec4d4-306">El uso de una plantilla suele ser el método de enrutamiento más sencillo.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-306">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="ec4d4-307">Las restricciones y los valores predeterminados también se pueden especificar fuera de la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-307">Constraints and defaults can also be specified outside the route template.</span></span>

<span data-ttu-id="ec4d4-308">Sugerencia: Habilite el [registro](xref:fundamentals/logging/index) para ver de qué forma las implementaciones de enrutamiento integradas, como `Route`, coinciden con las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-308">Tip: Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="route-constraint-reference"></a><span data-ttu-id="ec4d4-309">Referencia de restricción de ruta</span><span class="sxs-lookup"><span data-stu-id="ec4d4-309">Route Constraint Reference</span></span>

<span data-ttu-id="ec4d4-310">Las restricciones de ruta se ejecutan cuando un valor `Route` ha coincidido con la sintaxis de la dirección URL entrante y ha convertido la ruta de dirección URL en valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-310">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="ec4d4-311">En general, las restricciones de ruta inspeccionan el valor de ruta asociado a través de la plantilla de ruta y deciden si el valor es aceptable o no.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-311">Route constraints generally inspect the route value associated via the route template and make a simple yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="ec4d4-312">Algunas restricciones de ruta usan datos ajenos al valor de ruta para decidir si la solicitud se puede enrutar.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-312">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="ec4d4-313">Por ejemplo, `HttpMethodRouteConstraint` puede aceptar o rechazar una solicitud basada en su verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-313">For example, the `HttpMethodRouteConstraint` can accept or reject a request based on its HTTP verb.</span></span>

>[!WARNING]
> <span data-ttu-id="ec4d4-314">Evite el uso de restricciones para la **validación de entradas**, porque si lo hace, la entrada no válida producirá un error "404 No encontrado" en lugar de un error 400 con el mensaje de error adecuado.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-314">Avoid using constraints for **input validation**, because doing so means that invalid input will result in a 404 (Not Found) instead of a 400 with an appropriate error message.</span></span> <span data-ttu-id="ec4d4-315">Las restricciones de ruta deben usarse para **eliminar la ambigüedad** entre rutas similares, no para validar las entradas de una ruta determinada.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-315">Route constraints should be used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="ec4d4-316">En la tabla siguiente se muestran algunas restricciones de ruta y su comportamiento esperado.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-316">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="ec4d4-317">restricción</span><span class="sxs-lookup"><span data-stu-id="ec4d4-317">constraint</span></span> | <span data-ttu-id="ec4d4-318">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="ec4d4-318">Example</span></span> | <span data-ttu-id="ec4d4-319">Coincidencias de ejemplo</span><span class="sxs-lookup"><span data-stu-id="ec4d4-319">Example Matches</span></span> | <span data-ttu-id="ec4d4-320">Notas</span><span class="sxs-lookup"><span data-stu-id="ec4d4-320">Notes</span></span> |
| --------   | ------- | ------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="ec4d4-321">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-321">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="ec4d4-322">Coincide con cualquier entero</span><span class="sxs-lookup"><span data-stu-id="ec4d4-322">Matches any integer</span></span> |
| `bool`  | `{active:bool}` | <span data-ttu-id="ec4d4-323">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-323">`true`, `FALSE`</span></span> | <span data-ttu-id="ec4d4-324">Coincide con `true` o `false` (no distingue mayúsculas de minúsculas)</span><span class="sxs-lookup"><span data-stu-id="ec4d4-324">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="ec4d4-325">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-325">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="ec4d4-326">Coincide con un valor `DateTime` válido (en la referencia cultural invariable; vea la advertencia)</span><span class="sxs-lookup"><span data-stu-id="ec4d4-326">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="ec4d4-327">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-327">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="ec4d4-328">Coincide con un valor `decimal` válido (en la referencia cultural invariable; vea la advertencia)</span><span class="sxs-lookup"><span data-stu-id="ec4d4-328">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double`  | `{weight:double}` | <span data-ttu-id="ec4d4-329">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-329">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="ec4d4-330">Coincide con un valor `double` válido (en la referencia cultural invariable; vea la advertencia)</span><span class="sxs-lookup"><span data-stu-id="ec4d4-330">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float`  | `{weight:float}` | <span data-ttu-id="ec4d4-331">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-331">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="ec4d4-332">Coincide con un valor `float` válido (en la referencia cultural invariable; vea la advertencia)</span><span class="sxs-lookup"><span data-stu-id="ec4d4-332">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid`  | `{id:guid}` | <span data-ttu-id="ec4d4-333">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-333">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="ec4d4-334">Coincide con un valor `Guid` válido</span><span class="sxs-lookup"><span data-stu-id="ec4d4-334">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="ec4d4-335">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="ec4d4-335">`123456789`, `-123456789`</span></span> | <span data-ttu-id="ec4d4-336">Coincide con un valor `long` válido</span><span class="sxs-lookup"><span data-stu-id="ec4d4-336">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="ec4d4-337">La cadena debe tener al menos cuatro caracteres</span><span class="sxs-lookup"><span data-stu-id="ec4d4-337">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="ec4d4-338">La cadena no debe tener más de ocho caracteres</span><span class="sxs-lookup"><span data-stu-id="ec4d4-338">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="ec4d4-339">La cadena debe tener una longitud de exactamente 12 caracteres</span><span class="sxs-lookup"><span data-stu-id="ec4d4-339">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="ec4d4-340">La cadena debe tener una longitud como mínimo de ocho caracteres y como máximo de 16</span><span class="sxs-lookup"><span data-stu-id="ec4d4-340">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="ec4d4-341">El valor entero debe ser como mínimo 18</span><span class="sxs-lookup"><span data-stu-id="ec4d4-341">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` |  `91` | <span data-ttu-id="ec4d4-342">El valor entero debe ser como máximo 120</span><span class="sxs-lookup"><span data-stu-id="ec4d4-342">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="ec4d4-343">El valor entero debe ser como mínimo 18 y máximo 120</span><span class="sxs-lookup"><span data-stu-id="ec4d4-343">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="ec4d4-344">La cadena debe constar de uno o más caracteres alfabéticos (`a`-`z`, no distingue mayúsculas de minúsculas)</span><span class="sxs-lookup"><span data-stu-id="ec4d4-344">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="ec4d4-345">La cadena debe coincidir con la expresión regular (vea las sugerencias sobre cómo definir una expresión regular)</span><span class="sxs-lookup"><span data-stu-id="ec4d4-345">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required`  | `{name:required}` | `Rick` |  <span data-ttu-id="ec4d4-346">Se usa para exigir que un valor que no es de parámetro esté presente durante la generación de dirección URL</span><span class="sxs-lookup"><span data-stu-id="ec4d4-346">Used to enforce that a non-parameter value is present during URL generation</span></span> |

>[!WARNING]
> <span data-ttu-id="ec4d4-347">Las restricciones de ruta que comprueban que la dirección URL se puede convertir en un tipo CLR (como `int` o `DateTime`) usan siempre la referencia cultural invariable, es decir, dan por supuesto que la dirección URL no es localizable.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-347">Route constraints that verify the URL can be converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture - they assume the URL is non-localizable.</span></span> <span data-ttu-id="ec4d4-348">Las restricciones de ruta proporcionadas por el marco de trabajo no modifican los valores almacenados en los valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-348">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="ec4d4-349">Todos los valores de ruta analizados desde la dirección URL se almacenarán como cadenas.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-349">All route values parsed from the URL will be stored as strings.</span></span> <span data-ttu-id="ec4d4-350">Por ejemplo, la [restricción de ruta Float](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) intentará convertir el valor de ruta en un valor Float, pero el valor convertido se usa exclusivamente para comprobar que se puede convertir en Float.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-350">For example, the [Float route constraint](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) will attempt to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="ec4d4-351">Expresiones regulares</span><span class="sxs-lookup"><span data-stu-id="ec4d4-351">Regular expressions</span></span> 

<span data-ttu-id="ec4d4-352">El marco de trabajo de ASP.NET Core agrega `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` al constructor de expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-352">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="ec4d4-353">En [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) (Enumeración RegexOptions) puede ver una descripción de estos miembros.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-353">See [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) for a description of these members.</span></span>

<span data-ttu-id="ec4d4-354">Las expresiones regulares usan delimitadores y tokens similares a los que usan el enrutamiento y el lenguaje C#.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-354">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="ec4d4-355">Es necesario usar secuencias de escape con los tokens de expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-355">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="ec4d4-356">Por ejemplo, para usar la expresión regular `^\d{3}-\d{2}-\d{4}$` en el enrutamiento, es necesario escribir los caracteres `\` como `\\` en el archivo de código fuente de C# para que el carácter de escape de cadena `\` tenga una secuencia de escape (a menos que use [literales de cadena textuales](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-356">For example, to use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, it needs to have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="ec4d4-357">Es necesario incluir una secuencia de escape en los caracteres `{`, `}`, "[" y "]". Para ello, duplíquelos a fin de incluir una secuencia de escape en los caracteres delimitadores del parámetro de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-357">The `{` , `}` , '[' and ']' characters need to be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span>  <span data-ttu-id="ec4d4-358">En la tabla siguiente se muestra una expresión regular y la versión con una secuencia de escape.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-358">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="ec4d4-359">Expresión</span><span class="sxs-lookup"><span data-stu-id="ec4d4-359">Expression</span></span>               | <span data-ttu-id="ec4d4-360">Nota</span><span class="sxs-lookup"><span data-stu-id="ec4d4-360">Note</span></span> |
| ----------------- | ------------ | 
| `^\d{3}-\d{2}-\d{4}$` | <span data-ttu-id="ec4d4-361">Expresión regular</span><span class="sxs-lookup"><span data-stu-id="ec4d4-361">Regular expression</span></span> |
| `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` | <span data-ttu-id="ec4d4-362">Con secuencia de escape</span><span class="sxs-lookup"><span data-stu-id="ec4d4-362">Escaped</span></span>  |
| `^[a-z]{2}$` | <span data-ttu-id="ec4d4-363">Expresión regular</span><span class="sxs-lookup"><span data-stu-id="ec4d4-363">Regular expression</span></span> |
| `^[[a-z]]{{2}}$` | <span data-ttu-id="ec4d4-364">Con secuencia de escape</span><span class="sxs-lookup"><span data-stu-id="ec4d4-364">Escaped</span></span>  |

<span data-ttu-id="ec4d4-365">Las expresiones regulares usadas en el enrutamiento suelen empezar con el carácter `^` (coincidencia con la posición inicial de la cadena) y acabar con el carácter `$` (coincidencia con la posición final de la cadena).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-365">Regular expressions used in routing will often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="ec4d4-366">Los caracteres `^` y `$` garantizan que la expresión regular coincide con el valor completo del parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-366">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="ec4d4-367">Sin los caracteres `^` y `$`, la expresión regular coincidirá con cualquier subcadena de la cadena, lo que a menudo no es deseable.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-367">Without the `^` and `$` characters the regular expression will match any sub-string within the string, which is often not what you want.</span></span> <span data-ttu-id="ec4d4-368">En la tabla siguiente se muestran algunos ejemplos y se explica por qué que coinciden o no.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-368">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="ec4d4-369">Expresión</span><span class="sxs-lookup"><span data-stu-id="ec4d4-369">Expression</span></span>               | <span data-ttu-id="ec4d4-370">String</span><span class="sxs-lookup"><span data-stu-id="ec4d4-370">String</span></span> | <span data-ttu-id="ec4d4-371">Coincidir con</span><span class="sxs-lookup"><span data-stu-id="ec4d4-371">Match</span></span> | <span data-ttu-id="ec4d4-372">Comentario</span><span class="sxs-lookup"><span data-stu-id="ec4d4-372">Comment</span></span> |
| ----------------- | ------------ |  ------------ |  ------------ | 
| `[a-z]{2}` | <span data-ttu-id="ec4d4-373">hello</span><span class="sxs-lookup"><span data-stu-id="ec4d4-373">hello</span></span> | <span data-ttu-id="ec4d4-374">sí</span><span class="sxs-lookup"><span data-stu-id="ec4d4-374">yes</span></span> | <span data-ttu-id="ec4d4-375">coincidencias de subcadenas</span><span class="sxs-lookup"><span data-stu-id="ec4d4-375">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="ec4d4-376">123abc456</span><span class="sxs-lookup"><span data-stu-id="ec4d4-376">123abc456</span></span> | <span data-ttu-id="ec4d4-377">sí</span><span class="sxs-lookup"><span data-stu-id="ec4d4-377">yes</span></span> | <span data-ttu-id="ec4d4-378">coincidencias de subcadenas</span><span class="sxs-lookup"><span data-stu-id="ec4d4-378">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="ec4d4-379">mz</span><span class="sxs-lookup"><span data-stu-id="ec4d4-379">mz</span></span> | <span data-ttu-id="ec4d4-380">sí</span><span class="sxs-lookup"><span data-stu-id="ec4d4-380">yes</span></span> | <span data-ttu-id="ec4d4-381">coincide con la expresión</span><span class="sxs-lookup"><span data-stu-id="ec4d4-381">matches expression</span></span> |
| `[a-z]{2}` | <span data-ttu-id="ec4d4-382">MZ</span><span class="sxs-lookup"><span data-stu-id="ec4d4-382">MZ</span></span> | <span data-ttu-id="ec4d4-383">sí</span><span class="sxs-lookup"><span data-stu-id="ec4d4-383">yes</span></span> | <span data-ttu-id="ec4d4-384">no distingue mayúsculas de minúsculas</span><span class="sxs-lookup"><span data-stu-id="ec4d4-384">not case sensitive</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="ec4d4-385">hello</span><span class="sxs-lookup"><span data-stu-id="ec4d4-385">hello</span></span> | <span data-ttu-id="ec4d4-386">No</span><span class="sxs-lookup"><span data-stu-id="ec4d4-386">no</span></span> | <span data-ttu-id="ec4d4-387">vea `^` y `$` más arriba</span><span class="sxs-lookup"><span data-stu-id="ec4d4-387">see `^` and `$` above</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="ec4d4-388">123abc456</span><span class="sxs-lookup"><span data-stu-id="ec4d4-388">123abc456</span></span> | <span data-ttu-id="ec4d4-389">No</span><span class="sxs-lookup"><span data-stu-id="ec4d4-389">no</span></span> | <span data-ttu-id="ec4d4-390">vea `^` y `$` más arriba</span><span class="sxs-lookup"><span data-stu-id="ec4d4-390">see `^` and `$` above</span></span> |

<span data-ttu-id="ec4d4-391">Consulte las [expresiones regulares de .NET Framework](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) para obtener más información sobre la sintaxis de expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-391">Refer to [.NET Framework Regular Expressions](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) for more information on regular expression syntax.</span></span>

<span data-ttu-id="ec4d4-392">Para restringir un parámetro a un conjunto conocido de valores posibles, use una expresión regular.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-392">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="ec4d4-393">Por ejemplo, `{action:regex(^(list|get|create)$)}` solo hace coincidir el valor de ruta `action` con `list`, `get` o `create`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-393">For example `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="ec4d4-394">Si se pasa al diccionario de restricciones, la cadena "^(list|get|create)$" sería equivalente.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-394">If passed into the constraints dictionary, the string "^(list|get|create)$" would be equivalent.</span></span> <span data-ttu-id="ec4d4-395">Las restricciones que se pasan al diccionario de restricciones (no insertado en una plantilla) que no coinciden con una de las restricciones conocidas también se tratan como expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-395">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="ec4d4-396">Referencia de generación de dirección URL</span><span class="sxs-lookup"><span data-stu-id="ec4d4-396">URL Generation Reference</span></span>

<span data-ttu-id="ec4d4-397">En el ejemplo siguiente se muestra cómo se genera un vínculo a una ruta, dado un diccionario de valores de ruta y un valor `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-397">The example below shows how to generate a link to a route given a dictionary of route values and a `RouteCollection`.</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?range=45-59)]

<span data-ttu-id="ec4d4-398">El valor `VirtualPath` generado al final del ejemplo anterior es `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-398">The `VirtualPath` generated at the end of the sample above is `/package/create/123`.</span></span>

<span data-ttu-id="ec4d4-399">El segundo parámetro del constructor `VirtualPathContext` es una colección de *valores de ambiente*.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-399">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="ec4d4-400">Los valores de ambiente aportan comodidad al limitar el número de valores que el desarrollador debe especificar dentro de un determinado contexto de solicitud.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-400">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="ec4d4-401">Los valores de ruta actuales de la solicitud actual se consideran valores de ambiente para la generación de vínculos.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-401">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="ec4d4-402">Por ejemplo, si en una aplicación ASP.NET MVC se encuentra en la acción `About` de `HomeController`, no es necesario especificar el valor de ruta de controlador para vincular a la acción `Index` (se usará el valor de ambiente `Home`).</span><span class="sxs-lookup"><span data-stu-id="ec4d4-402">For example, in an ASP.NET MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action (the ambient value of `Home` will be used).</span></span>

<span data-ttu-id="ec4d4-403">Los valores de ambiente se omiten cuando no coinciden con un parámetro y cuando un valor proporcionado explícitamente lo invalida al ir de izquierda a derecha en la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-403">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly-provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="ec4d4-404">Los valores que se proporcionan explícitamente pero que no coinciden con nada se agregan a la cadena de consulta.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-404">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="ec4d4-405">En la tabla siguiente se muestra el resultado cuando se usa la plantilla de ruta `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-405">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="ec4d4-406">Valores de ambiente</span><span class="sxs-lookup"><span data-stu-id="ec4d4-406">Ambient Values</span></span> | <span data-ttu-id="ec4d4-407">Valores explícitos</span><span class="sxs-lookup"><span data-stu-id="ec4d4-407">Explicit Values</span></span> | <span data-ttu-id="ec4d4-408">Resultado</span><span class="sxs-lookup"><span data-stu-id="ec4d4-408">Result</span></span> |
| -------------   | -------------- | ------ |
| <span data-ttu-id="ec4d4-409">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="ec4d4-409">controller="Home"</span></span> | <span data-ttu-id="ec4d4-410">action="About"</span><span class="sxs-lookup"><span data-stu-id="ec4d4-410">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="ec4d4-411">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="ec4d4-411">controller="Home"</span></span> | <span data-ttu-id="ec4d4-412">controller="Order",action="About"</span><span class="sxs-lookup"><span data-stu-id="ec4d4-412">controller="Order",action="About"</span></span> | `/Order/About` |
| <span data-ttu-id="ec4d4-413">controller="Home",color="Red"</span><span class="sxs-lookup"><span data-stu-id="ec4d4-413">controller="Home",color="Red"</span></span> | <span data-ttu-id="ec4d4-414">action="About"</span><span class="sxs-lookup"><span data-stu-id="ec4d4-414">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="ec4d4-415">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="ec4d4-415">controller="Home"</span></span> | <span data-ttu-id="ec4d4-416">action="About",color="Red"</span><span class="sxs-lookup"><span data-stu-id="ec4d4-416">action="About",color="Red"</span></span> | `/Home/About?color=Red`

<span data-ttu-id="ec4d4-417">Si una ruta tiene un valor predeterminado que no se corresponde con un parámetro y ese valor se proporciona explícitamente, debe coincidir con el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-417">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value.</span></span> <span data-ttu-id="ec4d4-418">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="ec4d4-418">For example:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
  defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="ec4d4-419">La generación de vínculos solo generará un vínculo para esta ruta si se proporcionan los valores coincidentes para el controlador y la acción.</span><span class="sxs-lookup"><span data-stu-id="ec4d4-419">Link generation would only generate a link for this route when the matching values for controller and action are provided.</span></span>
