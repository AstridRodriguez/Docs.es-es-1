---
title: Enrutamiento de ASP.NET Core
author: ardalis
description: "Descubra cómo la función de enrutamiento de ASP.NET Core es responsable de asignar una solicitud entrante a un controlador de ruta."
keywords: ASP.NET Core
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: bbbcf9e4-3c4c-4f50-b91e-175fe9cae4e2
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/routing
ms.openlocfilehash: 5dd8bee7228587d7e13f128bc8f16102fb70a412
ms.sourcegitcommit: 8f4d4fad1ca27adf9e396f5c205c9875a3963664
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/13/2017
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="993ce-104">Enrutamiento de ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="993ce-104">Routing in ASP.NET Core</span></span>

<span data-ttu-id="993ce-105">Por [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), y [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="993ce-105">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="993ce-106">Función de enrutamiento es responsable de asignar una solicitud entrante a un controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-106">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="993ce-107">Las rutas se definen en la aplicación ASP.NET y configuradas cuando se inicia la aplicación.</span><span class="sxs-lookup"><span data-stu-id="993ce-107">Routes are defined in the ASP.NET app and configured when the app starts up.</span></span> <span data-ttu-id="993ce-108">Una ruta, opcionalmente, puede extraer valores de la dirección URL contenida en la solicitud y, a continuación, se pueden utilizar estos valores para procesar las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="993ce-108">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="993ce-109">Con información de ruta de la aplicación ASP.NET, la funcionalidad de enrutamiento también es capaz de generar direcciones URL que se asignan a los controladores de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-109">Using route information from the ASP.NET app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="993ce-110">Por lo tanto, el enrutamiento puede encontrar un controlador de ruta basado en una dirección URL o la dirección URL correspondiente a un controlador de ruta determinado en función de la información de controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-110">Therefore, routing can find a route handler based on a URL, or the URL corresponding to a given route handler based on route handler information.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="993ce-111">Este documento cubre el núcleo de ASP.NET de nivel bajo enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="993ce-111">This document covers the low level ASP.NET Core routing.</span></span> <span data-ttu-id="993ce-112">Para el enrutamiento MVC de ASP.NET Core, vea [enrutamiento a las acciones del controlador](../mvc/controllers/routing.md)</span><span class="sxs-lookup"><span data-stu-id="993ce-112">For ASP.NET Core MVC routing, see [Routing to Controller Actions](../mvc/controllers/routing.md)</span></span>

<span data-ttu-id="993ce-113">[Vea o descargue el código de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([cómo descargarlo](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="993ce-113">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="993ce-114">Fundamentos del enrutamiento</span><span class="sxs-lookup"><span data-stu-id="993ce-114">Routing basics</span></span>

<span data-ttu-id="993ce-115">Usa enrutamiento *rutas* (implementaciones de [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) en:</span><span class="sxs-lookup"><span data-stu-id="993ce-115">Routing uses *routes* (implementations of [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) to:</span></span>

* <span data-ttu-id="993ce-116">asignar las solicitudes entrantes a *enrutar controladores*</span><span class="sxs-lookup"><span data-stu-id="993ce-116">map incoming requests to *route handlers*</span></span>

* <span data-ttu-id="993ce-117">generar direcciones URL que se utilizan en las respuestas</span><span class="sxs-lookup"><span data-stu-id="993ce-117">generate URLs used in responses</span></span>

<span data-ttu-id="993ce-118">Por lo general, una aplicación tiene una sola colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="993ce-118">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="993ce-119">Cuando llega una solicitud, la colección de rutas se procesa en orden.</span><span class="sxs-lookup"><span data-stu-id="993ce-119">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="993ce-120">La solicitud entrante busca una ruta que coincida con la dirección URL de la solicitud mediante una llamada a la `RouteAsync` método en cada ruta disponible en la colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="993ce-120">The incoming request looks for a route that matches the request URL by calling the `RouteAsync` method on each available route in the route collection.</span></span> <span data-ttu-id="993ce-121">Por el contrario, una respuesta puede utilizar el enrutamiento para generar direcciones URL (por ejemplo, para la redirección o vínculos) basándose en la información de ruta y, por tanto, evitar tener que codificar de forma rígida direcciones URL, lo que facilita el mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="993ce-121">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information, and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="993ce-122">Enrutamiento está conectado a la [middleware](middleware.md) de canalización por la `RouterMiddleware` clase.</span><span class="sxs-lookup"><span data-stu-id="993ce-122">Routing is connected to the [middleware](middleware.md) pipeline by the `RouterMiddleware` class.</span></span> <span data-ttu-id="993ce-123">[ASP.NET MVC](../mvc/overview.md) agrega enrutamiento a la canalización de middleware como parte de su configuración.</span><span class="sxs-lookup"><span data-stu-id="993ce-123">[ASP.NET MVC](../mvc/overview.md) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="993ce-124">Para obtener información sobre el uso de enrutamiento como un componente independiente, consulte [utilizando enrutamiento-software intermedio](#using-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="993ce-124">To learn about using routing as a standalone component, see [using-routing-middleware](#using-routing-middleware).</span></span>

<a name="url-matching-ref"></a>

### <a name="url-matching"></a><span data-ttu-id="993ce-125">Coincidencia de dirección URL</span><span class="sxs-lookup"><span data-stu-id="993ce-125">URL matching</span></span>

<span data-ttu-id="993ce-126">Coincidencia de dirección URL es el proceso por qué enrutamiento envía una solicitud entrante a un *controlador*.</span><span class="sxs-lookup"><span data-stu-id="993ce-126">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="993ce-127">Este proceso se suele basar en datos en la ruta de acceso de dirección URL, pero se puede extender para tener en cuenta los datos de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="993ce-127">This process is generally based on data in the URL path, but can be extended to consider any data in the request.</span></span> <span data-ttu-id="993ce-128">La capacidad de distribuir las solicitudes para separar los controladores es clave para escalar el tamaño y la complejidad de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="993ce-128">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an application.</span></span>

<span data-ttu-id="993ce-129">Escriba las solicitudes entrantes el `RouterMiddleware`, que llama el `RouteAsync` método en cada ruta en secuencia.</span><span class="sxs-lookup"><span data-stu-id="993ce-129">Incoming requests enter the `RouterMiddleware`, which calls the `RouteAsync` method on each route in sequence.</span></span> <span data-ttu-id="993ce-130">El `IRouter` instancia elige si *controlar* la solicitud estableciendo la `RouteContext.Handler` a un valor no nulo `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="993ce-130">The `IRouter` instance chooses whether to *handle* the request by setting the `RouteContext.Handler` to a non-null `RequestDelegate`.</span></span> <span data-ttu-id="993ce-131">Si una ruta establece un controlador para la solicitud, se invocará el procesamiento se detiene y el controlador de ruta para procesar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="993ce-131">If a route sets a handler for the request, route processing stops and the handler will be invoked to process the request.</span></span> <span data-ttu-id="993ce-132">Si todas las rutas se prueban y se encuentra ningún controlador para la solicitud, el middleware invoca *siguiente* y se invoca al siguiente middleware en la canalización de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="993ce-132">If all routes are tried and no handler is found for the request, the middleware calls *next* and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="993ce-133">La entrada principal a `RouteAsync` es el `RouteContext.HttpContext` asociado a la solicitud actual.</span><span class="sxs-lookup"><span data-stu-id="993ce-133">The primary input to `RouteAsync` is the `RouteContext.HttpContext` associated with the current request.</span></span> <span data-ttu-id="993ce-134">El `RouteContext.Handler` y `RouteContext.RouteData` son salidas que se establecerán después de que coincide con una ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-134">The `RouteContext.Handler` and `RouteContext.RouteData` are outputs that will be set after a route matches.</span></span>

<span data-ttu-id="993ce-135">Una coincidencia durante la `RouteAsync` también establecerá las propiedades de la `RouteContext.RouteData` en los valores adecuados según el procesamiento de la solicitud hecho hasta ahora.</span><span class="sxs-lookup"><span data-stu-id="993ce-135">A match during `RouteAsync` will also set the properties of the `RouteContext.RouteData` to appropriate values based on the request processing done so far.</span></span> <span data-ttu-id="993ce-136">Si una ruta coincide con una solicitud, el `RouteContext.RouteData` contendrá información de estado importante sobre la *resultado*.</span><span class="sxs-lookup"><span data-stu-id="993ce-136">If a route matches a request, the `RouteContext.RouteData` will contain important state information about the *result*.</span></span>

<span data-ttu-id="993ce-137">`RouteData.Values`es un diccionario de *valores de ruta* producidos a partir de la ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-137">`RouteData.Values` is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="993ce-138">Estos valores se determinan normalmente por la dirección URL de la división de tokens y pueden utilizarse para aceptar proporcionados por el usuario, o para tomar decisiones más distribución dentro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="993ce-138">These values are usually determined by tokenizing the URL, and can be used to accept user input, or to make further dispatching decisions inside the application.</span></span>

<span data-ttu-id="993ce-139">`RouteData.DataTokens`es un contenedor de propiedades de datos adicionales relacionados con la ruta coincidente.</span><span class="sxs-lookup"><span data-stu-id="993ce-139">`RouteData.DataTokens`  is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="993ce-140">`DataTokens`se proporcionan para admitir el estado de asociar datos con las rutas para que la aplicación pueda tomar decisiones más adelante en función de qué ruta coinciden.</span><span class="sxs-lookup"><span data-stu-id="993ce-140">`DataTokens` are provided to support associating state data with each route so the application can make decisions later based on which route matched.</span></span> <span data-ttu-id="993ce-141">Estos valores son definidos por el desarrollador y **no** afectan al comportamiento del enrutamiento de ninguna manera.</span><span class="sxs-lookup"><span data-stu-id="993ce-141">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="993ce-142">Además, los valores que se esconde en tokens de datos pueden ser de cualquier tipo, a diferencia de los valores de ruta, que debe ser fácilmente convertible a y desde cadenas.</span><span class="sxs-lookup"><span data-stu-id="993ce-142">Additionally, values stashed in data tokens can be of any type, in contrast to route values, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="993ce-143">`RouteData.Routers`es una lista de las rutas que participaron en una coincidencia correcta con la solicitud.</span><span class="sxs-lookup"><span data-stu-id="993ce-143">`RouteData.Routers` is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="993ce-144">Las rutas se pueden anidar dentro de otra y el `Routers` propiedad refleja la ruta de acceso a través del árbol lógico de rutas que dan como resultado una coincidencia.</span><span class="sxs-lookup"><span data-stu-id="993ce-144">Routes can be nested inside one another, and the `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="993ce-145">Por lo general, el primer elemento de `Routers` es la colección de rutas y se debe usar para la generación de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-145">Generally the first item in `Routers` is the route collection, and should be used for URL generation.</span></span> <span data-ttu-id="993ce-146">El último elemento de `Routers` es el controlador de ruta que coincide.</span><span class="sxs-lookup"><span data-stu-id="993ce-146">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="993ce-147">Generación de direcciones URL</span><span class="sxs-lookup"><span data-stu-id="993ce-147">URL generation</span></span>

<span data-ttu-id="993ce-148">Generación de direcciones URL es el proceso por el que el enrutamiento, puede crear una ruta de acceso de dirección URL basada en un conjunto de valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-148">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="993ce-149">Esto permite una separación lógica entre los controladores y las direcciones URL que tienen acceso a ellos.</span><span class="sxs-lookup"><span data-stu-id="993ce-149">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="993ce-150">Generación de direcciones URL sigue un proceso iterativo similar, pero se inicia con el código de usuario o el marco de trabajo llamar a la `GetVirtualPath` método de la colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="993ce-150">URL generation follows a similar iterative process, but starts with user or framework code calling into the `GetVirtualPath` method of the route collection.</span></span> <span data-ttu-id="993ce-151">Cada *ruta* , tendrá su `GetVirtualPath` llama al método en secuencia hasta que un valor no nulo `VirtualPathData` se devuelve.</span><span class="sxs-lookup"><span data-stu-id="993ce-151">Each *route* will then have its `GetVirtualPath` method called in sequence until a non-null `VirtualPathData` is returned.</span></span>

<span data-ttu-id="993ce-152">La principal entradas al `GetVirtualPath` son:</span><span class="sxs-lookup"><span data-stu-id="993ce-152">The primary inputs to `GetVirtualPath` are:</span></span>

* `VirtualPathContext.HttpContext`

* `VirtualPathContext.Values`

* `VirtualPathContext.AmbientValues`

<span data-ttu-id="993ce-153">Las rutas usan principalmente los valores de ruta proporcionados por el `Values` y `AmbientValues` para decidir donde es posible generar una dirección URL y qué valores se deben para incluir.</span><span class="sxs-lookup"><span data-stu-id="993ce-153">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide where it is possible to generate a URL and what values to include.</span></span> <span data-ttu-id="993ce-154">El `AmbientValues` son el conjunto de valores de ruta que se han producido en la coincidencia de la solicitud actual con el sistema de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="993ce-154">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="993ce-155">En cambio, `Values` son los valores de ruta que especifica cómo generar la dirección URL deseada para la operación actual.</span><span class="sxs-lookup"><span data-stu-id="993ce-155">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="993ce-156">El `HttpContext` se proporciona en caso de una ruta necesita obtener servicios o datos adicionales asociados con el contexto actual.</span><span class="sxs-lookup"><span data-stu-id="993ce-156">The `HttpContext` is provided in case a route needs to get services or additional data associated with the current context.</span></span>

<span data-ttu-id="993ce-157">Sugerencia: Reflexión de `Values` como un conjunto de valores de reemplazo de la `AmbientValues`.</span><span class="sxs-lookup"><span data-stu-id="993ce-157">Tip: Think of `Values` as being a set of overrides for the `AmbientValues`.</span></span> <span data-ttu-id="993ce-158">Generación de direcciones URL intenta volver a usar valores de ruta de la solicitud actual para que sea fácil generar direcciones URL para los vínculos con la misma ruta o los valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-158">URL generation tries to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="993ce-159">La salida de `GetVirtualPath` es una `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="993ce-159">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="993ce-160">`VirtualPathData`es un paralelo de `RouteData`; contiene el `VirtualPath` para la dirección URL de salida, así como las algunas propiedades adicionales que se deben establecer la ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-160">`VirtualPathData` is a parallel of `RouteData`; it contains the `VirtualPath` for the output URL as well as the some additional properties that should be set by the route.</span></span>

<span data-ttu-id="993ce-161">El `VirtualPathData.VirtualPath` propiedad contiene el *ruta de acceso virtual* generados por la ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-161">The `VirtualPathData.VirtualPath` property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="993ce-162">Dependiendo de sus necesidades debe procesar aún más la ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="993ce-162">Depending on your needs you may need to process the path further.</span></span> <span data-ttu-id="993ce-163">Por ejemplo, si desea representar la dirección URL generada en HTML debe anteponer la ruta de acceso base de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="993ce-163">For instance, if you want to render the generated URL in HTML you need to prepend the base path of the application.</span></span>

<span data-ttu-id="993ce-164">El `VirtualPathData.Router` es una referencia a la ruta que se generó correctamente la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-164">The `VirtualPathData.Router` is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="993ce-165">El `VirtualPathData.DataTokens` propiedades es un diccionario de datos adicionales relacionados con la ruta que genera la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-165">The `VirtualPathData.DataTokens` properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="993ce-166">Se trata el paralelo de `RouteData.DataTokens`.</span><span class="sxs-lookup"><span data-stu-id="993ce-166">This is the parallel of `RouteData.DataTokens`.</span></span>

### <a name="creating-routes"></a><span data-ttu-id="993ce-167">Crear rutas</span><span class="sxs-lookup"><span data-stu-id="993ce-167">Creating routes</span></span>

<span data-ttu-id="993ce-168">El enrutamiento proporciona la `Route` clase como la implementación estándar de `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="993ce-168">Routing provides the `Route` class as the standard implementation of `IRouter`.</span></span> <span data-ttu-id="993ce-169">`Route`usa el *plantilla de ruta* sintaxis para definir patrones que se hará coincidir con la ruta de acceso de dirección URL cuando `RouteAsync` se llama.</span><span class="sxs-lookup"><span data-stu-id="993ce-169">`Route` uses the *route template* syntax to define patterns that will match against the URL path when `RouteAsync` is called.</span></span> <span data-ttu-id="993ce-170">`Route`usará la misma plantilla de ruta para generar una dirección URL cuando `GetVirtualPath` se llama.</span><span class="sxs-lookup"><span data-stu-id="993ce-170">`Route` will use the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="993ce-171">Mayoría de las aplicaciones creará rutas mediante una llamada a `MapRoute` o uno de los métodos de extensión similares definidos en `IRouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="993ce-171">Most applications will create routes by calling `MapRoute` or one of the similar extension methods defined on `IRouteBuilder`.</span></span> <span data-ttu-id="993ce-172">Todos estos métodos creará una instancia de `Route` y lo agrega a la colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="993ce-172">All of these methods will create an instance of `Route` and add it to the route collection.</span></span>

<span data-ttu-id="993ce-173">Nota: `MapRoute` no toma un parámetro del controlador de ruta - solo agrega las rutas que será procesadas por el `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="993ce-173">Note: `MapRoute` doesn't take a route handler parameter - it only adds routes that will be handled by the `DefaultHandler`.</span></span> <span data-ttu-id="993ce-174">Puesto que el controlador predeterminado es una `IRouter`, es posible que decida no atender la solicitud.</span><span class="sxs-lookup"><span data-stu-id="993ce-174">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="993ce-175">Por ejemplo, ASP.NET MVC normalmente se configura como un controlador predeterminado que solo administra las solicitudes que coinciden con una acción y controlador disponible.</span><span class="sxs-lookup"><span data-stu-id="993ce-175">For example, ASP.NET MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="993ce-176">Para más información sobre el enrutamiento de MVC, consulte [enrutamiento a las acciones del controlador](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="993ce-176">To learn more about routing to MVC, see [Routing to Controller Actions](../mvc/controllers/routing.md).</span></span>

<span data-ttu-id="993ce-177">Este es un ejemplo de un `MapRoute` llamada que se usa una definición de ruta de ASP.NET MVC típica:</span><span class="sxs-lookup"><span data-stu-id="993ce-177">This is an example of a `MapRoute` call used by a typical ASP.NET MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="993ce-178">Esta plantilla coincidirá con una ruta de acceso de dirección URL como `/Products/Details/17` y extraer los valores de ruta `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="993ce-178">This template will match a URL path like `/Products/Details/17` and extract the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="993ce-179">Los valores de ruta se determinan por dividir la ruta de acceso de dirección URL en segmentos y coincidencia de cada segmento de la *enrutar parámetro* nombre en la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-179">The route values are determined by splitting the URL path into segments, and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="993ce-180">Se denominan parámetros de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-180">Route parameters are named.</span></span> <span data-ttu-id="993ce-181">Se definen por escriba el nombre del parámetro entre llaves `{ }`.</span><span class="sxs-lookup"><span data-stu-id="993ce-181">They are defined by enclosing the parameter name in braces `{ }`.</span></span>

<span data-ttu-id="993ce-182">La plantilla anterior también podría coincidir con la ruta de acceso de dirección URL `/` y generaría los valores `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="993ce-182">The template above could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="993ce-183">Esto sucede porque el `{controller}` y `{action}` ruta parámetros tienen valores predeterminados y el `id` parámetro de ruta es opcional.</span><span class="sxs-lookup"><span data-stu-id="993ce-183">This happens because the `{controller}` and `{action}` route parameters have default values, and the `id` route parameter is optional.</span></span> <span data-ttu-id="993ce-184">Es igual a `=` inicio de sesión seguido por un valor después de que el nombre de parámetro de ruta define un valor predeterminado para el parámetro.</span><span class="sxs-lookup"><span data-stu-id="993ce-184">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="993ce-185">Un signo de interrogación `?` después de que el nombre de parámetro de ruta define el parámetro como opcional.</span><span class="sxs-lookup"><span data-stu-id="993ce-185">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="993ce-186">Parámetros con un valor predeterminado de ruta *siempre* producen un valor de ruta cuando coincide con la ruta: parámetros opcionales no producirá un valor de ruta si no hay ningún segmento de ruta de acceso de dirección URL correspondiente.</span><span class="sxs-lookup"><span data-stu-id="993ce-186">Route parameters with a default value *always* produce a route value when the route matches - optional parameters will not produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="993ce-187">Vea [referencia de plantillas de ruta](#route-template-reference) para obtener una descripción detallada de la sintaxis y características de la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-187">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="993ce-188">Este ejemplo incluye una *enrutar restricción*:</span><span class="sxs-lookup"><span data-stu-id="993ce-188">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="993ce-189">Esta plantilla coincidirá con una ruta de acceso de dirección URL como `/Products/Details/17`, pero no `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="993ce-189">This template will match a URL path like `/Products/Details/17`, but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="993ce-190">La definición de parámetro de ruta `{id:int}` define un *enrutar restricción* para el `id` parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-190">The route parameter definition `{id:int}` defines a *route constraint* for the `id` route parameter.</span></span> <span data-ttu-id="993ce-191">Implementan restricciones de la ruta `IRouteConstraint` e inspeccionar los valores de ruta para comprobarlos.</span><span class="sxs-lookup"><span data-stu-id="993ce-191">Route constraints implement `IRouteConstraint` and inspect route values to verify them.</span></span> <span data-ttu-id="993ce-192">En este ejemplo, el valor de ruta `id` debe poder convertirse en un entero.</span><span class="sxs-lookup"><span data-stu-id="993ce-192">In this example the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="993ce-193">Vea [referencia de restricción de ruta](#route-constraint-reference) para obtener una explicación más detallada de las restricciones de ruta que se proporcionan con el marco de trabajo.</span><span class="sxs-lookup"><span data-stu-id="993ce-193">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="993ce-194">Las sobrecargas adicionales de `MapRoute` acepte valores para `constraints`, `dataTokens`, y `defaults`.</span><span class="sxs-lookup"><span data-stu-id="993ce-194">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="993ce-195">Estos parámetros adicionales de `MapRoute` se define como tipo `object`.</span><span class="sxs-lookup"><span data-stu-id="993ce-195">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="993ce-196">El uso habitual de estos parámetros consiste en pasar un objeto con tipo anónimo, donde los nombres de propiedad de la coincidencia de tipo anónimo enrutan nombres de parámetro.</span><span class="sxs-lookup"><span data-stu-id="993ce-196">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="993ce-197">Los dos ejemplos siguientes crean rutas equivalente:</span><span class="sxs-lookup"><span data-stu-id="993ce-197">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="993ce-198">Sugerencia: La sintaxis en línea para definir las restricciones y los valores predeterminados puede ser más conveniente para rutas simples.</span><span class="sxs-lookup"><span data-stu-id="993ce-198">Tip: The inline syntax for defining constraints and defaults can be more convenient for simple routes.</span></span> <span data-ttu-id="993ce-199">Sin embargo, existen características como tokens de datos que no son compatibles con la sintaxis en línea.</span><span class="sxs-lookup"><span data-stu-id="993ce-199">However, there are features such as data tokens which are not supported by inline syntax.</span></span>

<span data-ttu-id="993ce-200">Este ejemplo muestra algunas de las características más:</span><span class="sxs-lookup"><span data-stu-id="993ce-200">This example demonstrates a few more features:</span></span>

```csharp
routes.MapRoute(
  name: "blog",
  template: "Blog/{*article}",
  defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="993ce-201">Esta plantilla coincidirá con una ruta de acceso de dirección URL como `/Blog/All-About-Routing/Introduction` y va a extraer los valores `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="993ce-201">This template will match a URL path like `/Blog/All-About-Routing/Introduction` and will extract the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="993ce-202">Los valores de la ruta predeterminada para `controller` y `action` son generadas por la ruta, incluso si no hay ningún parámetro de ruta correspondiente en la plantilla.</span><span class="sxs-lookup"><span data-stu-id="993ce-202">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="993ce-203">Pueden especificar valores predeterminados en la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-203">Default values can be specified in the route template.</span></span> <span data-ttu-id="993ce-204">El `article` parámetro de ruta se define como un *general* por la apariencia de un asterisco `*` antes del nombre de parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-204">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="993ce-205">Parámetros de ruta comodín capturar el resto de la ruta de acceso de dirección URL y también pueden coincidir con la cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="993ce-205">Catch-all route parameters capture the remainder of the URL path, and can also match the empty string.</span></span>

<span data-ttu-id="993ce-206">Este ejemplo agrega los tokens de datos y las restricciones de ruta:</span><span class="sxs-lookup"><span data-stu-id="993ce-206">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="993ce-207">Esta plantilla coincidirá con una ruta de acceso de dirección URL como `/Products/5` y va a extraer los valores `{ controller = Products, action = Details, id = 5 }` y los tokens de datos `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="993ce-207">This template will match a URL path like `/Products/5` and will extract the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokens de Windows de variables locales](routing/_static/tokens.png)

<a name="id1"></a>

### <a name="url-generation"></a><span data-ttu-id="993ce-209">Generación de direcciones URL</span><span class="sxs-lookup"><span data-stu-id="993ce-209">URL generation</span></span>

<span data-ttu-id="993ce-210">La `Route` clase también puede realizar la generación de direcciones URL mediante la combinación de un conjunto de valores de ruta con su plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-210">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="993ce-211">Esto es, lógicamente, el proceso inverso de la ruta de acceso de dirección URL de búsqueda de coincidencias.</span><span class="sxs-lookup"><span data-stu-id="993ce-211">This is logically the reverse process of matching the URL path.</span></span>

<span data-ttu-id="993ce-212">Sugerencia: Para entender mejor generación de direcciones URL, imagine qué dirección URL que desea generar y, a continuación, piense en cómo una plantilla de ruta coincidiría con esa dirección URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-212">Tip: To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="993ce-213">¿Qué valores se generaría?</span><span class="sxs-lookup"><span data-stu-id="993ce-213">What values would be produced?</span></span> <span data-ttu-id="993ce-214">Éste es el equivalente aproximado de cómo funciona la generación de direcciones URL en la `Route` clase.</span><span class="sxs-lookup"><span data-stu-id="993ce-214">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="993ce-215">Este ejemplo utiliza una ruta de estilo de ASP.NET MVC básica:</span><span class="sxs-lookup"><span data-stu-id="993ce-215">This example uses a basic ASP.NET MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="993ce-216">Con los valores de ruta `{ controller = Products, action = List }`, esta ruta generará la dirección URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="993ce-216">With the route values `{ controller = Products, action = List }`, this route will generate the URL `/Products/List`.</span></span> <span data-ttu-id="993ce-217">Los valores de ruta se sustituyen por los parámetros de ruta correspondiente formar la ruta de acceso de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-217">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="993ce-218">Puesto que `id` es una función opcional parámetro de ruta, no se trata de ningún problema que no tiene un valor.</span><span class="sxs-lookup"><span data-stu-id="993ce-218">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="993ce-219">Con los valores de ruta `{ controller = Home, action = Index }`, esta ruta generará la dirección URL `/`.</span><span class="sxs-lookup"><span data-stu-id="993ce-219">With the route values `{ controller = Home, action = Index }`, this route will generate the URL `/`.</span></span> <span data-ttu-id="993ce-220">Los valores de ruta que se proporcionaron coincide con los valores predeterminados para que los segmentos correspondientes a esos valores se pueden omitir sin ningún riesgo.</span><span class="sxs-lookup"><span data-stu-id="993ce-220">The route values that were provided match the default values so the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="993ce-221">Tenga en cuenta que ambas direcciones URL generado podría ida y vuelta con esta definición de ruta y generar los mismos valores de ruta que se usaron para generar la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-221">Note that both URLs generated would round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

<span data-ttu-id="993ce-222">Sugerencia: Debe usar una aplicación con ASP.NET MVC `UrlHelper` para generar direcciones URL en lugar de llamar a enrutamiento directamente.</span><span class="sxs-lookup"><span data-stu-id="993ce-222">Tip: An app using ASP.NET MVC should use `UrlHelper` to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="993ce-223">Para obtener más detalles sobre el proceso de generación de dirección URL, vea [referencia de generación de url](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="993ce-223">For more details about the URL generation process, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="using-routing-middleware"></a><span data-ttu-id="993ce-224">Uso de Middleware de enrutamiento</span><span class="sxs-lookup"><span data-stu-id="993ce-224">Using Routing Middleware</span></span>

<span data-ttu-id="993ce-225">Agregue el paquete NuGet "Microsoft.AspNetCore.Routing".</span><span class="sxs-lookup"><span data-stu-id="993ce-225">Add the NuGet package "Microsoft.AspNetCore.Routing".</span></span>

<span data-ttu-id="993ce-226">Agregar al contenedor de servicios en el enrutamiento *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="993ce-226">Add routing to the service container in *Startup.cs*:</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?highlight=3&start=11&end=14)]

<span data-ttu-id="993ce-227">Las rutas deben configurarse en el `Configure` método en la `Startup` clase.</span><span class="sxs-lookup"><span data-stu-id="993ce-227">Routes must be configured in the `Configure` method in the `Startup` class.</span></span> <span data-ttu-id="993ce-228">El ejemplo siguiente utiliza estas API:</span><span class="sxs-lookup"><span data-stu-id="993ce-228">The sample below uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="993ce-229">`MapGet`Coincide con solamente las solicitudes HTTP GET</span><span class="sxs-lookup"><span data-stu-id="993ce-229">`MapGet`  Matches only HTTP GET requests</span></span>
* `UseRouter`

```csharp
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
    var trackPackageRouteHandler = new RouteHandler(context =>
    {
        var routeValues = context.GetRouteData().Values;
        return context.Response.WriteAsync(
            $"Hello! Route values: {string.Join(", ", routeValues)}");
    });

    var routeBuilder = new RouteBuilder(app, trackPackageRouteHandler);

    routeBuilder.MapRoute(
        "Track Package Route",
        "package/{operation:regex(^(track|create|detonate)$)}/{id:int}");

    routeBuilder.MapGet("hello/{name}", context =>
    {
        var name = context.GetRouteValue("name");
        // This is the route handler when HTTP GET "hello/<anything>"  matches
        // To match HTTP GET "hello/<anything>/<anything>,
        // use routeBuilder.MapGet("hello/{*name}"
        return context.Response.WriteAsync($"Hi, {name}!");
    });

    var routes = routeBuilder.Build();
    app.UseRouter(routes);
}
```

<span data-ttu-id="993ce-230">La siguiente tabla muestra las respuestas con el URI especificado.</span><span class="sxs-lookup"><span data-stu-id="993ce-230">The table below shows the responses with the given URIs.</span></span>

| <span data-ttu-id="993ce-231">Identificador URI</span><span class="sxs-lookup"><span data-stu-id="993ce-231">URI</span></span> | <span data-ttu-id="993ce-232">Respuesta</span><span class="sxs-lookup"><span data-stu-id="993ce-232">Response</span></span>  |
| ------- | -------- |
| <span data-ttu-id="993ce-233">/Package/Create/3</span><span class="sxs-lookup"><span data-stu-id="993ce-233">/package/create/3</span></span>  | <span data-ttu-id="993ce-234">Hello!</span><span class="sxs-lookup"><span data-stu-id="993ce-234">Hello!</span></span> <span data-ttu-id="993ce-235">Valores de ruta: [operación, crear], [Id. de 3]</span><span class="sxs-lookup"><span data-stu-id="993ce-235">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="993ce-236">/ paquetes/seguimiento /-3</span><span class="sxs-lookup"><span data-stu-id="993ce-236">/package/track/-3</span></span>  | <span data-ttu-id="993ce-237">Hello!</span><span class="sxs-lookup"><span data-stu-id="993ce-237">Hello!</span></span> <span data-ttu-id="993ce-238">Valores de ruta: [operación, pista], [Id. de -3]</span><span class="sxs-lookup"><span data-stu-id="993ce-238">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="993ce-239">/ paquetes/seguimiento/3 /</span><span class="sxs-lookup"><span data-stu-id="993ce-239">/package/track/-3/</span></span> | <span data-ttu-id="993ce-240">Hello!</span><span class="sxs-lookup"><span data-stu-id="993ce-240">Hello!</span></span> <span data-ttu-id="993ce-241">Valores de ruta: [operación, pista], [Id. de -3]</span><span class="sxs-lookup"><span data-stu-id="993ce-241">Route values: [operation, track], [id, -3]</span></span>  |
| <span data-ttu-id="993ce-242">/Package/seguimiento /</span><span class="sxs-lookup"><span data-stu-id="993ce-242">/package/track/</span></span> | <span data-ttu-id="993ce-243">\<Pasar ninguna coincidencia explícitamente ></span><span class="sxs-lookup"><span data-stu-id="993ce-243">\<Fall through, no match></span></span> |
| <span data-ttu-id="993ce-244">OBTENER /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="993ce-244">GET /hello/Joe</span></span> | <span data-ttu-id="993ce-245">Hola, Juan.</span><span class="sxs-lookup"><span data-stu-id="993ce-245">Hi, Joe!</span></span> |
| <span data-ttu-id="993ce-246">REGISTRAR /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="993ce-246">POST /hello/Joe</span></span> | <span data-ttu-id="993ce-247">\<Pasar explícitamente, solo las coincidencias HTTP GET ></span><span class="sxs-lookup"><span data-stu-id="993ce-247">\<Fall through, matches HTTP GET only></span></span> |
| <span data-ttu-id="993ce-248">OBTENER /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="993ce-248">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="993ce-249">\<Pasar ninguna coincidencia explícitamente ></span><span class="sxs-lookup"><span data-stu-id="993ce-249">\<Fall through, no match></span></span> |

<span data-ttu-id="993ce-250">Si va a configurar una única ruta, llame a `app.UseRouter` pasando un `IRouter` instancia.</span><span class="sxs-lookup"><span data-stu-id="993ce-250">If you are configuring a single route, call `app.UseRouter` passing in an `IRouter` instance.</span></span> <span data-ttu-id="993ce-251">No tendrá que llamar a `RouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="993ce-251">You won't need to call `RouteBuilder`.</span></span>

<span data-ttu-id="993ce-252">El marco de trabajo proporciona un conjunto de métodos de extensión para crear rutas, como:</span><span class="sxs-lookup"><span data-stu-id="993ce-252">The framework provides a set of extension methods for creating routes such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="993ce-253">Algunos de estos métodos como `MapGet` requieren un `RequestDelegate` proporcionarse.</span><span class="sxs-lookup"><span data-stu-id="993ce-253">Some of these methods such as `MapGet` require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="993ce-254">El `RequestDelegate` se usará como el *controlador de ruta* cuando coincide con la ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-254">The `RequestDelegate` will be used as the *route handler* when the route matches.</span></span> <span data-ttu-id="993ce-255">Otros métodos de esta familia permiten configurar una canalización de middleware que se usará como controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-255">Other methods in this family allow configuring a middleware pipeline which will be used as the route handler.</span></span> <span data-ttu-id="993ce-256">Si el *mapa* método no acepta un controlador, como `MapRoute`, entonces va a usar el `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="993ce-256">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it will use the `DefaultHandler`.</span></span>

<span data-ttu-id="993ce-257">El `Map[Verb]` métodos usan restricciones para limitar la ruta para el verbo HTTP en el nombre del método.</span><span class="sxs-lookup"><span data-stu-id="993ce-257">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="993ce-258">Por ejemplo, vea [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) y [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span><span class="sxs-lookup"><span data-stu-id="993ce-258">For example, see [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) and [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="993ce-259">Referencia de plantilla de ruta</span><span class="sxs-lookup"><span data-stu-id="993ce-259">Route Template Reference</span></span>

<span data-ttu-id="993ce-260">Tokens entre llaves (`{ }`) definir *enrutar parámetros* que se enlazará si la ruta se encuentran coincidencias.</span><span class="sxs-lookup"><span data-stu-id="993ce-260">Tokens within curly braces (`{ }`) define *route parameters* which will be bound if the route is matched.</span></span> <span data-ttu-id="993ce-261">Puede definir más de un parámetro de ruta en un segmento de ruta, pero deben estar separados por un valor literal.</span><span class="sxs-lookup"><span data-stu-id="993ce-261">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="993ce-262">Por ejemplo `{controller=Home}{action=Index}` no sería una ruta válida, porque no hay ningún valor literal entre `{controller}` y `{action}`.</span><span class="sxs-lookup"><span data-stu-id="993ce-262">For example `{controller=Home}{action=Index}` would not be a valid route, since there is no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="993ce-263">Estos parámetros de ruta deben tener un nombre y atributos adicionales pueden especificar.</span><span class="sxs-lookup"><span data-stu-id="993ce-263">These route parameters must have a name, and may have additional attributes specified.</span></span>

<span data-ttu-id="993ce-264">Texto literal distintos de los parámetros de ruta (por ejemplo, `{id}`) y el separador de ruta de acceso `/` debe coincidir con el texto en la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-264">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="993ce-265">La coincidencia de texto distingue entre mayúsculas y minúsculas y se basa en la representación de la ruta de acceso de direcciones URL descodificada.</span><span class="sxs-lookup"><span data-stu-id="993ce-265">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="993ce-266">Para que coincida con el delimitador de parámetro de ruta literal `{` o `}`, escape repitiendo el carácter (`{{` o `}}`).</span><span class="sxs-lookup"><span data-stu-id="993ce-266">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="993ce-267">Patrones de dirección URL que intentan capturar un nombre de archivo con una extensión de archivo opcional tienen consideraciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="993ce-267">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="993ce-268">Por ejemplo, mediante la plantilla `files/{filename}.{ext?}` : si ambos `filename` y `ext` existe, ambos valores se rellenará.</span><span class="sxs-lookup"><span data-stu-id="993ce-268">For example, using the template `files/{filename}.{ext?}` - When both `filename` and `ext` exist, both values will be populated.</span></span> <span data-ttu-id="993ce-269">Si solo `filename` existe en la dirección URL, las coincidencias de la ruta porque el punto final `.` es opcional.</span><span class="sxs-lookup"><span data-stu-id="993ce-269">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="993ce-270">Las direcciones URL siguientes coincidiría con esta ruta:</span><span class="sxs-lookup"><span data-stu-id="993ce-270">The following URLs would match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile.`
* `/files/myFile`

<span data-ttu-id="993ce-271">Puede usar el `*` caracteres como prefijo para un parámetro de ruta para enlazar con el resto del URI: Esto se denomina una *general* parámetro.</span><span class="sxs-lookup"><span data-stu-id="993ce-271">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI - this is called a *catch-all* parameter.</span></span> <span data-ttu-id="993ce-272">Por ejemplo, `blog/{*slug}` coincidiría con cualquier URI que se inició con `/blog` y tenía ningún valor siguiente (que se asignarían a la `slug` enrutar valor).</span><span class="sxs-lookup"><span data-stu-id="993ce-272">For example, `blog/{*slug}` would match any URI that started with `/blog` and had any value following it (which would be assigned to the `slug` route value).</span></span> <span data-ttu-id="993ce-273">Detección de todos los parámetros también pueden coincidir con la cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="993ce-273">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="993ce-274">Pueden tener parámetros de ruta *valores predeterminados*, designada especificando el valor predeterminado después del nombre de parámetro, separado por un `=`.</span><span class="sxs-lookup"><span data-stu-id="993ce-274">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an `=`.</span></span> <span data-ttu-id="993ce-275">Por ejemplo, `{controller=Home}` tendría que definir `Home` como el valor predeterminado de `controller`.</span><span class="sxs-lookup"><span data-stu-id="993ce-275">For example, `{controller=Home}` would define `Home` as the default value for `controller`.</span></span> <span data-ttu-id="993ce-276">Si ningún valor se encuentra en la dirección URL para el parámetro, se utiliza el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="993ce-276">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="993ce-277">Además de los valores predeterminados, pueden ser opcionales de parámetros de ruta (especificado mediante la anexión de un `?` hasta el final del nombre del parámetro, como en `id?`).</span><span class="sxs-lookup"><span data-stu-id="993ce-277">In addition to default values, route parameters may be optional (specified by appending a `?` to the end of the parameter name, as in `id?`).</span></span> <span data-ttu-id="993ce-278">La diferencia entre opcional y "tiene un valor predeterminado" es que un parámetro de ruta con un valor predeterminado siempre genera un valor; un parámetro opcional tiene un valor sólo cuando se proporciona uno.</span><span class="sxs-lookup"><span data-stu-id="993ce-278">The difference between optional and "has default" is that a route parameter with a default value always produces a value; an optional parameter has a value only when one is provided.</span></span>

<span data-ttu-id="993ce-279">Parámetros de ruta también pueden tener restricciones, que deben coincidir con el valor de ruta enlazado desde la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-279">Route parameters may also have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="993ce-280">Agregar un signo de dos puntos `:` y nombre de la restricción después de que el nombre de parámetro de ruta especifica un *restricción alineada* en un parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-280">Adding a colon `:` and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="993ce-281">Si la restricción requiere argumentos de los que se proporcionan entre paréntesis `( )` después del nombre de restricción.</span><span class="sxs-lookup"><span data-stu-id="993ce-281">If the constraint requires arguments those are provided enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="993ce-282">Se pueden especificar varias restricciones alineadas anexando otra coma `:` y nombre de la restricción.</span><span class="sxs-lookup"><span data-stu-id="993ce-282">Multiple inline constraints can be specified by appending another colon `:` and constraint name.</span></span> <span data-ttu-id="993ce-283">El nombre de la restricción se pasa a la `IInlineConstraintResolver` servicio para crear una instancia de `IRouteConstraint` a utilizar en el procesamiento de la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-283">The constraint name is passed to the `IInlineConstraintResolver` service to create an instance of `IRouteConstraint` to use in URL processing.</span></span> <span data-ttu-id="993ce-284">Por ejemplo, la plantilla de ruta `blog/{article:minlength(10)}` especifica la `minlength` restricción con el argumento `10`.</span><span class="sxs-lookup"><span data-stu-id="993ce-284">For example, the route template `blog/{article:minlength(10)}` specifies the `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="993ce-285">Para obtener más restricciones de la ruta de descripción y una lista de las restricciones proporcionada por el marco de trabajo, consulte [referencia de restricción de ruta](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="993ce-285">For more description route constraints, and a listing of the constraints provided by the framework, see [route-constraint-reference](#route-constraint-reference).</span></span>

<span data-ttu-id="993ce-286">La tabla siguiente muestran algunas plantillas de ruta y su comportamiento.</span><span class="sxs-lookup"><span data-stu-id="993ce-286">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="993ce-287">Plantilla de ruta</span><span class="sxs-lookup"><span data-stu-id="993ce-287">Route Template</span></span> | <span data-ttu-id="993ce-288">Dirección URL de búsqueda de coincidencias de ejemplo</span><span class="sxs-lookup"><span data-stu-id="993ce-288">Example Matching URL</span></span> | <span data-ttu-id="993ce-289">Notas</span><span class="sxs-lookup"><span data-stu-id="993ce-289">Notes</span></span> |
| -------- | -------- | ------- |
| <span data-ttu-id="993ce-290">hello</span><span class="sxs-lookup"><span data-stu-id="993ce-290">hello</span></span>  | <span data-ttu-id="993ce-291">sería</span><span class="sxs-lookup"><span data-stu-id="993ce-291">/hello</span></span>  | <span data-ttu-id="993ce-292">Solo coincide con la ruta de acceso único`/hello`</span><span class="sxs-lookup"><span data-stu-id="993ce-292">Only matches the single path `/hello`</span></span> |
| <span data-ttu-id="993ce-293">{Página = Home}</span><span class="sxs-lookup"><span data-stu-id="993ce-293">{Page=Home}</span></span> | / | <span data-ttu-id="993ce-294">Coincide con y establece `Page` a`Home`</span><span class="sxs-lookup"><span data-stu-id="993ce-294">Matches and sets `Page` to `Home`</span></span> |
| <span data-ttu-id="993ce-295">{Página = Home}</span><span class="sxs-lookup"><span data-stu-id="993ce-295">{Page=Home}</span></span>  | <span data-ttu-id="993ce-296">O póngase en contacto con</span><span class="sxs-lookup"><span data-stu-id="993ce-296">/Contact</span></span>  | <span data-ttu-id="993ce-297">Coincide con y establece `Page` a`Contact`</span><span class="sxs-lookup"><span data-stu-id="993ce-297">Matches and sets `Page` to `Contact`</span></span> |
| <span data-ttu-id="993ce-298">¿{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="993ce-298">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="993ce-299">/ Productos/lista</span><span class="sxs-lookup"><span data-stu-id="993ce-299">/Products/List</span></span> | <span data-ttu-id="993ce-300">Se asigna a `Products` controlador y `List` acción</span><span class="sxs-lookup"><span data-stu-id="993ce-300">Maps to `Products` controller and `List`  action</span></span> |
| <span data-ttu-id="993ce-301">¿{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="993ce-301">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="993ce-302">/ Productos/detalles/123</span><span class="sxs-lookup"><span data-stu-id="993ce-302">/Products/Details/123</span></span>  |  <span data-ttu-id="993ce-303">Se asigna a `Products` controlador y `Details` acción.</span><span class="sxs-lookup"><span data-stu-id="993ce-303">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="993ce-304">`id`establézcalo 123</span><span class="sxs-lookup"><span data-stu-id="993ce-304">`id` set to 123</span></span> |
| <span data-ttu-id="993ce-305">¿{controlador = Home} / {acción = índice} / {id}?</span><span class="sxs-lookup"><span data-stu-id="993ce-305">{controller=Home}/{action=Index}/{id?}</span></span> | /  |  <span data-ttu-id="993ce-306">Se asigna a `Home` controlador y `Index` método; `id` se omite.</span><span class="sxs-lookup"><span data-stu-id="993ce-306">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span> |

<span data-ttu-id="993ce-307">Mediante una plantilla suele ser el método más sencillo para el enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="993ce-307">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="993ce-308">Las restricciones y los valores predeterminados pueden especificarse también fuera de la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-308">Constraints and defaults can also be specified outside the route template.</span></span>

<span data-ttu-id="993ce-309">Sugerencia: Habilitar [registro](logging.md) para ver cómo la basadas en implementaciones de enrutamientos, como `Route`, coincide con las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="993ce-309">Tip: Enable [Logging](logging.md) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="route-constraint-reference"></a><span data-ttu-id="993ce-310">Referencia de restricción de ruta</span><span class="sxs-lookup"><span data-stu-id="993ce-310">Route Constraint Reference</span></span>

<span data-ttu-id="993ce-311">Restricciones de la ruta cuando ejecutan un `Route` tiene coincide con la sintaxis de la dirección URL entrante y acorta la ruta de acceso de dirección URL en valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-311">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="993ce-312">En general, las restricciones de ruta inspeccionar el valor de ruta asociado a través de la plantilla de ruta y realizar un simple sí/no de decisión sobre si es o no el valor aceptable.</span><span class="sxs-lookup"><span data-stu-id="993ce-312">Route constraints generally inspect the route value associated via the route template and make a simple yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="993ce-313">Algunas restricciones de la ruta utilizan datos que superan el valor de ruta para tener en cuenta si se puede enrutar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="993ce-313">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="993ce-314">Por ejemplo, el `HttpMethodRouteConstraint` puede aceptar o rechazar una solicitud basada en su verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="993ce-314">For example, the `HttpMethodRouteConstraint` can accept or reject a request based on its HTTP verb.</span></span>

>[!WARNING]
> <span data-ttu-id="993ce-315">Evite el uso de restricciones para **la validación de entrada**, porque esa entrada no válida de este modo, producirá un error 404 (no encontrado) en lugar de un error 400 con un mensaje de error adecuado.</span><span class="sxs-lookup"><span data-stu-id="993ce-315">Avoid using constraints for **input validation**, because doing so means that invalid input will result in a 404 (Not Found) instead of a 400 with an appropriate error message.</span></span> <span data-ttu-id="993ce-316">Restricciones de la ruta deben usarse para **eliminar la ambigüedad de** entre las rutas similares, no para validar las entradas para una ruta determinada.</span><span class="sxs-lookup"><span data-stu-id="993ce-316">Route constraints should be used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="993ce-317">La tabla siguiente muestran algunas restricciones de la ruta y el comportamiento esperado.</span><span class="sxs-lookup"><span data-stu-id="993ce-317">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="993ce-318">restricción</span><span class="sxs-lookup"><span data-stu-id="993ce-318">constraint</span></span> | <span data-ttu-id="993ce-319">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="993ce-319">Example</span></span> | <span data-ttu-id="993ce-320">Coincidencias de ejemplo</span><span class="sxs-lookup"><span data-stu-id="993ce-320">Example Matches</span></span> | <span data-ttu-id="993ce-321">Notas</span><span class="sxs-lookup"><span data-stu-id="993ce-321">Notes</span></span> |
| --------   | ------- | ------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="993ce-322">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="993ce-322">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="993ce-323">Hace coincidir cualquier número entero</span><span class="sxs-lookup"><span data-stu-id="993ce-323">Matches any integer</span></span> |
| `bool`  | `{active:bool}` | <span data-ttu-id="993ce-324">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="993ce-324">`true`, `FALSE`</span></span> | <span data-ttu-id="993ce-325">Coincidencias `true` o `false` (entre mayúsculas y minúsculas)</span><span class="sxs-lookup"><span data-stu-id="993ce-325">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="993ce-326">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="993ce-326">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="993ce-327">Coincide con un válido `DateTime` valor (en la referencia cultural invariable - ver advertencia)</span><span class="sxs-lookup"><span data-stu-id="993ce-327">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="993ce-328">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="993ce-328">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="993ce-329">Coincide con un válido `decimal` valor (en la referencia cultural invariable - ver advertencia)</span><span class="sxs-lookup"><span data-stu-id="993ce-329">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double`  | `{weight:double}` | <span data-ttu-id="993ce-330">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="993ce-330">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="993ce-331">Coincide con un válido `double` valor (en la referencia cultural invariable - ver advertencia)</span><span class="sxs-lookup"><span data-stu-id="993ce-331">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float`  | `{weight:float}` | <span data-ttu-id="993ce-332">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="993ce-332">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="993ce-333">Coincide con un válido `float` valor (en la referencia cultural invariable - ver advertencia)</span><span class="sxs-lookup"><span data-stu-id="993ce-333">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid`  | `{id:guid}` | <span data-ttu-id="993ce-334">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="993ce-334">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="993ce-335">Coincide con un válido `Guid` valor</span><span class="sxs-lookup"><span data-stu-id="993ce-335">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="993ce-336">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="993ce-336">`123456789`, `-123456789`</span></span> | <span data-ttu-id="993ce-337">Coincide con un válido `long` valor</span><span class="sxs-lookup"><span data-stu-id="993ce-337">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="993ce-338">Cadena debe tener al menos 4 caracteres</span><span class="sxs-lookup"><span data-stu-id="993ce-338">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="993ce-339">Cadena debe ser no más de 8 caracteres</span><span class="sxs-lookup"><span data-stu-id="993ce-339">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="993ce-340">Cadena debe tener exactamente 12 caracteres</span><span class="sxs-lookup"><span data-stu-id="993ce-340">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="993ce-341">Cadena debe tener al menos 8 y no más de 16 caracteres</span><span class="sxs-lookup"><span data-stu-id="993ce-341">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="993ce-342">Valor entero debe ser al menos 18</span><span class="sxs-lookup"><span data-stu-id="993ce-342">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` |  `91` | <span data-ttu-id="993ce-343">Valor entero debe ser no más de 120</span><span class="sxs-lookup"><span data-stu-id="993ce-343">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="993ce-344">Valor entero debe ser al menos 18 pero no más de 120</span><span class="sxs-lookup"><span data-stu-id="993ce-344">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="993ce-345">Cadena debe constar de uno o más caracteres alfabéticos (`a`-`z`, entre mayúsculas y minúsculas)</span><span class="sxs-lookup"><span data-stu-id="993ce-345">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="993ce-346">Cadena debe coincidir con la expresión regular (Véase sugerencias acerca de cómo definir una expresión regular)</span><span class="sxs-lookup"><span data-stu-id="993ce-346">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required`  | `{name:required}` | `Rick` |  <span data-ttu-id="993ce-347">Utiliza para exigir que un valor de parámetro no está presente durante la generación de direcciones URL</span><span class="sxs-lookup"><span data-stu-id="993ce-347">Used to enforce that a non-parameter value is present during URL generation</span></span> |

>[!WARNING]
> <span data-ttu-id="993ce-348">Restricciones de la ruta que compruebe la dirección URL se pueden convertir en un tipo CLR (como `int` o `DateTime`) utilizar siempre la referencia cultural invariable: adoptan la dirección URL no es localizable.</span><span class="sxs-lookup"><span data-stu-id="993ce-348">Route constraints that verify the URL can be converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture - they assume the URL is non-localizable.</span></span> <span data-ttu-id="993ce-349">Las restricciones de ruta proporcionado por el marco de trabajo no modifique los valores almacenados en los valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="993ce-349">The framework-provided route constraints do not modify the values stored in route values.</span></span> <span data-ttu-id="993ce-350">Todos los valores de ruta analizados desde la dirección URL se almacenarán como cadenas.</span><span class="sxs-lookup"><span data-stu-id="993ce-350">All route values parsed from the URL will be stored as strings.</span></span> <span data-ttu-id="993ce-351">Por ejemplo, el [restricción de ruta Float](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) intentará convertir el valor de ruta en un valor flotante, pero el valor convertido se usa exclusivamente para comprobar que se pueda convertir en flotante.</span><span class="sxs-lookup"><span data-stu-id="993ce-351">For example, the [Float route constraint](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) will attempt to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="993ce-352">Expresiones regulares</span><span class="sxs-lookup"><span data-stu-id="993ce-352">Regular expressions</span></span> 

<span data-ttu-id="993ce-353">El marco de trabajo de ASP.NET Core agrega `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` al constructor de expresión regular.</span><span class="sxs-lookup"><span data-stu-id="993ce-353">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="993ce-354">Vea [enumeración RegexOptions](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) para obtener una descripción de estos miembros.</span><span class="sxs-lookup"><span data-stu-id="993ce-354">See [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) for a description of these members.</span></span>

<span data-ttu-id="993ce-355">Expresiones regulares utilizan delimitadores y símbolos (tokens) similares a aquellos utilizados con enrutamiento y el lenguaje C#.</span><span class="sxs-lookup"><span data-stu-id="993ce-355">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="993ce-356">Deben convertirse los tokens de expresión regular.</span><span class="sxs-lookup"><span data-stu-id="993ce-356">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="993ce-357">Por ejemplo, para usar la expresión regular `^\d{3}-\d{2}-\d{4}$` de enrutamiento, debe tener la `\` los caracteres escritos en como `\\` en el archivo de código fuente de C# para escapar el `\` carácter de escape de cadena (a menos que utilice [literalmente literales de cadena](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="993ce-357">For example, to use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, it needs to have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="993ce-358">El `{` , `}` , ' [' y ']' caracteres tienen que evitarse duplicándolas escape los caracteres delimitadores de parámetro de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="993ce-358">The `{` , `}` , '[' and ']' characters need to be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span>  <span data-ttu-id="993ce-359">En la tabla siguiente se muestra una expresión regular y la versión de la secuencia de escape.</span><span class="sxs-lookup"><span data-stu-id="993ce-359">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="993ce-360">Expresión</span><span class="sxs-lookup"><span data-stu-id="993ce-360">Expression</span></span>               | <span data-ttu-id="993ce-361">Nota</span><span class="sxs-lookup"><span data-stu-id="993ce-361">Note</span></span> |
| ----------------- | ------------ | 
| `^\d{3}-\d{2}-\d{4}$` | <span data-ttu-id="993ce-362">Expresión regular</span><span class="sxs-lookup"><span data-stu-id="993ce-362">Regular expression</span></span> |
| `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` | <span data-ttu-id="993ce-363">Caracteres de escape</span><span class="sxs-lookup"><span data-stu-id="993ce-363">Escaped</span></span>  |
| `^[a-z]{2}$` | <span data-ttu-id="993ce-364">Expresión regular</span><span class="sxs-lookup"><span data-stu-id="993ce-364">Regular expression</span></span> |
| `^[[a-z]]{{2}}$` | <span data-ttu-id="993ce-365">Caracteres de escape</span><span class="sxs-lookup"><span data-stu-id="993ce-365">Escaped</span></span>  |

<span data-ttu-id="993ce-366">Expresiones regulares utilizadas en el enrutamiento a menudo se iniciará con la `^` caracteres (posición inicial de la cadena de coincidencia) y terminan con la `$` caracteres (coincidencia de una posición de la cadena final).</span><span class="sxs-lookup"><span data-stu-id="993ce-366">Regular expressions used in routing will often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="993ce-367">El `^` y `$` caracteres Asegúrese de que la coincidencia de expresión regular el valor del parámetro de ruta completa.</span><span class="sxs-lookup"><span data-stu-id="993ce-367">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="993ce-368">Sin el `^` y `$` caracteres de la expresión regular coincidirá con cualquier cadena subcarpetas dentro de la cadena, que a menudo no es lo desea.</span><span class="sxs-lookup"><span data-stu-id="993ce-368">Without the `^` and `$` characters the regular expression will match any sub-string within the string, which is often not what you want.</span></span> <span data-ttu-id="993ce-369">En la tabla siguiente se muestra algunos ejemplos y explica por qué que coinciden o no coinciden.</span><span class="sxs-lookup"><span data-stu-id="993ce-369">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="993ce-370">Expresión</span><span class="sxs-lookup"><span data-stu-id="993ce-370">Expression</span></span>               | <span data-ttu-id="993ce-371">Cadena</span><span class="sxs-lookup"><span data-stu-id="993ce-371">String</span></span> | <span data-ttu-id="993ce-372">Coincidir con</span><span class="sxs-lookup"><span data-stu-id="993ce-372">Match</span></span> | <span data-ttu-id="993ce-373">Comentario</span><span class="sxs-lookup"><span data-stu-id="993ce-373">Comment</span></span> |
| ----------------- | ------------ |  ------------ |  ------------ | 
| `[a-z]{2}` | <span data-ttu-id="993ce-374">hello</span><span class="sxs-lookup"><span data-stu-id="993ce-374">hello</span></span> | <span data-ttu-id="993ce-375">sí</span><span class="sxs-lookup"><span data-stu-id="993ce-375">yes</span></span> | <span data-ttu-id="993ce-376">coincidencia de subcadena</span><span class="sxs-lookup"><span data-stu-id="993ce-376">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="993ce-377">123abc456</span><span class="sxs-lookup"><span data-stu-id="993ce-377">123abc456</span></span> | <span data-ttu-id="993ce-378">sí</span><span class="sxs-lookup"><span data-stu-id="993ce-378">yes</span></span> | <span data-ttu-id="993ce-379">coincidencia de subcadena</span><span class="sxs-lookup"><span data-stu-id="993ce-379">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="993ce-380">MZ</span><span class="sxs-lookup"><span data-stu-id="993ce-380">mz</span></span> | <span data-ttu-id="993ce-381">sí</span><span class="sxs-lookup"><span data-stu-id="993ce-381">yes</span></span> | <span data-ttu-id="993ce-382">coincide con la expresión</span><span class="sxs-lookup"><span data-stu-id="993ce-382">matches expression</span></span> |
| `[a-z]{2}` | <span data-ttu-id="993ce-383">MZ</span><span class="sxs-lookup"><span data-stu-id="993ce-383">MZ</span></span> | <span data-ttu-id="993ce-384">sí</span><span class="sxs-lookup"><span data-stu-id="993ce-384">yes</span></span> | <span data-ttu-id="993ce-385">no distinguir mayúsculas de minúsculas</span><span class="sxs-lookup"><span data-stu-id="993ce-385">not case sensitive</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="993ce-386">hello</span><span class="sxs-lookup"><span data-stu-id="993ce-386">hello</span></span> | <span data-ttu-id="993ce-387">No</span><span class="sxs-lookup"><span data-stu-id="993ce-387">no</span></span> | <span data-ttu-id="993ce-388">vea `^` y `$` anteriormente</span><span class="sxs-lookup"><span data-stu-id="993ce-388">see `^` and `$` above</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="993ce-389">123abc456</span><span class="sxs-lookup"><span data-stu-id="993ce-389">123abc456</span></span> | <span data-ttu-id="993ce-390">No</span><span class="sxs-lookup"><span data-stu-id="993ce-390">no</span></span> | <span data-ttu-id="993ce-391">vea `^` y `$` anteriormente</span><span class="sxs-lookup"><span data-stu-id="993ce-391">see `^` and `$` above</span></span> |

<span data-ttu-id="993ce-392">Hacer referencia a [expresiones regulares de .NET Framework](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) para obtener más información acerca de la sintaxis de expresión regular.</span><span class="sxs-lookup"><span data-stu-id="993ce-392">Refer to [.NET Framework Regular Expressions](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) for more information on regular expression syntax.</span></span>

<span data-ttu-id="993ce-393">Para restringir un parámetro con un conjunto conocido de posibles valores, utilice una expresión regular.</span><span class="sxs-lookup"><span data-stu-id="993ce-393">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="993ce-394">Por ejemplo `{action:regex(^(list|get|create)$)}` solo coincide con el `action` enrutar valor a `list`, `get`, o `create`.</span><span class="sxs-lookup"><span data-stu-id="993ce-394">For example `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="993ce-395">Si se pasa en el diccionario de restricciones, la cadena "^ (lista | get | crear) $" sería equivalente.</span><span class="sxs-lookup"><span data-stu-id="993ce-395">If passed into the constraints dictionary, the string "^(list|get|create)$" would be equivalent.</span></span> <span data-ttu-id="993ce-396">Las restricciones que se pasan en el diccionario de restricciones (no alineado dentro de una plantilla) que no coinciden con una de las restricciones conocidas también se tratan como expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="993ce-396">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="993ce-397">Referencia de generación de dirección URL</span><span class="sxs-lookup"><span data-stu-id="993ce-397">URL Generation Reference</span></span>

<span data-ttu-id="993ce-398">El ejemplo siguiente muestra cómo generar un vínculo a una ruta tiene un diccionario de valores de ruta y un `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="993ce-398">The example below shows how to generate a link to a route given a dictionary of route values and a `RouteCollection`.</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?range=45-59)]

<span data-ttu-id="993ce-399">El `VirtualPath` generado al final del ejemplo anterior es `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="993ce-399">The `VirtualPath` generated at the end of the sample above is `/package/create/123`.</span></span>

<span data-ttu-id="993ce-400">El segundo parámetro a la `VirtualPathContext` constructor es una colección de *valores ambiente*.</span><span class="sxs-lookup"><span data-stu-id="993ce-400">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="993ce-401">Valores de ambiente aportar comodidad limitando el número de valores que se debe especificar un programador dentro de un determinado contexto de solicitud.</span><span class="sxs-lookup"><span data-stu-id="993ce-401">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="993ce-402">Los valores actuales de la ruta de la solicitud actual se consideran valores de ambiente para la generación de vínculo.</span><span class="sxs-lookup"><span data-stu-id="993ce-402">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="993ce-403">Por ejemplo, en una aplicación de MVC de ASP.NET si se encuentra en la `About` acción de la `HomeController`, no es necesario especificar el valor de la ruta de controlador para vincular a la `Index` acción (el valor ambiente de `Home` usará).</span><span class="sxs-lookup"><span data-stu-id="993ce-403">For example, in an ASP.NET MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action (the ambient value of `Home` will be used).</span></span>

<span data-ttu-id="993ce-404">Se omiten los valores de ambiente que no coincide con un parámetro, y también se omiten los valores de ambiente cuando un valor explícitamente proporcionados, invalida van de izquierda a derecha en la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="993ce-404">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly-provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="993ce-405">Los valores que se proporcionan de forma explícita, pero que no coincide con nada se agregan a la cadena de consulta.</span><span class="sxs-lookup"><span data-stu-id="993ce-405">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="993ce-406">En la tabla siguiente se muestra el resultado cuando se usa la plantilla de ruta `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="993ce-406">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="993ce-407">Valores de ambiente</span><span class="sxs-lookup"><span data-stu-id="993ce-407">Ambient Values</span></span> | <span data-ttu-id="993ce-408">Valores explícitos</span><span class="sxs-lookup"><span data-stu-id="993ce-408">Explicit Values</span></span> | <span data-ttu-id="993ce-409">Resultado</span><span class="sxs-lookup"><span data-stu-id="993ce-409">Result</span></span> |
| -------------   | -------------- | ------ |
| <span data-ttu-id="993ce-410">controlador = "Inicio"</span><span class="sxs-lookup"><span data-stu-id="993ce-410">controller="Home"</span></span> | <span data-ttu-id="993ce-411">acción = "About"</span><span class="sxs-lookup"><span data-stu-id="993ce-411">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="993ce-412">controlador = "Inicio"</span><span class="sxs-lookup"><span data-stu-id="993ce-412">controller="Home"</span></span> | <span data-ttu-id="993ce-413">controlador = "Order", acción = "About"</span><span class="sxs-lookup"><span data-stu-id="993ce-413">controller="Order",action="About"</span></span> | `/Order/About` |
| <span data-ttu-id="993ce-414">controlador = "Home", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="993ce-414">controller="Home",color="Red"</span></span> | <span data-ttu-id="993ce-415">acción = "About"</span><span class="sxs-lookup"><span data-stu-id="993ce-415">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="993ce-416">controlador = "Inicio"</span><span class="sxs-lookup"><span data-stu-id="993ce-416">controller="Home"</span></span> | <span data-ttu-id="993ce-417">acción = "About" de color = "Red"</span><span class="sxs-lookup"><span data-stu-id="993ce-417">action="About",color="Red"</span></span> | `/Home/About?color=Red`

<span data-ttu-id="993ce-418">Si una ruta tiene un valor predeterminado que no se corresponde con un parámetro y se proporciona explícitamente ese valor, debe coincidir con el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="993ce-418">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value.</span></span> <span data-ttu-id="993ce-419">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="993ce-419">For example:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
  defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="993ce-420">Generación de vínculo solo generaría un vínculo para esta ruta cuando se proporcionan los valores de búsqueda de coincidencias de acción y controlador.</span><span class="sxs-lookup"><span data-stu-id="993ce-420">Link generation would only generate a link for this route when the matching values for controller and action are provided.</span></span>
