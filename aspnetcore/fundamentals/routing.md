---
title: Enrutamiento en ASP.NET Core
author: ardalis
description: Descubra la manera en que la funcionalidad de enrutamiento de ASP.NET Core se encarga de asignar una solicitud entrante a un controlador de ruta.
ms.author: riande
ms.custom: mvc
ms.date: 10/01/2018
uid: fundamentals/routing
ms.openlocfilehash: a014782ba503bc8bd0fdefb4cb4f382aa8fde4cd
ms.sourcegitcommit: c43a6f1fe72d7c2db4b5815fd532f2b45d964e07
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 10/30/2018
ms.locfileid: "50244975"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="285f2-103">Enrutamiento en ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="285f2-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="285f2-104">Por [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/) y [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="285f2-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="285f2-105">La funcionalidad de enrutamiento de ASP.NET Core se encarga de asignar una solicitud entrante a un controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="285f2-106">Las rutas se definen en la aplicación y se configuran cuando se inicia la aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-106">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="285f2-107">Una ruta puede extraer opcionalmente valores de la dirección URL contenida en la solicitud, que se pueden usar para procesar las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="285f2-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="285f2-108">Con la información de ruta de la aplicación, la funcionalidad de enrutamiento también puede generar direcciones URL que se asignan a controladores de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-108">Using route information from the app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="285f2-109">Por tanto, el enrutamiento puede buscar un controlador de ruta a partir de una dirección URL, o bien encontrar la dirección URL correspondiente a un controlador de ruta determinado en función de la información del controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-109">Therefore, routing can find a route handler based on a URL, or find the URL corresponding to a given route handler based on route handler information.</span></span>

<span data-ttu-id="285f2-110">La mayoría de las aplicaciones deben elegir un esquema de enrutamiento básico y descriptivo para que las direcciones URL sean legibles y significativas.</span><span class="sxs-lookup"><span data-stu-id="285f2-110">Most apps should choose a basic and descriptive routing scheme so that URLs are readable and meaningful.</span></span> <span data-ttu-id="285f2-111">La ruta convencional predeterminada `{controller=Home}/{action=Index}/{id?}`:</span><span class="sxs-lookup"><span data-stu-id="285f2-111">The default conventional route `{controller=Home}/{action=Index}/{id?}`:</span></span>

* <span data-ttu-id="285f2-112">Admite un esquema de enrutamiento básico y descriptivo:</span><span class="sxs-lookup"><span data-stu-id="285f2-112">Supports a basic and descriptive routing scheme:</span></span>
* <span data-ttu-id="285f2-113">Es un buen punto de partida para las aplicaciones web destinadas a usarse en los exploradores.</span><span class="sxs-lookup"><span data-stu-id="285f2-113">Is a good starting point for web apps intended for use by browsers.</span></span>

<span data-ttu-id="285f2-114">Es habitual agregar rutas breves adicionales a áreas de mucho tráfico de la aplicación en situaciones especializadas (por ejemplo, blogs o comercio electrónico) con el [enrutamiento mediante atributos](xref:mvc/controllers/routing#attribute-routing) o rutas convencionales dedicadas.</span><span class="sxs-lookup"><span data-stu-id="285f2-114">It's common to add additional terse routes to high traffic areas of the app in specialized situations (for example, blog, ecommerce) using [attribute routing](xref:mvc/controllers/routing#attribute-routing) or dedicated conventional routes.</span></span>

<span data-ttu-id="285f2-115">Las API web deben usar el enrutamiento mediante atributos para modelar la funcionalidad de la aplicación como un conjunto de recursos donde las operaciones se representan mediante verbos HTTP.</span><span class="sxs-lookup"><span data-stu-id="285f2-115">Web APIs should use attribute routing to model the app's functionality as a set of resources where operations are represented by HTTP verbs.</span></span> <span data-ttu-id="285f2-116">Esto significa que muchas operaciones (por ejemplo, GET y POST) del mismo recurso lógico usarán la misma dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-116">This means that many operations (for example, GET, POST) on the same logical resource will use the same URL.</span></span> <span data-ttu-id="285f2-117">El enrutamiento mediante atributos ofrece un nivel de control que resulta necesario para diseñar cuidadosamente un espacio de direcciones URL de la API.</span><span class="sxs-lookup"><span data-stu-id="285f2-117">Attribute routing provides a level of control that is needed to carefully design an API's URL-space.</span></span>

<span data-ttu-id="285f2-118">La compatibilidad de la generación de direcciones URL de MVC permite desarrollar la aplicación sin necesidad de codificar de forma rígida las direcciones URL para vincular la aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-118">MVC's URL generation support allows the app to be developed without hard coding the URLs to link the app together.</span></span> <span data-ttu-id="285f2-119">Esto permite partir con una configuración de enrutamiento básica y modificar las rutas una vez determinada la forma de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-119">This allows for starting with a basic routing configuration, and modifying the routes after the app's shape is determined.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="285f2-120">En este documento se describe el enrutamiento de ASP.NET Core de bajo nivel.</span><span class="sxs-lookup"><span data-stu-id="285f2-120">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="285f2-121">Para obtener información sobre el enrutamiento de ASP.NET Core MVC, vea <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="285f2-121">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="285f2-122">[Vea o descargue el código de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([cómo descargarlo](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="285f2-122">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="285f2-123">Fundamentos del enrutamiento</span><span class="sxs-lookup"><span data-stu-id="285f2-123">Routing basics</span></span>

<span data-ttu-id="285f2-124">El enrutamiento usa *rutas* (implementaciones de <xref:Microsoft.AspNetCore.Routing.IRouter>) para:</span><span class="sxs-lookup"><span data-stu-id="285f2-124">Routing uses *routes* (implementations of <xref:Microsoft.AspNetCore.Routing.IRouter>) to:</span></span>

* <span data-ttu-id="285f2-125">Asignar las solicitudes entrantes a *controladores de ruta*.</span><span class="sxs-lookup"><span data-stu-id="285f2-125">Map incoming requests to *route handlers*.</span></span>
* <span data-ttu-id="285f2-126">Generar direcciones URL que se usan en las respuestas.</span><span class="sxs-lookup"><span data-stu-id="285f2-126">Generate URLs used in responses.</span></span>

<span data-ttu-id="285f2-127">Por lo general, una aplicación tiene una sola colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="285f2-127">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="285f2-128">Cuando llega una solicitud, la colección de rutas se procesa en orden.</span><span class="sxs-lookup"><span data-stu-id="285f2-128">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="285f2-129">La solicitud entrante busca una ruta que coincida con la dirección URL de la solicitud. Para ello, llama al método <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> en cada ruta disponible de la colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="285f2-129">The incoming request looks for a route that matches the request URL by calling the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each available route in the route collection.</span></span> <span data-ttu-id="285f2-130">En cambio, una respuesta puede usar el enrutamiento para generar direcciones URL (por ejemplo, para el redireccionamiento o los vínculos) en función de la información de ruta. De este modo, se evita tener que codificar de forma rígida las direcciones URL, lo que facilita el mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="285f2-130">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="285f2-131">La clase <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> conecta el enrutamiento a la canalización de [software intermedio](xref:fundamentals/middleware/index).</span><span class="sxs-lookup"><span data-stu-id="285f2-131">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="285f2-132">[ASP.NET Core MVC](xref:mvc/overview) agrega enrutamiento a la canalización de software intermedio como parte de su configuración.</span><span class="sxs-lookup"><span data-stu-id="285f2-132">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="285f2-133">Para obtener información sobre el uso del enrutamiento como componente independiente, vea la sección [Uso de software intermedio de enrutamiento](#use-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="285f2-133">To learn about using routing as a standalone component, see [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="285f2-134">Coincidencia de dirección URL</span><span class="sxs-lookup"><span data-stu-id="285f2-134">URL matching</span></span>

<span data-ttu-id="285f2-135">La coincidencia de dirección URL es el proceso por el cual el enrutamiento envía una solicitud entrante a un *controlador*.</span><span class="sxs-lookup"><span data-stu-id="285f2-135">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="285f2-136">Este proceso se basa en datos de la ruta de dirección URL, pero se puede ampliar para tener en cuenta cualquier dato de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="285f2-136">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="285f2-137">La capacidad de enviar solicitudes a controladores independientes es clave para escalar el tamaño y la complejidad de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-137">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="285f2-138">Las solicitudes entrantes especifican la clase `RouterMiddleware`, que llama al método <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> en cada ruta de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="285f2-138">Incoming requests enter the `RouterMiddleware`, which calls the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in sequence.</span></span> <span data-ttu-id="285f2-139">La instancia de <xref:Microsoft.AspNetCore.Routing.IRouter> decide si *controla* la solicitud mediante el establecimiento de [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) en un <xref:Microsoft.AspNetCore.Http.RequestDelegate> que no sea NULL.</span><span class="sxs-lookup"><span data-stu-id="285f2-139">The <xref:Microsoft.AspNetCore.Routing.IRouter> instance chooses whether to *handle* the request by setting the [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) to a non-null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="285f2-140">Si una ruta establece un controlador para la solicitud, el procesamiento de rutas se detiene y se invoca el controlador para procesar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="285f2-140">If a route sets a handler for the request, route processing stops, and the handler is invoked to process the request.</span></span> <span data-ttu-id="285f2-141">Si se prueban todas las rutas y no se encuentra ningún controlador para la solicitud, el software intermedio llama a *next* y se invoca el software intermedio siguiente de la canalización de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="285f2-141">If all routes are tried and no handler is found for the request, the middleware calls *next*, and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="285f2-142">La entrada principal para `RouteAsync` es el [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) asociado a la solicitud actual.</span><span class="sxs-lookup"><span data-stu-id="285f2-142">The primary input to `RouteAsync` is the [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associated with the current request.</span></span> <span data-ttu-id="285f2-143">`RouteContext.Handler` y [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) son salidas que se establecen después de que una ruta coincida.</span><span class="sxs-lookup"><span data-stu-id="285f2-143">The `RouteContext.Handler` and [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) are outputs set after a route matches.</span></span>

<span data-ttu-id="285f2-144">Una coincidencia durante `RouteAsync` también establece las propiedades de `RouteContext.RouteData` en los valores adecuados en función del procesamiento de solicitudes realizado hasta el momento.</span><span class="sxs-lookup"><span data-stu-id="285f2-144">A match during `RouteAsync` also sets the properties of the `RouteContext.RouteData` to appropriate values based on the request processing performed thus far.</span></span> <span data-ttu-id="285f2-145">Si una ruta coincide con una solicitud, `RouteContext.RouteData` contiene información de estado importante sobre el *resultado*.</span><span class="sxs-lookup"><span data-stu-id="285f2-145">If a route matches a request, the `RouteContext.RouteData` contains important state information about the *result*.</span></span>

<span data-ttu-id="285f2-146">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) es un diccionario de los *valores de ruta* generados desde la ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-146">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="285f2-147">Estos valores se suelen determinar mediante la conversión en tokens de la dirección URL, y se pueden usar para aceptar la entrada del usuario o para tomar otras decisiones sobre el envío dentro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-147">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="285f2-148">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) es un contenedor de propiedades de datos adicionales relacionados con la ruta coincidente.</span><span class="sxs-lookup"><span data-stu-id="285f2-148">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="285f2-149">Se proporcionan `DataTokens` para permitir la asociación de datos de estado con cada ruta, de modo que la aplicación pueda tomar decisiones más adelante en función de las rutas que han coincidido.</span><span class="sxs-lookup"><span data-stu-id="285f2-149">`DataTokens` are provided to support associating state data with each route so that the app can make decisions later based on which route matched.</span></span> <span data-ttu-id="285f2-150">Estos valores los define el desarrollador y **no** afectan de ninguna manera al comportamiento del enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="285f2-150">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="285f2-151">Además, los valores que se guardan provisionalmente en `RouteData.DataTokens` pueden ser de cualquier tipo, a diferencia de `RouteData.Values`, que deben poder convertirse fácilmente en cadenas y a partir de estas.</span><span class="sxs-lookup"><span data-stu-id="285f2-151">Additionally, values stashed in `RouteData.DataTokens` can be of any type, in contrast to `RouteData.Values`, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="285f2-152">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) es una lista de las rutas que han participado en encontrar una coincidencia correcta con la solicitud.</span><span class="sxs-lookup"><span data-stu-id="285f2-152">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="285f2-153">Las rutas se pueden anidar unas dentro de otras.</span><span class="sxs-lookup"><span data-stu-id="285f2-153">Routes can be nested inside of one another.</span></span> <span data-ttu-id="285f2-154">La propiedad `Routers` refleja la ruta de acceso del árbol lógico de rutas que han tenido como resultado una coincidencia.</span><span class="sxs-lookup"><span data-stu-id="285f2-154">The `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="285f2-155">Por lo general, el primer elemento de `Routers` es la colección de rutas y se debe usar para la generación de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-155">Generally, the first item in `Routers` is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="285f2-156">El último elemento de `Routers` es el controlador de ruta que ha coincidido.</span><span class="sxs-lookup"><span data-stu-id="285f2-156">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="285f2-157">Generación de dirección URL</span><span class="sxs-lookup"><span data-stu-id="285f2-157">URL generation</span></span>

<span data-ttu-id="285f2-158">La generación de dirección URL es el proceso por el cual el enrutamiento puede crear una ruta de dirección URL basada en un conjunto de valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-158">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="285f2-159">Esto permite una separación lógica entre los controladores y las direcciones URL que tienen acceso a ellos.</span><span class="sxs-lookup"><span data-stu-id="285f2-159">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="285f2-160">La generación de direcciones URL sigue un proceso iterativo similar, pero se inicia cuando el código de usuario o de marco de trabajo llama al método <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> de la colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="285f2-160">URL generation follows a similar iterative process, but it starts with user or framework code calling into the <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method of the route collection.</span></span> <span data-ttu-id="285f2-161">Después, se llama en secuencia al método `GetVirtualPath` de cada *ruta* hasta que se devuelva un valor <xref:Microsoft.AspNetCore.Routing.VirtualPathData> distinto de NULL.</span><span class="sxs-lookup"><span data-stu-id="285f2-161">Each *route* then has its `GetVirtualPath` method called in sequence until a non-null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> is returned.</span></span>

<span data-ttu-id="285f2-162">La principal entradas de `GetVirtualPath` son:</span><span class="sxs-lookup"><span data-stu-id="285f2-162">The primary inputs to `GetVirtualPath` are:</span></span>

* [<span data-ttu-id="285f2-163">VirtualPathContext.HttpContext</span><span class="sxs-lookup"><span data-stu-id="285f2-163">VirtualPathContext.HttpContext</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext*)
* [<span data-ttu-id="285f2-164">VirtualPathContext.Values</span><span class="sxs-lookup"><span data-stu-id="285f2-164">VirtualPathContext.Values</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*)
* [<span data-ttu-id="285f2-165">VirtualPathContext.AmbientValues</span><span class="sxs-lookup"><span data-stu-id="285f2-165">VirtualPathContext.AmbientValues</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*)

<span data-ttu-id="285f2-166">Las rutas usan principalmente los valores de ruta proporcionados por `Values` y `AmbientValues` para decidir si es posible generar una dirección URL y qué valores se deben incluir.</span><span class="sxs-lookup"><span data-stu-id="285f2-166">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide whether it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="285f2-167">`AmbientValues` son el conjunto de valores de ruta producidos cuando la solicitud actual coincide con el sistema de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="285f2-167">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="285f2-168">En cambio, `Values` son los valores de ruta que especifican cómo se genera la dirección URL deseada para la operación actual.</span><span class="sxs-lookup"><span data-stu-id="285f2-168">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="285f2-169">Se proporciona `HttpContext` por si una ruta necesita obtener servicios o datos adicionales asociados con el contexto actual.</span><span class="sxs-lookup"><span data-stu-id="285f2-169">The `HttpContext` is provided in case a route needs to obtain services or additional data associated with the current context.</span></span>

> [!TIP]
> <span data-ttu-id="285f2-170">Piense en [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) como un conjunto de invalidaciones para [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span><span class="sxs-lookup"><span data-stu-id="285f2-170">Think of [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) as being a set of overrides for the [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span></span> <span data-ttu-id="285f2-171">La generación de direcciones URL intenta reutilizar los valores de ruta de la solicitud actual para que sea más fácil generar direcciones URL para los vínculos con la misma ruta o valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-171">URL generation attempts to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="285f2-172">La salida de `GetVirtualPath` es `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="285f2-172">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="285f2-173">`VirtualPathData` es un valor paralelo de `RouteData`.</span><span class="sxs-lookup"><span data-stu-id="285f2-173">`VirtualPathData` is a parallel of `RouteData`.</span></span> <span data-ttu-id="285f2-174">`VirtualPathData` contiene el valor `VirtualPath` de la dirección URL de salida y algunas propiedades más que la ruta debe establecer.</span><span class="sxs-lookup"><span data-stu-id="285f2-174">`VirtualPathData` contains the `VirtualPath` for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="285f2-175">La propiedad [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) contiene la *ruta de acceso virtual* generada por la ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-175">The [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="285f2-176">Es posible que deba procesar aún más la ruta de acceso, según sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="285f2-176">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="285f2-177">Si quiere representar la dirección URL generada en HTML, anteponga la ruta de acceso base de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-177">If you want to render the generated URL in HTML, prepend the base path of the app.</span></span>

<span data-ttu-id="285f2-178">[VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) es una referencia a la ruta que ha generado correctamente la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-178">The [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="285f2-179">La propiedad [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) es un diccionario de datos adicionales relacionados con la ruta que ha generado la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-179">The [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="285f2-180">Se trata del valor paralelo de [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span><span class="sxs-lookup"><span data-stu-id="285f2-180">This is the parallel of [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span></span>

### <a name="creating-routes"></a><span data-ttu-id="285f2-181">Creación de rutas</span><span class="sxs-lookup"><span data-stu-id="285f2-181">Creating routes</span></span>

<span data-ttu-id="285f2-182">El enrutamiento proporciona la clase <xref:Microsoft.AspNetCore.Routing.Route> como implementación estándar de <xref:Microsoft.AspNetCore.Routing.IRouter>.</span><span class="sxs-lookup"><span data-stu-id="285f2-182">Routing provides the <xref:Microsoft.AspNetCore.Routing.Route> class as the standard implementation of <xref:Microsoft.AspNetCore.Routing.IRouter>.</span></span> <span data-ttu-id="285f2-183">`Route` usa la sintaxis de *plantilla de ruta* para definir los patrones que se hacen coincidir con la ruta de dirección URL cuando se llama a <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*>.</span><span class="sxs-lookup"><span data-stu-id="285f2-183">`Route` uses the *route template* syntax to define patterns that match against the URL path when <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is called.</span></span> <span data-ttu-id="285f2-184">`Route` usa la misma plantilla de ruta para generar una dirección URL cuando se llama a `GetVirtualPath`.</span><span class="sxs-lookup"><span data-stu-id="285f2-184">`Route` uses the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="285f2-185">La mayoría de las aplicaciones crea rutas mediante una llamada a <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> o a uno de los métodos de extensión similares definidos en <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="285f2-185">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="285f2-186">Todos estos métodos crean una instancia de <xref:Microsoft.AspNetCore.Routing.Route> y la agregan a la colección de rutas.</span><span class="sxs-lookup"><span data-stu-id="285f2-186">All of these methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="285f2-187">`MapRoute` no toma un parámetro de controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-187">`MapRoute` doesn't take a route handler parameter.</span></span> <span data-ttu-id="285f2-188">`MapRoute` solo agrega las rutas que se controlan mediante <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="285f2-188">`MapRoute` only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="285f2-189">Dado que el controlador predeterminado es `IRouter`, es posible que decida no controlar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="285f2-189">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="285f2-190">Por ejemplo, ASP.NET Core MVC se suele configurar como un controlador predeterminado que solo controla las solicitudes que coinciden con un controlador y una acción disponibles.</span><span class="sxs-lookup"><span data-stu-id="285f2-190">For example, ASP.NET Core MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="285f2-191">Para obtener más información sobre el enrutamiento a MVC, vea <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="285f2-191">To learn more about routing to MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="285f2-192">El código siguiente es un ejemplo de una llamada a `MapRoute` usada por una definición de ruta típica de ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="285f2-192">The following code example is an example of a `MapRoute` call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="285f2-193">Esta plantilla coincide con una ruta de dirección URL como `/Products/Details/17` y extrae los valores de ruta `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="285f2-193">This template matches a URL path like `/Products/Details/17` and extracts the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="285f2-194">Los valores de ruta se determinan al dividir la ruta de dirección URL en segmentos y hacer coincidir cada segmento con el nombre del *parámetro de ruta* en la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-194">The route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="285f2-195">Los parámetros de ruta tienen un nombre asignado.</span><span class="sxs-lookup"><span data-stu-id="285f2-195">Route parameters are named.</span></span> <span data-ttu-id="285f2-196">Para definirlos, el nombre del parámetro se incluye entre llaves `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="285f2-196">They're defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="285f2-197">La plantilla anterior también podría coincidir con la ruta de dirección URL `/` y generaría los valores `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="285f2-197">The preceding template could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="285f2-198">Esto se debe a que los parámetros de ruta `{controller}` y `{action}` tienen valores predeterminados y el parámetro de ruta `id` es opcional.</span><span class="sxs-lookup"><span data-stu-id="285f2-198">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="285f2-199">Un signo igual `=` seguido de un valor después del nombre del parámetro de ruta define un valor predeterminado para el parámetro.</span><span class="sxs-lookup"><span data-stu-id="285f2-199">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="285f2-200">Un signo de interrogación `?` después del nombre del parámetro de ruta define el parámetro como opcional.</span><span class="sxs-lookup"><span data-stu-id="285f2-200">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="285f2-201">Los parámetros de ruta con un valor predeterminado *siempre* generan un valor de ruta cuando la ruta coincide.</span><span class="sxs-lookup"><span data-stu-id="285f2-201">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="285f2-202">Los parámetros opcionales no generan un valor de ruta si no existió el segmento de ruta de dirección URL correspondiente.</span><span class="sxs-lookup"><span data-stu-id="285f2-202">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="285f2-203">Vea en [Referencia de plantilla de ruta](#route-template-reference) una descripción detallada de las características y la sintaxis de la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-203">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="285f2-204">En este ejemplo se incluye una *restricción de ruta*:</span><span class="sxs-lookup"><span data-stu-id="285f2-204">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="285f2-205">Esta plantilla coincide con una ruta de dirección URL como `/Products/Details/17`, pero no con `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="285f2-205">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="285f2-206">La definición de parámetro de ruta `{id:int}` define una [restricción de ruta](#route-constraint-reference) para el parámetro de ruta `id`.</span><span class="sxs-lookup"><span data-stu-id="285f2-206">The route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter.</span></span> <span data-ttu-id="285f2-207">Las restricciones de ruta implementan <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> e inspeccionan los valores de ruta para comprobarlos.</span><span class="sxs-lookup"><span data-stu-id="285f2-207">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="285f2-208">En este ejemplo, el valor de ruta `id` debe poder convertirse en un entero.</span><span class="sxs-lookup"><span data-stu-id="285f2-208">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="285f2-209">Vea en [Referencia de restricción de ruta](#route-constraint-reference) una explicación más detallada de las restricciones de ruta que se proporcionan con el marco de trabajo.</span><span class="sxs-lookup"><span data-stu-id="285f2-209">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="285f2-210">Las sobrecargas adicionales de `MapRoute` aceptan valores para `constraints`, `dataTokens` y `defaults`.</span><span class="sxs-lookup"><span data-stu-id="285f2-210">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="285f2-211">Estos parámetros adicionales de `MapRoute` se definen como un tipo `object`.</span><span class="sxs-lookup"><span data-stu-id="285f2-211">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="285f2-212">Estos parámetros suelen usarse para pasar un objeto de tipo anónimo, donde los nombres de propiedad del tipo anónimo coinciden con los nombres de los parámetros de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-212">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="285f2-213">En los dos ejemplos siguientes se crean rutas equivalentes:</span><span class="sxs-lookup"><span data-stu-id="285f2-213">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="285f2-214">La sintaxis insertada para definir las restricciones y los valores predeterminados puede ser conveniente para las rutas simples.</span><span class="sxs-lookup"><span data-stu-id="285f2-214">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="285f2-215">Pero hay algunas características, como los tokens de datos, que no son compatibles con esta sintaxis.</span><span class="sxs-lookup"><span data-stu-id="285f2-215">However, there are features, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="285f2-216">En el ejemplo siguiente se muestran algunos escenarios más:</span><span class="sxs-lookup"><span data-stu-id="285f2-216">The following example demonstrates a few more scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{*article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="285f2-217">Esta plantilla coincide con una ruta de dirección URL como `/Blog/All-About-Routing/Introduction` y extrae los valores `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="285f2-217">This template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="285f2-218">La ruta genera los valores de ruta predeterminados para `controller` y `action`, incluso si no hay parámetros de ruta correspondientes en la plantilla.</span><span class="sxs-lookup"><span data-stu-id="285f2-218">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="285f2-219">Los valores predeterminados pueden especificarse en la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-219">Default values can be specified in the route template.</span></span> <span data-ttu-id="285f2-220">El parámetro de ruta `article` se define como un *comodín* por la aparición de un asterisco `*` antes del nombre del parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-220">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="285f2-221">Los parámetros de ruta comodín capturan el resto de la ruta de dirección URL y también pueden coincidir con la cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="285f2-221">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="285f2-222">En este ejemplo se agregan restricciones de ruta y tokens de datos:</span><span class="sxs-lookup"><span data-stu-id="285f2-222">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="285f2-223">Esta plantilla coincide con una ruta de dirección URL como `/en-US/Products/5` y extrae los valores `{ controller = Products, action = Details, id = 5 }` y los tokens de datos `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="285f2-223">This template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokens de Windows de variables locales](routing/_static/tokens.png)

### <a name="url-generation"></a><span data-ttu-id="285f2-225">Generación de dirección URL</span><span class="sxs-lookup"><span data-stu-id="285f2-225">URL generation</span></span>

<span data-ttu-id="285f2-226">La clase `Route` también puede llevar a cabo la generación de dirección URL mediante la combinación de un conjunto de valores de ruta con su plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-226">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="285f2-227">Se trata lógicamente del proceso inverso de hacer coincidir la ruta de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-227">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="285f2-228">Para entender mejor la generación de direcciones URL, imagine qué dirección URL quiere generar y, después, piense cómo coincidiría una plantilla de ruta con esa dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-228">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="285f2-229">¿Qué valores se generarían?</span><span class="sxs-lookup"><span data-stu-id="285f2-229">What values would be produced?</span></span> <span data-ttu-id="285f2-230">Este es un equivalente aproximado de cómo funciona la generación de dirección URL en la clase `Route`.</span><span class="sxs-lookup"><span data-stu-id="285f2-230">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="285f2-231">En este ejemplo se usa una ruta básica de estilo de ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="285f2-231">This example uses a basic ASP.NET Core MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="285f2-232">Con los valores de ruta `{ controller = Products, action = List }`, esta ruta genera la dirección URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="285f2-232">With the route values `{ controller = Products, action = List }`, this route generates the URL `/Products/List`.</span></span> <span data-ttu-id="285f2-233">Los valores de ruta se sustituyen por los parámetros de ruta correspondientes para formar la ruta de dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-233">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="285f2-234">Dado que `id` es un parámetro de ruta opcional, no supone ningún problema que no tenga un valor.</span><span class="sxs-lookup"><span data-stu-id="285f2-234">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="285f2-235">Con los valores de ruta `{ controller = Home, action = Index }`, esta ruta genera la dirección URL `/`.</span><span class="sxs-lookup"><span data-stu-id="285f2-235">With the route values `{ controller = Home, action = Index }`, this route generates the URL `/`.</span></span> <span data-ttu-id="285f2-236">Los valores de ruta que se proporcionaron coinciden con los valores predeterminados, por lo que los segmentos correspondientes con esos valores se pueden omitir sin ningún riesgo.</span><span class="sxs-lookup"><span data-stu-id="285f2-236">The route values that were provided match the default values so that the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="285f2-237">Ambas direcciones URL generadas realizan un recorrido de ida y vuelta con esta definición de ruta y generan los mismos valores de ruta que se usaron para generar la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-237">Both URLs generated round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

> [!TIP]
> <span data-ttu-id="285f2-238">Las aplicaciones con ASP.NET Core MVC deben usar <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> para generar direcciones URL en lugar de llamar directamente al enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="285f2-238">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="285f2-239">Para obtener más información sobre la generación de direcciones URL, vea [url-generation-reference](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="285f2-239">For more information about URL generation, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="285f2-240">Uso de software intermedio de enrutamiento</span><span class="sxs-lookup"><span data-stu-id="285f2-240">Use Routing Middleware</span></span>

::: moniker range=">= aspnetcore-2.1"

<span data-ttu-id="285f2-241">Haga referencia al [metapaquete Microsoft.AspNetCore.App](xref:fundamentals/metapackage-app) en el archivo de proyecto de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-241">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

::: moniker-end

::: moniker range="= aspnetcore-2.0"

<span data-ttu-id="285f2-242">Haga referencia al [metapaquete Microsoft.AspNetCore.All](xref:fundamentals/metapackage) en el archivo de proyecto de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-242">Reference the [Microsoft.AspNetCore.All metapackage](xref:fundamentals/metapackage) in the app's project file.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.0"

<span data-ttu-id="285f2-243">Haga referencia a [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) en el archivo de proyecto de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-243">Reference the [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) in the app's project file.</span></span>

::: moniker-end

<span data-ttu-id="285f2-244">Agregue enrutamiento al contenedor de servicios en `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="285f2-244">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

<span data-ttu-id="285f2-245">Las rutas se deben configurar en el método `Startup.Configure`.</span><span class="sxs-lookup"><span data-stu-id="285f2-245">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="285f2-246">En la aplicación de ejemplo se usan estas API:</span><span class="sxs-lookup"><span data-stu-id="285f2-246">The sample app uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="285f2-247">`MapGet` &ndash; solo coincide con solicitudes HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="285f2-247">`MapGet` &ndash; Matches only HTTP GET requests.</span></span>
* `UseRouter`

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

<span data-ttu-id="285f2-248">En la tabla siguiente se muestran las respuestas con los URI especificados.</span><span class="sxs-lookup"><span data-stu-id="285f2-248">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="285f2-249">Identificador URI</span><span class="sxs-lookup"><span data-stu-id="285f2-249">URI</span></span>                  | <span data-ttu-id="285f2-250">Respuesta</span><span class="sxs-lookup"><span data-stu-id="285f2-250">Response</span></span>                                          |
| -------------------- | ------------------------------------------------- |
| <span data-ttu-id="285f2-251">/package/create/3</span><span class="sxs-lookup"><span data-stu-id="285f2-251">/package/create/3</span></span>    | <span data-ttu-id="285f2-252">Hello!</span><span class="sxs-lookup"><span data-stu-id="285f2-252">Hello!</span></span> <span data-ttu-id="285f2-253">Valores de ruta: [operation, create], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="285f2-253">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="285f2-254">/package/track/-3</span><span class="sxs-lookup"><span data-stu-id="285f2-254">/package/track/-3</span></span>    | <span data-ttu-id="285f2-255">Hello!</span><span class="sxs-lookup"><span data-stu-id="285f2-255">Hello!</span></span> <span data-ttu-id="285f2-256">Valores de ruta: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="285f2-256">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="285f2-257">/package/track/-3/</span><span class="sxs-lookup"><span data-stu-id="285f2-257">/package/track/-3/</span></span>   | <span data-ttu-id="285f2-258">Hello!</span><span class="sxs-lookup"><span data-stu-id="285f2-258">Hello!</span></span> <span data-ttu-id="285f2-259">Valores de ruta: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="285f2-259">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="285f2-260">/package/track/</span><span class="sxs-lookup"><span data-stu-id="285f2-260">/package/track/</span></span>      | <span data-ttu-id="285f2-261">&lt;Pasar explícitamente, ninguna coincidencia&gt;</span><span class="sxs-lookup"><span data-stu-id="285f2-261">&lt;Fall through, no match&gt;</span></span>                    |
| <span data-ttu-id="285f2-262">GET /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="285f2-262">GET /hello/Joe</span></span>       | <span data-ttu-id="285f2-263">Hi, Joe!</span><span class="sxs-lookup"><span data-stu-id="285f2-263">Hi, Joe!</span></span>                                          |
| <span data-ttu-id="285f2-264">POST /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="285f2-264">POST /hello/Joe</span></span>      | <span data-ttu-id="285f2-265">&lt;Pasar explícitamente, solo coincide con HTTP GET&gt;</span><span class="sxs-lookup"><span data-stu-id="285f2-265">&lt;Fall through, matches HTTP GET only&gt;</span></span>       |
| <span data-ttu-id="285f2-266">GET /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="285f2-266">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="285f2-267">&lt;Pasar explícitamente, ninguna coincidencia&gt;</span><span class="sxs-lookup"><span data-stu-id="285f2-267">&lt;Fall through, no match&gt;</span></span>                    |

<span data-ttu-id="285f2-268">Si va a configurar una única ruta, pase una instancia de `IRouter` para llamar a <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*>.</span><span class="sxs-lookup"><span data-stu-id="285f2-268">If you're configuring a single route, call <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passing in an `IRouter` instance.</span></span> <span data-ttu-id="285f2-269">No tendrá que usar <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="285f2-269">You won't need to use <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span></span>

<span data-ttu-id="285f2-270">El marco de trabajo proporciona un conjunto de métodos de extensión para crear rutas, como los siguientes:</span><span class="sxs-lookup"><span data-stu-id="285f2-270">The framework provides a set of extension methods for creating routes, such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="285f2-271">Algunos de estos métodos, como `MapGet`, requieren que se proporcione un valor `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="285f2-271">Some of these methods, such as `MapGet`, require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="285f2-272">El valor `RequestDelegate` se usa como *controlador de ruta* cuando la ruta coincida.</span><span class="sxs-lookup"><span data-stu-id="285f2-272">The `RequestDelegate` is used as the *route handler* when the route matches.</span></span> <span data-ttu-id="285f2-273">Otros métodos de esta familia permiten configurar una canalización de software intermedio para usarla como controlador de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-273">Other methods in this family allow configuring a middleware pipeline for use as the route handler.</span></span> <span data-ttu-id="285f2-274">Si el método *Map* no acepta un controlador, como `MapRoute`, usa <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="285f2-274">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it uses the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span>

<span data-ttu-id="285f2-275">Los métodos `Map[Verb]` usan restricciones para limitar la ruta al verbo HTTP en el nombre del método.</span><span class="sxs-lookup"><span data-stu-id="285f2-275">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="285f2-276">Por ejemplo, vea <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> y <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="285f2-276">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="285f2-277">Referencia de plantilla de ruta</span><span class="sxs-lookup"><span data-stu-id="285f2-277">Route template reference</span></span>

<span data-ttu-id="285f2-278">Los tokens entre llaves (`{ ... }`) definen *parámetros de ruta* que se enlazan si se encuentran coincidencias con la ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-278">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="285f2-279">Puede definir más de un parámetro de ruta en un segmento de ruta, pero deben estar separados por un valor literal.</span><span class="sxs-lookup"><span data-stu-id="285f2-279">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="285f2-280">Por ejemplo, `{controller=Home}{action=Index}` no es una ruta válida, ya que no hay ningún valor literal entre `{controller}` y `{action}`.</span><span class="sxs-lookup"><span data-stu-id="285f2-280">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="285f2-281">Estos parámetros de ruta deben tener un nombre y, opcionalmente, atributos adicionales especificados.</span><span class="sxs-lookup"><span data-stu-id="285f2-281">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="285f2-282">El texto literal diferente de los parámetros de ruta (por ejemplo, `{id}`) y el separador de ruta `/` deben coincidir con el texto de la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-282">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="285f2-283">La coincidencia de texto no distingue mayúsculas de minúsculas y se basa en la representación descodificada de la ruta de las direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-283">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="285f2-284">Para que el delimitador de parámetro de ruta literal `{` o `}` coincida, repita el carácter (`{{` o `}}`) para usarlo como secuencia de escape.</span><span class="sxs-lookup"><span data-stu-id="285f2-284">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="285f2-285">Es necesario tener en cuenta otras consideraciones en el caso de los patrones de dirección URL que intentan capturar un nombre de archivo con una extensión de archivo opcional.</span><span class="sxs-lookup"><span data-stu-id="285f2-285">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="285f2-286">Por ejemplo, considere la plantilla `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="285f2-286">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="285f2-287">Cuando existen `filename` y `ext`, ambos valores se rellenan.</span><span class="sxs-lookup"><span data-stu-id="285f2-287">When both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="285f2-288">Si solo existe `filename` en la dirección URL, la ruta coincide porque el punto final `.` es opcional.</span><span class="sxs-lookup"><span data-stu-id="285f2-288">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="285f2-289">Las direcciones URL siguientes coinciden con esta ruta:</span><span class="sxs-lookup"><span data-stu-id="285f2-289">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="285f2-290">Se puede usar el carácter `*` como prefijo de un parámetro de ruta para enlazar con el resto del URI.</span><span class="sxs-lookup"><span data-stu-id="285f2-290">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="285f2-291">Es lo que se denomina un parámetro *comodín*.</span><span class="sxs-lookup"><span data-stu-id="285f2-291">This is called a *catch-all* parameter.</span></span> <span data-ttu-id="285f2-292">Por ejemplo, `blog/{*slug}` coincide con cualquier URI que empiece por `/blog` y que vaya seguido de cualquier valor (que se asigna al valor de ruta `slug`).</span><span class="sxs-lookup"><span data-stu-id="285f2-292">For example, `blog/{*slug}` matches any URI that starts with `/blog` and had any value following it (which is assigned to the `slug` route value).</span></span> <span data-ttu-id="285f2-293">Los parámetros comodín también pueden coincidir con una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="285f2-293">Catch-all parameters can also match the empty string.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="285f2-294">El parámetro catch-all inserta los caracteres de escape correspondientes cuando se usa la ruta para generar una dirección URL, incluidos caracteres de separación de ruta de acceso (`/`).</span><span class="sxs-lookup"><span data-stu-id="285f2-294">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="285f2-295">Por ejemplo, la ruta `foo/{*path}` con valores de ruta `{ path = "my/path" }` genera `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="285f2-295">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="285f2-296">Tenga en cuenta la barra diagonal de escape.</span><span class="sxs-lookup"><span data-stu-id="285f2-296">Note the escaped forward slash.</span></span> <span data-ttu-id="285f2-297">Para los caracteres separadores de ruta de acceso de ida y vuelta, use el prefijo de parámetro de ruta `**`.</span><span class="sxs-lookup"><span data-stu-id="285f2-297">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="285f2-298">La ruta `foo/{**path}` con `{ path = "my/path" }` genera `foo/my/path`.</span><span class="sxs-lookup"><span data-stu-id="285f2-298">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

::: moniker-end

<span data-ttu-id="285f2-299">Los parámetros de ruta pueden tener *valores predeterminados*. Para designar un valor predeterminado, se especifica después del nombre de parámetro, separado por un signo igual (`=`).</span><span class="sxs-lookup"><span data-stu-id="285f2-299">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an equals sign (`=`).</span></span> <span data-ttu-id="285f2-300">Por ejemplo, `{controller=Home}` define `Home` como el valor predeterminado de `controller`.</span><span class="sxs-lookup"><span data-stu-id="285f2-300">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="285f2-301">El valor predeterminado se usa si no hay ningún valor en la dirección URL para el parámetro.</span><span class="sxs-lookup"><span data-stu-id="285f2-301">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="285f2-302">Además de los valores predeterminados, los parámetros de ruta pueden ser opcionales (para especificarlos, se anexa un signo de interrogación (`?`) al final del nombre del parámetro, como en `id?`).</span><span class="sxs-lookup"><span data-stu-id="285f2-302">In addition to default values, route parameters may be optional, specified by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="285f2-303">La diferencia entre los valores opcionales y los parámetros de ruta predeterminados es que un parámetro de ruta con un valor predeterminado siempre genera un valor, mientras que un parámetro opcional tiene un valor solo cuando la dirección URL de solicitud le proporciona uno.</span><span class="sxs-lookup"><span data-stu-id="285f2-303">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value; an optional parameter has a value only when a value is provided by the request URL.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="285f2-304">Los parámetros de ruta pueden tener restricciones, que deben coincidir con el valor de ruta enlazado desde la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-304">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="285f2-305">Si se agrega un carácter de dos puntos (`:`) y un nombre de restricción después del nombre del parámetro de ruta, se especifica una *restricción insertada* en un parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-305">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="285f2-306">Si la restricción requiere argumentos, se incluyen entre paréntesis `( )` después del nombre de restricción.</span><span class="sxs-lookup"><span data-stu-id="285f2-306">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="285f2-307">Se pueden especificar varias restricciones insertadas si se anexa otro carácter de dos puntos (`:`) y un nombre de restricción.</span><span class="sxs-lookup"><span data-stu-id="285f2-307">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="285f2-308">El nombre de restricción y los argumentos se pasan al servicio <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> para crear una instancia de <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> para su uso en el procesamiento de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-308">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="285f2-309">Si el constructor de restricción requiere servicios, se resuelven a partir de los servicios de aplicación de la inserción de dependencias.</span><span class="sxs-lookup"><span data-stu-id="285f2-309">If the constraint constructor requires services, they're resolved from dependency injection's app services.</span></span> <span data-ttu-id="285f2-310">Por ejemplo, la plantilla de ruta `blog/{article:minlength(10)}` especifica una restricción `minlength` con el argumento `10`.</span><span class="sxs-lookup"><span data-stu-id="285f2-310">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="285f2-311">Para obtener más información sobre las restricciones de ruta y una lista de las restricciones proporcionadas por el marco de trabajo, vea la sección [Referencia de restricciones de ruta](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="285f2-311">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="285f2-312">Los parámetros de ruta pueden tener restricciones, que deben coincidir con el valor de ruta enlazado desde la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-312">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="285f2-313">Si se agrega un carácter de dos puntos (`:`) y un nombre de restricción después del nombre del parámetro de ruta, se especifica una *restricción insertada* en un parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-313">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="285f2-314">Si la restricción requiere argumentos, se incluyen entre paréntesis `( )` después del nombre de restricción.</span><span class="sxs-lookup"><span data-stu-id="285f2-314">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="285f2-315">Se pueden especificar varias restricciones insertadas si se anexa otro carácter de dos puntos (`:`) y un nombre de restricción.</span><span class="sxs-lookup"><span data-stu-id="285f2-315">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="285f2-316">El nombre de restricción y los argumentos se pasan al servicio <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> para crear una instancia de <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> para su uso en el procesamiento de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-316">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="285f2-317">Por ejemplo, la plantilla de ruta `blog/{article:minlength(10)}` especifica una restricción `minlength` con el argumento `10`.</span><span class="sxs-lookup"><span data-stu-id="285f2-317">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="285f2-318">Para obtener más información sobre las restricciones de ruta y una lista de las restricciones proporcionadas por el marco de trabajo, vea la sección [Referencia de restricciones de ruta](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="285f2-318">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="285f2-319">Los parámetros de ruta también pueden tener transformadores de parámetros, que transforman el valor de un parámetro al generar vínculos y acciones y páginas coincidentes para los URI.</span><span class="sxs-lookup"><span data-stu-id="285f2-319">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URIs.</span></span> <span data-ttu-id="285f2-320">Al igual que las restricciones, los transformadores de parámetros se pueden agregar en línea a un parámetro de ruta al incorporar un carácter de dos puntos (`:`) y un nombre de transformador después del nombre del parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-320">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="285f2-321">Por ejemplo, la plantilla de ruta `blog/{article:slugify}` especifica un transformador `slugify`.</span><span class="sxs-lookup"><span data-stu-id="285f2-321">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span>

::: moniker-end

<span data-ttu-id="285f2-322">En la tabla siguiente se muestran algunas plantillas de ruta y su comportamiento.</span><span class="sxs-lookup"><span data-stu-id="285f2-322">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="285f2-323">Plantilla de ruta</span><span class="sxs-lookup"><span data-stu-id="285f2-323">Route Template</span></span>                         | <span data-ttu-id="285f2-324">Dirección URL coincidente de ejemplo</span><span class="sxs-lookup"><span data-stu-id="285f2-324">Example Matching URL</span></span>  | <span data-ttu-id="285f2-325">Notas</span><span class="sxs-lookup"><span data-stu-id="285f2-325">Notes</span></span>                                                                  |
| -------------------------------------- | --------------------- | ---------------------------------------------------------------------- |
| <span data-ttu-id="285f2-326">hello</span><span class="sxs-lookup"><span data-stu-id="285f2-326">hello</span></span>                                  | <span data-ttu-id="285f2-327">/hello</span><span class="sxs-lookup"><span data-stu-id="285f2-327">/hello</span></span>                | <span data-ttu-id="285f2-328">Solo coincide con la ruta de acceso única `/hello`</span><span class="sxs-lookup"><span data-stu-id="285f2-328">Only matches the single path `/hello`</span></span>                                  |
| <span data-ttu-id="285f2-329">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="285f2-329">{Page=Home}</span></span>                            | /                     | <span data-ttu-id="285f2-330">Coincide y establece `Page` en `Home`</span><span class="sxs-lookup"><span data-stu-id="285f2-330">Matches and sets `Page` to `Home`</span></span>                                      |
| <span data-ttu-id="285f2-331">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="285f2-331">{Page=Home}</span></span>                            | <span data-ttu-id="285f2-332">/Contact</span><span class="sxs-lookup"><span data-stu-id="285f2-332">/Contact</span></span>              | <span data-ttu-id="285f2-333">Coincide y establece `Page` en `Contact`</span><span class="sxs-lookup"><span data-stu-id="285f2-333">Matches and sets `Page` to `Contact`</span></span>                                   |
| <span data-ttu-id="285f2-334">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="285f2-334">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="285f2-335">/Products/List</span><span class="sxs-lookup"><span data-stu-id="285f2-335">/Products/List</span></span>        | <span data-ttu-id="285f2-336">Se asigna al controlador `Products` y la acción `List`</span><span class="sxs-lookup"><span data-stu-id="285f2-336">Maps to `Products` controller and `List`  action</span></span>                       |
| <span data-ttu-id="285f2-337">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="285f2-337">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="285f2-338">/Products/Details/123</span><span class="sxs-lookup"><span data-stu-id="285f2-338">/Products/Details/123</span></span> |  <span data-ttu-id="285f2-339">Se asigna al controlador `Products` y la acción `Details`.</span><span class="sxs-lookup"><span data-stu-id="285f2-339">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="285f2-340">`id` se establece en 123</span><span class="sxs-lookup"><span data-stu-id="285f2-340">`id` set to 123</span></span> |
| <span data-ttu-id="285f2-341">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="285f2-341">{controller=Home}/{action=Index}/{id?}</span></span> | /                     |  <span data-ttu-id="285f2-342">Se asigna al controlador `Home` y el método `Index`; `id` se omite</span><span class="sxs-lookup"><span data-stu-id="285f2-342">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span>       |

<span data-ttu-id="285f2-343">El uso de una plantilla suele ser el método de enrutamiento más sencillo.</span><span class="sxs-lookup"><span data-stu-id="285f2-343">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="285f2-344">Las restricciones y los valores predeterminados también se pueden especificar fuera de la plantilla de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-344">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="285f2-345">Habilite el [registro](xref:fundamentals/logging/index) para ver de qué forma las implementaciones de enrutamiento integradas, como `Route`, coinciden con las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="285f2-345">Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="285f2-346">Nombres de enrutamientos reservados</span><span class="sxs-lookup"><span data-stu-id="285f2-346">Reserved routing names</span></span>

<span data-ttu-id="285f2-347">Las siguientes palabras clave son nombres reservados y no se pueden usar como nombres de ruta o parámetros:</span><span class="sxs-lookup"><span data-stu-id="285f2-347">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="285f2-348">Referencia de restricción de ruta</span><span class="sxs-lookup"><span data-stu-id="285f2-348">Route constraint reference</span></span>

<span data-ttu-id="285f2-349">Las restricciones de ruta se ejecutan cuando un valor `Route` ha coincidido con la sintaxis de la dirección URL entrante y ha convertido la ruta de dirección URL en valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-349">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="285f2-350">En general, las restricciones de ruta inspeccionan el valor de ruta asociado a través de la plantilla de ruta y deciden si el valor es aceptable o no.</span><span class="sxs-lookup"><span data-stu-id="285f2-350">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="285f2-351">Algunas restricciones de ruta usan datos ajenos al valor de ruta para decidir si la solicitud se puede enrutar.</span><span class="sxs-lookup"><span data-stu-id="285f2-351">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="285f2-352">Por ejemplo, <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> puede aceptar o rechazar una solicitud basada en su verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="285f2-352">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span>

> [!WARNING]
> <span data-ttu-id="285f2-353">Evite el uso de restricciones para la **validación de entradas**, porque si lo hace, la entrada no válida producirá un error *404 - No encontrado* en lugar de un error *400 - Solicitud incorrecta* con el mensaje de error adecuado.</span><span class="sxs-lookup"><span data-stu-id="285f2-353">Avoid using constraints for **input validation** because doing so means that invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="285f2-354">Las restricciones de ruta se usan para **eliminar la ambigüedad** entre rutas similares, no para validar las entradas de una ruta determinada.</span><span class="sxs-lookup"><span data-stu-id="285f2-354">Route constraints are used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="285f2-355">En la tabla siguiente se muestran algunas restricciones de ruta y su comportamiento esperado.</span><span class="sxs-lookup"><span data-stu-id="285f2-355">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="285f2-356">restricción</span><span class="sxs-lookup"><span data-stu-id="285f2-356">constraint</span></span> | <span data-ttu-id="285f2-357">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="285f2-357">Example</span></span> | <span data-ttu-id="285f2-358">Coincidencias de ejemplo</span><span class="sxs-lookup"><span data-stu-id="285f2-358">Example Matches</span></span> | <span data-ttu-id="285f2-359">Notas</span><span class="sxs-lookup"><span data-stu-id="285f2-359">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="285f2-360">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="285f2-360">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="285f2-361">Coincide con cualquier entero</span><span class="sxs-lookup"><span data-stu-id="285f2-361">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="285f2-362">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="285f2-362">`true`, `FALSE`</span></span> | <span data-ttu-id="285f2-363">Coincide con `true` o `false` (no distingue mayúsculas de minúsculas)</span><span class="sxs-lookup"><span data-stu-id="285f2-363">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="285f2-364">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="285f2-364">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="285f2-365">Coincide con un valor `DateTime` válido (en la referencia cultural invariable; vea la advertencia)</span><span class="sxs-lookup"><span data-stu-id="285f2-365">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="285f2-366">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="285f2-366">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="285f2-367">Coincide con un valor `decimal` válido (en la referencia cultural invariable; vea la advertencia)</span><span class="sxs-lookup"><span data-stu-id="285f2-367">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="285f2-368">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="285f2-368">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="285f2-369">Coincide con un valor `double` válido (en la referencia cultural invariable; vea la advertencia)</span><span class="sxs-lookup"><span data-stu-id="285f2-369">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="285f2-370">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="285f2-370">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="285f2-371">Coincide con un valor `float` válido (en la referencia cultural invariable; vea la advertencia)</span><span class="sxs-lookup"><span data-stu-id="285f2-371">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="285f2-372">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="285f2-372">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="285f2-373">Coincide con un valor `Guid` válido</span><span class="sxs-lookup"><span data-stu-id="285f2-373">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="285f2-374">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="285f2-374">`123456789`, `-123456789`</span></span> | <span data-ttu-id="285f2-375">Coincide con un valor `long` válido</span><span class="sxs-lookup"><span data-stu-id="285f2-375">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="285f2-376">La cadena debe tener al menos cuatro caracteres</span><span class="sxs-lookup"><span data-stu-id="285f2-376">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="285f2-377">La cadena no debe tener más de ocho caracteres</span><span class="sxs-lookup"><span data-stu-id="285f2-377">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="285f2-378">La cadena debe tener una longitud de exactamente 12 caracteres</span><span class="sxs-lookup"><span data-stu-id="285f2-378">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="285f2-379">La cadena debe tener una longitud como mínimo de ocho caracteres y como máximo de 16</span><span class="sxs-lookup"><span data-stu-id="285f2-379">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="285f2-380">El valor entero debe ser como mínimo 18</span><span class="sxs-lookup"><span data-stu-id="285f2-380">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="285f2-381">El valor entero debe ser como máximo 120</span><span class="sxs-lookup"><span data-stu-id="285f2-381">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="285f2-382">El valor entero debe ser como mínimo 18 y máximo 120</span><span class="sxs-lookup"><span data-stu-id="285f2-382">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="285f2-383">La cadena debe constar de uno o más caracteres alfabéticos (`a`-`z`, no distingue mayúsculas de minúsculas)</span><span class="sxs-lookup"><span data-stu-id="285f2-383">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="285f2-384">La cadena debe coincidir con la expresión regular (vea las sugerencias sobre cómo definir una expresión regular)</span><span class="sxs-lookup"><span data-stu-id="285f2-384">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` |  <span data-ttu-id="285f2-385">Se usa para exigir que un valor que no es de parámetro esté presente durante la generación de dirección URL</span><span class="sxs-lookup"><span data-stu-id="285f2-385">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="285f2-386">Es posible aplicar varias restricciones delimitadas por dos puntos a un único parámetro.</span><span class="sxs-lookup"><span data-stu-id="285f2-386">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="285f2-387">Por ejemplo, la siguiente restricción permite limitar un parámetro a un valor entero de 1 o superior:</span><span class="sxs-lookup"><span data-stu-id="285f2-387">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="285f2-388">Las restricciones de ruta que comprueban la dirección URL y que se convierten en un tipo CLR (como `int` o `DateTime`) usan siempre la referencia cultural invariable.</span><span class="sxs-lookup"><span data-stu-id="285f2-388">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="285f2-389">Estas restricciones dan por supuesto que la dirección URL no es localizable.</span><span class="sxs-lookup"><span data-stu-id="285f2-389">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="285f2-390">Las restricciones de ruta proporcionadas por el marco de trabajo no modifican los valores almacenados en los valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-390">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="285f2-391">Todos los valores de ruta analizados desde la dirección URL se almacenan como cadenas.</span><span class="sxs-lookup"><span data-stu-id="285f2-391">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="285f2-392">Por ejemplo, la restricción `float` intenta convertir el valor de ruta en un valor Float, pero el valor convertido se usa exclusivamente para comprobar que se puede convertir en Float.</span><span class="sxs-lookup"><span data-stu-id="285f2-392">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="285f2-393">Expresiones regulares</span><span class="sxs-lookup"><span data-stu-id="285f2-393">Regular expressions</span></span>

<span data-ttu-id="285f2-394">El marco de trabajo de ASP.NET Core agrega `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` al constructor de expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="285f2-394">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="285f2-395">Vea <xref:System.Text.RegularExpressions.RegexOptions> para obtener una descripción de estos miembros.</span><span class="sxs-lookup"><span data-stu-id="285f2-395">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="285f2-396">Las expresiones regulares usan delimitadores y tokens similares a los que usan el enrutamiento y el lenguaje C#.</span><span class="sxs-lookup"><span data-stu-id="285f2-396">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="285f2-397">Es necesario usar secuencias de escape con los tokens de expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="285f2-397">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="285f2-398">Para usar la expresión regular `^\d{3}-\d{2}-\d{4}$` en el enrutamiento, es necesario escribir los caracteres `\` de la expresión como `\\` en el archivo de código fuente de C# para que el carácter de escape de cadena `\` tenga una secuencia de escape (a menos que se usen [literales de cadena textuales](/dotnet/csharp/language-reference/keywords/string)).</span><span class="sxs-lookup"><span data-stu-id="285f2-398">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, the expression must have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="285f2-399">Es necesario incluir una secuencia de escape en los caracteres `{`, `}`, `[` y `]`. Para ello, duplíquelos a fin de incluir una secuencia de escape en los caracteres delimitadores del parámetro de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="285f2-399">The `{`, `}`, `[`, and `]` characters must be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span> <span data-ttu-id="285f2-400">En la tabla siguiente se muestra una expresión regular y la versión con una secuencia de escape.</span><span class="sxs-lookup"><span data-stu-id="285f2-400">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="285f2-401">Expresión</span><span class="sxs-lookup"><span data-stu-id="285f2-401">Expression</span></span>            | <span data-ttu-id="285f2-402">Con secuencia de escape</span><span class="sxs-lookup"><span data-stu-id="285f2-402">Escaped</span></span>                        |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="285f2-403">Las expresiones regulares que se usan en el enrutamiento suelen empezar con el carácter `^` (coincidencia con la posición inicial de la cadena) y terminar con el carácter `$` (coincidencia con la posición final de la cadena).</span><span class="sxs-lookup"><span data-stu-id="285f2-403">Regular expressions used in routing often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="285f2-404">Los caracteres `^` y `$` garantizan que la expresión regular coincide con el valor completo del parámetro de ruta.</span><span class="sxs-lookup"><span data-stu-id="285f2-404">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="285f2-405">Sin los caracteres `^` y `$`, la expresión regular coincide con cualquier subcadena de la cadena, algo que normalmente no es deseable.</span><span class="sxs-lookup"><span data-stu-id="285f2-405">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="285f2-406">En la tabla siguiente se muestran algunos ejemplos y se explica por qué que coinciden o no.</span><span class="sxs-lookup"><span data-stu-id="285f2-406">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="285f2-407">Expresión</span><span class="sxs-lookup"><span data-stu-id="285f2-407">Expression</span></span>   | <span data-ttu-id="285f2-408">String</span><span class="sxs-lookup"><span data-stu-id="285f2-408">String</span></span>    | <span data-ttu-id="285f2-409">Coincidir con</span><span class="sxs-lookup"><span data-stu-id="285f2-409">Match</span></span> | <span data-ttu-id="285f2-410">Comentario</span><span class="sxs-lookup"><span data-stu-id="285f2-410">Comment</span></span>               |
| ------------ | --------- |  ---- |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="285f2-411">hello</span><span class="sxs-lookup"><span data-stu-id="285f2-411">hello</span></span>     | <span data-ttu-id="285f2-412">Sí</span><span class="sxs-lookup"><span data-stu-id="285f2-412">Yes</span></span>   | <span data-ttu-id="285f2-413">Coincidencias de subcadenas</span><span class="sxs-lookup"><span data-stu-id="285f2-413">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="285f2-414">123abc456</span><span class="sxs-lookup"><span data-stu-id="285f2-414">123abc456</span></span> | <span data-ttu-id="285f2-415">Sí</span><span class="sxs-lookup"><span data-stu-id="285f2-415">Yes</span></span>   | <span data-ttu-id="285f2-416">Coincidencias de subcadenas</span><span class="sxs-lookup"><span data-stu-id="285f2-416">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="285f2-417">mz</span><span class="sxs-lookup"><span data-stu-id="285f2-417">mz</span></span>        | <span data-ttu-id="285f2-418">Sí</span><span class="sxs-lookup"><span data-stu-id="285f2-418">Yes</span></span>   | <span data-ttu-id="285f2-419">Coincide con la expresión</span><span class="sxs-lookup"><span data-stu-id="285f2-419">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="285f2-420">MZ</span><span class="sxs-lookup"><span data-stu-id="285f2-420">MZ</span></span>        | <span data-ttu-id="285f2-421">Sí</span><span class="sxs-lookup"><span data-stu-id="285f2-421">Yes</span></span>   | <span data-ttu-id="285f2-422">No distingue mayúsculas de minúsculas</span><span class="sxs-lookup"><span data-stu-id="285f2-422">Not case sensitive</span></span>    |
| `^[a-z]{2}$` |  <span data-ttu-id="285f2-423">hello</span><span class="sxs-lookup"><span data-stu-id="285f2-423">hello</span></span>    | <span data-ttu-id="285f2-424">No</span><span class="sxs-lookup"><span data-stu-id="285f2-424">No</span></span>    | <span data-ttu-id="285f2-425">Vea `^` y `$` más arriba</span><span class="sxs-lookup"><span data-stu-id="285f2-425">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="285f2-426">123abc456</span><span class="sxs-lookup"><span data-stu-id="285f2-426">123abc456</span></span> | <span data-ttu-id="285f2-427">No</span><span class="sxs-lookup"><span data-stu-id="285f2-427">No</span></span>    | <span data-ttu-id="285f2-428">Vea `^` y `$` más arriba</span><span class="sxs-lookup"><span data-stu-id="285f2-428">See `^` and `$` above</span></span> |

<span data-ttu-id="285f2-429">Para obtener más información sobre la sintaxis de expresiones regulares, vea [Expresiones regulares de .NET Framework](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="285f2-429">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="285f2-430">Para restringir un parámetro a un conjunto conocido de valores posibles, use una expresión regular.</span><span class="sxs-lookup"><span data-stu-id="285f2-430">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="285f2-431">Por ejemplo, `{action:regex(^(list|get|create)$)}` solo hace coincidir el valor de ruta `action` con `list`, `get` o `create`.</span><span class="sxs-lookup"><span data-stu-id="285f2-431">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="285f2-432">Si se pasa al diccionario de restricciones, la cadena `^(list|get|create)$` es equivalente.</span><span class="sxs-lookup"><span data-stu-id="285f2-432">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="285f2-433">Las restricciones que se pasan al diccionario de restricciones (no insertado en una plantilla) que no coinciden con una de las restricciones conocidas también se tratan como expresiones regulares.</span><span class="sxs-lookup"><span data-stu-id="285f2-433">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

::: moniker range=">= aspnetcore-2.2"

## <a name="parameter-transformer-reference"></a><span data-ttu-id="285f2-434">Referencia de transformadores de parámetros</span><span class="sxs-lookup"><span data-stu-id="285f2-434">Parameter transformer reference</span></span>

<span data-ttu-id="285f2-435">Transformadores de parámetros:</span><span class="sxs-lookup"><span data-stu-id="285f2-435">Parameter transformers:</span></span>

* <span data-ttu-id="285f2-436">Se ejecutan al generar un vínculo para `Route`.</span><span class="sxs-lookup"><span data-stu-id="285f2-436">Execute when generating a link for a `Route`.</span></span>
* <span data-ttu-id="285f2-437">Implemente `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span><span class="sxs-lookup"><span data-stu-id="285f2-437">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="285f2-438">Se configuran con <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span><span class="sxs-lookup"><span data-stu-id="285f2-438">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="285f2-439">Toman el valor de ruta del parámetro y lo transforman en un nuevo valor de cadena.</span><span class="sxs-lookup"><span data-stu-id="285f2-439">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="285f2-440">El valor transformado se usa en el vínculo generado.</span><span class="sxs-lookup"><span data-stu-id="285f2-440">The transformed value is used in the generated link.</span></span>

<span data-ttu-id="285f2-441">Por ejemplo, un transformador de parámetros personalizado `slugify` en el patrón de ruta `blog\{article:slugify}` con `Url.Action(new { article = "MyTestArticle" })` genera `blog\my-test-article`.</span><span class="sxs-lookup"><span data-stu-id="285f2-441">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="285f2-442">Los marcos también usan transformadores de parámetros para transformar el URI en el que se resuelve un punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="285f2-442">Parameter transformers are also used by frameworks to transform the URI to which an endpoint resolves.</span></span> <span data-ttu-id="285f2-443">Por ejemplo, ASP.NET Core MVC usa transformadores de parámetros para transformar el valor de ruta usado para hacer coincidir elementos `area`, `controller`, `action` y `page`.</span><span class="sxs-lookup"><span data-stu-id="285f2-443">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home:slugify}/{action=Index:slugify}/{id?}");
```

<span data-ttu-id="285f2-444">Con la ruta anterior, la acción `SubscriptionManagementController.GetAll()` coincide con el URI `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="285f2-444">With the preceding route, the action `SubscriptionManagementController.GetAll()` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="285f2-445">Un transformador de parámetros no cambia los valores de ruta usados para generar un vínculo.</span><span class="sxs-lookup"><span data-stu-id="285f2-445">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="285f2-446">`Url.Action("GetAll", "SubscriptionManagement")` genera `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="285f2-446">`Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="285f2-447">ASP.NET Core proporciona las convenciones de API para usar transformadores de parámetros con rutas generadas:</span><span class="sxs-lookup"><span data-stu-id="285f2-447">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="285f2-448">ASP.NET Core MVC tiene la convención de API `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention`.</span><span class="sxs-lookup"><span data-stu-id="285f2-448">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="285f2-449">Esta convención aplica un transformador de parámetro especificado a todas las rutas de atributo de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="285f2-449">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="285f2-450">El transformador de parámetro transforma los tokens de rutas de atributo a medida que se reemplazan.</span><span class="sxs-lookup"><span data-stu-id="285f2-450">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="285f2-451">Para más información, consulte [Usar un transformador de parámetro para personalizar el reemplazo de tokens](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span><span class="sxs-lookup"><span data-stu-id="285f2-451">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="285f2-452">Razor Pages tiene la convención de API `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention`.</span><span class="sxs-lookup"><span data-stu-id="285f2-452">Razor pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="285f2-453">Esta convención aplica un transformador de parámetro especificado a todas las instancias de Razor Pages descubiertas automáticamente.</span><span class="sxs-lookup"><span data-stu-id="285f2-453">This convention applies a specified parameter transformer to all automatically discovered Razor pages.</span></span> <span data-ttu-id="285f2-454">El transformador de parámetro transforma los segmentos nombre de archivo y carpeta de las rutas de Razor Pages.</span><span class="sxs-lookup"><span data-stu-id="285f2-454">The parameter transformer transforms the folder and file name segments of Razor page routes.</span></span> <span data-ttu-id="285f2-455">Para más información, consulte el artículo sobre cómo [usar un transformador de parámetro para personalizar rutas de Razor Pages](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span><span class="sxs-lookup"><span data-stu-id="285f2-455">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

::: moniker-end

## <a name="url-generation-reference"></a><span data-ttu-id="285f2-456">Referencia de generación de direcciones URL</span><span class="sxs-lookup"><span data-stu-id="285f2-456">URL generation reference</span></span>

<span data-ttu-id="285f2-457">En el ejemplo siguiente se muestra cómo se genera un vínculo a una ruta, dado un diccionario de valores de ruta y un valor <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="285f2-457">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

<span data-ttu-id="285f2-458">El valor `VirtualPath` generado al final del ejemplo anterior es `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="285f2-458">The `VirtualPath` generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="285f2-459">El diccionario proporciona los valores de ruta `operation` e `id` de la plantilla "Ruta de paquete de seguimiento", `package/{operation}/{id}`.</span><span class="sxs-lookup"><span data-stu-id="285f2-459">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="285f2-460">Para obtener más información, vea el código de ejemplo de la sección [Uso de software intermedio de enrutamiento](#use-routing-middleware) o la [aplicación de ejemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="285f2-460">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="285f2-461">El segundo parámetro del constructor `VirtualPathContext` es una colección de *valores de ambiente*.</span><span class="sxs-lookup"><span data-stu-id="285f2-461">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="285f2-462">Los valores de ambiente aportan comodidad al limitar el número de valores que el desarrollador debe especificar dentro de un determinado contexto de solicitud.</span><span class="sxs-lookup"><span data-stu-id="285f2-462">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="285f2-463">Los valores de ruta actuales de la solicitud actual se consideran valores de ambiente para la generación de vínculos.</span><span class="sxs-lookup"><span data-stu-id="285f2-463">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="285f2-464">Si en una aplicación ASP.NET Core MVC se encuentra en la acción `About` de `HomeController`, no es necesario especificar el valor de ruta de controlador para vincular a la acción `Index` (se usará el valor de ambiente `Home`).</span><span class="sxs-lookup"><span data-stu-id="285f2-464">In an ASP.NET Core MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="285f2-465">Los valores de ambiente se omiten cuando no coinciden con un parámetro y cuando un valor proporcionado explícitamente lo invalida al ir de izquierda a derecha en la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="285f2-465">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="285f2-466">Los valores que se proporcionan explícitamente pero que no coinciden con nada se agregan a la cadena de consulta.</span><span class="sxs-lookup"><span data-stu-id="285f2-466">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="285f2-467">En la tabla siguiente se muestra el resultado cuando se usa la plantilla de ruta `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="285f2-467">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="285f2-468">Valores de ambiente</span><span class="sxs-lookup"><span data-stu-id="285f2-468">Ambient Values</span></span>                | <span data-ttu-id="285f2-469">Valores explícitos</span><span class="sxs-lookup"><span data-stu-id="285f2-469">Explicit Values</span></span>                   | <span data-ttu-id="285f2-470">Resultado</span><span class="sxs-lookup"><span data-stu-id="285f2-470">Result</span></span>                  |
| ----------------------------- | --------------------------------- | ----------------------- |
| <span data-ttu-id="285f2-471">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="285f2-471">controller="Home"</span></span>             | <span data-ttu-id="285f2-472">action="About"</span><span class="sxs-lookup"><span data-stu-id="285f2-472">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="285f2-473">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="285f2-473">controller="Home"</span></span>             | <span data-ttu-id="285f2-474">controller="Order",action="About"</span><span class="sxs-lookup"><span data-stu-id="285f2-474">controller="Order",action="About"</span></span> | `/Order/About`          |
| <span data-ttu-id="285f2-475">controller="Home",color="Red"</span><span class="sxs-lookup"><span data-stu-id="285f2-475">controller="Home",color="Red"</span></span> | <span data-ttu-id="285f2-476">action="About"</span><span class="sxs-lookup"><span data-stu-id="285f2-476">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="285f2-477">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="285f2-477">controller="Home"</span></span>             | <span data-ttu-id="285f2-478">action="About",color="Red"</span><span class="sxs-lookup"><span data-stu-id="285f2-478">action="About",color="Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="285f2-479">Si una ruta tiene un valor predeterminado que no se corresponde con un parámetro y ese valor se proporciona de forma explícita, debe coincidir con el valor predeterminado:</span><span class="sxs-lookup"><span data-stu-id="285f2-479">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="285f2-480">La generación de vínculos solo genera un vínculo para esta ruta si se proporcionan los valores coincidentes para el controlador y la acción.</span><span class="sxs-lookup"><span data-stu-id="285f2-480">Link generation only generates a link for this route when the matching values for controller and action are provided.</span></span>
