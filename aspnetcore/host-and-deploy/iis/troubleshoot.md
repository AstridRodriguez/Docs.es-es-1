---
title: Solución de problemas de ASP.NET Core en IIS
author: guardrex
description: Aprenda a diagnosticar problemas con las implementaciones de Internet Information Services (IIS) de aplicaciones ASP.NET Core.
ms.author: riande
ms.custom: mvc
ms.date: 10/24/2018
uid: host-and-deploy/iis/troubleshoot
ms.openlocfilehash: 6a53c1ba5badd741afc3321ce21b047965c611db
ms.sourcegitcommit: 4d74644f11e0dac52b4510048490ae731c691496
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 10/25/2018
ms.locfileid: "50090607"
---
# <a name="troubleshoot-aspnet-core-on-iis"></a><span data-ttu-id="21318-103">Solución de problemas de ASP.NET Core en IIS</span><span class="sxs-lookup"><span data-stu-id="21318-103">Troubleshoot ASP.NET Core on IIS</span></span>

<span data-ttu-id="21318-104">Por [Luke Latham](https://github.com/guardrex)</span><span class="sxs-lookup"><span data-stu-id="21318-104">By [Luke Latham](https://github.com/guardrex)</span></span>

<span data-ttu-id="21318-105">En este artículo se proporcionan instrucciones sobre cómo diagnosticar un problema de inicio de ASP.NET Core al hospedarse con [Internet Information Services (IIS)](/iis).</span><span class="sxs-lookup"><span data-stu-id="21318-105">This article provides instructions on how to diagnose an ASP.NET Core app startup issue when hosting with [Internet Information Services (IIS)](/iis).</span></span> <span data-ttu-id="21318-106">La información de este artículo se aplica al hospedaje en IIS en Windows Server y el escritorio de Windows.</span><span class="sxs-lookup"><span data-stu-id="21318-106">The information in this article applies to hosting in IIS on Windows Server and Windows Desktop.</span></span>

<span data-ttu-id="21318-107">En Visual Studio, un proyecto de ASP.NET Core toma como predeterminado el hospedaje de [IIS Express](/iis/extensions/introduction-to-iis-express/iis-express-overview) durante la depuración.</span><span class="sxs-lookup"><span data-stu-id="21318-107">In Visual Studio, an ASP.NET Core project defaults to [IIS Express](/iis/extensions/introduction-to-iis-express/iis-express-overview) hosting during debugging.</span></span> <span data-ttu-id="21318-108">El código de estado *502.5 Error de proceso* que se produce al realizar la depuración localmente se puede solucionar si se sigue el consejo de este tema.</span><span class="sxs-lookup"><span data-stu-id="21318-108">A *502.5 Process Failure* that occurs when debugging locally can be troubleshooted using the advice in this topic.</span></span>

<span data-ttu-id="21318-109">Temas adicionales de solución de problemas:</span><span class="sxs-lookup"><span data-stu-id="21318-109">Additional troubleshooting topics:</span></span>

<xref:host-and-deploy/azure-apps/troubleshoot>  
<span data-ttu-id="21318-110">Aunque App Service usa el [módulo ASP.NET Core](xref:fundamentals/servers/aspnet-core-module) e IIS para hospedar las aplicaciones, consulte el tema dedicado para obtener instrucciones específicas.</span><span class="sxs-lookup"><span data-stu-id="21318-110">Although App Service uses the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module) and IIS to host apps, see the dedicated topic for instructions specific to App Service.</span></span>

<xref:fundamentals/error-handling>  
<span data-ttu-id="21318-111">Descubra cómo controlar los errores de aplicaciones de ASP.NET Core durante el desarrollo en un sistema local.</span><span class="sxs-lookup"><span data-stu-id="21318-111">Discover how to handle errors in ASP.NET Core apps during development on a local system.</span></span>

[<span data-ttu-id="21318-112">Información sobre cómo depurar con Visual Studio</span><span class="sxs-lookup"><span data-stu-id="21318-112">Learn to debug using Visual Studio</span></span>](/visualstudio/debugger/getting-started-with-the-debugger)  
<span data-ttu-id="21318-113">En este tema se presentan las características del depurador de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="21318-113">This topic introduces the features of the Visual Studio debugger.</span></span>

[<span data-ttu-id="21318-114">Depuración con Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="21318-114">Debugging with Visual Studio Code</span></span>](https://code.visualstudio.com/docs/editor/debugging)  
<span data-ttu-id="21318-115">Obtenga información sobre la compatibilidad de depuración integrada en Visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="21318-115">Learn about the debugging support built into Visual Studio Code.</span></span>

## <a name="app-startup-errors"></a><span data-ttu-id="21318-116">Errores de inicio de aplicación</span><span class="sxs-lookup"><span data-stu-id="21318-116">App startup errors</span></span>

<span data-ttu-id="21318-117">**502.5 Error de proceso**</span><span class="sxs-lookup"><span data-stu-id="21318-117">**502.5 Process Failure**</span></span>  
<span data-ttu-id="21318-118">El proceso de trabajo no funciona.</span><span class="sxs-lookup"><span data-stu-id="21318-118">The worker process fails.</span></span> <span data-ttu-id="21318-119">La aplicación no se inicia.</span><span class="sxs-lookup"><span data-stu-id="21318-119">The app doesn't start.</span></span>

<span data-ttu-id="21318-120">El módulo ASP.NET Core intenta iniciar el proceso de trabajo, pero no lo consigue.</span><span class="sxs-lookup"><span data-stu-id="21318-120">The ASP.NET Core Module attempts to start the worker process but it fails to start.</span></span> <span data-ttu-id="21318-121">La causa del error de inicio del proceso se suele determinar a partir de las entradas del [registro de eventos de la aplicación](#application-event-log) y del [registro de stdout del módulo ASP.NET Core](#aspnet-core-module-stdout-log).</span><span class="sxs-lookup"><span data-stu-id="21318-121">The cause of a process startup failure can usually be determined from entries in the [Application Event Log](#application-event-log) and the [ASP.NET Core Module stdout log](#aspnet-core-module-stdout-log).</span></span>

<span data-ttu-id="21318-122">La página de error *502.5 Error de proceso* se devuelve cuando el proceso de trabajo no se puede iniciar debido a un error de configuración de la aplicación o del hospedaje:</span><span class="sxs-lookup"><span data-stu-id="21318-122">The *502.5 Process Failure* error page is returned when a hosting or app misconfiguration causes the worker process to fail:</span></span>

![Ventana del explorador que muestra la página 502.5 Error de proceso](troubleshoot/_static/process-failure-page.png)

<span data-ttu-id="21318-124">**500 Error interno del servidor**</span><span class="sxs-lookup"><span data-stu-id="21318-124">**500 Internal Server Error**</span></span>  
<span data-ttu-id="21318-125">La aplicación se inicia, pero un error impide que el servidor complete la solicitud.</span><span class="sxs-lookup"><span data-stu-id="21318-125">The app starts, but an error prevents the server from fulfilling the request.</span></span>

<span data-ttu-id="21318-126">Este error se produce dentro del código de la aplicación durante el inicio o mientras se crea una respuesta.</span><span class="sxs-lookup"><span data-stu-id="21318-126">This error occurs within the app's code during startup or while creating a response.</span></span> <span data-ttu-id="21318-127">La respuesta no puede contener nada o puede aparecer como *500 Error interno del servidor* en el explorador.</span><span class="sxs-lookup"><span data-stu-id="21318-127">The response may contain no content, or the response may appear as a *500 Internal Server Error* in the browser.</span></span> <span data-ttu-id="21318-128">El registro de eventos de la aplicación normalmente indica que la aplicación se ha iniciado normalmente.</span><span class="sxs-lookup"><span data-stu-id="21318-128">The Application Event Log usually states that the app started normally.</span></span> <span data-ttu-id="21318-129">Desde la perspectiva del servidor, eso es correcto.</span><span class="sxs-lookup"><span data-stu-id="21318-129">From the server's perspective, that's correct.</span></span> <span data-ttu-id="21318-130">La aplicación se inició, pero no puede generar una respuesta válida.</span><span class="sxs-lookup"><span data-stu-id="21318-130">The app did start, but it can't generate a valid response.</span></span> <span data-ttu-id="21318-131">[Ejecute la aplicación en un símbolo del sistema](#run-the-app-at-a-command-prompt) en el servidor o [habilite el registro de stdout del módulo ASP.NET Core](#aspnet-core-module-stdout-log) para solucionar el problema.</span><span class="sxs-lookup"><span data-stu-id="21318-131">[Run the app at a command prompt](#run-the-app-at-a-command-prompt) on the server or [enable the ASP.NET Core Module stdout log](#aspnet-core-module-stdout-log) to troubleshoot the problem.</span></span>

<span data-ttu-id="21318-132">**Restablecimiento de la conexión**</span><span class="sxs-lookup"><span data-stu-id="21318-132">**Connection reset**</span></span>

<span data-ttu-id="21318-133">Si se produce un error después de que se envían los encabezados, el servidor no tiene tiempo para enviar un mensaje **500 Error interno del servidor** cuando se produce un error.</span><span class="sxs-lookup"><span data-stu-id="21318-133">If an error occurs after the headers are sent, it's too late for the server to send a **500 Internal Server Error** when an error occurs.</span></span> <span data-ttu-id="21318-134">Esto suele ocurrir cuando se produce un error durante la serialización de objetos complejos en una respuesta.</span><span class="sxs-lookup"><span data-stu-id="21318-134">This often happens when an error occurs during the serialization of complex objects for a response.</span></span> <span data-ttu-id="21318-135">Este tipo de error aparece como un error de *restablecimiento de la conexión* en el cliente.</span><span class="sxs-lookup"><span data-stu-id="21318-135">This type of error appears as a *connection reset* error on the client.</span></span> <span data-ttu-id="21318-136">El [Registro de aplicaciones](xref:fundamentals/logging/index) puede ayudar a solucionar estos tipos de errores.</span><span class="sxs-lookup"><span data-stu-id="21318-136">[Application logging](xref:fundamentals/logging/index) can help troubleshoot these types of errors.</span></span>

## <a name="default-startup-limits"></a><span data-ttu-id="21318-137">Límites de inicio predeterminados</span><span class="sxs-lookup"><span data-stu-id="21318-137">Default startup limits</span></span>

<span data-ttu-id="21318-138">El módulo ASP.NET Core está configurado con un valor predeterminado *startupTimeLimit* de 120 segundos.</span><span class="sxs-lookup"><span data-stu-id="21318-138">The ASP.NET Core Module is configured with a default *startupTimeLimit* of 120 seconds.</span></span> <span data-ttu-id="21318-139">Cuando se deja en el valor predeterminado, una aplicación puede tardar hasta dos minutos en iniciarse antes de que el módulo registre un error de proceso.</span><span class="sxs-lookup"><span data-stu-id="21318-139">When left at the default value, an app may take up to two minutes to start before the module logs a process failure.</span></span> <span data-ttu-id="21318-140">Para información sobre la configuración del módulo, consulte [Atributos del elemento aspNetCore](xref:host-and-deploy/aspnet-core-module#attributes-of-the-aspnetcore-element).</span><span class="sxs-lookup"><span data-stu-id="21318-140">For information on configuring the module, see [Attributes of the aspNetCore element](xref:host-and-deploy/aspnet-core-module#attributes-of-the-aspnetcore-element).</span></span>

## <a name="troubleshoot-app-startup-errors"></a><span data-ttu-id="21318-141">Solución de problemas de errores de inicio de la aplicación</span><span class="sxs-lookup"><span data-stu-id="21318-141">Troubleshoot app startup errors</span></span>

### <a name="application-event-log"></a><span data-ttu-id="21318-142">Registro de eventos de aplicación</span><span class="sxs-lookup"><span data-stu-id="21318-142">Application Event Log</span></span>

<span data-ttu-id="21318-143">Acceda al registro de eventos de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="21318-143">Access the Application Event Log:</span></span>

1. <span data-ttu-id="21318-144">Abra el menú Inicio, busque **Visor de eventos** y luego seleccione la aplicación **Visor de eventos**.</span><span class="sxs-lookup"><span data-stu-id="21318-144">Open the Start menu, search for **Event Viewer**, and then select the **Event Viewer** app.</span></span>
1. <span data-ttu-id="21318-145">En **Visor de eventos**, abra el nodo **Registros de Windows**.</span><span class="sxs-lookup"><span data-stu-id="21318-145">In **Event Viewer**, open the **Windows Logs** node.</span></span>
1. <span data-ttu-id="21318-146">Seleccione **Aplicación** para abrir el registro de eventos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="21318-146">Select **Application** to open the Application Event Log.</span></span>
1. <span data-ttu-id="21318-147">Busque los errores asociados a la aplicación objeto del error.</span><span class="sxs-lookup"><span data-stu-id="21318-147">Search for errors associated with the failing app.</span></span> <span data-ttu-id="21318-148">Los errores tienen un valor de *Módulo AspNetCore de IIS* o *Módulo AspNetCore de IIS Express* en la columna *Origen*.</span><span class="sxs-lookup"><span data-stu-id="21318-148">Errors have a value of *IIS AspNetCore Module* or *IIS Express AspNetCore Module* in the *Source* column.</span></span>

### <a name="run-the-app-at-a-command-prompt"></a><span data-ttu-id="21318-149">Ejecución de la aplicación en un símbolo del sistema</span><span class="sxs-lookup"><span data-stu-id="21318-149">Run the app at a command prompt</span></span>

<span data-ttu-id="21318-150">Muchos errores de inicio no generan información útil en el registro de eventos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="21318-150">Many startup errors don't produce useful information in the Application Event Log.</span></span> <span data-ttu-id="21318-151">La causa de algunos errores se puede encontrar mediante la ejecución de la aplicación en un símbolo del sistema en el sistema de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="21318-151">You can find the cause of some errors by running the app at a command prompt on the hosting system.</span></span>

<span data-ttu-id="21318-152">**Implementación dependiente de marco**</span><span class="sxs-lookup"><span data-stu-id="21318-152">**Framework-dependent deployment**</span></span>

<span data-ttu-id="21318-153">Si la aplicación es una [implementación dependiente del marco](/dotnet/core/deploying/#framework-dependent-deployments-fdd):</span><span class="sxs-lookup"><span data-stu-id="21318-153">If the app is a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd):</span></span>

1. <span data-ttu-id="21318-154">En un símbolo del sistema, vaya a la carpeta de implementación y ejecute la aplicación mediante la ejecución del ensamblado de la aplicación con *dotnet.exe*.</span><span class="sxs-lookup"><span data-stu-id="21318-154">At a command prompt, navigate to the deployment folder and run the app by executing the app's assembly with *dotnet.exe*.</span></span> <span data-ttu-id="21318-155">En el siguiente comando, sustituya el nombre del ensamblado de la aplicación por \<nombre_de_ensamblado>: `dotnet .\<assembly_name>.dll`.</span><span class="sxs-lookup"><span data-stu-id="21318-155">In the following command, substitute the name of the app's assembly for \<assembly_name>: `dotnet .\<assembly_name>.dll`.</span></span>
1. <span data-ttu-id="21318-156">La salida de consola de la aplicación, que muestra los posibles errores, se escribe en la ventana de la consola.</span><span class="sxs-lookup"><span data-stu-id="21318-156">The console output from the app, showing any errors, is written to the console window.</span></span>
1. <span data-ttu-id="21318-157">Si los errores se producen al realizar una solicitud a la aplicación, realice una solicitud al host y el puerto donde escucha Kestrel.</span><span class="sxs-lookup"><span data-stu-id="21318-157">If the errors occur when making a request to the app, make a request to the host and port where Kestrel listens.</span></span> <span data-ttu-id="21318-158">Con el host y el puerto predeterminados, realizar una solicitud a `http://localhost:5000/`.</span><span class="sxs-lookup"><span data-stu-id="21318-158">Using the default host and post, make a request to `http://localhost:5000/`.</span></span> <span data-ttu-id="21318-159">Si la aplicación responde normalmente en la dirección del punto de conexión de Kestrel, es más probable que el problema esté relacionado con la configuración del proxy inverso que con la propia aplicación.</span><span class="sxs-lookup"><span data-stu-id="21318-159">If the app responds normally at the Kestrel endpoint address, the problem is more likely related to the reverse proxy configuration and less likely within the app.</span></span>

<span data-ttu-id="21318-160">**Implementación independiente**</span><span class="sxs-lookup"><span data-stu-id="21318-160">**Self-contained deployment**</span></span>

<span data-ttu-id="21318-161">Si la aplicación es una [implementación independiente](/dotnet/core/deploying/#self-contained-deployments-scd):</span><span class="sxs-lookup"><span data-stu-id="21318-161">If the app is a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd):</span></span>

1. <span data-ttu-id="21318-162">En un símbolo del sistema, vaya a la carpeta de implementación y ejecute el archivo ejecutable de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="21318-162">At a command prompt, navigate to the deployment folder and run the app's executable.</span></span> <span data-ttu-id="21318-163">En el siguiente comando, sustituya el nombre del ensamblado de la aplicación por \<nombre_de_ensamblado>: `<assembly_name>.exe`.</span><span class="sxs-lookup"><span data-stu-id="21318-163">In the following command, substitute the name of the app's assembly for \<assembly_name>: `<assembly_name>.exe`.</span></span>
1. <span data-ttu-id="21318-164">La salida de consola de la aplicación, que muestra los posibles errores, se escribe en la ventana de la consola.</span><span class="sxs-lookup"><span data-stu-id="21318-164">The console output from the app, showing any errors, is written to the console window.</span></span>
1. <span data-ttu-id="21318-165">Si los errores se producen al realizar una solicitud a la aplicación, realice una solicitud al host y el puerto donde escucha Kestrel.</span><span class="sxs-lookup"><span data-stu-id="21318-165">If the errors occur when making a request to the app, make a request to the host and port where Kestrel listens.</span></span> <span data-ttu-id="21318-166">Con el host y el puerto predeterminados, realizar una solicitud a `http://localhost:5000/`.</span><span class="sxs-lookup"><span data-stu-id="21318-166">Using the default host and post, make a request to `http://localhost:5000/`.</span></span> <span data-ttu-id="21318-167">Si la aplicación responde normalmente en la dirección del punto de conexión de Kestrel, es más probable que el problema esté relacionado con la configuración del proxy inverso que con la propia aplicación.</span><span class="sxs-lookup"><span data-stu-id="21318-167">If the app responds normally at the Kestrel endpoint address, the problem is more likely related to the reverse proxy configuration and less likely within the app.</span></span>

### <a name="aspnet-core-module-stdout-log"></a><span data-ttu-id="21318-168">Registro de stdout del módulo ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="21318-168">ASP.NET Core Module stdout log</span></span>

<span data-ttu-id="21318-169">Para habilitar y ver los registros de stdout:</span><span class="sxs-lookup"><span data-stu-id="21318-169">To enable and view stdout logs:</span></span>

1. <span data-ttu-id="21318-170">Vaya a la carpeta de implementación del sitio en el sistema de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="21318-170">Navigate to the site's deployment folder on the hosting system.</span></span>
1. <span data-ttu-id="21318-171">Si la carpeta *Logs* no existe, cree la carpeta.</span><span class="sxs-lookup"><span data-stu-id="21318-171">If the *logs* folder isn't present, create the folder.</span></span> <span data-ttu-id="21318-172">Para obtener instrucciones sobre cómo habilitar MSBuild para crear la carpeta *logs* automáticamente en la implementación, consulte el tema [Estructura de directorios](xref:host-and-deploy/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="21318-172">For instructions on how to enable MSBuild to create the *logs* folder in the deployment automatically, see the [Directory structure](xref:host-and-deploy/directory-structure) topic.</span></span>
1. <span data-ttu-id="21318-173">Edite el archivo *web.config*.</span><span class="sxs-lookup"><span data-stu-id="21318-173">Edit the *web.config* file.</span></span> <span data-ttu-id="21318-174">Establezca **stdoutLogEnabled** en `true` y cambie la ruta de acceso de **stdoutLogFile** para que apunte a la carpeta *logs* (por ejemplo, `.\logs\stdout`).</span><span class="sxs-lookup"><span data-stu-id="21318-174">Set **stdoutLogEnabled** to `true` and change the **stdoutLogFile** path to point to the *logs* folder (for example, `.\logs\stdout`).</span></span> <span data-ttu-id="21318-175">`stdout` en la ruta de acceso es el prefijo del nombre del archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="21318-175">`stdout` in the path is the log file name prefix.</span></span> <span data-ttu-id="21318-176">Cuando se crea el registro, se agregan automáticamente una marca de tiempo, un identificador de proceso y una extensión de archivo.</span><span class="sxs-lookup"><span data-stu-id="21318-176">A timestamp, process id, and file extension are added automatically when the log is created.</span></span> <span data-ttu-id="21318-177">Cuando se usa `stdout` como prefijo para el nombre de archivo, un archivo de registro se llama normalmente *stdout_20180205184032_5412.log*.</span><span class="sxs-lookup"><span data-stu-id="21318-177">Using `stdout` as the file name prefix, a typical log file is named *stdout_20180205184032_5412.log*.</span></span> 
1. <span data-ttu-id="21318-178">Asegúrese de que la identidad del grupo de aplicaciones tiene permisos de escritura en la carpeta *logs*.</span><span class="sxs-lookup"><span data-stu-id="21318-178">Ensure your application pool's identity has write permissions to the *logs* folder.</span></span>
1. <span data-ttu-id="21318-179">Guarde el archivo *web.config* actualizado.</span><span class="sxs-lookup"><span data-stu-id="21318-179">Save the updated *web.config* file.</span></span>
1. <span data-ttu-id="21318-180">Realice una solicitud a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="21318-180">Make a request to the app.</span></span>
1. <span data-ttu-id="21318-181">Vaya a la carpeta *logs*.</span><span class="sxs-lookup"><span data-stu-id="21318-181">Navigate to the *logs* folder.</span></span> <span data-ttu-id="21318-182">Busque y abra el registro más reciente de stdout.</span><span class="sxs-lookup"><span data-stu-id="21318-182">Find and open the most recent stdout log.</span></span>
1. <span data-ttu-id="21318-183">Estudie el registro para ver los errores.</span><span class="sxs-lookup"><span data-stu-id="21318-183">Study the log for errors.</span></span>

<span data-ttu-id="21318-184">**¡Importante!**</span><span class="sxs-lookup"><span data-stu-id="21318-184">**Important!**</span></span> <span data-ttu-id="21318-185">Deshabilite el registro de stdout cuando la solución de problemas haya finalizado.</span><span class="sxs-lookup"><span data-stu-id="21318-185">Disable stdout logging when troubleshooting is complete.</span></span>

1. <span data-ttu-id="21318-186">Edite el archivo *web.config*.</span><span class="sxs-lookup"><span data-stu-id="21318-186">Edit the *web.config* file.</span></span>
1. <span data-ttu-id="21318-187">Establezca **stdoutLogEnabled** en `false`.</span><span class="sxs-lookup"><span data-stu-id="21318-187">Set **stdoutLogEnabled** to `false`.</span></span>
1. <span data-ttu-id="21318-188">Guarde el archivo.</span><span class="sxs-lookup"><span data-stu-id="21318-188">Save the file.</span></span>

> [!WARNING]
> <span data-ttu-id="21318-189">La imposibilidad de deshabilitar el registro de stdout puede dar lugar a un error de la aplicación o del servidor.</span><span class="sxs-lookup"><span data-stu-id="21318-189">Failure to disable the stdout log can lead to app or server failure.</span></span> <span data-ttu-id="21318-190">No hay ningún límite en el tamaño del archivo de registro ni en el número de archivos de registro creados.</span><span class="sxs-lookup"><span data-stu-id="21318-190">There's no limit on log file size or the number of log files created.</span></span>
>
> <span data-ttu-id="21318-191">Para el registro rutinario en una aplicación ASP.NET Core, use una biblioteca de registro que limite el tamaño del archivo de registro y realice la rotación de los registros.</span><span class="sxs-lookup"><span data-stu-id="21318-191">For routine logging in an ASP.NET Core app, use a logging library that limits log file size and rotates logs.</span></span> <span data-ttu-id="21318-192">Para más información, consulte los [proveedores de registro de terceros](xref:fundamentals/logging/index#third-party-logging-providers).</span><span class="sxs-lookup"><span data-stu-id="21318-192">For more information, see [third-party logging providers](xref:fundamentals/logging/index#third-party-logging-providers).</span></span>

## <a name="enabling-the-developer-exception-page"></a><span data-ttu-id="21318-193">Habilitación de la página de excepciones del desarrollador</span><span class="sxs-lookup"><span data-stu-id="21318-193">Enabling the Developer Exception Page</span></span>

<span data-ttu-id="21318-194">La variable de entorno `ASPNETCORE_ENVIRONMENT` [ se puede agregar a web.config](xref:host-and-deploy/aspnet-core-module#setting-environment-variables) para ejecutar la aplicación en el entorno de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="21318-194">The `ASPNETCORE_ENVIRONMENT` [environment variable can be added to web.config](xref:host-and-deploy/aspnet-core-module#setting-environment-variables) to run the app in the Development environment.</span></span> <span data-ttu-id="21318-195">Siempre y cuando el entorno no se invalide al inicio de la aplicación con `UseEnvironment` en el generador de host, la configuración de la variable de entorno permite que aparezca la [página de excepciones del desarrollador](xref:fundamentals/error-handling) cuando se ejecuta la aplicación.</span><span class="sxs-lookup"><span data-stu-id="21318-195">As long as the environment isn't overridden in app startup by `UseEnvironment` on the host builder, setting the environment variable allows the [Developer Exception Page](xref:fundamentals/error-handling) to appear when the app is run.</span></span>

```xml
<aspNetCore processPath="dotnet"
      arguments=".\MyApp.dll"
      stdoutLogEnabled="false"
      stdoutLogFile=".\logs\stdout">
  <environmentVariables>
    <environmentVariable name="ASPNETCORE_ENVIRONMENT" value="Development" />
  </environmentVariables>
</aspNetCore>
```

<span data-ttu-id="21318-196">Solo se recomienda establecer la variable de entorno para `ASPNETCORE_ENVIRONMENT` cuando se use en servidores de ensayo o pruebas que no estén expuestos a Internet.</span><span class="sxs-lookup"><span data-stu-id="21318-196">Setting the environment variable for `ASPNETCORE_ENVIRONMENT` is only recommended for use on staging and testing servers that aren't exposed to the Internet.</span></span> <span data-ttu-id="21318-197">Quite la variable de entorno del archivo *web.config* cuando termine de solucionar los problemas.</span><span class="sxs-lookup"><span data-stu-id="21318-197">Remove the environment variable from the *web.config* file after troubleshooting.</span></span> <span data-ttu-id="21318-198">Para información sobre la configuración de variables de entorno en *web.config*, consulte el [elemento secundario environmentVariables de aspNetCore](xref:host-and-deploy/aspnet-core-module#setting-environment-variables).</span><span class="sxs-lookup"><span data-stu-id="21318-198">For information on setting environment variables in *web.config*, see [environmentVariables child element of aspNetCore](xref:host-and-deploy/aspnet-core-module#setting-environment-variables).</span></span>

## <a name="common-startup-errors"></a><span data-ttu-id="21318-199">Errores comunes de inicio</span><span class="sxs-lookup"><span data-stu-id="21318-199">Common startup errors</span></span> 

<span data-ttu-id="21318-200">Vea <xref:host-and-deploy/azure-iis-errors-reference>.</span><span class="sxs-lookup"><span data-stu-id="21318-200">See <xref:host-and-deploy/azure-iis-errors-reference>.</span></span> <span data-ttu-id="21318-201">La mayoría de los problemas comunes que impiden el inicio de la aplicación se tratan en el tema de referencia.</span><span class="sxs-lookup"><span data-stu-id="21318-201">Most of the common problems that prevent app startup are covered in the reference topic.</span></span>

## <a name="slow-or-hanging-app"></a><span data-ttu-id="21318-202">Aplicación lenta o bloqueada</span><span class="sxs-lookup"><span data-stu-id="21318-202">Slow or hanging app</span></span>

<span data-ttu-id="21318-203">Cuando una aplicación responda con lentitud o queda bloqueado en una solicitud, obtenga y analice un [archivo de volcado de memoria](/visualstudio/debugger/using-dump-files).</span><span class="sxs-lookup"><span data-stu-id="21318-203">When an app responds slowly or hangs on a request, obtain and analyze a [dump file](/visualstudio/debugger/using-dump-files).</span></span> <span data-ttu-id="21318-204">Los archivos de volcado de memoria se pueden obtener mediante cualquiera de las siguientes herramientas:</span><span class="sxs-lookup"><span data-stu-id="21318-204">Dump files can be obtained using any of the following tools:</span></span>

* [<span data-ttu-id="21318-205">ProcDump</span><span class="sxs-lookup"><span data-stu-id="21318-205">ProcDump</span></span>](/sysinternals/downloads/procdump)
* [<span data-ttu-id="21318-206">DebugDiag</span><span class="sxs-lookup"><span data-stu-id="21318-206">DebugDiag</span></span>](https://www.microsoft.com/download/details.aspx?id=49924)
* <span data-ttu-id="21318-207">WinDbg: [Download Debugging tools for Windows](https://developer.microsoft.com/windows/hardware/download-windbg) (Descarga de herramientas de depuración para Windows), [Debugging Using WinDbg](/windows-hardware/drivers/debugger/debugging-using-windbg) (Depuración mediante WinDbg)</span><span class="sxs-lookup"><span data-stu-id="21318-207">WinDbg: [Download Debugging tools for Windows](https://developer.microsoft.com/windows/hardware/download-windbg), [Debugging Using WinDbg](/windows-hardware/drivers/debugger/debugging-using-windbg)</span></span>

## <a name="remote-debugging"></a><span data-ttu-id="21318-208">Depuración remota</span><span class="sxs-lookup"><span data-stu-id="21318-208">Remote debugging</span></span>

<span data-ttu-id="21318-209">Consulte [Depuración remota de ASP.NET Core en un equipo remoto de IIS en Visual Studio 2017](/visualstudio/debugger/remote-debugging-aspnet-on-a-remote-iis-computer) en la documentación de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="21318-209">See [Remote Debug ASP.NET Core on a Remote IIS Computer in Visual Studio 2017](/visualstudio/debugger/remote-debugging-aspnet-on-a-remote-iis-computer) in the Visual Studio documentation.</span></span>

## <a name="application-insights"></a><span data-ttu-id="21318-210">Application Insights</span><span class="sxs-lookup"><span data-stu-id="21318-210">Application Insights</span></span>

<span data-ttu-id="21318-211">[Application Insights](/azure/application-insights/) proporciona telemetría de las aplicaciones hospedadas en IIS, lo que incluye las características de registro de errores y generación de informes.</span><span class="sxs-lookup"><span data-stu-id="21318-211">[Application Insights](/azure/application-insights/) provides telemetry from apps hosted by IIS, including error logging and reporting features.</span></span> <span data-ttu-id="21318-212">Application Insights solo puede notificar los errores que se producen después de que la aplicación se inicia cuando las características de registro de la aplicación se vuelven disponibles.</span><span class="sxs-lookup"><span data-stu-id="21318-212">Application Insights can only report on errors that occur after the app starts when the app's logging features become available.</span></span> <span data-ttu-id="21318-213">Para más información, consulte [Application Insights para ASP.NET Core](/azure/application-insights/app-insights-asp-net-core).</span><span class="sxs-lookup"><span data-stu-id="21318-213">For more information, see [Application Insights for ASP.NET Core](/azure/application-insights/app-insights-asp-net-core).</span></span>

## <a name="additional-troubleshooting-advice"></a><span data-ttu-id="21318-214">Consejos adicionales de solución de problemas</span><span class="sxs-lookup"><span data-stu-id="21318-214">Additional troubleshooting advice</span></span>

<span data-ttu-id="21318-215">En ocasiones, una aplicación en funcionamiento deja de funcionar inmediatamente después de actualizar el SDK de .NET Core en la máquina de desarrollo o las versiones del paquete en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="21318-215">Sometimes a functioning app fails immediately after upgrading either the .NET Core SDK on the development machine or package versions within the app.</span></span> <span data-ttu-id="21318-216">En algunos casos, los paquetes incoherentes pueden interrumpir una aplicación al realizar actualizaciones importantes.</span><span class="sxs-lookup"><span data-stu-id="21318-216">In some cases, incoherent packages may break an app when performing major upgrades.</span></span> <span data-ttu-id="21318-217">La mayoría de estos problemas puede corregirse siguiendo estas instrucciones:</span><span class="sxs-lookup"><span data-stu-id="21318-217">Most of these issues can be fixed by following these instructions:</span></span>

1. <span data-ttu-id="21318-218">Elimine las carpetas *bin* y *obj*.</span><span class="sxs-lookup"><span data-stu-id="21318-218">Delete the *bin* and *obj* folders.</span></span>
1. <span data-ttu-id="21318-219">Borre las memorias caché del paquete en *%UserProfile%\\.nuget\\packages* y *%LocalAppData%\\Nuget\\v3-cache*.</span><span class="sxs-lookup"><span data-stu-id="21318-219">Clear the package caches at *%UserProfile%\\.nuget\\packages* and *%LocalAppData%\\Nuget\\v3-cache*.</span></span>
1. <span data-ttu-id="21318-220">Restaure el proyecto y vuelva a compilarlo.</span><span class="sxs-lookup"><span data-stu-id="21318-220">Restore and rebuild the project.</span></span>
1. <span data-ttu-id="21318-221">Confirme que la implementación anterior en el servidor se ha eliminado por completo antes de volver a implementar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="21318-221">Confirm that the prior deployment on the server has been completely deleted prior to redeploying the app.</span></span>

> [!TIP]
> <span data-ttu-id="21318-222">Una forma práctica de borrar las memorias cachés del paquete es ejecutar `dotnet nuget locals all --clear` desde un símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="21318-222">A convenient way to clear package caches is to execute `dotnet nuget locals all --clear` from a command prompt.</span></span>
> 
> <span data-ttu-id="21318-223">Otra manera de borrar las memorias caché del paquete es usar la herramienta [nuget.exe](https://www.nuget.org/downloads) y ejecutar el comando `nuget locals all -clear`.</span><span class="sxs-lookup"><span data-stu-id="21318-223">Clearing package caches can also be accomplished by using the [nuget.exe](https://www.nuget.org/downloads) tool and executing the command `nuget locals all -clear`.</span></span> <span data-ttu-id="21318-224">*nuget.exe* no es una instalación agrupada con el sistema operativo de escritorio de Windows y se debe obtener de forma independiente en el [sitio web de NuGet](https://www.nuget.org/downloads).</span><span class="sxs-lookup"><span data-stu-id="21318-224">*nuget.exe* isn't a bundled install with the Windows desktop operating system and must be obtained separately from the [NuGet website](https://www.nuget.org/downloads).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="21318-225">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="21318-225">Additional resources</span></span>

* <xref:fundamentals/error-handling>
* <xref:host-and-deploy/azure-iis-errors-reference>
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/azure-apps/troubleshoot>
