---
title: Hospedaje de ASP.NET Core en Windows con IIS
author: guardrex
description: "Configuración de Windows Server Internet Information Services (IIS) e implementación de aplicaciones de ASP.NET Core."
keywords: "ASP.NET Core,internet information services,iis,windows server,lote de hospedaje,módulo asp.net core,implementación web"
ms.author: riande
manager: wpickett
ms.date: 03/13/2017
ms.topic: article
ms.assetid: a4449ad3-5bad-410c-afa7-dc32d832b552
ms.technology: aspnet
ms.prod: asp.net-core
uid: publishing/iis
ms.openlocfilehash: 48e67add785fc1d7e79c659565afb1ec68c1defb
ms.sourcegitcommit: f531d90646b9d261c5fbbffcecd6ded9185ae292
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 09/15/2017
---
# <a name="set-up-a-hosting-environment-for-aspnet-core-on-windows-with-iis-and-deploy-to-it"></a><span data-ttu-id="e1f7e-104">Configuración de un entorno de hospedaje para ASP.NET Core en Windows con IIS e implementación en él</span><span class="sxs-lookup"><span data-stu-id="e1f7e-104">Set up a hosting environment for ASP.NET Core on Windows with IIS, and deploy to it</span></span>

<span data-ttu-id="e1f7e-105">Por [Luke Latham](https://github.com/GuardRex) y [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="e1f7e-105">By [Luke Latham](https://github.com/GuardRex) and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

## <a name="supported-operating-systems"></a><span data-ttu-id="e1f7e-106">Sistemas operativos admitidos</span><span class="sxs-lookup"><span data-stu-id="e1f7e-106">Supported operating systems</span></span>

<span data-ttu-id="e1f7e-107">Los siguientes sistemas operativos son compatibles:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-107">The following operating systems are supported:</span></span>

* <span data-ttu-id="e1f7e-108">Windows 7 y más recientes</span><span class="sxs-lookup"><span data-stu-id="e1f7e-108">Windows 7 and newer</span></span>

* <span data-ttu-id="e1f7e-109">Windows Server 2008 R2 y más recientes&#8224;</span><span class="sxs-lookup"><span data-stu-id="e1f7e-109">Windows Server 2008 R2 and newer&#8224;</span></span>

<span data-ttu-id="e1f7e-110">&#8224;Conceptualmente, la configuración de IIS que se describe en este documento también se aplica al hospedaje de aplicaciones de ASP.NET Core en IIS de Nano Server, pero vea [ASP.NET Core con IIS en Nano Server](xref:tutorials/nano-server) para obtener instrucciones concretas.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-110">&#8224;Conceptually, the IIS configuration described in this document also applies to hosting ASP.NET Core applications on Nano Server IIS, but refer to [ASP.NET Core with IIS on Nano Server](xref:tutorials/nano-server) for specific instructions.</span></span>

<span data-ttu-id="e1f7e-111">El [servidor WebListener](xref:fundamentals/servers/weblistener) no funciona en una configuración de proxy inverso con IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-111">[WebListener server](xref:fundamentals/servers/weblistener) will not work in a reverse-proxy configuration with IIS.</span></span> <span data-ttu-id="e1f7e-112">Debe usar el [servidor Kestrel](xref:fundamentals/servers/kestrel).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-112">You must use the [Kestrel server](xref:fundamentals/servers/kestrel).</span></span>

## <a name="iis-configuration"></a><span data-ttu-id="e1f7e-113">Configuración de IIS</span><span class="sxs-lookup"><span data-stu-id="e1f7e-113">IIS configuration</span></span>

<span data-ttu-id="e1f7e-114">Habilite el rol **Servidor web (IIS)** y establezca los servicios de rol.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-114">Enable the **Web Server (IIS)** role and establish role services.</span></span>

### <a name="windows-desktop-operating-systems"></a><span data-ttu-id="e1f7e-115">Sistemas operativos de escritorio Windows</span><span class="sxs-lookup"><span data-stu-id="e1f7e-115">Windows desktop operating systems</span></span>

<span data-ttu-id="e1f7e-116">Vaya a **Panel de control > Programas > Programas y características > Activar o desactivar las características de Windows** (lado izquierdo de la pantalla).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-116">Navigate to **Control Panel > Programs > Programs and Features > Turn Windows features on or off** (left side of the screen).</span></span> <span data-ttu-id="e1f7e-117">Abra el grupo de **Internet Information Services** y **Herramientas de administración web**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-117">Open the group for **Internet Information Services** and **Web Management Tools**.</span></span> <span data-ttu-id="e1f7e-118">Active la casilla de **Consola de administración de IIS**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-118">Check the box for **IIS Management Console**.</span></span> <span data-ttu-id="e1f7e-119">Active la casilla de **Servicios World Wide Web**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-119">Check the box for **World Wide Web Services**.</span></span> <span data-ttu-id="e1f7e-120">Acepte las características predeterminadas de **Servicios World Wide Web** o personalice las características de IIS para satisfacer sus necesidades.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-120">Accept the default features for **World Wide Web Services** or customize the IIS features to suit your needs.</span></span>

![Consola de administración de IIS y Servicios World Wide Web se activan en Características de Windows.](iis/_static/windows-features-win10.png)

### <a name="windows-server-operating-systems"></a><span data-ttu-id="e1f7e-122">Sistemas operativos de servidor Windows</span><span class="sxs-lookup"><span data-stu-id="e1f7e-122">Windows Server operating systems</span></span>

<span data-ttu-id="e1f7e-123">En los sistemas operativos de servidor, use el asistente **Agregar roles y características** a través del menú **Administrar** o el vínculo de **Administrador del servidor**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-123">For server operating systems, use the **Add Roles and Features** wizard via the **Manage** menu or the link in **Server Manager**.</span></span> <span data-ttu-id="e1f7e-124">En el paso **Roles de servidor**, active la casilla de **Servidor web (IIS)**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-124">On the **Server Roles** step, check the box for **Web Server (IIS)**.</span></span>

![El rol Servidor web (IIS) se activa en el paso Seleccionar roles de servidor.](iis/_static/server-roles-ws2016.png)

<span data-ttu-id="e1f7e-126">En el paso **Servicios de rol**, seleccione los servicios de rol IIS que quiera o acepte los servicios de rol predeterminados proporcionados.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-126">On the **Role services** step, select the IIS role services you desire or accept the default role services provided.</span></span>

![Los servicios de rol predeterminados se activan en el paso Seleccionar servicios de rol.](iis/_static/role-services-ws2016.png)

<span data-ttu-id="e1f7e-128">Continúe con el paso **Confirmación** para instalar el rol y los servicios de servidor web.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-128">Proceed through the **Confirmation** step to install the web server role and services.</span></span> <span data-ttu-id="e1f7e-129">No es necesario reiniciar el servidor ni IIS después de instalar el rol Servidor web (IIS).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-129">A server/IIS restart is not required after installing the Web Server (IIS) role.</span></span>

## <a name="install-the-net-core-windows-server-hosting-bundle"></a><span data-ttu-id="e1f7e-130">Instalación del lote de hospedaje .NET Core Windows Server</span><span class="sxs-lookup"><span data-stu-id="e1f7e-130">Install the .NET Core Windows Server Hosting bundle</span></span>

1. <span data-ttu-id="e1f7e-131">Instale el [lote de hospedaje .NET Core Windows Server](https://aka.ms/dotnetcore.2.0.0-windowshosting) en el sistema host.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-131">Install the [.NET Core Windows Server Hosting bundle](https://aka.ms/dotnetcore.2.0.0-windowshosting) on the hosting system.</span></span> <span data-ttu-id="e1f7e-132">El lote instala .NET Core Runtime, .NET Core Library y el [módulo ASP.NET Core](xref:fundamentals/servers/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-132">The bundle will install the .NET Core Runtime, .NET Core Library, and the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module).</span></span> <span data-ttu-id="e1f7e-133">El módulo crea el proxy inverso entre IIS y el servidor Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-133">The module creates the reverse-proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="e1f7e-134">Nota: Si el sistema no tiene conexión a Internet, obtenga e instale *[Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840)* antes de instalar el lote de hospedaje .NET Core Windows Server.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-134">Note: If the system doesn't have an Internet connection, obtain and install the *[Microsoft Visual C++ 2015 Redistributable](https://www.microsoft.com/download/details.aspx?id=53840)* before installing the .NET Core Windows Server Hosting bundle.</span></span>

2. <span data-ttu-id="e1f7e-135">Reinicie el sistema o ejecute **net stop was /y** seguido de **net start w3svc** desde un símbolo del sistema para obtener un cambio en la ruta de acceso del sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-135">Restart the system or execute **net stop was /y** followed by **net start w3svc** from a command prompt to pick up a change to the system PATH.</span></span>

> [!NOTE]
> <span data-ttu-id="e1f7e-136">Si usa una configuración compartida de IIS, vea [ASP.NET Core Module with IIS Shared Configuration](xref:hosting/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration) (Módulo ASP.NET Core con configuración compartida de IIS).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-136">If you use an IIS Shared Configuration, see [ASP.NET Core Module with IIS Shared Configuration](xref:hosting/aspnet-core-module#aspnet-core-module-with-an-iis-shared-configuration).</span></span>

## <a name="install-web-deploy-when-publishing-with-visual-studio"></a><span data-ttu-id="e1f7e-137">Instalación de Web Deploy al publicar con Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e1f7e-137">Install Web Deploy when publishing with Visual Studio</span></span>

<span data-ttu-id="e1f7e-138">Si piensa implementar las aplicaciones con Web Deploy en Visual Studio, instale la versión más reciente de Web Deploy en el sistema host.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-138">If you intend to deploy your applications with Web Deploy in Visual Studio, install the latest version of Web Deploy on the hosting system.</span></span> <span data-ttu-id="e1f7e-139">Para instalar Web Deploy, puede usar el [Instalador de plataforma web (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) u obtener un instalador directamente desde el [Centro de descarga de Microsoft](https://www.microsoft.com/download/details.aspx?id=43717).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-139">To install Web Deploy, you can use the [Web Platform Installer (WebPI)](https://www.microsoft.com/web/downloads/platform.aspx) or obtain an installer directly from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=43717).</span></span> <span data-ttu-id="e1f7e-140">El método preferido es usar WebPI.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-140">The preferred method is to use WebPI.</span></span> <span data-ttu-id="e1f7e-141">WebPI ofrece una instalación independiente y una configuración para los proveedores de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-141">WebPI offers a standalone setup and a configuration for hosting providers.</span></span>

## <a name="application-configuration"></a><span data-ttu-id="e1f7e-142">Configuración de aplicación</span><span class="sxs-lookup"><span data-stu-id="e1f7e-142">Application configuration</span></span>

### <a name="enabling-the-iisintegration-components"></a><span data-ttu-id="e1f7e-143">Habilitación de los componentes de IISIntegration</span><span class="sxs-lookup"><span data-stu-id="e1f7e-143">Enabling the IISIntegration components</span></span>

# <a name="aspnet-core-2xtabaspnetcore2x"></a>[<span data-ttu-id="e1f7e-144">ASP.NET Core 2.x</span><span class="sxs-lookup"><span data-stu-id="e1f7e-144">ASP.NET Core 2.x</span></span>](#tab/aspnetcore2x)

<span data-ttu-id="e1f7e-145">Los archivos *Program.cs* estándar llaman a [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) para empezar a configurar un host.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-145">A typical *Program.cs* calls [CreateDefaultBuilder](/dotnet/api/microsoft.aspnetcore.webhost.createdefaultbuilder) to begin setting up a host.</span></span> <span data-ttu-id="e1f7e-146">`CreateDefaultBuilder` configura [Kestrel](xref:fundamentals/servers/kestrel) como el servidor web y habilita IIS Integration configurando la ruta de acceso base y el puerto para el [módulo ASP.NET Core](xref:fundamentals/servers/aspnet-core-module):</span><span class="sxs-lookup"><span data-stu-id="e1f7e-146">`CreateDefaultBuilder` configures [Kestrel](xref:fundamentals/servers/kestrel) as the web server and enables IIS integration by configuring the base path and port for the [ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module):</span></span>

```csharp
public static IWebHost BuildWebHost(string[] args) =>
    WebHost.CreateDefaultBuilder(args)
        ...
```

# <a name="aspnet-core-1xtabaspnetcore1x"></a>[<span data-ttu-id="e1f7e-147">ASP.NET Core 1.x</span><span class="sxs-lookup"><span data-stu-id="e1f7e-147">ASP.NET Core 1.x</span></span>](#tab/aspnetcore1x)

<span data-ttu-id="e1f7e-148">Incluya una dependencia en el paquete [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) de dependencias de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-148">Include a dependency on the [Microsoft.AspNetCore.Server.IISIntegration](https://www.nuget.org/packages/Microsoft.AspNetCore.Server.IISIntegration/) package in the application dependencies.</span></span> <span data-ttu-id="e1f7e-149">Incorpore middleware de IIS Integration a la aplicación al agregar el método de extensión *UseIISIntegration* a *WebHostBuilder*:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-149">Incorporate IIS Integration middleware into the application by adding the *UseIISIntegration* extension method to *WebHostBuilder*:</span></span>

```csharp
var host = new WebHostBuilder()
    .UseKestrel()
    .UseIISIntegration()
    ...
```

<span data-ttu-id="e1f7e-150">Tanto `UseKestrel` como `UseIISIntegration` son necesarios.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-150">Both `UseKestrel` and `UseIISIntegration` are required.</span></span> <span data-ttu-id="e1f7e-151">La llamada al código *UseIISIntegration* no afecta a la portabilidad del código.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-151">Code calling *UseIISIntegration* doesn't affect code portability.</span></span> <span data-ttu-id="e1f7e-152">Si la aplicación no se ejecuta detrás de IIS (por ejemplo, si se ejecuta directamente en Kestrel), `UseIISIntegration` no es posible realizar ninguna operación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-152">If the app isn't run behind IIS (for example, the app is run directly on Kestrel), `UseIISIntegration` no-ops.</span></span>

---

<span data-ttu-id="e1f7e-153">Para obtener más información sobre el hospedaje, consulte [Hosting in ASP.NET Core](xref:fundamentals/hosting) (Hospedaje en ASP.NET Core).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-153">For more information on hosting, see [Hosting in ASP.NET Core](xref:fundamentals/hosting).</span></span>

### <a name="setting-iisoptions-for-the-iisintegration-service"></a><span data-ttu-id="e1f7e-154">Configuración de IISOptions para el servicio IISIntegration</span><span class="sxs-lookup"><span data-stu-id="e1f7e-154">Setting IISOptions for the IISIntegration service</span></span>

<span data-ttu-id="e1f7e-155">Para configurar las opciones del servicio *IISIntegration*, incluya una configuración del servicio para *IISOptions* en *ConfigureServices*.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-155">To configure *IISIntegration* service options, include a service configuration for *IISOptions* in *ConfigureServices*.</span></span>

```csharp
services.Configure<IISOptions>(options => {
  ...
});
```

| <span data-ttu-id="e1f7e-156">Opción</span><span class="sxs-lookup"><span data-stu-id="e1f7e-156">Option</span></span> | <span data-ttu-id="e1f7e-157">Parámetro</span><span class="sxs-lookup"><span data-stu-id="e1f7e-157">Setting</span></span>|
| --- | --- | 
| <span data-ttu-id="e1f7e-158">AutomaticAuthentication</span><span class="sxs-lookup"><span data-stu-id="e1f7e-158">AutomaticAuthentication</span></span> | <span data-ttu-id="e1f7e-159">Si es true, el middleware de autenticación altera las solicitudes de usuario que llegan y responde a desafíos genéricos.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-159">If true, the authentication middleware will alter the request user arriving and respond to generic challenges.</span></span> <span data-ttu-id="e1f7e-160">Si es false, el middleware de autenticación solo proporciona una identidad y responde a los desafíos cuando así se lo indica de forma explícita theAuthenticationScheme</span><span class="sxs-lookup"><span data-stu-id="e1f7e-160">If false,the authentication middleware will only provide identity and respond to challenges when explicitly indicated by theAuthenticationScheme</span></span> |
| <span data-ttu-id="e1f7e-161">ForwardClientCertificate</span><span class="sxs-lookup"><span data-stu-id="e1f7e-161">ForwardClientCertificate</span></span> | <span data-ttu-id="e1f7e-162">Si es true y el encabezado de solicitud `MS-ASPNETCORE-CLIENTCERT` está presente, se rellena `ITLSConnectionFeature`.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-162">If true and the `MS-ASPNETCORE-CLIENTCERT` request header is present, the `ITLSConnectionFeature` will be populated.</span></span> |
| <span data-ttu-id="e1f7e-163">ForwardWindowsAuthentication</span><span class="sxs-lookup"><span data-stu-id="e1f7e-163">ForwardWindowsAuthentication</span></span> | <span data-ttu-id="e1f7e-164">Si es true, el middleware de autenticación intenta autenticar mediante la autenticación de Windows del controlador de plataforma.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-164">If true, authentication middleware will attempt to authenticate using platform handler windows authentication.</span></span> <span data-ttu-id="e1f7e-165">Si es false, no se agrega el middleware de autenticación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-165">If false, authentication middleware won’t be added.</span></span> |

### <a name="webconfig"></a><span data-ttu-id="e1f7e-166">web.config</span><span class="sxs-lookup"><span data-stu-id="e1f7e-166">web.config</span></span>

<span data-ttu-id="e1f7e-167">El archivo *web.config* configura el módulo ASP.NET Core y proporciona otra configuración de IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-167">The *web.config* file configures the ASP.NET Core Module and provides other IIS configuration.</span></span> <span data-ttu-id="e1f7e-168">`Microsoft.NET.Sdk.Web` controla la creación, transformación y publicación de *web.config* y se incluye cuando se establece el SDK del proyecto en la parte superior del archivo *.csproj*, `<Project Sdk="Microsoft.NET.Sdk.Web">`.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-168">Creating, transforming, and publishing *web.config* is handled by `Microsoft.NET.Sdk.Web`, which is included when you set your project's SDK at the top of your *.csproj* file, `<Project Sdk="Microsoft.NET.Sdk.Web">`.</span></span> <span data-ttu-id="e1f7e-169">Para evitar que el destino de MSBuild transforme el archivo *web.config*, agregue la propiedad **\<IsTransformWebConfigDisabled>** al archivo de proyecto con un valor de `true`:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-169">To prevent the MSBuild target from transforming your *web.config* file, add the **\<IsTransformWebConfigDisabled>** property to your project file with a setting of `true`:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="e1f7e-170">Si no tiene un archivo *web.config* en el proyecto al publicar con *dotnet publish* o con Visual Studio, se crea el archivo en la salida publicada.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-170">If you don't have a *web.config* file in the project when you publish with *dotnet publish* or with Visual Studio publish, the file is created for you in published output.</span></span> <span data-ttu-id="e1f7e-171">Si tiene el archivo en el proyecto, se transforma con los elementos *processPath* y *arguments* correctos para configurar el módulo ASP.NET Core y se mueve a la salida publicada.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-171">If you have the file in your project, it's transformed with the correct *processPath* and *arguments* to configure the ASP.NET Core Module and moved to published output.</span></span> <span data-ttu-id="e1f7e-172">La transformación no toca los valores de configuración de IIS que se han incluido en el archivo.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-172">The transformation doesn't touch IIS configuration settings that you've included in the file.</span></span>

## <a name="create-the-iis-website"></a><span data-ttu-id="e1f7e-173">Crear el sitio web de IIS</span><span class="sxs-lookup"><span data-stu-id="e1f7e-173">Create the IIS Website</span></span>

1. <span data-ttu-id="e1f7e-174">En el sistema IIS de destino, cree una carpeta que contenga las carpetas y los archivos publicados de la aplicación, que se describen en [Estructura de directorios](xref:hosting/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-174">On the target IIS system, create a folder to contain the application's published folders and files, which are described in [Directory Structure](xref:hosting/directory-structure).</span></span>

2. <span data-ttu-id="e1f7e-175">Dentro de la carpeta que ha creado, cree una carpeta de *registros* para contener los registros de la aplicación (si tiene previsto habilitar los registros).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-175">Within the folder you created, create a *logs* folder to hold application logs (if you plan to enable logging).</span></span> <span data-ttu-id="e1f7e-176">Si piensa implementar la aplicación con una carpeta de *registros* en la carga, puede omitir este paso.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-176">If you plan to deploy your application with a *logs* folder in the payload, you may skip this step.</span></span>

3. <span data-ttu-id="e1f7e-177">En **Administrador de IIS**, cree un nuevo sitio web.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-177">In **IIS Manager**, create a new website.</span></span> <span data-ttu-id="e1f7e-178">Proporcione el **Nombre del sitio** y establezca la **Ruta de acceso física** a la carpeta de implementación de la aplicación que ha creado.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-178">Provide a **Site name** and set the **Physical path** to the application's deployment folder that you created.</span></span> <span data-ttu-id="e1f7e-179">Proporcione la configuración de **Enlace** y cree el sitio web.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-179">Provide the **Binding** configuration and create the website.</span></span>

4. <span data-ttu-id="e1f7e-180">Establezca el grupo de aplicaciones en **Sin código administrado**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-180">Set the application pool to **No Managed Code**.</span></span> <span data-ttu-id="e1f7e-181">ASP.NET Core se ejecuta en un proceso independiente y administra el runtime.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-181">ASP.NET Core runs in a separate process and manages the runtime.</span></span>

5. <span data-ttu-id="e1f7e-182">Abra la ventana **Agregar sitio web**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-182">Open the **Add Website** window.</span></span>

   ![Haga clic en Agregar sitio web en el menú contextual de Sitios.](iis/_static/add-website-context-menu-ws2016.png)

6. <span data-ttu-id="e1f7e-184">Configure el sitio web.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-184">Configure the website.</span></span>

   ![Proporcione el nombre del sitio, la ruta de acceso física y el nombre de host en el paso Agregar sitio web.](iis/_static/add-website-ws2016.png)

7. <span data-ttu-id="e1f7e-186">En el panel **Grupos de aplicaciones**, abra la ventana **Modificar grupo de aplicaciones**. Para ello, haga clic con el botón derecho en el grupo de aplicaciones del sitio web y seleccione **Configuración básica...** en el menú emergente.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-186">In the **Application Pools** panel, open the **Edit Application Pool** window by right-clicking on the website's application pool and selecting **Basic Settings...** from the popup menu.</span></span>

   ![Seleccione Configuración básica en el menú contextual del grupo de aplicaciones.](iis/_static/apppools-basic-settings-ws2016.png)

8. <span data-ttu-id="e1f7e-188">Establezca la **Versión de .NET CLR** en **Sin código administrado**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-188">Set the **.NET CLR version** to **No Managed Code**.</span></span>

   ![Establezca Sin código administrado para Versión de .NET CLR.](iis/_static/edit-apppool-ws2016.png)
     
    <span data-ttu-id="e1f7e-190">Nota: El establecimiento de **Versión de .NET CLR** en **Sin código administrado** es opcional.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-190">Note: Setting the **.NET CLR version** to **No Managed Code** is optional.</span></span> <span data-ttu-id="e1f7e-191">ASP.NET Core no se basa en la carga de CLR de escritorio.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-191">ASP.NET Core doesn't rely on loading the desktop CLR.</span></span>

9. <span data-ttu-id="e1f7e-192">Confirme que la identidad del modelo de proceso tiene los permisos adecuados.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-192">Confirm the process model identity has the proper permissions.</span></span>

    <span data-ttu-id="e1f7e-193">Si cambia la identidad predeterminada del grupo de aplicaciones (**Modelo de proceso** > **Identidad**) de **ApplicationPoolIdentity** a otra identidad, compruebe que la nueva identidad tenga los permisos necesarios para acceder a la carpeta de la aplicación, la base de datos y otros recursos necesarios.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-193">If you change the default identity of the application pool (**Process Model** > **Identity**) from **ApplicationPoolIdentity** to another identity, verify that the new identity has the required permissions to access the application's folder, database, and other required resources.</span></span>
   
## <a name="deploy-the-application"></a><span data-ttu-id="e1f7e-194">Implementar la aplicación</span><span class="sxs-lookup"><span data-stu-id="e1f7e-194">Deploy the application</span></span>
<span data-ttu-id="e1f7e-195">Implemente la aplicación en la carpeta que ha creado en el sistema IIS de destino.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-195">Deploy the application to the folder you created on the target IIS system.</span></span> <span data-ttu-id="e1f7e-196">Web Deploy es el mecanismo recomendado para la implementación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-196">Web Deploy is the recommended mechanism for deployment.</span></span> <span data-ttu-id="e1f7e-197">A continuación se ofrecen alternativas a Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-197">Alternatives to Web Deploy are listed below.</span></span>

<span data-ttu-id="e1f7e-198">Confirme que la aplicación publicada para la implementación no se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-198">Confirm that the published app for deployment isn't running.</span></span> <span data-ttu-id="e1f7e-199">Los archivos de la carpeta *publish* quedan bloqueados mientras se ejecuta la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-199">Files in the *publish* folder are locked when the app is running.</span></span> <span data-ttu-id="e1f7e-200">No se puede llevar a cabo la implementación porque no se pueden copiar los archivos bloqueados.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-200">Deployment can't occur because locked files can't be copied.</span></span>

### <a name="web-deploy-with-visual-studio"></a><span data-ttu-id="e1f7e-201">Web Deploy con Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e1f7e-201">Web Deploy with Visual Studio</span></span>
<span data-ttu-id="e1f7e-202">Vea el tema [Create publish profiles for Visual Studio and MSBuild, to deploy ASP.NET Core apps](xref:publishing/web-publishing-vs#publish-profiles) (Crear perfiles de publicación para Visual Studio y MSBuild para implementar aplicaciones de ASP.NET Core) para aprender a crear un perfil de publicación para su uso con Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-202">See [Create publish profiles for Visual Studio and MSBuild, to deploy ASP.NET Core apps](xref:publishing/web-publishing-vs#publish-profiles) topic to learn how to create a publish profile for use with Web Deploy.</span></span> <span data-ttu-id="e1f7e-203">Si el proveedor de hospedaje proporciona un perfil de publicación o admite la creación de uno, descargue su perfil e impórtelo mediante el cuadro de diálogo **Publicar** de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-203">If your hosting provider supplies a Publish Profile or support for creating one, download their profile and import it using the Visual Studio **Publish** dialog.</span></span>

![Cuadro de diálogo Publicar](iis/_static/pub-dialog.png)

### <a name="web-deploy-outside-of-visual-studio"></a><span data-ttu-id="e1f7e-205">Web Deploy fuera de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e1f7e-205">Web Deploy outside of Visual Studio</span></span>
<span data-ttu-id="e1f7e-206">También puede usar Web Deploy fuera de Visual Studio desde la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-206">You can also use Web Deploy outside of Visual Studio from the command line.</span></span> <span data-ttu-id="e1f7e-207">Para más información, vea [Web Deployment Tool (Herramienta de implementación web)](https://docs.microsoft.com/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-207">For more information, see [Web Deployment Tool](https://docs.microsoft.com/iis/publish/using-web-deploy/use-the-web-deployment-tool).</span></span>

### <a name="alternatives-to-web-deploy"></a><span data-ttu-id="e1f7e-208">Alternativas a Web Deploy</span><span class="sxs-lookup"><span data-stu-id="e1f7e-208">Alternatives to Web Deploy</span></span>
<span data-ttu-id="e1f7e-209">Si no quiere usar Web Deploy o no usa Visual Studio, puede emplear cualquiera de los diversos métodos para mover la aplicación al sistema host, como Xcopy, Robocopy o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-209">If you don't wish to use Web Deploy or are not using Visual Studio, you may use any of several methods to move the application to the hosting system, such as Xcopy, Robocopy, or PowerShell.</span></span> <span data-ttu-id="e1f7e-210">Los usuarios de Visual Studio pueden usar los [Ejemplos de publicación](https://github.com/aspnet/vsweb-publish/blob/master/samples/samples.md).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-210">Visual Studio users may use the [Publish Samples](https://github.com/aspnet/vsweb-publish/blob/master/samples/samples.md).</span></span>

## <a name="browse-the-website"></a><span data-ttu-id="e1f7e-211">Examinar el sitio web</span><span class="sxs-lookup"><span data-stu-id="e1f7e-211">Browse the website</span></span>
![El explorador Microsoft Edge ha cargado la página de inicio de IIS.](iis/_static/browsewebsite.png)
   
>[!WARNING]
> <span data-ttu-id="e1f7e-213">Las aplicaciones de .NET Core se hospedan a través de un servidor proxy inverso entre IIS y el servidor Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-213">.NET Core applications are hosted via a reverse-proxy between IIS and the Kestrel server.</span></span> <span data-ttu-id="e1f7e-214">Para crear el servidor proxy inverso, el archivo *web.config* debe estar presente en la ruta de acceso raíz del contenido (normalmente la ruta de acceso base de la aplicación) de la aplicación implementada, que es la ruta de acceso física del sitio web proporcionada a IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-214">In order to create the reverse-proxy, the *web.config* file must be present at the content root path (typically the app base path) of the deployed application, which is the website physical path provided to IIS.</span></span> <span data-ttu-id="e1f7e-215">Los archivos confidenciales están en la ruta de acceso física de la aplicación, incluidas las subcarpetas, como *my_application.runtimeconfig.json*, *my_application.xml* (comentarios de documentación XML) y *my_application.deps.json*.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-215">Sensitive files exist on the app's physical path, including subfolders, such as *my_application.runtimeconfig.json*, *my_application.xml* (XML Documentation comments), and *my_application.deps.json*.</span></span> <span data-ttu-id="e1f7e-216">El archivo *web.config* es necesario para crear el servidor proxy inverso para Kestrel, que evita que IIS entregue estos y otros archivos confidenciales.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-216">The *web.config* file is required to create the reverse proxy to Kestrel, which prevents IIS from serving these and other sensitive files.</span></span> <span data-ttu-id="e1f7e-217">**Por lo tanto, es importante que el archivo *web.config* nunca se cambie de nombre ni se quite de la implementación accidentalmente.**</span><span class="sxs-lookup"><span data-stu-id="e1f7e-217">**Therefore, it is important that the *web.config* file is never accidently renamed or removed from the deployment.**</span></span>

## <a name="data-protection"></a><span data-ttu-id="e1f7e-218">Protección de datos</span><span class="sxs-lookup"><span data-stu-id="e1f7e-218">Data protection</span></span>

<span data-ttu-id="e1f7e-219">Una aplicación de ASP.NET Core almacena el conjunto de claves en memoria con las siguientes condiciones:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-219">An ASP.NET Core application will store the keyring in memory under the following condition:</span></span>

* <span data-ttu-id="e1f7e-220">Que haya un sitio web hospedado tras IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-220">A website is hosted behind IIS.</span></span>
* <span data-ttu-id="e1f7e-221">Que la pila de protección de datos no se haya configurado para almacenar el conjunto de claves en un almacén persistente.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-221">The Data Protection stack has not been configured to store the keyring in a persistent store.</span></span>

<span data-ttu-id="e1f7e-222">Si el conjunto de claves se almacena en memoria, cuando se reinicia la aplicación:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-222">If the keyring is stored in memory, when the app restarts:</span></span>

* <span data-ttu-id="e1f7e-223">Todos los tokens de autenticación de formularios se consideran no válidos.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-223">All forms authentication tokens will be invalid.</span></span> 
* <span data-ttu-id="e1f7e-224">Los usuarios tienen que iniciar sesión de nuevo en la siguiente solicitud.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-224">Users will need to login again on their next request.</span></span> 
* <span data-ttu-id="e1f7e-225">Los datos protegidos con el conjunto de claves ya no están desprotegidos.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-225">Any data you protected with the keyring will no longer be unprotected.</span></span>

> [!WARNING]
> <span data-ttu-id="e1f7e-226">Hay varios middlewares de ASP.NET que usan la protección de datos, incluidos los empleados en la autenticación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-226">Data Protection is used by several ASP.NET middlewares, including those used in authentication.</span></span> <span data-ttu-id="e1f7e-227">Aunque no llame específicamente a ninguna API de protección de datos desde su propio código, tiene que configurar la protección de datos con un script de implementación o en su propio código.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-227">Even if you do not specifically call any Data Protection APIs from your own code you should configure Data Protection with a deployment script or in your own code.</span></span> <span data-ttu-id="e1f7e-228">Si no se configura la protección de datos, las claves se conservan en memoria y se descartan cuando se reinicia la aplicación de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-228">If you do not configure data protection, by default the keys will be held in memory and discarded when your app restarts.</span></span> <span data-ttu-id="e1f7e-229">Al reiniciar se invalidan las cookies escritas por la autenticación con cookies y los usuarios tienen que iniciar sesión de nuevo.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-229">Restarting will invalidate any cookies written by the cookie authentication and users will have to login again.</span></span>

<span data-ttu-id="e1f7e-230">Para configurar la protección de datos en IIS se debe usar uno de los enfoques siguientes:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-230">To configure Data Protection under IIS you must use one of the following approaches:</span></span>

* <span data-ttu-id="e1f7e-231">Ejecute un [script de PowerShell](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) para crear entradas del Registro adecuadas (por ejemplo, `.\Provision-AutoGenKeys.ps1 DefaultAppPool`).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-231">Run a [powershell script](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) to create suitable registry entries (For example,  `.\Provision-AutoGenKeys.ps1 DefaultAppPool`).</span></span> <span data-ttu-id="e1f7e-232">Esto almacena las claves en el Registro, protegidas mediante DPAPI con una clave a nivel de equipo.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-232">This will store keys in the registry, protected using DPAPI with a machine wide key.</span></span>
* <span data-ttu-id="e1f7e-233">Configure el grupo de aplicaciones de IIS para cargar el perfil de usuario.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-233">Configure the IIS Application Pool to load the user profile.</span></span> <span data-ttu-id="e1f7e-234">Esta opción está en la sección **Modelo de proceso**, en la **Configuración avanzada** del grupo de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-234">This setting is in the **Process Model** section under the **Advanced Settings** for the application pool.</span></span> <span data-ttu-id="e1f7e-235">Establezca **Cargar perfil de usuario** en `True`.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-235">Set **Load User Profile** to `True`.</span></span> <span data-ttu-id="e1f7e-236">Esto almacena las claves en el directorio del perfil de usuario protegidas mediante DPAPI con una clave específica de la cuenta de usuario usada para el grupo de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-236">This will store keys under the user profile directory, and protected using DPAPI with a key specific to the user account used for the app pool.</span></span>
* <span data-ttu-id="e1f7e-237">Ajuste el código de la aplicación para [usar el sistema de archivos como un almacén de conjunto de claves](xref:security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-237">Adjust your application code to [use the file system as a key ring store](xref:security/data-protection/configuration/overview).</span></span> <span data-ttu-id="e1f7e-238">Use un certificado X509 para proteger el conjunto de claves y asegúrese de que sea un certificado de confianza.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-238">Use an X509 certificate to protect the key ring and ensure it is a trusted certificate.</span></span> <span data-ttu-id="e1f7e-239">Por ejemplo, si es un certificado autofirmado, debe colocarlo en el almacén raíz de confianza.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-239">For example, if it is a self signed certificate you must place it in the Trusted Root store.</span></span>

<span data-ttu-id="e1f7e-240">Cuando se usa IIS en una granja de servidores web:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-240">When using IIS in a web farm:</span></span>

* <span data-ttu-id="e1f7e-241">Use un recurso compartido de archivos al que puedan acceder todos los equipos.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-241">Use a file share all machines can access.</span></span>
* <span data-ttu-id="e1f7e-242">Implemente un certificado X509 en cada equipo.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-242">Deploy an X509 certificate to each machine.</span></span>  <span data-ttu-id="e1f7e-243">Configure la [protección de datos en el código](https://docs.microsoft.com/aspnet/core/security/data-protection/configuration/overview).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-243">Configure [data protection in code](https://docs.microsoft.com/aspnet/core/security/data-protection/configuration/overview).</span></span>

### <a name="1-create-a-data-protection-registry-hive"></a><span data-ttu-id="e1f7e-244">1. Crear un subárbol del Registro de protección de datos</span><span class="sxs-lookup"><span data-stu-id="e1f7e-244">1. Create a Data Protection Registry Hive</span></span>

<span data-ttu-id="e1f7e-245">Las claves de protección de datos usadas por las aplicaciones de ASP.NET se almacenan en subárboles del Registro externos a las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-245">Data Protection keys used by ASP.NET applications are stored in registry hives external to the applications.</span></span> <span data-ttu-id="e1f7e-246">Para conservar las claves de una determinada aplicación, debe crear un subárbol del Registro para el grupo de aplicaciones de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-246">To persist the keys for a given application, you must create a registry hive for the application's application pool.</span></span>

<span data-ttu-id="e1f7e-247">En las instalaciones independientes de IIS, puede usar el [script de PowerShell Provision-AutoGenKeys.ps1 de protección de datos](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) para cada grupo de aplicaciones usado con una aplicación de ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-247">For standalone IIS installations, you may use the [Data Protection Provision-AutoGenKeys.ps1 PowerShell script](https://github.com/aspnet/DataProtection/blob/dev/Provision-AutoGenKeys.ps1) for each application pool used with an ASP.NET Core application.</span></span> <span data-ttu-id="e1f7e-248">Este script crea una clave del Registro especial en el registro HKLM que solo se incluye en la ACL de la cuenta de proceso de trabajo.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-248">This script will create a special registry key in the HKLM registry that is ACLed only to the worker process account.</span></span> <span data-ttu-id="e1f7e-249">Las claves se cifran en reposo con DPAPI.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-249">Keys are encrypted at rest using DPAPI.</span></span>

<span data-ttu-id="e1f7e-250">En escenarios de granja de servidores web, una aplicación puede configurarse para usar una ruta de acceso UNC para almacenar su conjunto de claves de protección de datos.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-250">In web farm scenarios, an application can be configured to use a UNC path to store its data protection key ring.</span></span> <span data-ttu-id="e1f7e-251">De forma predeterminada, las claves de protección de datos no se cifran.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-251">By default, the data protection keys are not encrypted.</span></span> <span data-ttu-id="e1f7e-252">Debe asegurarse de que los permisos de archivo de un recurso compartido de este tipo se limitan a la cuenta de Windows como la que se ejecuta la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-252">You should ensure that the file permissions for such a share are limited to the Windows account the application runs as.</span></span> <span data-ttu-id="e1f7e-253">Además puede optar por proteger las claves en reposo con un certificado X509.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-253">In addition you may choose to protect keys at rest using an X509 certificate.</span></span> <span data-ttu-id="e1f7e-254">Es posible que quiera considerar un mecanismo que permita a los usuarios cargar certificados, colocarlos en el almacén de certificados de confianza del usuario y asegurarse de que están disponibles en todos los equipos en los que se va a ejecutar la aplicación del usuario.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-254">You may wish to consider a mechanism to allow users to upload certificates, place them into the user's trusted certificate store, and ensure they are available on all machines the user's application will run on.</span></span> <span data-ttu-id="e1f7e-255">Vea [Configuración de la protección de datos](xref:security/data-protection/configuration/overview#data-protection-configuring) para obtener detalles.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-255">See [Configuring Data Protection](xref:security/data-protection/configuration/overview#data-protection-configuring) for details.</span></span>

### <a name="2-configure-the-iis-application-pool-to-load-the-user-profile"></a><span data-ttu-id="e1f7e-256">2. Configurar el grupo de aplicaciones de IIS para cargar el perfil de usuario</span><span class="sxs-lookup"><span data-stu-id="e1f7e-256">2. Configure the IIS Application Pool to load the user profile</span></span>
<span data-ttu-id="e1f7e-257">Esta opción está en la sección Modelo de proceso, en la Configuración avanzada del grupo de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-257">This setting is in the Process Model section under the Advanced Settings for the application pool.</span></span> <span data-ttu-id="e1f7e-258">Establezca Cargar perfil de usuario en True.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-258">Set Load User Profile to True.</span></span> <span data-ttu-id="e1f7e-259">Esto almacena las claves en el directorio del perfil de usuario protegidas mediante DPAPI con una clave específica de la cuenta de usuario usada para el grupo de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-259">This will store keys under the user profile directory, and protected using DPAPI with a key specific to the user account used for the app pool.</span></span>

### <a name="3-machine-wide-policy-for-data-protection"></a><span data-ttu-id="e1f7e-260">3. Directiva a nivel de equipo para la protección de datos</span><span class="sxs-lookup"><span data-stu-id="e1f7e-260">3. Machine-wide policy for data protection</span></span>

<span data-ttu-id="e1f7e-261">El sistema de protección de datos tiene compatibilidad limitada con el establecimiento de una [directiva a nivel de equipo](xref:security/data-protection/configuration/machine-wide-policy#data-protection-configuration-machinewidepolicy) predeterminada para todas las aplicaciones que usan las API de protección de datos.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-261">The data protection system has limited support for setting default [machine-wide policy](xref:security/data-protection/configuration/machine-wide-policy#data-protection-configuration-machinewidepolicy) for all applications that consume the data protection APIs.</span></span> <span data-ttu-id="e1f7e-262">Vea la documentación de [protección de datos](xref:security/data-protection/index) para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-262">See the [data protection](xref:security/data-protection/index) documentation for more details.</span></span>

## <a name="configuration-of-sub-applications"></a><span data-ttu-id="e1f7e-263">Configuración de aplicaciones secundarias</span><span class="sxs-lookup"><span data-stu-id="e1f7e-263">Configuration of sub-applications</span></span>

<span data-ttu-id="e1f7e-264">Las aplicaciones secundarias agregadas bajo la aplicación raíz no deben incluir el módulo ASP.NET Core como controlador.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-264">Sub applications added under the root application shouldn't include the ASP.NET Core Module as a handler.</span></span> <span data-ttu-id="e1f7e-265">Si agrega el módulo como controlador al archivo *web.config* de una aplicación secundaria, aparece un error 500.19 (Error interno del servidor) que hace referencia al archivo de configuración erróneo al intentar examinar la aplicación secundaria.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-265">If you add the module as a handler in a sub-application's *web.config* file, you receive a 500.19 (Internal Server Error) referencing the faulty config file when you attempt to browse the sub app.</span></span> <span data-ttu-id="e1f7e-266">En el ejemplo siguiente se muestra el contenido de un archivo publicado *web.config* para una aplicación secundaria de ASP.NET Core:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-266">The following example shows the contents of a published *web.config* file for an ASP.NET Core sub app:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <aspNetCore processPath="dotnet" 
        arguments=".\MyApp.dll" 
        stdoutLogEnabled="false" 
        stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="e1f7e-267">Si piensa hospedar una aplicación secundaria que no es de ASP.NET Core bajo una aplicación de ASP.NET Core, debe quitar explícitamente el controlador heredado del archivo *web.config* de la aplicación secundaria:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-267">If you intend to host a non-ASP.NET Core sub app underneath an ASP.NET Core app, you must explicitly remove the inherited handler in the sub app *web.config* file:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <remove name="aspNetCore"/>
    </handlers>
    <aspNetCore processPath="dotnet" 
        arguments=".\MyApp.dll" 
        stdoutLogEnabled="false" 
        stdoutLogFile=".\logs\stdout" />
  </system.webServer>
</configuration>
```

<span data-ttu-id="e1f7e-268">Para más información sobre la configuración del módulo ASP.NET Core con el archivo *web.config*, vea el tema [Introducción al módulo ASP.NET Core](xref:fundamentals/servers/aspnet-core-module) y [Referencia de configuración del módulo ASP.NET Core](xref:hosting/aspnet-core-module).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-268">For more information on configuring the ASP.NET Core Module with the *web.config* file, see the [Introduction to ASP.NET Core Module](xref:fundamentals/servers/aspnet-core-module) topic and the [ASP.NET Core Module configuration reference](xref:hosting/aspnet-core-module).</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="e1f7e-269">Configuración de IIS con web.config</span><span class="sxs-lookup"><span data-stu-id="e1f7e-269">Configuration of IIS with web.config</span></span>

<span data-ttu-id="e1f7e-270">La configuración de IIS aún se ve afectada por la sección `<system.webServer>` de *web.config* en las características de IIS que se aplican a una configuración de proxy inverso.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-270">IIS configuration is still influenced by the `<system.webServer>` section of *web.config* for those IIS features that apply to a reverse proxy configuration.</span></span> <span data-ttu-id="e1f7e-271">Por ejemplo, es posible que tenga IIS configurado en el nivel de sistema para usar compresión dinámica, aunque podría deshabilitar esa configuración para una aplicación con el elemento `<urlCompression>` del archivo *web.config* de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-271">For example, you may have IIS configured at the system level to use dynamic compression, but you could disable that setting for an app with the `<urlCompression>` element in the app's *web.config* file.</span></span> <span data-ttu-id="e1f7e-272">Para más información, vea la [referencia de configuración para `<system.webServer>`](https://docs.microsoft.com/iis/configuration/system.webServer/), [Referencia de configuración del módulo ASP.NET Core](xref:hosting/aspnet-core-module) y [Uso de módulos de IIS con ASP.NET Core](xref:hosting/iis-modules).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-272">For more information, see the [configuration reference for `<system.webServer>`](https://docs.microsoft.com/iis/configuration/system.webServer/), [ASP.NET Core Module Configuration Reference](xref:hosting/aspnet-core-module), and [Using IIS Modules with ASP.NET Core](xref:hosting/iis-modules).</span></span> <span data-ttu-id="e1f7e-273">Si tiene que establecer variables de entorno para aplicaciones individuales que se ejecutan en grupos de aplicaciones aislados (se admite en IIS 10.0+), vea la sección *Comando AppCmd.exe* del tema [Variables de entorno \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) de la documentación de referencia de IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-273">If you need to set environment variables for individual apps running in isolated Application Pools (supported on IIS 10.0+), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="e1f7e-274">Secciones de configuración de web.config</span><span class="sxs-lookup"><span data-stu-id="e1f7e-274">Configuration sections of web.config</span></span>

<span data-ttu-id="e1f7e-275">A diferencia de las aplicaciones de .NET Framework que se configuran con los elementos `<system.web>`, `<appSettings>`, `<connectionStrings>` y `<location>` de *web.config*, las aplicaciones de ASP.NET Core se configuran con otros proveedores de configuración.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-275">Unlike .NET Framework applications that are configured with the `<system.web>`, `<appSettings>`, `<connectionStrings>`, and `<location>` elements in *web.config*, ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="e1f7e-276">Para obtener más información, vea [Configuración](xref:fundamentals/configuration).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-276">For more information, see [Configuration](xref:fundamentals/configuration).</span></span>

## <a name="application-pools"></a><span data-ttu-id="e1f7e-277">Grupos de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="e1f7e-277">Application Pools</span></span>

<span data-ttu-id="e1f7e-278">Al hospedar varios sitios web en un único sistema, debe aislar las aplicaciones entre sí mediante la ejecución de cada una de ellas en su propio grupo de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-278">When hosting multiple websites on a single system, you should isolate the applications from each other by running each app in its own application pool.</span></span> <span data-ttu-id="e1f7e-279">El valor predeterminado del cuadro de diálogo **Agregar sitio web** es este comportamiento.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-279">The IIS **Add Website** dialog defaults to this behavior.</span></span> <span data-ttu-id="e1f7e-280">Cuando se proporciona el **Nombre del sitio**, el texto se transfiere automáticamente al cuadro de texto **Grupo de aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-280">When you provide a **Site name**, the text is automatically transferred to the **Application pool** textbox.</span></span> <span data-ttu-id="e1f7e-281">Al agregar el sitio web se crea un nuevo grupo de aplicaciones con el nombre del sitio.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-281">A new application pool will be created using the site name when you add the website.</span></span>

## <a name="application-pool-identity"></a><span data-ttu-id="e1f7e-282">Identidad del grupo de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="e1f7e-282">Application Pool Identity</span></span>

<span data-ttu-id="e1f7e-283">Una cuenta de identidad del grupo de aplicaciones permite ejecutar una aplicación en una cuenta única sin tener que crear ni administrar dominios o cuentas locales.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-283">An application pool identity account allows you to run an application under a unique account without having to create and manage domains or local accounts.</span></span> <span data-ttu-id="e1f7e-284">En IIS 8.0+, el proceso de trabajo de administración de IIS (WAS) crea una cuenta virtual con el nombre del nuevo grupo de aplicaciones y ejecuta los procesos de trabajo del grupo de aplicaciones en esta cuenta de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-284">On IIS 8.0+, the IIS Admin Worker Process (WAS) will create a virtual account with the name of the new application pool and run the application pool's worker processes under this account by default.</span></span> <span data-ttu-id="e1f7e-285">En la Consola de administración de IIS, en la opción Configuración avanzada del grupo de aplicaciones, asegúrese de que la identidad está establecida para usar **ApplicationPoolIdentity**, como se muestra en la imagen siguiente.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-285">In the IIS Management Console, under Advanced Settings for your application pool, ensure that the Identity is set to use **ApplicationPoolIdentity** as shown in the image below.</span></span>

![Cuadro de diálogo Configuración avanzada del grupo de aplicaciones](iis/_static/apppool-identity.png)

<span data-ttu-id="e1f7e-287">El proceso de administración de IIS crea un identificador seguro con el nombre del grupo de aplicaciones en el sistema de seguridad de Windows.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-287">The IIS management process creates a secure identifier with the name of the application pool in the Windows Security System.</span></span> <span data-ttu-id="e1f7e-288">Los recursos se pueden proteger mediante esta identidad, aunque no es una cuenta de usuario real ni se muestra en la consola de administración de usuario de Windows.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-288">Resources can be secured by using this identity; however, this identity is not a real user account and won't show up in the Windows User Management Console.</span></span>

<span data-ttu-id="e1f7e-289">Si tiene que conceder al proceso de trabajo de IIS acceso elevado a la aplicación, debe modificar la lista de control de acceso (ACL) del directorio que contiene la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-289">If you need to grant the IIS worker process elevated access to your application, you will need to modify the Access Control List (ACL) for the directory containing your application.</span></span>

1. <span data-ttu-id="e1f7e-290">Abra el Explorador de Windows y vaya al directorio.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-290">Open Windows Explorer and navigate to the directory.</span></span>

2. <span data-ttu-id="e1f7e-291">Haga clic con el botón derecho en el directorio y luego haga clic en **Propiedades**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-291">Right click on the directory and click **Properties**.</span></span>

3. <span data-ttu-id="e1f7e-292">En la pestaña **Seguridad**, haga clic en el botón **Editar** y luego en el botón **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-292">Under the **Security** tab, click the **Edit** button and then the **Add** button.</span></span>

4. <span data-ttu-id="e1f7e-293">Haga clic en el botón **Ubicaciones** y asegúrese de seleccionar el sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-293">Click the **Locations** button and make sure you select your system.</span></span>

5. <span data-ttu-id="e1f7e-294">Escriba **IIS AppPool\DefaultAppPool** en el cuadro de texto **Escribir los nombres de objeto para seleccionar**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-294">Enter **IIS AppPool\DefaultAppPool** in **Enter the object names to select** textbox.</span></span>

  ![Selección del cuadro de diálogo de usuarios o grupos para la carpeta de la aplicación](iis/_static/select-users-or-groups-1.png)

6. <span data-ttu-id="e1f7e-296">Haga clic en el botón **Comprobar nombres** y luego en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-296">Click the **Check Names** button and then click **OK**.</span></span>

  ![Selección del cuadro de diálogo de usuarios o grupos para la carpeta de la aplicación](iis/_static/select-users-or-groups-2.png)

<span data-ttu-id="e1f7e-298">También puede hacerlo mediante un símbolo del sistema con la herramienta **ICACLS**:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-298">You can also do this via a command prompt using **ICACLS** tool:</span></span>

```console
ICACLS C:\sites\MyWebApp /grant "IIS AppPool\DefaultAppPool":F
```

## <a name="troubleshooting-tips"></a><span data-ttu-id="e1f7e-299">Sugerencias para la solución de problemas</span><span class="sxs-lookup"><span data-stu-id="e1f7e-299">Troubleshooting tips</span></span>

<span data-ttu-id="e1f7e-300">Para diagnosticar problemas con las implementaciones de IIS, estudie la salida del explorador, examine el registro **Aplicación** del sistema con el **Visor de eventos** y habilite los registros `stdout`.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-300">To diagnose problems with IIS deployments, study browser output, examine the system's **Application** log through **Event Viewer**, and enable `stdout` logging.</span></span> <span data-ttu-id="e1f7e-301">El registro del **módulo ASP.NET Core** se encuentra en la ruta de acceso proporcionada en el atributo *stdoutLogFile* del elemento `<aspNetCore>` de *web.config*. Las carpetas de la ruta de acceso proporcionada en el valor del atributo deben existir en la implementación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-301">The **ASP.NET Core Module** log will be found on the path provided in the *stdoutLogFile* attribute of the `<aspNetCore>` element in *web.config*. Any folders on the path provided in the attribute value must exist in the deployment.</span></span> <span data-ttu-id="e1f7e-302">También debe establecer *stdoutLogEnabled="true"*.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-302">You must also set *stdoutLogEnabled="true"*.</span></span> <span data-ttu-id="e1f7e-303">Las aplicaciones que usan el SDK de `Microsoft.NET.Sdk.Web` para crear el archivo *web.config* tienen como valor predeterminado *stdoutLogEnabled* establecido en *false*, por lo que debe proporcionar manualmente el archivo *web.config* o modificar el archivo con el fin de habilitar los registros `stdout`.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-303">Applications that use the `Microsoft.NET.Sdk.Web` SDK to create the *web.config* file will default the *stdoutLogEnabled* setting to *false*, so you must manually provide the *web.config* file or modify the file in order to enable `stdout` logging.</span></span>

<span data-ttu-id="e1f7e-304">Algunos de los errores comunes no aparecen en el explorador, el registro de aplicaciones ni el registro del módulo ASP.NET Core hasta que se ha pasado el módulo *startupTimeLimit* (valor predeterminado: 120 segundos) y *startupRetryCount* (valor predeterminado: 2).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-304">Several of the common errors do not appear in the browser, Application Log, and ASP.NET Core Module Log until the module *startupTimeLimit* (default: 120 seconds) and *startupRetryCount* (default: 2) have passed.</span></span> <span data-ttu-id="e1f7e-305">Por lo tanto, espere seis minutos completos antes de deducir que el módulo no ha iniciado un proceso de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-305">Therefore, wait a full six minutes before deducing that the module has failed to start a process for the application.</span></span>

<span data-ttu-id="e1f7e-306">Una manera rápida de determinar si la aplicación funciona correctamente es ejecutarla directamente en Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-306">One quick way to determine if the application is working properly is to run the application directly on Kestrel.</span></span> <span data-ttu-id="e1f7e-307">Si la aplicación se ha publicado como una implementación dependiente del marco de trabajo, ejecute **dotnet my_application.dll** en la carpeta de implementación, que es la ruta de acceso física de IIS a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-307">If the application was published as a framework-dependent deployment, execute **dotnet my_application.dll** in the deployment folder, which is the IIS physical path to the application.</span></span> <span data-ttu-id="e1f7e-308">Si la aplicación se ha publicado como una implementación independiente, ejecute el ejecutable de la aplicación directamente desde un símbolo del sistema, **my_application.exe**, en la carpeta de implementación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-308">If the application was published as a self-contained deployment, run the application's executable directly from a command prompt, **my_application.exe**, in the deployment folder.</span></span> <span data-ttu-id="e1f7e-309">Si Kestrel está escuchando en el puerto predeterminado 5000, debe ser capaz de examinar la aplicación en `http://localhost:5000/`.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-309">If Kestrel is listening on default port 5000, you should be able to browse the application at `http://localhost:5000/`.</span></span> <span data-ttu-id="e1f7e-310">Si la aplicación responde normalmente en la dirección del punto de conexión Kestrel, lo más probable es que el problema esté relacionado con la configuración de IIS-módulo ASP.NET Core-Kestrel y menos con la propia aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-310">If the application responds normally at the Kestrel endpoint address, the problem is more likely related to the IIS-ASP.NET Core Module-Kestrel configuration and less likely within the application itself.</span></span>

<span data-ttu-id="e1f7e-311">Una manera de determinar si el servidor proxy inverso de IIS para el servidor Kestrel funciona correctamente es realizar una solicitud de archivo estático simple de una hoja de estilos, un script o una imagen de los archivos estáticos de la aplicación en *wwwroot* con [middleware de archivo estático](xref:fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-311">One way to determine if the IIS reverse proxy to the Kestrel server is working properly is to perform a simple static file request for a stylesheet, script, or image from the application's static files in *wwwroot* using [Static File middleware](xref:fundamentals/static-files).</span></span> <span data-ttu-id="e1f7e-312">Si la aplicación puede entregar archivos estáticos pero se producen errores en las vistas de MVC y otros puntos de conexión, es menos probable que el problema esté relacionado con la configuración de IIS-módulo ASP.NET Core-Kestrel y más con la propia aplicación (por ejemplo, el enrutamiento MVC o un error interno del servidor 500).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-312">If the application can serve static files but MVC Views and other endpoints are failing, the problem is less likely related to the IIS-ASP.NET Core Module-Kestrel configuration and more likely within the application itself (for example, MVC routing or 500 Internal Server Error).</span></span>

<span data-ttu-id="e1f7e-313">Si Kestrel se inicia normalmente tras IIS pero la aplicación no se ejecuta en el sistema después de hacerlo correctamente en local, puede agregar provisionalmente una variable de entorno a *web.config* para establecer `ASPNETCORE_ENVIRONMENT` en `Development`.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-313">When Kestrel starts normally behind IIS but the app won't run on the system after successfully running locally, you can temporarily add an environment variable to *web.config* to set the `ASPNETCORE_ENVIRONMENT` to `Development`.</span></span> <span data-ttu-id="e1f7e-314">Siempre y cuando no se invalide el entorno en el inicio de la aplicación, esto le permite que la [página de excepción para el desarrollador](xref:fundamentals/error-handling) aparezca cuando la aplicación se ejecuta en el sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-314">As long as you don't override the environment in app startup, this will allow the [developer exception page](xref:fundamentals/error-handling) to appear when the app is run on the system.</span></span> <span data-ttu-id="e1f7e-315">Solo se recomienda establecer la variable de entorno para `ASPNETCORE_ENVIRONMENT` de este modo para los sistemas de almacenamiento o pruebas que no están expuestos a Internet.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-315">Setting the environment variable for `ASPNETCORE_ENVIRONMENT` in this way is only recommended for staging/testing systems that are not exposed to the Internet.</span></span> <span data-ttu-id="e1f7e-316">Asegúrese de quitar la variable de entorno del archivo *web.config* cuando termine.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-316">Be sure you remove the environment variable from the *web.config* file when finished.</span></span> <span data-ttu-id="e1f7e-317">Para más información sobre cómo establecer variables de entorno mediante el archivo *web.config* del proxy inverso, vea [environmentVariables child element of aspNetCore](xref:hosting/aspnet-core-module#setting-environment-variables) (Elemento secundario environmentVariables de aspNetCore).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-317">For information on setting environment variables via *web.config* for the reverse proxy, see [environmentVariables child element of aspNetCore](xref:hosting/aspnet-core-module#setting-environment-variables).</span></span>

<span data-ttu-id="e1f7e-318">En la mayoría de los casos, la habilitación del registro de la aplicación puede ayudar a solucionar problemas con el proxy inverso o la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-318">In most cases, enabling application logging will assist in troubleshooting problems with application or the reverse proxy.</span></span> <span data-ttu-id="e1f7e-319">Vea [Logging](xref:fundamentals/logging) (Registro) para más información.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-319">See [Logging](xref:fundamentals/logging) for more information.</span></span>

<span data-ttu-id="e1f7e-320">La última sugerencia de solución de problemas se refiere a las aplicaciones que no se ejecutan después de actualizar el SDK de .NET Core en el equipo de desarrollo o las versiones de paquete en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-320">Our last troubleshooting tip pertains to apps that fail to run after upgrading either the .NET Core SDK on the development machine or package versions within the app.</span></span> <span data-ttu-id="e1f7e-321">En algunos casos, los paquetes incoherentes pueden interrumpir una aplicación al realizar actualizaciones importantes.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-321">In some cases, incoherent packages may break an app when performing major upgrades.</span></span> <span data-ttu-id="e1f7e-322">Puede corregir la mayoría de estos problemas mediante la eliminación de las carpetas `bin` y `obj` del proyecto, el borrado de las memorias caché de paquete en `%UserProfile%\.nuget\packages\` y `%LocalAppData%\Nuget\v3-cache`, la restauración del proyecto y la confirmación de que la implementación anterior en el sistema se ha eliminado por completo antes de volver a implementar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-322">You can fix most of these issues by deleting the `bin` and `obj` folders in the project, clearing package caches at `%UserProfile%\.nuget\packages\` and `%LocalAppData%\Nuget\v3-cache`, restoring the project, and confirming that your prior deployment on the system has been completely deleted prior to re-deploying the app.</span></span>

>[!TIP]
> <span data-ttu-id="e1f7e-323">Una manera cómoda de borrar las memorias caché de paquete es obtener la herramienta `NuGet.exe` en [NuGet.org](https://www.nuget.org/), agregarla a la ruta de acceso del sistema y ejecutar `nuget locals all -clear` desde un símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-323">A convenient way to clear package caches is to obtain the `NuGet.exe` tool from [NuGet.org](https://www.nuget.org/), add it to your system PATH, and execute `nuget locals all -clear` from a command prompt.</span></span>

## <a name="common-errors"></a><span data-ttu-id="e1f7e-324">Errores comunes</span><span class="sxs-lookup"><span data-stu-id="e1f7e-324">Common errors</span></span>

<span data-ttu-id="e1f7e-325">La siguiente no es una lista completa de errores.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-325">The following is not a complete list of errors.</span></span> <span data-ttu-id="e1f7e-326">Si detecta un error que no aparece aquí, deje un mensaje de error detallado en la sección de comentarios siguiente.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-326">Should you encounter an error not listed here, please leave a detailed error message in the comments section below.</span></span>

### <a name="installer-unable-to-obtain-vc-redistributable"></a><span data-ttu-id="e1f7e-327">El instalador no puede obtener VC++ Redistributable</span><span class="sxs-lookup"><span data-stu-id="e1f7e-327">Installer unable to obtain VC++ Redistributable</span></span>

* <span data-ttu-id="e1f7e-328">**Excepción del instalador:** 0x80072efd o 0x80072f76 - Error no especificado</span><span class="sxs-lookup"><span data-stu-id="e1f7e-328">**Installer Exception:** 0x80072efd or 0x80072f76 - Unspecified error</span></span>

* <span data-ttu-id="e1f7e-329">**Excepción del registro del instalador&#8224;:** Error 0x80072efd o 0x80072f76: Error al ejecutar el paquete EXE</span><span class="sxs-lookup"><span data-stu-id="e1f7e-329">**Installer Log Exception&#8224;:** Error 0x80072efd or 0x80072f76: Failed to execute EXE package</span></span>

  <span data-ttu-id="e1f7e-330">&#8224;El registro se encuentra en C:\Users\\{USUARIO}\AppData\Local\Temp\dd_DotNetCoreWinSvrHosting__{timestamp}.log.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-330">&#8224;The log is located at C:\Users\\{USER}\AppData\Local\Temp\dd_DotNetCoreWinSvrHosting__{timestamp}.log.</span></span>

<span data-ttu-id="e1f7e-331">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-331">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-332">Si el sistema no tiene acceso a Internet al instalar el lote de hospedaje del servidor, se produce esta excepción cuando se evita que el instalador obtenga *Microsoft Visual C++ 2015 Redistributable*.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-332">If the system does not have Internet access while installing the server hosting bundle, this exception will occur when the installer is prevented from obtaining the *Microsoft Visual C++ 2015 Redistributable*.</span></span> <span data-ttu-id="e1f7e-333">Puede obtener un instalador en el [Centro de descarga de Microsoft](https://www.microsoft.com/download/details.aspx?id=53840).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-333">You may obtain an installer from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span></span> <span data-ttu-id="e1f7e-334">Si se produce un error en el instalador, es posible que no reciba el runtime de .NET Core necesario para hospedar implementaciones dependientes del marco de trabajo.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-334">If the installer fails, you may not receive the .NET Core runtime required to host framework-dependent deployments.</span></span> <span data-ttu-id="e1f7e-335">Si va a hospedar implementaciones dependientes del marco de trabajo, confirme que el runtime está instalado en Programas y características.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-335">If you plan to host framework-dependent deployments, confirm that the runtime is installed in Programs &amp; Features.</span></span> <span data-ttu-id="e1f7e-336">Puede obtener un instalador de runtime en [Descargas de .NET](https://www.microsoft.com/net/download/core).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-336">You may obtain a runtime installer from [.NET Downloads](https://www.microsoft.com/net/download/core).</span></span> <span data-ttu-id="e1f7e-337">Después de instalar el runtime, reinicie el sistema o IIS al ejecutar **net stop was /y** seguido de **net start w3svc** desde un símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-337">After installing the runtime, restart the system or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

### <a name="os-upgrade-removed-the-32-bit-aspnet-core-module"></a><span data-ttu-id="e1f7e-338">La actualización del sistema operativo ha quitado el módulo ASP.NET Core de 32 bits</span><span class="sxs-lookup"><span data-stu-id="e1f7e-338">OS upgrade removed the 32-bit ASP.NET Core Module</span></span>

* <span data-ttu-id="e1f7e-339">**Registro de aplicación:** Error al cargar el archivo DLL del módulo **C:\WINDOWS\system32\inetsrv\aspnetcore.dll**.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-339">**Application Log:** The Module DLL **C:\WINDOWS\system32\inetsrv\aspnetcore.dll** failed to load.</span></span> <span data-ttu-id="e1f7e-340">Los datos son el error.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-340">The data is the error.</span></span>

<span data-ttu-id="e1f7e-341">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-341">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-342">Los archivos que no son de SO del directorio **C:\Windows\SysWOW64\inetsrv** no se conservan durante una actualización del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-342">Non-OS files in the **C:\Windows\SysWOW64\inetsrv** directory are not preserved during an OS upgrade.</span></span> <span data-ttu-id="e1f7e-343">Si ha instalado el módulo ASP.NET Core antes de una actualización del sistema operativo y luego intenta ejecutar cualquier grupo de aplicaciones en modo de 32 bits después de una actualización del sistema operativo, se produce este problema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-343">If you have the ASP.NET Core Module installed prior to an OS upgrade and then try to run any AppPool in 32-bit mode after an OS upgrade, you will encounter this issue.</span></span> <span data-ttu-id="e1f7e-344">Después de actualizar el sistema operativo, repare el módulo ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-344">After an OS upgrade, repair the ASP.NET Core Module.</span></span> <span data-ttu-id="e1f7e-345">Vea [Instalación del lote de hospedaje .NET Core Windows Server](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-345">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span> <span data-ttu-id="e1f7e-346">Seleccione **Reparar** al ejecutar el instalador.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-346">Select **Repair** when you run the installer.</span></span>

### <a name="platform-conflicts-with-rid"></a><span data-ttu-id="e1f7e-347">Conflictos de plataforma con RID</span><span class="sxs-lookup"><span data-stu-id="e1f7e-347">Platform conflicts with RID</span></span>

* <span data-ttu-id="e1f7e-348">**Explorador:** Error HTTP 502.5 - Error en el proceso</span><span class="sxs-lookup"><span data-stu-id="e1f7e-348">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="e1f7e-349">**Registro de aplicación:** La aplicación 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' con raíz física ' C:\{PATH}\' no pudo iniciar el proceso con la línea de comandos '"C:\\{PATH}\my_application.{exe|dll}" ', ErrorCode = '0x80004005 : ff.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-349">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\{PATH}\' failed to start process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ', ErrorCode = '0x80004005 : ff.</span></span>

* <span data-ttu-id="e1f7e-350">**Registro del módulo ASP.NET Core:** Excepción no controlada: System.BadImageFormatException: No se pudo cargar el archivo o ensamblado 'my_application.dll'.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-350">**ASP.NET Core Module Log:** Unhandled Exception: System.BadImageFormatException: Could not load file or assembly 'my_application.dll'.</span></span> <span data-ttu-id="e1f7e-351">Se ha intentado cargar un programa con un formato incorrecto.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-351">An attempt was made to load a program with an incorrect format.</span></span>

<span data-ttu-id="e1f7e-352">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-352">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-353">Confirme que la aplicación se ejecuta localmente en Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-353">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="e1f7e-354">Un error de proceso puede ser el resultado de un problema en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-354">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="e1f7e-355">Para más información, vea [Sugerencias para la solución de problemas](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-355">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="e1f7e-356">Confirme que no ha establecido un elemento `<PlatformTarget>` en *.csproj* que entre en conflicto con el RID.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-356">Confirm that you didn't set a `<PlatformTarget>` in your *.csproj* that conflicts with the RID.</span></span> <span data-ttu-id="e1f7e-357">Por ejemplo, no especifique un elemento `<PlatformTarget>` de `x86` ni publique con un RID de `win10-x64`, ya sea mediante *dotnet publish -c Release -r win10-x64* o al establecer el elemento `<RuntimeIdentifiers>` de *.csproj * en `win10-x64`.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-357">For example, don't specify a `<PlatformTarget>` of `x86` and publish with an RID of `win10-x64`, either by using *dotnet publish -c Release -r win10-x64* or by setting the `<RuntimeIdentifiers>` in your *.csproj* to `win10-x64`.</span></span> <span data-ttu-id="e1f7e-358">El proyecto se publica sin advertencias ni errores, pero se produce un error con las excepciones registradas anteriores en el sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-358">The project will publish without warning or error but fail with the above logged exceptions on the system.</span></span>

* <span data-ttu-id="e1f7e-359">Si esta excepción se produce en una implementación de aplicaciones de Azure al actualizar una aplicación e implementar ensamblados más recientes, elimine manualmente todos los archivos de la implementación anterior.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-359">If this exception occurs for an Azure Apps deployment when upgrading an application and deploying newer assemblies, manually delete all files from the prior deployment.</span></span> <span data-ttu-id="e1f7e-360">Los ensamblados persistentes no compatibles pueden producir una excepción `System.BadImageFormatException` al implementar una aplicación actualizada.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-360">Lingering incompatible assemblies can result in a `System.BadImageFormatException` exception when deploying an upgraded app.</span></span>

### <a name="uri-endpoint-wrong-or-stopped-website"></a><span data-ttu-id="e1f7e-361">Punto de conexión de URI incorrecto o sitio web detenido</span><span class="sxs-lookup"><span data-stu-id="e1f7e-361">URI endpoint wrong or stopped website</span></span>

* <span data-ttu-id="e1f7e-362">**Explorador:** ERR_CONNECTION_REFUSED</span><span class="sxs-lookup"><span data-stu-id="e1f7e-362">**Browser:** ERR_CONNECTION_REFUSED</span></span>

* <span data-ttu-id="e1f7e-363">**Registro de aplicación:** Sin entrada</span><span class="sxs-lookup"><span data-stu-id="e1f7e-363">**Application Log:** No entry</span></span>

* <span data-ttu-id="e1f7e-364">**Registro del módulo ASP.NET Core:** Archivo de registro no creado</span><span class="sxs-lookup"><span data-stu-id="e1f7e-364">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="e1f7e-365">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-365">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-366">Confirme que usa el punto de conexión de URI correcto para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-366">Confirm you are using the correct URI endpoint for the application.</span></span> <span data-ttu-id="e1f7e-367">Compruebe los enlaces.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-367">Check your bindings.</span></span>

* <span data-ttu-id="e1f7e-368">Confirme que el sitio web de IIS no está en estado *Detenido*.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-368">Confirm that the IIS website is not in the *Stopped* state.</span></span>

### <a name="corewebengine-or-w3svc-server-features-disabled"></a><span data-ttu-id="e1f7e-369">Características de servidor CoreWebEngine o W3SVC deshabilitadas</span><span class="sxs-lookup"><span data-stu-id="e1f7e-369">CoreWebEngine or W3SVC server features disabled</span></span>

* <span data-ttu-id="e1f7e-370">**Excepción de sistema operativo:** Se deben instalar las características de IIS 7.0 CoreWebEngine y W3SVC para usar el módulo ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-370">**OS Exception:** The IIS 7.0 CoreWebEngine and W3SVC features must be installed to use the ASP.NET Core Module.</span></span>

<span data-ttu-id="e1f7e-371">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-371">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-372">Confirme que ha habilitado el rol y las características correctos.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-372">Confirm that you have enabled the proper role and features.</span></span> <span data-ttu-id="e1f7e-373">Vea [Configuración de IIS](#iis-configuration).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-373">See [IIS Configuration](#iis-configuration).</span></span>

### <a name="incorrect-website-physical-path-or-application-missing"></a><span data-ttu-id="e1f7e-374">Ruta de acceso física de sitio web incorrecta o aplicación que falta</span><span class="sxs-lookup"><span data-stu-id="e1f7e-374">Incorrect website physical path or application missing</span></span>

* <span data-ttu-id="e1f7e-375">**Explorador:** 403 Prohibido - Acceso denegado **--O BIEN--** 403.14 Prohibido - El servidor web está configurado para no mostrar una lista de los contenidos de este directorio.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-375">**Browser:** 403 Forbidden - Access is denied **--OR--** 403.14 Forbidden - The Web server is configured to not list the contents of this directory.</span></span>

* <span data-ttu-id="e1f7e-376">**Registro de aplicación:** Sin entrada</span><span class="sxs-lookup"><span data-stu-id="e1f7e-376">**Application Log:** No entry</span></span>

* <span data-ttu-id="e1f7e-377">**Registro del módulo ASP.NET Core:** Archivo de registro no creado</span><span class="sxs-lookup"><span data-stu-id="e1f7e-377">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="e1f7e-378">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-378">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-379">Vea la **Configuración básica** del sitio web de IIS y la carpeta de la aplicación física.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-379">Check the IIS website **Basic Settings** and the physical application folder.</span></span> <span data-ttu-id="e1f7e-380">Confirme que la aplicación está en la carpeta en la **ruta de acceso física** del sitio web de IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-380">Confirm that the application is in the folder at the IIS website **Physical path**.</span></span>

### <a name="incorrect-role-module-not-installed-or-incorrect-permissions"></a><span data-ttu-id="e1f7e-381">Rol incorrecto, módulo no instalado o permisos incorrectos</span><span class="sxs-lookup"><span data-stu-id="e1f7e-381">Incorrect role, module not installed, or incorrect permissions</span></span>

* <span data-ttu-id="e1f7e-382">**Explorador:** 500.19 Error interno del servidor - No se puede obtener acceso a la página solicitada porque los datos de configuración relacionados de la página no son válidos.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-382">**Browser:** 500.19 Internal Server Error - The requested page cannot be accessed because the related configuration data for the page is invalid.</span></span>

* <span data-ttu-id="e1f7e-383">**Registro de aplicación:** Sin entrada</span><span class="sxs-lookup"><span data-stu-id="e1f7e-383">**Application Log:** No entry</span></span>

* <span data-ttu-id="e1f7e-384">**Registro del módulo ASP.NET Core:** Archivo de registro no creado</span><span class="sxs-lookup"><span data-stu-id="e1f7e-384">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="e1f7e-385">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-385">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-386">Confirme que ha habilitado el rol correcto.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-386">Confirm that you have enabled the proper role.</span></span> <span data-ttu-id="e1f7e-387">Vea [Configuración de IIS](#iis-configuration).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-387">See [IIS Configuration](#iis-configuration).</span></span>

* <span data-ttu-id="e1f7e-388">Compruebe **Programas &amp; Características** y confirme que el **módulo Microsoft ASP.NET Core** se ha instalado.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-388">Check **Programs &amp; Features** and confirm that the **Microsoft ASP.NET Core Module** has been installed.</span></span> <span data-ttu-id="e1f7e-389">Si el **módulo Microsoft ASP.NET Core** no aparece en la lista de programas instalados, instálelo.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-389">If the **Microsoft ASP.NET Core Module** is not present in the list of installed programs, install the module.</span></span> <span data-ttu-id="e1f7e-390">Vea [Instalación del lote de hospedaje .NET Core Windows Server](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-390">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span>

* <span data-ttu-id="e1f7e-391">Asegúrese de que **Grupo de aplicaciones > Modelo de proceso > Identidad** esté establecido en **ApplicationPoolIdentity** o de que la identidad personalizada tenga los permisos correctos para acceder a la carpeta de implementación de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-391">Make sure that the **Application Pool > Process Model > Identity** is set to **ApplicationPoolIdentity** or your custom identity has the correct permissions to access the application's deployment folder.</span></span>

### <a name="incorrect-processpath-missing-path-variable-hosting-bundle-not-installed-systemiis-not-restarted-vc-redistributable-not-installed-or-dotnetexe-access-violation"></a><span data-ttu-id="e1f7e-392">Elemento processPath incorrecto, variable PATH que falta, lote de hospedaje no instalado, sistema o IIS no reiniciado, VC++ Redistributable no instalado o infracción de acceso de dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="e1f7e-392">Incorrect processPath, missing PATH variable, hosting bundle not installed, system/IIS not restarted, VC++ Redistributable not installed, or dotnet.exe access violation</span></span>

* <span data-ttu-id="e1f7e-393">**Explorador:** Error HTTP 502.5 - Error en el proceso</span><span class="sxs-lookup"><span data-stu-id="e1f7e-393">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="e1f7e-394">**Registro de aplicación:** La aplicación 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' con raíz física 'C:\\{PATH}\' no pudo iniciar el proceso con la línea de comandos '".\my_application.exe" ', ErrorCode = '0x80070002 : 0.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-394">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '".\my_application.exe" ', ErrorCode = '0x80070002 : 0.</span></span>

* <span data-ttu-id="e1f7e-395">**Registro del módulo ASP.NET Core:** Archivo de registro creado pero vacío</span><span class="sxs-lookup"><span data-stu-id="e1f7e-395">**ASP.NET Core Module Log:** Log file created but empty</span></span>

<span data-ttu-id="e1f7e-396">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-396">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-397">Confirme que la aplicación se ejecuta localmente en Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-397">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="e1f7e-398">Un error de proceso puede ser el resultado de un problema en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-398">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="e1f7e-399">Para más información, vea [Sugerencias para la solución de problemas](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-399">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="e1f7e-400">Compruebe el atributo *processPath* del elemento `<aspNetCore>` de *web.config* para confirmar que es *dotnet* para una implementación dependiente del marco de trabajo o *.\my_application.exe* para una implementación independiente.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-400">Check the *processPath* attribute on the `<aspNetCore>` element in *web.config* to confirm that it is *dotnet* for a framework-dependent deployment or *.\my_application.exe* for a self-contained deployment.</span></span>

* <span data-ttu-id="e1f7e-401">En el caso de una implementación dependiente del marco de trabajo, *dotnet.exe* podría no ser accesible a través del valor PATH.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-401">For a framework-dependent deployment, *dotnet.exe* might not be accessible via the PATH settings.</span></span> <span data-ttu-id="e1f7e-402">Confirme que *C:\Archivos de programa\dotnet\* existe en el valor PATH del sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-402">Confirm that *C:\Program Files\dotnet\* exists in the System PATH settings.</span></span>

* <span data-ttu-id="e1f7e-403">En el caso de una implementación dependiente del marco de trabajo, *dotnet.exe* podría no ser accesible para la identidad del usuario de AppPool.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-403">For a framework-dependent deployment, *dotnet.exe* might not be accessible for the user identity of the Application Pool.</span></span> <span data-ttu-id="e1f7e-404">Confirme que la identidad del usuario de AppPool tiene acceso al directorio *C:\Archivos de programa\dotnet*.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-404">Confirm that the AppPool user identity has access to the *C:\Program Files\dotnet* directory.</span></span> <span data-ttu-id="e1f7e-405">Confirme que no haya ninguna regla de denegación configurada para la identidad del usuario de AppPool en los directorios *C:\Archivos de programa\dotnet* y de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-405">Confirm that there are no deny rules configured for the AppPool user identity on the *C:\Program Files\dotnet* and application directories.</span></span>

* <span data-ttu-id="e1f7e-406">Es posible que haya realizado una implementación dependiente del marco de trabajo e instalado .NET Core sin reiniciar IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-406">You may have deployed a framework-dependent deployment and installed .NET Core without restarting IIS.</span></span> <span data-ttu-id="e1f7e-407">Ejecute **net stop was /y** seguido de **net start w3svc** desde un símbolo del sistema para reiniciar el servidor o IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-407">Either restart the server or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="e1f7e-408">Quizás haya realizado una implementación dependiente del marco de trabajo sin instalar el runtime de .NET Core en el sistema host.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-408">You may have deployed a framework-dependent deployment without installing the .NET Core runtime on the hosting system.</span></span> <span data-ttu-id="e1f7e-409">Si está intentando realizar una implementación dependiente del marco de trabajo y no ha instalado el runtime de .NET Core, ejecute el **instalador del lote de hospedaje .NET Core Windows Server** en el sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-409">If you're attempting to deploy a framework-dependent deployment and have not installed the .NET Core runtime, run the **.NET Core Windows Server Hosting bundle installer** on the system.</span></span> <span data-ttu-id="e1f7e-410">Vea [Instalación del lote de hospedaje .NET Core Windows Server](#install-the-net-core-windows-server-hosting-bundle).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-410">See [Install the .NET Core Windows Server Hosting bundle](#install-the-net-core-windows-server-hosting-bundle).</span></span> <span data-ttu-id="e1f7e-411">Si está intentando instalar el runtime de .NET Core en un sistema sin conexión a Internet, obtenga el runtime en [Descargas de .NET](https://www.microsoft.com/net/download/core) y ejecute el instalador del lote de hospedaje para instalar el módulo ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-411">If you are attempting to install the .NET Core runtime on a system without an Internet connection, obtain the runtime from [.NET Downloads](https://www.microsoft.com/net/download/core) and run the hosting bundle installer to install the ASP.NET Core Module.</span></span> <span data-ttu-id="e1f7e-412">Para completar la instalación, reinicie el sistema o IIS mediante la ejecución de **net stop was /y** seguido de **net start w3svc** desde un símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-412">Complete the installation by restarting the system or restarting IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="e1f7e-413">Es posible que haya realizado una implementación dependiente del marco de trabajo e instalado .NET Core sin reiniciar el sistema o IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-413">You may have deployed a framework-dependent deployment and installed .NET Core without restarting the system/IIS.</span></span> <span data-ttu-id="e1f7e-414">Ejecute **net stop was /y** seguido de **net start w3svc** desde un símbolo del sistema para reiniciar el sistema o IIS.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-414">Either restart the system or restart IIS by executing **net stop was /y** followed by **net start w3svc** from a command prompt.</span></span>

* <span data-ttu-id="e1f7e-415">Quizás haya realizado una implementación dependiente del marco de trabajo y *Microsoft Visual C++ 2015 Redistributable (x64)* no esté instalado en el sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-415">You may have deployed a framework-dependent deployment and the *Microsoft Visual C++ 2015 Redistributable (x64)* is not installed on the system.</span></span> <span data-ttu-id="e1f7e-416">Puede obtener un instalador en el [Centro de descarga de Microsoft](https://www.microsoft.com/download/details.aspx?id=53840).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-416">You may obtain an installer from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=53840).</span></span>

### <a name="incorrect-arguments-of-aspnetcore-element"></a><span data-ttu-id="e1f7e-417">Argumentos incorrectos del elemento \<aspNetCore\></span><span class="sxs-lookup"><span data-stu-id="e1f7e-417">Incorrect arguments of \<aspNetCore\> element</span></span>

* <span data-ttu-id="e1f7e-418">**Explorador:** Error HTTP 502.5 - Error en el proceso</span><span class="sxs-lookup"><span data-stu-id="e1f7e-418">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="e1f7e-419">**Registro de aplicación:** La aplicación 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' con raíz física 'C:\\{PATH}\' no pudo iniciar el proceso con la línea de comandos '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-419">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span></span>

* <span data-ttu-id="e1f7e-420">**Registro del módulo ASP.NET Core:** La aplicación que se va a ejecutar no existe: 'PATH\my_application.dll'</span><span class="sxs-lookup"><span data-stu-id="e1f7e-420">**ASP.NET Core Module Log:** The application to execute does not exist: 'PATH\my_application.dll'</span></span>

<span data-ttu-id="e1f7e-421">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-421">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-422">Confirme que la aplicación se ejecuta localmente en Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-422">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="e1f7e-423">Un error de proceso puede ser el resultado de un problema en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-423">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="e1f7e-424">Para más información, vea [Sugerencias para la solución de problemas](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-424">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="e1f7e-425">Examine el atributo *arguments* del elemento `<aspNetCore>` de *web.config* para confirmar que es (a) *.\my_applciation.dll* para una implementación dependiente del marco de trabajo; o (b) no está presente, es una cadena vacía (*arguments=""*) o una lista de argumentos de la aplicación (*arguments="arg1, arg2, ..."*) para una implementación independiente.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-425">Examine the *arguments* attribute on the `<aspNetCore>` element in *web.config* to confirm that it is either (a) *.\my_applciation.dll* for a framework-dependent deployment; or (b) not present, an empty string (*arguments=""*), or a list of your application's arguments (*arguments="arg1, arg2, ..."*) for a self-contained deployment.</span></span>

### <a name="missing-net-framework-version"></a><span data-ttu-id="e1f7e-426">Falta la versión de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="e1f7e-426">Missing .NET Framework version</span></span>

* <span data-ttu-id="e1f7e-427">**Explorador:** 502.3 Puerta de enlace incorrecta - Error de conexión al intentar enrutar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-427">**Browser:** 502.3 Bad Gateway - There was a connection error while trying to route the request.</span></span>

* <span data-ttu-id="e1f7e-428">**Registro de aplicación:** ErrorCode = La aplicación 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' con raíz física 'C:\\{PATH}\' no pudo iniciar el proceso con la línea de comandos '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-428">**Application Log:** ErrorCode = Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' failed to start process with commandline '"dotnet" .\my_application.dll', ErrorCode = '0x80004005 : 80008081.</span></span>

* <span data-ttu-id="e1f7e-429">**Registro del módulo ASP.NET Core:** Excepción de falta de método, archivo o ensamblado.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-429">**ASP.NET Core Module Log:** Missing method, file, or assembly exception.</span></span> <span data-ttu-id="e1f7e-430">El método, el archivo o el ensamblado especificado en la excepción es un método, archivo o ensamblado de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-430">The method, file, or assembly specified in the exception is a .NET Framework method, file, or assembly.</span></span>

<span data-ttu-id="e1f7e-431">Solución del problema:</span><span class="sxs-lookup"><span data-stu-id="e1f7e-431">Troubleshooting:</span></span>

* <span data-ttu-id="e1f7e-432">Instale la versión de .NET Framework que falta en el sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-432">Install the .NET Framework version missing from the system.</span></span>

* <span data-ttu-id="e1f7e-433">En el caso de una implementación dependiente del marco de trabajo, confirme que tiene instalado el runtime correcto en el sistema.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-433">For a framework-dependent deployment, confirm that you have the correct runtime installed on the system.</span></span> <span data-ttu-id="e1f7e-434">Por ejemplo, si actualiza un proyecto de 1.0 a 1.1, implementa en el sistema host y recibe esta excepción, asegúrese de instalar la versión 1.1 del marco de trabajo en el sistema host.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-434">For example if you upgrade a project from 1.0 to 1.1, deploy to the hosting system, and receive this exception, ensure you install the 1.1 framework on the hosting system.</span></span>

### <a name="stopped-application-pool"></a><span data-ttu-id="e1f7e-435">Grupo de aplicaciones detenido</span><span class="sxs-lookup"><span data-stu-id="e1f7e-435">Stopped Application Pool</span></span>

* <span data-ttu-id="e1f7e-436">**Explorador:** 503 Servicio no disponible</span><span class="sxs-lookup"><span data-stu-id="e1f7e-436">**Browser:** 503 Service Unavailable</span></span>

* <span data-ttu-id="e1f7e-437">**Registro de aplicación:** Sin entrada</span><span class="sxs-lookup"><span data-stu-id="e1f7e-437">**Application Log:** No entry</span></span>

* <span data-ttu-id="e1f7e-438">**Registro del módulo ASP.NET Core:** Archivo de registro no creado</span><span class="sxs-lookup"><span data-stu-id="e1f7e-438">**ASP.NET Core Module Log:** Log file not created</span></span>

<span data-ttu-id="e1f7e-439">Solución de problemas</span><span class="sxs-lookup"><span data-stu-id="e1f7e-439">Troubleshooting</span></span>

* <span data-ttu-id="e1f7e-440">Confirme que el grupo de aplicaciones no está en estado *Detenido*.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-440">Confirm that the Application Pool is not in the *Stopped* state.</span></span>

### <a name="iis-integration-middleware-not-implemented"></a><span data-ttu-id="e1f7e-441">Middleware de IIS Integration no implementado</span><span class="sxs-lookup"><span data-stu-id="e1f7e-441">IIS Integration middleware not implemented</span></span>

* <span data-ttu-id="e1f7e-442">**Explorador:** Error HTTP 502.5 - Error en el proceso</span><span class="sxs-lookup"><span data-stu-id="e1f7e-442">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="e1f7e-443">**Registro de aplicación:** La aplicación 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' con raíz física 'C:\\{PATH}\' ha creado el proceso con la línea de comandos '"C:\\{PATH}\my_application.{exe|dll}" ', pero se ha bloqueado, no ha respondido o no ha escuchado en el puerto especificado '{PUERTO}', ErrorCode = '0x800705b4'</span><span class="sxs-lookup"><span data-stu-id="e1f7e-443">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' created process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ' but either crashed or did not reponse or did not listen on the given port '{PORT}', ErrorCode = '0x800705b4'</span></span>

* <span data-ttu-id="e1f7e-444">**Registro del módulo ASP.NET Core:** Archivo de registro creado que muestra un funcionamiento normal.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-444">**ASP.NET Core Module Log:** Log file created and shows normal operation.</span></span>

<span data-ttu-id="e1f7e-445">Solución de problemas</span><span class="sxs-lookup"><span data-stu-id="e1f7e-445">Troubleshooting</span></span>

* <span data-ttu-id="e1f7e-446">Confirme que la aplicación se ejecuta localmente en Kestrel.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-446">Confirm that the application runs locally on Kestrel.</span></span> <span data-ttu-id="e1f7e-447">Un error de proceso puede ser el resultado de un problema en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-447">A process failure might be the result of a problem within the application.</span></span> <span data-ttu-id="e1f7e-448">Para más información, vea [Sugerencias para la solución de problemas](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-448">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

* <span data-ttu-id="e1f7e-449">Confirme que ha hecho referencia correctamente al middleware de IIS Integration mediante una llamada al método *.UseIISIntegration()* en el elemento *WebHostBuilder()* de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-449">Confirm that you have correctly referenced the IIS Integration middleware by calling the *.UseIISIntegration()* method on the application's *WebHostBuilder()*.</span></span>

### <a name="sub-application-includes-a-handlers-section"></a><span data-ttu-id="e1f7e-450">La aplicación secundaria incluye una sección de \<controladores\></span><span class="sxs-lookup"><span data-stu-id="e1f7e-450">Sub-application includes a \<handlers\> section</span></span>

* <span data-ttu-id="e1f7e-451">**Explorador:** Error HTTP 500.19 - Error interno del servidor</span><span class="sxs-lookup"><span data-stu-id="e1f7e-451">**Browser:** HTTP Error 500.19 - Internal Server Error</span></span>

* <span data-ttu-id="e1f7e-452">**Registro de aplicación:** Sin entrada</span><span class="sxs-lookup"><span data-stu-id="e1f7e-452">**Application Log:** No entry</span></span>

* <span data-ttu-id="e1f7e-453">**Registro del módulo ASP.NET Core:** Archivo de registro creado que muestra un funcionamiento normal de la aplicación raíz.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-453">**ASP.NET Core Module Log:** Log file created and shows normal operation for the root application.</span></span> <span data-ttu-id="e1f7e-454">Archivo de registro no creado para la aplicación secundaria.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-454">Log file not created for the sub-application.</span></span>

<span data-ttu-id="e1f7e-455">Solución de problemas</span><span class="sxs-lookup"><span data-stu-id="e1f7e-455">Troubleshooting</span></span>

* <span data-ttu-id="e1f7e-456">Confirme que el archivo *web.config* de la aplicación secundaria no incluye una sección `<handlers>`.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-456">Confirm that the sub-application's *web.config* file doesn't include a `<handlers>` section.</span></span>

### <a name="application-configuration-general-issue"></a><span data-ttu-id="e1f7e-457">Problema general de configuración de aplicación</span><span class="sxs-lookup"><span data-stu-id="e1f7e-457">Application configuration general issue</span></span>

* <span data-ttu-id="e1f7e-458">**Explorador:** Error HTTP 502.5 - Error en el proceso</span><span class="sxs-lookup"><span data-stu-id="e1f7e-458">**Browser:** HTTP Error 502.5 - Process Failure</span></span>

* <span data-ttu-id="e1f7e-459">**Registro de aplicación:** La aplicación 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' con raíz física 'C:\\{PATH}\' ha creado el proceso con la línea de comandos '"C:\\{PATH}\my_application.{exe|dll}" ', pero se ha bloqueado, no ha respondido o no ha escuchado en el puerto especificado '{PUERTO}', ErrorCode = '0x800705b4'</span><span class="sxs-lookup"><span data-stu-id="e1f7e-459">**Application Log:** Application 'MACHINE/WEBROOT/APPHOST/MY_APPLICATION' with physical root 'C:\\{PATH}\' created process with commandline '"C:\\{PATH}\my_application.{exe|dll}" ' but either crashed or did not reponse or did not listen on the given port '{PORT}', ErrorCode = '0x800705b4'</span></span>

* <span data-ttu-id="e1f7e-460">**Registro del módulo ASP.NET Core:** Archivo de registro creado pero vacío</span><span class="sxs-lookup"><span data-stu-id="e1f7e-460">**ASP.NET Core Module Log:** Log file created but empty</span></span>

<span data-ttu-id="e1f7e-461">Solución de problemas</span><span class="sxs-lookup"><span data-stu-id="e1f7e-461">Troubleshooting</span></span>

* <span data-ttu-id="e1f7e-462">Esta excepción general indica que el proceso no se ha iniciado, probablemente debido a un problema de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-462">This general exception indicates that the process failed to start, most likely due to an application configuration issue.</span></span> <span data-ttu-id="e1f7e-463">Vea [Estructura de directorios](xref:hosting/directory-structure) para confirmar que los archivos y las carpetas implementados de la aplicación son adecuados y que los archivos de configuración de la aplicación están presentes y contienen la configuración correcta para la aplicación y el entorno.</span><span class="sxs-lookup"><span data-stu-id="e1f7e-463">Referring to [Directory Structure](xref:hosting/directory-structure), confirm that your application's deployed files and folders are appropriate and that your application's configuration files are present and contain the correct settings for your app and environment.</span></span> <span data-ttu-id="e1f7e-464">Para más información, vea [Sugerencias para la solución de problemas](#troubleshooting-tips).</span><span class="sxs-lookup"><span data-stu-id="e1f7e-464">For more information, see [Troubleshooting tips](#troubleshooting-tips).</span></span>

## <a name="resources"></a><span data-ttu-id="e1f7e-465">Recursos</span><span class="sxs-lookup"><span data-stu-id="e1f7e-465">Resources</span></span>

* [<span data-ttu-id="e1f7e-466">Introducción al módulo ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="e1f7e-466">Introduction to ASP.NET Core Module</span></span>](xref:fundamentals/servers/aspnet-core-module)

* [<span data-ttu-id="e1f7e-467">Referencia de configuración del módulo ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="e1f7e-467">ASP.NET Core Module configuration reference</span></span>](xref:hosting/aspnet-core-module)

* [<span data-ttu-id="e1f7e-468">Uso de módulos de IIS con ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="e1f7e-468">Using IIS Modules with ASP.NET Core</span></span>](xref:hosting/iis-modules)

* [<span data-ttu-id="e1f7e-469">Introducción a ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="e1f7e-469">Introduction to ASP.NET Core</span></span>](../index.md)

* [<span data-ttu-id="e1f7e-470">Sitio oficial de Microsoft IIS</span><span class="sxs-lookup"><span data-stu-id="e1f7e-470">The Official Microsoft IIS Site</span></span>](https://www.iis.net/)

* [<span data-ttu-id="e1f7e-471">Biblioteca de TechNet de Microsoft: Windows Server</span><span class="sxs-lookup"><span data-stu-id="e1f7e-471">Microsoft TechNet Library: Windows Server</span></span>](https://docs.microsoft.com/windows-server/windows-server-versions)
